var dropchop=function(e){return e=e||{},e.version="0.1.1",e.init=function(t){t||e.util.error("No options provided in dropchop.init()"),e.options=t,$(t.id).length||e.util.error("Element with options.id does not exist."),e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.menus.geo.init(),e.menus.left.init(),e.menus.layerContextMenu.init(),e.form.init(),e.shortcuts.init(),location.search.length&&e.util.executeUrlParams()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},radio:function(e){var t=$("<div>").attr("class","radioGroup"),a=e.name.replace(/\s/g,"");return $(e.options).each(function(r){var o=e.options[r],n=o.replace(/\s/g,""),i=$("<label>").addClass("sub-label").attr("for",n),s=$("<input>").attr("type","radio").attr("id",n).attr("name",a).addClass("radio").val(o);o===e["default"]&&s.prop("defaultChecked",!0),i.append(o),i.appendTo(t),s.appendTo(t)}),t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),s=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),l=$('<button title="More Options">').addClass("layer-action layer-dropdown").html('<i class="fa fa-ellipsis-h"></i>');s.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;if(!i)return;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),s=i.parent().attr("data-stamp");t===r&&(a=e),t===s&&(o=e)}),a>o?$(".layer-element").each(function(t){t>=o&&a>=t&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){o>t&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey||t.ctrlKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),n.on("contextmenu",function(t){e.menus.layerContextMenu.createLayerContextMenu(this,t.offsetX,t.pageY),t.preventDefault()}),l.on("click",function(t){return e.menus.layerContextMenu.createLayerContextMenu($(this).siblings(".layer-name"),t.pageX-40,t.pageY),t.preventDefault(),!1}),n.on("dblclick",function(t){e.ops.file.extent.execute()}),o.append(n),o.append(s),o.append(i),o.append(l),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show(),$(e).trigger("layerlist:added",n)},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.selectAll=function(){$(".layer-element").each(function(t){e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})},e.layerlist.checkAll=function(t){for(var r in e.layers.list){var o=e.layers.list[r];(!t||dropchop.selection.isSelected(o))&&a(e.layers.list[r].stamp,!0)}},e.layerlist.uncheckAll=function(t){for(var r in e.layers.list){var o=e.layers.list[r];(!t||dropchop.selection.isSelected(o))&&a(o.stamp,!1)}},e.layerlist.toggleAll=function(t){$(this).find("input").prop("checked")?e.layerlist.uncheckAll():e.layerlist.checkAll()},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r,o,n){"Topology"===r.type&&(r=topojson.client.feature(r,r.objects[Object.keys(r.objects)[0]]));var i=e.layers.makeLayer(a,r);e.layers.list[i.stamp]=i,o&&n&&(e.layers.list[i.stamp].ltype=o,e.layers.list[i.stamp].url=n),e.notify("success","<strong>"+i.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[i]),o&&n&&e.util.updateSearch()},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer),$(e.map.m).on("locationfound",function(t){var a=t.originalEvent;e.map.m.fitBounds(a.bounds);var r={type:"Feature",geometry:{type:"Point",coordinates:[a.latlng.lng,a.latlng.lat]},properties:{title:"There You Are","marker-color":"#207178","marker-symbol":"heart"}};$(e).trigger("file:added",["your location",r])}),$(e.map.m).on("locationerror",function(){e.notify("error","There was a problem finding your location.",3e3)})}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(){var e=$(".operation-geo").sort(function(e,t){return $(t).data("operation")<$(e).data("operation")?1:-1});e.filter(function(e,t){return $(t).prop("disabled")?void 0:t}).appendTo(".operations-geo"),e.filter(function(e,t){return $(t).prop("disabled")?t:void 0}).appendTo(".operations-geo"),$(".operations-geo").scrollTop(0)}return e=e||{},e.menus=e.menus||{},e.menus.geo=e.menus.geo||{},e.menus.geo.init=function(){var a=$("<div>").addClass("operations-geo");e.$elem.append(a),$(e).on("layer:selected",e.menus.geo.geoCheck),$(e).on("layer:unselected",e.menus.geo.geoCheck),$(e).on("operation:geo",e.menus.geo.geoExecute);for(var r in e.ops.geo){var o=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+r+"</h4><p>"+e.ops.geo[r].description+"</p>").prop("disabled",!0).attr("data-operation",r);o.on("click",t),a.append(o)}},e.menus.geo.geoExecute=function(t,a,r){var o=e.menus.geo.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.menus.geo.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){-1===$.inArray("switch-"+e.selection.list[t].stamp,a)?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.menus.geo.geoCheck=function(t,r){function o(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function n(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var i in e.ops.geo){var s=e.ops.geo[i];if(e.selection.list.length>s.maxFeatures||e.selection.list.length<s.minFeatures)o(i);else for(var l=0;l<e.selection.list.length;l++){var c=e.selection.list[l];$.inArray(c.type,s.requirements.types)>-1||s.requirements.generalFeature===!0?n(i):o(i)}}a()},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.menus=e.menus||{},e.menus.layerContextMenu=e.menus.layerContextMenu||{},e.menus.layerContextMenu.init=function(){$("html").bind("click",function(t){e.menus.layerContextMenu.removeLayerContextMenus()})},e.menus.layerContextMenu.createLayerContextMenu=function(a,r,o){function n(){var e=10,t=$(window).height(),a=l.height();if(t>o+a)return{top:o,left:r};var n=o+a-t;return{top:o-n-e,left:r}}a instanceof jQuery||(a=$(a)),e.menus.layerContextMenu.removeLayerContextMenus();var i=a.parent(),s=e.layers.list[i.attr("data-stamp")];dropchop.selection.isSelected(s)||a.trigger("click");var l=$("<div>").addClass("context-menu"),c=$("<ul>");l.append(c);var p={title1:"Layer",rename:e.ops.file.rename,duplicate:e.ops.file.duplicate,remove:e.ops.file.remove,title2:"Geo",extent:e.ops.file.extent,expand:e.ops.file.expand,combine:e.ops.file.combine};for(var u in p){var d=p[u];if("string"==typeof d||d instanceof String)c.append($('<li class="title"><h4>'+d+"</h4></li>"));else{var f=$("<li>").addClass("menu-action").html('<div class="icon">'+d.icon+'</div><div class="description">'+d.description+"</div>").attr("data-operation",u).attr("data-tooltip",d.description);(d.minFeatures>dropchop.selection.list.length||d.maxFeatures<dropchop.selection.list.length)&&f.addClass("operation-inactive"),f.on("click",t),c.append(f)}}l.addClass("hidden"),i.parent().append(l);var m=n();l.css(m),l.removeClass("hidden")},e.menus.layerContextMenu.removeLayerContextMenus=function(){$(".context-menu").remove()},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.menus=e.menus||{},e.menus.left=e.menus.left||{},e.menus.left.init=function(){function a(a){var r=$("<button>").addClass("menu-action").html(e.ops.file[a].icon||"!").attr("data-operation",a).attr("data-tooltip",e.ops.file[a].description);return"info"===e.ops.file[a].type&&r.addClass("dropchop-info"),r.on("click",t),r}$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:load-arcgis",e.ops.file["load-arcgis"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback),e.menus.left.setup=[{name:"import",icon:'<i class="fa fa-plus"></i>',actions:["upload","load-url","load-gist","load-overpass","load-arcgis","location"]},{name:"Save",icon:'<i class="fa fa-floppy-o"></i>',actions:["save-geojson","save-topojson","save-shapefile"]},"info"];for(var r=$("<div>").addClass("dropchop-menu-left"),o=e.menus.left.setup,n=0;n<o.length;n++){var i=o[n];if("object"!=typeof o[n])if("break"===e.ops.file[i].type){var s=$("<div>").addClass("menu-action-break");r.append(s)}else r.append(a(i));else{var l=$("<div>").addClass("menu-action menu-collapse").html(o[n].icon);"import"===o[n].name&&l.addClass("menu-import");for(var c=$("<div>").addClass("menu-collapse-inner"),p=0;p<o[n].actions.length;p++){var u=o[n].actions[p];c.append(a(u))}l.append(c),r.append(l)}}e.$elem.append(r)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);if("close"===r){var n=$("<button>").addClass("notification-close").prop("type","button").html('<i class="fa fa-times"></i>');n.on("click",function(e){$(this).parent().remove()}),$(o).append(n),$(e.$elem).append(o)}else $(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r,"url",t.responseURL])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content),"gist",t.responseURL.split("/")[t.responseURL.split("/").length-1]])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-arcgis":{description:"Query an ArcGIS Server Feature Service",icon:'<i class="fa fa-globe"></i>',_temp:{layerName:"arcjson"},parameters:[{name:"feature service",description:"Enter URL to ArcGIS Feature Service (ex. http://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/0)",type:"text","default":"http://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/0"},{name:"where",description:"A where clause for the query filter. Any legal SQL where clause operating on the fields in the layer is allowed.",type:"text","default":"1=1"},{name:"request type",description:"select JSONP if you receive cross-origin resource sharing errors",type:"radio","default":"CORS",options:["CORS","JSONP"]},{name:"limit to map",description:"only load features within current map view",type:"checkbox"}],execute:function(){$(e).trigger("form:file",["load-arcgis"])},checkJsonp:function(e){return"JSONP"===e[2]?!1:!0},get:function(t,a,r){e.ops.file["load-arcgis"]._temp.layerName=r[0];var o="-180,-90,180,90";r[3]&&(o=e.util.getEsriBBox());var n=r[0]+"/query/",i={f:"json",inSR:4326,outSR:4326,geometry:o,where:r[1],outfields:"*"},s=e.ops.file["load-arcgis"].checkJsonp(r);e.util.get(n,i,s).done(function(t){e.ops.file["load-arcgis"].callback(t)}).fail(function(t,a,r){dropchop.util.loader(!1),e.notify("Error",a,r)})},callback:function(t){dropchop.util.loader(!1);var a=e.util.esri2geo(t);t.features.length<1?e.notify("info","No features found in your query."):($(e).trigger("file:added",[e.ops.file["load-arcgis"]._temp.layerName,a]),e.notify("success","Found <strong>"+t.features.length+" features</strong> from the ArcGIS Service"))}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Enter a search query in the overpass-turbo wizard syntax. Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_turbo/Wizard" target="_blank">the supported features</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox(),n=overpassWizard(r[0]);return n===!1?e.notify("error","Can't create overpass query for this search input."):void overpassWizardExpand(n,o,function(t,a){return t?e.notify("error","Error while expanding overpass query: "+t):void e.util.xhr("http://overpass-api.de/api/interpreter?data="+encodeURIComponent(a),e.ops.file["load-overpass"].callback)})},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r,{flatProperties:!0});r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},location:{description:"Add your location as a layer",icon:'<i class="fa fa-crosshairs"></i>',execute:function(){navigator.geolocation?e.map.m.locate():e.notify("error","Geolocation is not available on this browser.",4e3)}},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-topojson":{minFeatures:1,description:"Save as TopoJSON",icon:'<i class="fa fa-object-ungroup"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(topojson.topology({collection:e.selection.list[t].raw},{"property-transform":function(e){return e.properties}})),r="dropchop_"+e.selection.list[t].name+".topojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},duplicate:{minFeatures:1,description:"Duplicate selected layers",icon:'<i class="fa fa-files-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:duplicate",[this.stamp])}),e.selection.clear()}},rename:{minFeatures:1,maxFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear(),e.util.updateSearch()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",
parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e.selection.isSelected=function(e){return Boolean(dropchop.selection.list.indexOf(e)+1)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.shortcuts={},e.shortcuts.list=[],e.shortcuts.init=function(){Mousetrap.bind(["command+a","ctrl+a"],function(t){return e.layerlist.selectAll(),!1}),Mousetrap.bind(["command+backspace","ctrl+backspace"],function(t){return e.layerlist.clearSelection(),!1}),Mousetrap.bind(["ctrl+shift+k"],function(t){return e.ops.file.remove.execute(),!1}),Mousetrap.bind(["command+plus","ctrl+plus","command+=","ctrl+="],function(e){return dropchop.layerlist.checkAll(!0),!1}),Mousetrap.bind(["command+-","ctrl+-"],function(t){return e.layerlist.uncheckAll(!0),!1})},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.get=function(t,a,r){var o={data:a,dataType:"json"};e.util.corsSupport&&r!==!1||(console.log("No CORS support, using JSONP"),o.dataType="jsonp"),dropchop.util.loader(!0);var n=$.ajax(t,o);return n},e.util.readFile=function(t){var a=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(a.readAsArrayBuffer(t),e.util.loader(!0),a.onloadend=function(t){shp(a.result)["catch"](function(e){console.log("Problematic projection - ",e)}).then(function(t){return e.util.loader(!1),t?void $(e).trigger("file:added",[t.fileName,t]):e.notify("error","Invalid projection or shapefile.",2500)})}):(a.readAsText(t,"UTF-8"),a.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(a.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1).split(/(&?gist=|&?url=)/g).filter(function(e){return e.length>0}),t={};return e.forEach(function(a,r){if(0===r||r%2===0){var o=a.replace(/&|=/g,"");t[o]||(t[o]=[]),t[o].push(decodeURIComponent(e[r+1]))}}),t},e.util.updateSearch=function(){var t=[];Object.keys(e.layers.list).forEach(function(a){e.layers.list[a].ltype&&e.layers.list[a].url&&t.indexOf(e.layers.list[a].ltype+"="+e.layers.list[a].url)<0&&t.push(e.layers.list[a].ltype+"="+e.layers.list[a].url)});var a=t.length?"?"+t.join("&"):"/";a!==window.location.search&&window.history.pushState(null,null,a)},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.getEsriBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lng+","+a.lat+","+r.lng+","+r.lat},e.util.uncollect=function(e){return e.features[0]},e.util.esri2geo=function(e){return toGeoJSON(e)},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var s;try{s=turf[a].apply(null,o),s.properties=t.features[i].properties||{}}catch(l){e.notify("error",l)}n.features.push(s)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.corsSupport=function(){return"XMLHttprequest"in window&&"withCredentials"in new window.XMLHttpRequest},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibWVudXMuZ2VvLmRyb3BjaG9wLmpzIiwibWVudXMubGF5ZXItY29udGV4dC1tZW51LmRyb3BjaG9wLmpzIiwibWVudXMubGVmdC5kcm9wY2hvcC5qcyIsIm5vdGlmeS5kcm9wY2hvcC5qcyIsIm9wcy5maWxlLmRyb3BjaG9wLmpzIiwib3BzLmdlby5kcm9wY2hvcC5qcyIsInNlbGVjdGlvbi5kcm9wY2hvcC5qcyIsInNob3J0Y3V0cy5kcm9wY2hvcC5qcyIsInV0aWwuZHJvcGNob3AuanMiXSwibmFtZXMiOlsiZHJvcGNob3AiLCJkYyIsInZlcnNpb24iLCJpbml0Iiwib3B0cyIsInV0aWwiLCJlcnJvciIsIm9wdGlvbnMiLCIkIiwiaWQiLCJsZW5ndGgiLCIkZWxlbSIsImxheWVycyIsInByZXBhcmUiLCJtYXAiLCJzZWxlY3Rpb24iLCJsYXllcmxpc3QiLCJkcm9wem9uZSIsIm1lbnVzIiwiZ2VvIiwibGVmdCIsImxheWVyQ29udGV4dE1lbnUiLCJmb3JtIiwic2hvcnRjdXRzIiwibG9jYXRpb24iLCJzZWFyY2giLCJleGVjdXRlVXJsUGFyYW1zIiwiYm9vbSIsImNvbnNvbGUiLCJsb2ciLCJfZXZlbnRzIiwiJGNvbnRhaW5lciIsIm9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRoaXMiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZmlsZXMiLCJvcmlnaW5hbEV2ZW50IiwiZGF0YVRyYW5zZmVyIiwiZWFjaCIsImkiLCJyZWFkRmlsZSIsImZpbGUiLCJvcGVyYXRpb24iLCJjcmVhdGUiLCJvcHMiLCJuYW1lIiwiaW5mbyIsInRyaWdnZXIiLCJyZW1vdmUiLCIkaHRtbCIsImF0dHIiLCJ0ZXh0IiwiYXBwZW5kVG8iLCJkZXNjcmlwdGlvbiIsInBhcmFtZXRlcnMiLCJwIiwiY3JlYXRlUGFyYW0iLCIkc3VibWl0IiwiJGNhbmNlbCIsImRhdGEiLCJzZXJpYWxpemVBcnJheSIsInB1c2giLCJ2YWx1ZSIsImFwcGVuZCIsInBhcmFtIiwiJGlucHV0IiwiJGxhYmVsIiwiJGZpZWxkIiwiaW5wdXRzIiwidHlwZSIsImh0bWwiLCJudW1iZXIiLCIkaSIsInNlbGVjdCIsIiRvcHQiLCJjaGVja2JveCIsInJhZGlvIiwiZ3JvdXBOYW1lIiwicmVwbGFjZSIsIm9wdCIsIm9wdElkIiwiJGxibCIsInZhbCIsInByb3AiLCJzd2l0Y2giLCJsaXN0Iiwic3RhbXAiLCJyZWN1cnNpdmUiLCIkbGJsMSIsIiRvcHQxIiwiJGxibDIiLCIkb3B0MiIsImxheWVyVHlwZUljb24iLCJpY29uIiwiZWxlbVRvZ2dsZSIsImJvb2wiLCJmaW5kIiwiZWxlbXMiLCJ0YXJnZXQiLCJoYXNDbGFzcyIsImNsZWFyIiwibGlIZWxwZXIiLCJ0b2dnbGVMYXllcnMiLCJ0b2dnbGVBbGwiLCJhZGRMYXllckxpc3RJdGVtIiwicmVtb3ZlTGF5ZXJMaXN0SXRlbSIsInJlbmFtZSIsIm5ld05hbWUiLCJsYXllciIsImxheWVybGlzdEl0ZW0iLCJsYXllckRpdiIsImRlbGF5IiwicXVldWUiLCJuZXh0IiwibGF5ZXJUeXBlIiwiY2hlY2tlZCIsImRyb3Bkb3duIiwic2hpZnRLZXkiLCJ0b0NvdW50IiwiZnJvbUNvdW50IiwidG8iLCJmcm9tIiwiX2xhc3RTZWxlY3RlZCIsImUiLCJjaGVjayIsInRvU3RhbXAiLCJwYXJlbnQiLCJmcm9tU3RhbXAiLCJsIiwic2VsZWN0TGF5ZXIiLCJtZXRhS2V5IiwiY3RybEtleSIsInNlbGVjdFRvZ2dsZSIsImNsZWFyU2VsZWN0aW9uIiwiY3JlYXRlTGF5ZXJDb250ZXh0TWVudSIsIm9mZnNldFgiLCJwYWdlWSIsInNpYmxpbmdzIiwicGFnZVgiLCJleHRlbnQiLCJleGVjdXRlIiwiaGlkZSIsInNob3ciLCIkaXRlbSIsImx5ciIsInNlbGVjdEFsbCIsImNoZWNrQWxsIiwibXVzdEJlU2VsZWN0ZWQiLCJpc1NlbGVjdGVkIiwidW5jaGVja0FsbCIsImZhZGVPdXQiLCJnZXRUeXBlIiwiZ2oiLCJnZW9tZXRyeSIsImFkZCIsImR1cGxpY2F0ZSIsImJsb2IiLCJsdHlwZSIsInVybCIsInRvcG9qc29uIiwiY2xpZW50IiwiZmVhdHVyZSIsIm9iamVjdHMiLCJPYmplY3QiLCJrZXlzIiwibWFrZUxheWVyIiwibm90aWZ5IiwidXBkYXRlU2VhcmNoIiwiZXJyIiwicmF3IiwianNvbiIsImdlb2pzb24iLCJmbCIsIkwiLCJtYXBib3giLCJmZWF0dXJlTGF5ZXIiLCJyZW1vdmVGaWxlRXh0ZW5zaW9uIiwiZmVhdHVyZWxheWVyIiwiZGF0ZUFkZGVkIiwiRGF0ZSIsIl9tYWtlTWFwIiwidG9rZW4iLCJhY2Nlc3NUb2tlbiIsIm0iLCJ6b29tQ29udHJvbCIsIndvcmxkQ29weUp1bXAiLCJzZXRWaWV3IiwiY29udHJvbCIsInpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiZ2VvY29kZXJDb250cm9sIiwiYmFzZUxheWVycyIsIk1hcGJveCBTdHJlZXRzIiwidGlsZUxheWVyIiwiTWFwYm94IE91dGRvb3JzIiwiTWFwYm94IExpZ2h0IiwiTWFwYm94IERhcmsiLCJNYXBib3ggU2F0ZWxsaXRlIiwiY29sbGFwc2VkIiwibGF5ZXJncm91cCIsImFkZExheWVyIiwiaGlkZUxheWVyIiwic2hvd0xheWVyIiwiZml0Qm91bmRzIiwiYm91bmRzIiwiY29vcmRpbmF0ZXMiLCJsYXRsbmciLCJsbmciLCJsYXQiLCJwcm9wZXJ0aWVzIiwidGl0bGUiLCJtYXJrZXItY29sb3IiLCJtYXJrZXItc3ltYm9sIiwicmVtb3ZlTGF5ZXIiLCJjb3VudCIsImVhY2hMYXllciIsImNvbnRlbnQiLCJiaW5kUG9wdXAiLCJwb3B1cCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiYXV0b1BhblBhZGRpbmciLCJjbGFzc05hbWUiLCJzZXRDb250ZW50IiwiX2hhbmRsZUJ0bkNsaWNrIiwiX3NvcnRHZW8iLCJhbHBoYSIsInNvcnQiLCJhIiwiYiIsImZpbHRlciIsImQiLCJzY3JvbGxUb3AiLCJnZW9Db250YWluZXIiLCJnZW9DaGVjayIsImdlb0V4ZWN1dGUiLCJnZW9PcCIsImdlb0J0biIsInByZXAiLCJwcmVwYXJlVHVyZlBhcmFtcyIsInJlc3VsdCIsInBhcmFtcyIsImdlb21zIiwibmFtZUFycmF5IiwiaW5BcnJheSIsInVuc2hpZnQiLCJtZXJnZSIsImNvbmNhdCIsInR1cm5JdE9mZiIsIm9wIiwiYnRuIiwidHVybkl0T24iLCJvIiwibWF4RmVhdHVyZXMiLCJtaW5GZWF0dXJlcyIsIngiLCJzZWwiLCJyZXF1aXJlbWVudHMiLCJ0eXBlcyIsImdlbmVyYWxGZWF0dXJlIiwiYmluZCIsInJlbW92ZUxheWVyQ29udGV4dE1lbnVzIiwiJGxheWVyTmFtZURpdiIsInhQb3MiLCJ5UG9zIiwiX2NhbGN1bGF0ZU1lbnVMb2NhdGlvbiIsImJ1ZmZlciIsIndpbmRvd0hlaWdodCIsIndpbmRvdyIsImhlaWdodCIsIm1lbnVIZWlnaHQiLCJtZW51IiwidG9wIiwiZGlmZmVyZW5jZSIsImpRdWVyeSIsImx5ckRhdGEiLCJtZW51TGlzdCIsIm1lbnVJdGVtcyIsInRpdGxlMSIsInRpdGxlMiIsImV4cGFuZCIsImNvbWJpbmUiLCJtZW51SXRlbSIsIml0ZW0iLCJTdHJpbmciLCJmaWxlQnRuIiwiY3NzIiwiYnVpbGRNZW51QnV0dG9uIiwiYWN0aW9uIiwiYnV0dG9uIiwiZ2V0IiwiY2FsbGJhY2siLCJzZXR1cCIsImFjdGlvbnMiLCJsZWZ0TWVudSIsIiRicmVha1NwYWNlIiwiY29sbGFwc2VCdG4iLCJjb2xsYXBzZUlubmVyIiwiYWN0biIsInRpbWUiLCJub3RlIiwiJGNsb3NlIiwic2V0VGltZW91dCIsInVwbG9hZCIsIiRibGluZElucHV0IiwiY2xpY2siLCJsb2FkLXVybCIsImRlZmF1bHQiLCJ4aHIiLCJ4aHJFdmVudCIsImxvYWRlciIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlVVJMIiwic3Vic3RyaW5nIiwibGFzdEluZGV4T2YiLCJsb2FkLWdpc3QiLCJnaXN0Iiwic3BsaXQiLCJmIiwiZmlsZW5hbWUiLCJsb2FkLWFyY2dpcyIsIl90ZW1wIiwibGF5ZXJOYW1lIiwiY2hlY2tKc29ucCIsImJib3giLCJnZXRFc3JpQkJveCIsInVybFBhcmFtcyIsImluU1IiLCJvdXRTUiIsIndoZXJlIiwib3V0ZmllbGRzIiwiY29ycyIsImRvbmUiLCJmYWlsIiwianFYaHIiLCJ0ZXh0U3RhdHVzIiwiZXNyaTJnZW8iLCJmZWF0dXJlcyIsImxvYWQtb3ZlcnBhc3MiLCJnZXRCQm94Iiwib3ZlcnBhc3NRdWVyeSIsIm92ZXJwYXNzV2l6YXJkIiwib3ZlcnBhc3NXaXphcmRFeHBhbmQiLCJleHBhbmRlZE92ZXJwYXNzUXVlcnkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJvc210b2dlb2pzb24iLCJmbGF0UHJvcGVydGllcyIsImVsZW1lbnRzIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJsb2NhdGUiLCJzYXZlLWdlb2pzb24iLCJjcmVhdGVzTGF5ZXIiLCJzdHJpbmdpZnkiLCJzYXZlQXMiLCJCbG9iIiwic2F2ZS10b3BvanNvbiIsInRvcG9sb2d5IiwiY29sbGVjdGlvbiIsInByb3BlcnR5LXRyYW5zZm9ybSIsInNhdmUtc2hhcGVmaWxlIiwiZm9sZGVyIiwicG9pbnQiLCJwb2x5Z29uIiwibGluZSIsInNocHdyaXRlIiwiZG93bmxvYWQiLCJleHRlbmQiLCJnZXRCb3VuZHMiLCJmYyIsIkVycm9yIiwiYWxvbmciLCJleGVjdXRlRkMiLCJ0dXJmIiwiYXBwbHkiLCJiZXppZXIiLCJjZW50ZXIiLCJjZW50cm9pZCIsImRlc3RpbmF0aW9uIiwiZW52ZWxvcGUiLCJleHBsb2RlIiwibWlkcG9pbnQiLCJzaW1wbGlmeSIsInRpbiIsInVuaW9uIiwid2l0aGluIiwiX2xheWVyUmVtb3ZlZCIsImluZGV4Iiwic3BsaWNlIiwiQm9vbGVhbiIsImluZGV4T2YiLCJNb3VzZXRyYXAiLCJzdHJpbmciLCJyZW1vdmVXaGl0ZVNwYWNlIiwiYXJyYXkiLCJzZXBhcmF0b3IiLCJwcmVmaXgiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJvbmVycm9yIiwic2VuZCIsImRhdGFUeXBlIiwiY29yc1N1cHBvcnQiLCJhamF4IiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc0FycmF5QnVmZmVyIiwib25sb2FkZW5kIiwic2hwIiwidGhlbiIsImZpbGVOYW1lIiwicmVhZEFzVGV4dCIsImpzb25Gcm9tVXJsIiwicXVlcnkiLCJzdWJzdHIiLCJmb3JFYWNoIiwicGFydCIsImtleSIsImRlY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiZ2V0RmlsZUV4dGVuc2lvbiIsInN3IiwiZ2V0U291dGhXZXN0IiwibmUiLCJnZXROb3J0aEVhc3QiLCJ1bmNvbGxlY3QiLCJhcmNqc29uIiwidG9HZW9KU09OIiwibmV3UGFyYW1zIiwibmV3RkMiLCJ5ZXMiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLFVBQUEsU0FBQUMsR0FtREEsTUFsREFBLEdBQUFBLE1BQ0FBLEVBQUFDLFFBQUEsUUFDQUQsRUFBQUUsS0FBQSxTQUFBQyxHQUNBQSxHQUNBSCxFQUFBSSxLQUFBQyxNQUFBLDBDQUVBTCxFQUFBTSxRQUFBSCxFQUVBSSxFQUFBSixFQUFBSyxJQUFBQyxRQUNBVCxFQUFBSSxLQUFBQyxNQUFBLDJDQUVBTCxFQUFBVSxNQUFBSCxFQUFBSixFQUFBSyxJQUdBUixFQUFBVyxPQUFBQyxVQUdBWixFQUFBYSxJQUFBWCxPQUdBRixFQUFBYyxVQUFBWixPQUdBRixFQUFBZSxVQUFBYixLQUFBLGFBR0FGLEVBQUFnQixTQUFBVCxFQUFBLFNBR0FQLEVBQUFpQixNQUFBQyxJQUFBaEIsT0FDQUYsRUFBQWlCLE1BQUFFLEtBQUFqQixPQUNBRixFQUFBaUIsTUFBQUcsaUJBQUFsQixPQUdBRixFQUFBcUIsS0FBQW5C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bUJBQUEsSUFBQUEsUUFBQW9JLGdCQUdBcFosR0FHQUQiLCJmaWxlIjoiZHJvcGNob3AuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMudmVyc2lvbiA9ICcwLjEuMSc7XG4gIGRjLmluaXQgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgaWYoIW9wdHMpIHtcbiAgICAgIGRjLnV0aWwuZXJyb3IoJ05vIG9wdGlvbnMgcHJvdmlkZWQgaW4gZHJvcGNob3AuaW5pdCgpJyk7XG4gICAgfVxuICAgIGRjLm9wdGlvbnMgPSBvcHRzO1xuXG4gICAgaWYoISQob3B0cy5pZCkubGVuZ3RoKSB7XG4gICAgICBkYy51dGlsLmVycm9yKCdFbGVtZW50IHdpdGggb3B0aW9ucy5pZCBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICB9XG4gICAgZGMuJGVsZW0gPSAkKG9wdHMuaWQpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJzXG4gICAgZGMubGF5ZXJzLnByZXBhcmUoKTtcblxuICAgIC8vIHNldHVwIG1hcFxuICAgIGRjLm1hcC5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBzZWxlY3Rpb25cbiAgICBkYy5zZWxlY3Rpb24uaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJsaXN0XG4gICAgZGMubGF5ZXJsaXN0LmluaXQoJ2xheWVybGlzdCcpO1xuXG4gICAgLy8gc2V0dXAgZHJvcHpvbmVcbiAgICBkYy5kcm9wem9uZSgkKCdib2R5JykpO1xuXG4gICAgLy8gc2V0dXAgbWVudXNcbiAgICBkYy5tZW51cy5nZW8uaW5pdCgpO1xuICAgIGRjLm1lbnVzLmxlZnQuaW5pdCgpO1xuICAgIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUuaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgZm9ybXNcbiAgICBkYy5mb3JtLmluaXQoKTtcblxuICAgIC8vIHNldHVwIGtleWJvYXJkIHNob3J0Y3V0c1xuICAgIGRjLnNob3J0Y3V0cy5pbml0KCk7XG5cbiAgICAvLyBnZXQgVVJMIGluZm9ybWF0aW9uIGlmIGl0IGV4aXN0c1xuICAgIGlmKGxvY2F0aW9uLnNlYXJjaC5sZW5ndGgpIHtcbiAgICAgIGRjLnV0aWwuZXhlY3V0ZVVybFBhcmFtcygpO1xuICAgIH1cblxuICB9O1xuXG4gIGRjLmJvb20gPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnc2hha2FsYWthJyk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBkcm9wem9uZS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRhaW5lciBlbGVtZW50IChsZXRzIGRvIGRvY3VtZW50LmJvZHkpXG4gICAqL1xuICBkYy5kcm9wem9uZSA9IGZ1bmN0aW9uKCRjb250YWluZXIpIHtcbiAgICBfZXZlbnRzKCRjb250YWluZXIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9ldmVudHMoJGNvbnRhaW5lcikge1xuICAgICRjb250YWluZXIub24oJ2RyYWdvdmVyJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgfSk7XG5cbiAgICAkY29udGFpbmVyLm9uKCdkcmFnbGVhdmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICB9KTtcblxuICAgICRjb250YWluZXIub24oJ2Ryb3AnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICAgIHZhciBmaWxlcyA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgICAgJChmaWxlcykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLnV0aWwucmVhZEZpbGUoZmlsZXNbaV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMuZm9ybSA9IGRjLmZvcm0gfHwge307XG4gIGRjLmZvcm0uaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdmb3JtOmdlbycsIGRjLmZvcm0uZ2VvKTtcbiAgICAkKGRjKS5vbignZm9ybTpmaWxlJywgZGMuZm9ybS5maWxlKTtcbiAgfTtcblxuICBkYy5mb3JtLmdlbyA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24pIHtcbiAgICBkYy5mb3JtLmNyZWF0ZShvcGVyYXRpb24sIGRjLm9wcy5nZW9bb3BlcmF0aW9uXSwgJ2dlbycpO1xuICB9O1xuXG4gIGRjLmZvcm0uZmlsZSA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24pIHtcbiAgICBkYy5mb3JtLmNyZWF0ZShvcGVyYXRpb24sIGRjLm9wcy5maWxlW29wZXJhdGlvbl0sICdmaWxlOicgKyBvcGVyYXRpb24pO1xuICB9O1xuXG4gIGRjLmZvcm0uY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgaW5mbywgdHJpZ2dlcikge1xuICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgdmFyICRodG1sID0gJCgnPGZvcm0+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0gZHJvcGNob3AtZm9ybS0nK3RyaWdnZXIpXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2Ryb3BjaG9wLWZvcm0nKVxuICAgICAgICAgIC5hdHRyKCdkYXRhJywgbmFtZSk7XG4gICAgdmFyICR0aXRsZSA9ICQoJzxoMj4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS10aXRsZScpLnRleHQobmFtZSkuYXBwZW5kVG8oJGh0bWwpO1xuICAgIHZhciAkZGVzYyA9ICQoJzxwPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLWRlc2NyaXB0aW9uJykudGV4dChpbmZvLmRlc2NyaXB0aW9uKS5hcHBlbmRUbygkaHRtbCk7XG5cbiAgICAvLyBjcmVhdGUgcGFyYW1zXG4gICAgaWYoaW5mby5wYXJhbWV0ZXJzKSB7XG4gICAgICAkKGluZm8ucGFyYW1ldGVycykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHAgPSBkYy5mb3JtLmNyZWF0ZVBhcmFtKHRoaXMpO1xuICAgICAgICBwLmFwcGVuZFRvKCRodG1sKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSBzdWJtaXQgYnV0dG9uXG4gICAgdmFyICRzdWJtaXQgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdkcm9wY2hvcC1idG4gZHJvcGNob3AtYnRuLWdyZWVuIGRyb3BjaG9wLWZvcm0tc3VibWl0JykudGV4dCgnRXhlY3V0ZScpLmF0dHIoJ2ZvcicsIG5hbWUpO1xuICAgIHZhciAkY2FuY2VsID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnZHJvcGNob3AtYnRuIGRyb3BjaG9wLWJ0bi1jYW5jZWwgZHJvcGNob3AtZm9ybS1jYW5jZWwnKS50ZXh0KCdDYW5jZWwnKS5hdHRyKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICRjYW5jZWwub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgICRodG1sLm9uKCdzdWJtaXQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vIGdldCB0aGUgcGFyYW1ldGVycyBmcm9tIHRoZSBmb3JtXG4gICAgICB2YXIgcGFyYW1ldGVycyA9IFtdO1xuICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLnNlcmlhbGl6ZUFycmF5KCk7XG4gICAgICAkKGRhdGEpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnB1c2goZGF0YVtpXS52YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ29wZXJhdGlvbjonICsgdHJpZ2dlciwgW25hbWUsIHBhcmFtZXRlcnNdKTtcbiAgICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgJGh0bWwuYXBwZW5kKCRzdWJtaXQpO1xuICAgICRodG1sLmFwcGVuZCgkY2FuY2VsKTtcblxuICAgIGRjLiRlbGVtLmFwcGVuZCgkaHRtbCk7XG4gICAgLy8gc3VibWl0IGJ1dHRvbiBuZWVkcyB0cmlnZ2VyIG9wZXJhdGlvbjpnZW8gd2l0aCBvcCBhbmQgcGFyYW1ldGVyIGFycmF5XG4gIH07XG5cbiAgZGMuZm9ybS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcjZHJvcGNob3AtZm9ybScpLnJlbW92ZSgpO1xuICB9O1xuXG4gIGRjLmZvcm0uY3JlYXRlUGFyYW0gPSBmdW5jdGlvbihwYXJhbSkge1xuICAgIHZhciAkaW5wdXQgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlcicpO1xuICAgIHZhciAkbGFiZWwgPSAkKCc8bGFiZWw+JykudGV4dChwYXJhbS5uYW1lKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXItbGFiZWwnKTtcbiAgICB2YXIgJGZpZWxkID0gZGMuZm9ybS5pbnB1dHNbcGFyYW0udHlwZV0ocGFyYW0pO1xuICAgICRmaWVsZC5hcHBlbmRUbygkbGFiZWwpO1xuICAgIGlmKHBhcmFtLmRlc2NyaXB0aW9uLmxlbmd0aCkge1xuICAgICAgJCgnPHA+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyLWRlc2NyaXB0aW9uJykuaHRtbChwYXJhbS5kZXNjcmlwdGlvbikuYXBwZW5kVG8oJGxhYmVsKTtcbiAgICB9XG4gICAgJGlucHV0LmFwcGVuZCgkbGFiZWwpO1xuICAgIHJldHVybiAkaW5wdXQ7XG4gIH07XG5cbiAgZGMuZm9ybS5pbnB1dHMgPSB7XG4gICAgbnVtYmVyOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICdudW1iZXInKVxuICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpXG4gICAgICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc2VsZWN0OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8c2VsZWN0PicpLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJChwLm9wdGlvbnMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgJG9wdCA9ICQoJzxvcHRpb24+JykudGV4dChwLm9wdGlvbnNbaV0pXG4gICAgICAgICAgICAgIC5hdHRyKCd2YWx1ZScsIHAub3B0aW9uc1tpXSk7XG4gICAgICAgICRvcHQuYXBwZW5kVG8oJGkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICB0ZXh0OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICd0ZXh0JylcbiAgICAgICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIGNoZWNrYm94OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICdjaGVja2JveCcpXG4gICAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgICAgIC5hdHRyKCd2YWx1ZScsIHAuZGVmYXVsdCk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICByYWRpbzogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGRpdj4nKS5hdHRyKCdjbGFzcycsICdyYWRpb0dyb3VwJyk7XG4gICAgICB2YXIgZ3JvdXBOYW1lID0gcC5uYW1lLnJlcGxhY2UoL1xccy9nLCAnJyk7XG4gICAgICAkKHAub3B0aW9ucykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciBvcHQgPSBwLm9wdGlvbnNbaV07XG4gICAgICAgIHZhciBvcHRJZCA9IG9wdC5yZXBsYWNlKC9cXHMvZywgJycpO1xuICAgICAgICB2YXIgJGxibCA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpXG4gICAgICAgICAgICAgIC5hdHRyKCdmb3InLCBvcHRJZCk7XG5cbiAgICAgICAgdmFyICRvcHQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAgICAgICAuYXR0cignaWQnLCBvcHRJZClcbiAgICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCBncm91cE5hbWUpXG4gICAgICAgICAgICAgIC5hZGRDbGFzcygncmFkaW8nKVxuICAgICAgICAgICAgICAudmFsKG9wdCk7XG4gICAgICAgIGlmIChvcHQgPT09IHAuZGVmYXVsdCkge1xuICAgICAgICAgICRvcHQucHJvcCgnZGVmYXVsdENoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICAkbGJsLmFwcGVuZChvcHQpO1xuICAgICAgICAkbGJsLmFwcGVuZFRvKCRpKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkaSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHN3aXRjaDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGRpdj4nKTtcbiAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgJGxibCA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgICB2YXIgJG9wdCA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgICAgICAgIC52YWwoJ3N3aXRjaC0nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXApXG4gICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkbGJsKTtcbiAgICAgICAgJGxibC5hcHBlbmQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSk7XG4gICAgICAgICRsYmwuYXBwZW5kVG8oJGkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICByZWN1cnNpdmU6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxkaXY+Jyk7XG5cbiAgICAgIHZhciAkbGJsMSA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgIHZhciAkb3B0MSA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAgICAgLnZhbCgndHJ1ZScpXG4gICAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkb3B0MS5hcHBlbmRUbygkbGJsMSk7XG4gICAgICAkbGJsMS5hcHBlbmQoJ0luZGl2aWR1YWwgZmVhdHVyZXMnKTtcblxuICAgICAgdmFyICRsYmwyID0gJCgnPGxhYmVsPicpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgdmFyICRvcHQyID0gJCgnPGlucHV0PicpXG4gICAgICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgICAgICAudmFsKCdmYWxzZScpXG4gICAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkb3B0Mi5hcHBlbmRUbygkbGJsMik7XG4gICAgICAkbGJsMi5hcHBlbmQoJ0VudGlyZSBjb2xsZWN0aW9uJyk7XG5cbiAgICAgICRsYmwxLmFwcGVuZFRvKCRpKTtcbiAgICAgICRsYmwyLmFwcGVuZFRvKCRpKTtcblxuICAgICAgcmV0dXJuICRpO1xuICAgIH1cbiAgfTtcblxuICAvLyBkYy5mb3JtLmdldFZhbHVlcyA9IGZ1bmN0aW9uKCRmb3JtKSB7XG4gIC8vICAgdmFyIHZhbHVlcyA9IFtdO1xuICAvLyAgIGNvbnNvbGUubG9nKCRmb3JtKTtcbiAgLy8gICByZXR1cm4gdmFsdWVzO1xuICAvLyB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVybGlzdCA9IHt9O1xuICBkYy5sYXllcmxpc3QuZWxlbXMgPSB7fTtcblxuICBkYy5sYXllcmxpc3QuaW5pdCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0gPSAkKCc8b2w+JykuYWRkQ2xhc3MobmFtZSk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGRjLmxheWVybGlzdC4kZWxlbSk7XG5cbiAgICAvLyBDbGlja2luZyBvbiBsYXllcmxpc3QgYnV0IG5vdCBsYXllciAoaWUgYmVsb3cgbGF5ZXJzKSBjbGVhcnMgc2VsZWN0aW9uXG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAoJChldmVudC50YXJnZXQpLmhhc0NsYXNzKG5hbWUpKSB7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGxpSGVscGVyID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci1oZWxwJylcbiAgICAgIC5odG1sKCdXZWxjb21lIHRvIDxzdHJvbmc+ZHJvcGNob3A8L3N0cm9uZz4hIEhlcmUgeW91IGNhbiBkcmFnIGFuZCBkcm9wIGZpbGVzIGFuZCB0aGV5IHdpbGwgc2hvdyB1cCBpbiB0aGUgbGF5ZXIgbGlzdCBiZWxvdy48YnI+PGJyPlRvIHRoZSBsZWZ0IHlvdSBjYW4gdXBsb2FkIGFuZCBzYXZlIHlvdXIgZmlsZXMgb3IgPGEgaHJlZj1cIi8/Z2lzdD0wOTEyOWMyMGVjMDIwYjgzYmY4NVwiPmFkZCBleGFtcGxlIGRhdGE8L2E+IG9yIHRoZSA8YSBocmVmPVwiLz9naXN0PWQwNjZiNTcyZThhOGFkMmI2ZDE2XCI+VVMgU3RhdGVzPC9hPi48YnI+PGJyPlRvIHRoZSByaWdodCB5b3VcXCdsbCBub3RpY2Ugc29tZSBnZW9zcGF0aWFsIG9wZXJhdGlvbnMgdGhhdCBiZWNvbWUgYXZhaWxhYmxlIGJhc2VkIG9uIHNlbGVjdGluZyBzcGVjaWZpYyBsYXllcnMuJyApO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGlIZWxwZXIpO1xuXG4gICAgdmFyIHRvZ2dsZUxheWVycyA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItdG9nZ2xlQWxsJylcbiAgICAgIC5odG1sKCc8bGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNoZWNrZWQ+VG9nZ2xlIGFsbCBsYXllcnM8L2xhYmVsPicpO1xuICAgIHRvZ2dsZUxheWVycy5vbignY2hhbmdlJywgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZCh0b2dnbGVMYXllcnMpO1xuXG4gICAgJChkYykub24oJ2xheWVyOmFkZGVkJywgZGMubGF5ZXJsaXN0LmFkZExheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgZGMubGF5ZXJsaXN0LnJlbW92ZUxheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWVkJywgZGMubGF5ZXJsaXN0LnJlbmFtZSk7XG4gIH07XG5cbiAgZGMubGF5ZXJsaXN0LnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCwgbmV3TmFtZSkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5maW5kKCcubGF5ZXItbmFtZScpLnRleHQobmV3TmFtZSk7XG4gIH07XG5cbiAgLy8gdHJpZ2dlcmVkIGluIGRyb3BjaG9wLmpzXG4gIGRjLmxheWVybGlzdC5hZGRMYXllckxpc3RJdGVtID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGxheWVybGlzdEl0ZW0gPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLWVsZW1lbnQnKS5hdHRyKCdkYXRhLXN0YW1wJywgbGF5ZXIuc3RhbXApO1xuICAgIHZhciBsYXllckRpdiA9ICQoJzxkaXY+JylcbiAgICAgIC5hZGRDbGFzcygnbGF5ZXItbmFtZSBsYXllci1uZXcnKVxuICAgICAgLnRleHQobGF5ZXIubmFtZSlcbiAgICAgIC5kZWxheSgzMDAwKVxuICAgICAgLnF1ZXVlKGZ1bmN0aW9uKG5leHQpIHtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnbGF5ZXItbmV3Jyk7XG4gICAgICB9KTtcblxuICAgIHZhciBsYXllclR5cGUgPSAkKCc8c3Bhbj4nKS5hZGRDbGFzcygnbGF5ZXItdHlwZS1pbWFnZSBzcHJpdGUgc3ByaXRlLWxheWVyLScrbGF5ZXJUeXBlSWNvbihsYXllci50eXBlKSk7XG4gICAgdmFyIGNoZWNrYm94ID0gJCgnPGlucHV0PicpLmFkZENsYXNzKCdsYXllci10b2dnbGUnKS5wcm9wKHsndHlwZSc6ICdjaGVja2JveCcsICdjaGVja2VkJzogdHJ1ZX0pO1xuICAgIHZhciBkcm9wZG93biA9ICQoJzxidXR0b24gdGl0bGU9XCJNb3JlIE9wdGlvbnNcIj4nKS5hZGRDbGFzcygnbGF5ZXItYWN0aW9uIGxheWVyLWRyb3Bkb3duJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1lbGxpcHNpcy1oXCI+PC9pPicpO1xuXG4gICAgY2hlY2tib3gub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgIC8vIHRyaWdnZXIgbGF5ZXI6c2hvd1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzaG93JywgW2xheWVyXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpoaWRlJywgW2xheWVyXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsYXllckRpdi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgLy8gY2hlY2sgZm9yIGtleXMgYmVpbmcgaGVsZCBmb3Igc3BlY2lhbCBzZWxlY3Rpb25cbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAvLyBzZWxlY3QgYWxsIGxheWVyZXMgaW4gYmV0d2VlbiBwcmV2aW91cyB0YXJnZXQgYW5kIHRhcmdldFxuICAgICAgICAvLyBub3RlOiBkb24ndCB1bnNlbGVjdCBsYXllcnMgYWxyZWFkeSBzZWxlY3RlZCwganVzdCBhZGQgdG8gc2VsZWN0aW9uXG4gICAgICAgIHZhciB0b1NlbGVjdCA9IFtdO1xuICAgICAgICB2YXIgdG8gPSAkKHRoaXMpO1xuICAgICAgICB2YXIgZnJvbSA9IGRjLmxheWVybGlzdC5fbGFzdFNlbGVjdGVkO1xuICAgICAgICB2YXIgdG9Db3VudCwgZnJvbUNvdW50O1xuXG4gICAgICAgIGlmICghZnJvbSkgcmV0dXJuO1xuXG4gICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgdmFyIGNoZWNrID0gJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgdmFyIHRvU3RhbXAgPSB0by5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgdmFyIGZyb21TdGFtcCA9IGZyb20ucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIGlmIChjaGVjayA9PT0gdG9TdGFtcCkgdG9Db3VudCA9IGU7XG4gICAgICAgICAgaWYgKGNoZWNrID09PSBmcm9tU3RhbXApIGZyb21Db3VudCA9IGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0b0NvdW50ID4gZnJvbUNvdW50KSB7XG4gICAgICAgICAgLy8gbG9vcCB1cFxuICAgICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICBpZiAobCA+PSBmcm9tQ291bnQgJiYgbCA8PSB0b0NvdW50ICkge1xuICAgICAgICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIoJCh0aGlzKS5maW5kKCcubGF5ZXItbmFtZScpLCBkYy5sYXllcnMubGlzdFskKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICBpZiAobCA8IGZyb21Db3VudCAmJiBsID49IHRvQ291bnQgKSB7XG4gICAgICAgICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RMYXllcigkKHRoaXMpLmZpbmQoJy5sYXllci1uYW1lJyksIGRjLmxheWVycy5saXN0WyQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5KSB7XG4gICAgICAgIC8vIGFkZC9yZW1vdmUgc2VsZWN0ZWQgbGF5ZXIgdG8gY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSgkKHRoaXMpLCBsYXllcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjbGVhciBzZWxlY3Rpb24gYW5kIHNlbGVjdCB0YXJnZXRcbiAgICAgICAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uKCQodGhpcyksIGxheWVyKTtcbiAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSgkKHRoaXMpLCBsYXllcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsYXllckRpdi5vbignY29udGV4dG1lbnUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZGMubWVudXMubGF5ZXJDb250ZXh0TWVudS5jcmVhdGVMYXllckNvbnRleHRNZW51KFxuICAgICAgICB0aGlzLCBldmVudC5vZmZzZXRYLCBldmVudC5wYWdlWVxuICAgICAgKTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICBkcm9wZG93bi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZGMubWVudXMubGF5ZXJDb250ZXh0TWVudS5jcmVhdGVMYXllckNvbnRleHRNZW51KFxuICAgICAgICAvLyBJIGhhdmUgbm8gaWRlYSB3aHkgd2UgbmVlZCB0byBzdWJ0cmFjdCA0MHB4IGJ1dCB0aGF0J3Mgd2hhdFxuICAgICAgICAvLyBpdCB0YWtlcyB0byBtYWtlIGl0IHBvc2l0aW9uIGNvcnJlY3RseS4uLlxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGF5ZXItbmFtZScpLCBldmVudC5wYWdlWCAtIDQwLCBldmVudC5wYWdlWVxuICAgICAgKTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIGRpc2FibGUgZnVydGhlciBjbGljayBoYW5kbGVyc1xuICAgIH0pO1xuXG4gICAgbGF5ZXJEaXYub24oJ2RibGNsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGRjLm9wcy5maWxlLmV4dGVudC5leGVjdXRlKCk7XG4gICAgfSk7XG5cbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChsYXllckRpdik7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoY2hlY2tib3gpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGxheWVyVHlwZSk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoZHJvcGRvd24pO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGF5ZXJsaXN0SXRlbSk7XG5cbiAgICBkYy5sYXllcmxpc3QuZWxlbXNbbGF5ZXIuc3RhbXBdID0gbGF5ZXJsaXN0SXRlbTtcblxuICAgIC8vIGhpZGUgaGVscGVyIHRleHRcbiAgICAkKCcubGF5ZXItaGVscCcpLmhpZGUoKTtcbiAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuc2hvdygpO1xuXG4gICAgLy8gc2VuZCBvdXQgbGF5ZXJsaXN0OmFkZGVkIHNpZ25hbFxuICAgICQoZGMpLnRyaWdnZXIoJ2xheWVybGlzdDphZGRlZCcsIGxheWVyRGl2KTtcbiAgfTtcblxuICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIgPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgaWYgKCEkaXRlbS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9XG4gIH07XG4gIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUgPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgaWYgKCRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAkaXRlbS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnVuc2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRpdGVtLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6c2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfVxuICAgIGRjLmxheWVybGlzdC5fbGFzdFNlbGVjdGVkID0gJGl0ZW07XG4gIH07XG4gIGRjLmxheWVybGlzdC5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnNlbGVjdEFsbCA9IGZ1bmN0aW9uKCkge1xuICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIoJCh0aGlzKS5maW5kKCcubGF5ZXItbmFtZScpLCBkYy5sYXllcnMubGlzdFskKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgIH0pO1xuICB9O1xuICBkYy5sYXllcmxpc3QuY2hlY2tBbGwgPSBmdW5jdGlvbihtdXN0QmVTZWxlY3RlZCkge1xuICAgIGZvciAodmFyIGkgaW4gZGMubGF5ZXJzLmxpc3QpIHtcbiAgICAgIHZhciBsYXllciA9IGRjLmxheWVycy5saXN0W2ldO1xuICAgICAgaWYgKG11c3RCZVNlbGVjdGVkICYmICFkcm9wY2hvcC5zZWxlY3Rpb24uaXNTZWxlY3RlZChsYXllcikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBlbGVtVG9nZ2xlKGRjLmxheWVycy5saXN0W2ldLnN0YW1wLCB0cnVlKTtcbiAgICB9XG4gIH07XG4gIGRjLmxheWVybGlzdC51bmNoZWNrQWxsID0gZnVuY3Rpb24obXVzdEJlU2VsZWN0ZWQpIHtcbiAgICBmb3IgKHZhciBpIGluIGRjLmxheWVycy5saXN0KSB7XG4gICAgICB2YXIgbGF5ZXIgPSBkYy5sYXllcnMubGlzdFtpXTtcbiAgICAgIGlmIChtdXN0QmVTZWxlY3RlZCAmJiAhZHJvcGNob3Auc2VsZWN0aW9uLmlzU2VsZWN0ZWQobGF5ZXIpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZWxlbVRvZ2dsZShsYXllci5zdGFtcCwgZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQnKS5wcm9wKCdjaGVja2VkJykpIHtcbiAgICAgIGRjLmxheWVybGlzdC51bmNoZWNrQWxsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRjLmxheWVybGlzdC5jaGVja0FsbCgpO1xuICAgIH1cbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnJlbW92ZUxheWVyTGlzdEl0ZW0gPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICAkKCdbZGF0YS1zdGFtcD0nK3N0YW1wKyddJykuZmFkZU91dCgzMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSBkYy5sYXllcmxpc3QuZWxlbXNbc3RhbXBdO1xuXG4gICAgICAvLyBzaG93IGhlbHBlciB0ZXh0IGlmIG5vIGxheWVycyBleGlzdFxuICAgICAgLy8gdGhpcyBoYXMgdG8gY2hlY2sgaW5zaWRlIHNpbmNlIHRoZXJlIGlzIGEgMzAwIG1zIGRlbGF5IHdpdGggdGhlIGZhZGVcbiAgICAgIGlmICgkKCcubGF5ZXItZWxlbWVudCcpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAkKCcubGF5ZXItaGVscCcpLnNob3coKTtcbiAgICAgICAgJCgnLmxheWVyLXRvZ2dsZUFsbCcpLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBsYXllclR5cGVJY29uKHR5cGUpIHtcbiAgICB2YXIgaWNvbjtcbiAgICBzd2l0Y2godHlwZSkge1xuICAgICAgY2FzZSAnRmVhdHVyZUNvbGxlY3Rpb24nOlxuICAgICAgICBpY29uID0gJ2ZlYXR1cmVjb2xsZWN0aW9uJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPFBvaW50Pic6XG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpUG9pbnQ+JzpcbiAgICAgICAgaWNvbiA9ICdwb2ludCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxMaW5lU3RyaW5nPic6XG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpTGluZVN0cmluZz4nOlxuICAgICAgICBpY29uID0gJ2xpbmUnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8UG9seWdvbj4nOlxuICAgICAgY2FzZSAnRmVhdHVyZTxNdWx0aVBvbHlnb24+JzpcbiAgICAgICAgaWNvbiA9ICdwb2x5Z29uJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj4nOlxuICAgICAgICBpY29uID0gJ2dlb20nO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGljb24gPSAnZGVmYXVsdCc7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gaWNvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVsZW1Ub2dnbGUoc3RhbXAsIGJvb2wpIHtcbiAgICAkKCcubGF5ZXItZWxlbWVudFtkYXRhLXN0YW1wPScrc3RhbXArJ10nKVxuICAgICAgLmZpbmQoJy5sYXllci10b2dnbGUnKVxuICAgICAgLnByb3AoJ2NoZWNrZWQnLCBib29sKVxuICAgICAgLnRyaWdnZXIoJ2NoYW5nZScpOyAvLyBzZXRzIG9mZiBhIGNoYWluIHJlYWN0aW9uXG4gIH1cblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5sYXllcnMgPSB7fTtcbiAgZGMubGF5ZXJzLmxpc3QgPSB7fTtcblxuICBkYy5sYXllcnMucHJlcGFyZSA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdmaWxlOmFkZGVkJywgZGMubGF5ZXJzLmFkZCk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZScsIGRjLmxheWVycy5yZW1vdmUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpkdXBsaWNhdGUnLCBkYy5sYXllcnMuZHVwbGljYXRlKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVuYW1lJywgZGMubGF5ZXJzLnJlbmFtZSk7XG4gIH07XG5cbi8qKlxuICogQWRkIGEgbGF5ZXIgdG8gdGhlIGxheWVycyBsaXN0IGFuZCB0cmlnZ2VyIGxheWVyOmFkZGVkIGZvciBzdWJzY3JpYmVycyB0byBwaWNrIHVwLlxuICogQHBhcmFtIHtvYmplY3R9IGV2ZW50XG4gKiBAcGFyYW0ge29iamVjdH0gZmlsZSBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlIGJsb2IgdG8gYmUgY29udmVydGVkIHdpdGggSlNPTi5wYXJzZSgpXG4gKi9cbiAgZGMubGF5ZXJzLmFkZCA9IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBibG9iLCBsdHlwZSwgdXJsKSB7XG4gICAgaWYgKGJsb2IudHlwZSA9PT0gXCJUb3BvbG9neVwiKSB7XG4gICAgICBibG9iID0gdG9wb2pzb24uY2xpZW50LmZlYXR1cmUoYmxvYiwgYmxvYi5vYmplY3RzW09iamVjdC5rZXlzKGJsb2Iub2JqZWN0cylbMF1dKTtcbiAgICB9XG5cbiAgICB2YXIgbCA9IGRjLmxheWVycy5tYWtlTGF5ZXIobmFtZSwgYmxvYik7XG4gICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0gPSBsO1xuXG4gICAgaWYgKGx0eXBlICYmIHVybCkge1xuICAgICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0ubHR5cGUgPSBsdHlwZTtcbiAgICAgIGRjLmxheWVycy5saXN0W2wuc3RhbXBdLnVybCA9IHVybDtcbiAgICB9XG5cbiAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnPHN0cm9uZz4nK2wubmFtZSsnPC9zdHJvbmc+IGhhcyBiZWVuIGFkZGVkIScsIDM1MDApO1xuXG4gICAgLy8gdHJpZ2dlciBsYXllcjphZGRlZFxuICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmFkZGVkJywgW2xdKTtcblxuICAgIC8vIFVwZGF0ZSBVUkwsIGlmIGFwcGxpY2FibGVcbiAgICBpZiAobHR5cGUgJiYgdXJsKSB7XG4gICAgICBkYy51dGlsLnVwZGF0ZVNlYXJjaCgpO1xuICAgIH1cblxuICB9O1xuXG4vKipcbiAqIFJlbW92ZSBhIGxheWVyLCB3aGljaCB0cmlnZ2VycyBsYXllcjpyZW1vdmVkIGZvciB0aGUgcmVzdCBvZiB0aGUgYXBwXG4gKiBAcGFyYW0ge3N0cmluZ30gbGF5ZXIgc3RhbXBcbiAqL1xuICBkYy5sYXllcnMucmVtb3ZlID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgLy8gdHJpZ2dlciBsYXllcjpyZW1vdmVkXG4gICAgdHJ5IHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZWQnLCBbc3RhbXBdKTtcbiAgICAgIGRjLm5vdGlmeSgnaW5mbycsICc8c3Ryb25nPicgKyBkYy5sYXllcnMubGlzdFtzdGFtcF0ubmFtZSArICc8L3N0cm9uZz4gaGFzIGJlZW4gcmVtb3ZlZC4nKTtcbiAgICAgIGRlbGV0ZSBkYy5sYXllcnMubGlzdFtzdGFtcF07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gcmVtb3ZpbmcgdGhlIGxheWVyLicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfTtcblxuICBkYy5sYXllcnMuZHVwbGljYXRlID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgdmFyIGx5ciA9IGRjLmxheWVycy5saXN0W3N0YW1wXTtcbiAgICAvLyBuZWVkIHRvIGNyZWF0ZSBuZXcgbGF5ZXIgc28gd2UgY2FuIGdldCBhIHVuaXFlIEwuc3RhbXAoKVxuICAgIGRjLmxheWVycy5hZGQoe30sICdjb3B5XycrbHlyLm5hbWUsIGx5ci5yYXcpO1xuICB9O1xuXG4gIGRjLmxheWVycy5yZW5hbWUgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIsIG5ld05hbWUpIHtcbiAgICAvLyByZW5hbWUgaW4gbGF5ZXIgb2JqZWN0XG4gICAgZGMubGF5ZXJzLmxpc3RbbGF5ZXIuc3RhbXBdLm5hbWUgPSBuZXdOYW1lO1xuXG4gICAgLy8gcmVuYW1lIGluIGxheWVybGlzdFxuICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbmFtZWQnLCBbbGF5ZXIuc3RhbXAsIG5ld05hbWVdKTtcbiAgfTtcblxuICBkYy5sYXllcnMubWFrZUxheWVyID0gZnVuY3Rpb24obmFtZSwganNvbikge1xuICAgIHZhciBnZW9qc29uID0ganNvbjtcbiAgICAvLyBpZiAoanNvbi50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nICYmIGpzb24uZmVhdHVyZXMubGVuZ3RoID09PSAxKSB7XG4gICAgLy8gICBnZW9qc29uID0gZGMudXRpbC51bmNvbGxlY3QoanNvbik7XG4gICAgLy8gfVxuXG4gICAgdmFyIGZsID0gTC5tYXBib3guZmVhdHVyZUxheWVyKGdlb2pzb24pO1xuICAgIHZhciBsYXllciA9IHtcbiAgICAgIG5hbWU6IGRjLnV0aWwucmVtb3ZlRmlsZUV4dGVuc2lvbihuYW1lKSxcbiAgICAgIHN0YW1wOiBMLnN0YW1wKGZsKSxcbiAgICAgIHJhdzogZ2VvanNvbixcbiAgICAgIHR5cGU6IGdldFR5cGUoZ2VvanNvbiksXG4gICAgICBmZWF0dXJlbGF5ZXI6IGZsLFxuICAgICAgZGF0ZUFkZGVkOiBuZXcgRGF0ZSgpXG4gICAgfTtcbiAgICByZXR1cm4gbGF5ZXI7XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0VHlwZShnaikge1xuICAgIGlmIChnai50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICByZXR1cm4gJ0ZlYXR1cmVDb2xsZWN0aW9uJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdqLnR5cGUgKyAnPCcgKyBnai5nZW9tZXRyeS50eXBlICsgJz4nO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm1hcCA9IHt9O1xuXG4gIGRjLm1hcC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgZGMubWFwLiRlbGVtID0gJCgnPGRpdj4nKS5wcm9wKCdpZCcsICdkcm9wY2hvcC1tYXAnKS5hZGRDbGFzcygnbWFwJyk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGRjLm1hcC4kZWxlbSk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlZCcsIGRjLm1hcC5yZW1vdmVMYXllcik7XG5cbiAgICBfbWFrZU1hcCgpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9tYWtlTWFwKCkge1xuICAgIGRjLm1hcC50b2tlbiA9IEwubWFwYm94LmFjY2Vzc1Rva2VuID0gJ3BrLmV5SjFJam9pYzNadFlYUjBhR1YzY3lJc0ltRWlPaUpWTVVsVVIweHJJbjAuTndlU19BdHRqc3d0TjV3UnVXQ1NOQSc7XG4gICAgZGMubWFwLm0gPSBMLm1hcGJveC5tYXAoJ2Ryb3BjaG9wLW1hcCcsIG51bGwsIHtcbiAgICAgIHpvb21Db250cm9sOiBmYWxzZSxcbiAgICAgIHdvcmxkQ29weUp1bXA6IHRydWVcbiAgICB9KS5zZXRWaWV3KFswLDBdLCAzKTtcblxuICAgIC8vIHNldHMgdGhlIGxvY2F0aW9uIG9mIHRoZSB6b29tIGJ1dHRvbnMgdG8gdGhlIHRvcCByaWdodFxuICAgIEwuY29udHJvbC56b29tKHtcbiAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICBMLm1hcGJveC5nZW9jb2RlckNvbnRyb2woJ21hcGJveC5wbGFjZXMnLCB7XG4gICAgICBwb3NpdGlvbjogJ3RvcGxlZnQnXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgdmFyIGJhc2VMYXllcnMgPSB7XG4gICAgICBcIk1hcGJveCBTdHJlZXRzXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LnN0cmVldHMnKSxcbiAgICAgIFwiTWFwYm94IE91dGRvb3JzXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94Lm91dGRvb3JzJyksXG4gICAgICBcIk1hcGJveCBMaWdodFwiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5saWdodCcpLFxuICAgICAgXCJNYXBib3ggRGFya1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5kYXJrJyksXG4gICAgICBcIk1hcGJveCBTYXRlbGxpdGVcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guc2F0ZWxsaXRlJylcbiAgICB9O1xuXG4gICAgYmFzZUxheWVyc1snTWFwYm94IFN0cmVldHMnXS5hZGRUbyhkYy5tYXAubSk7XG4gICAgLy8gc2V0cyBsb2NhdGlvbiBvZiBiYXNlIGxheWVyIGNvbnRyb2wgdG8gdGhlIGJvdHRvbSByaWdodFxuICAgIEwuY29udHJvbC5sYXllcnMoYmFzZUxheWVycywge30sIHtcbiAgICAgIHBvc2l0aW9uOiAnYm90dG9tcmlnaHQnLFxuICAgICAgY29sbGFwc2VkOiBmYWxzZVxuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIGRjLm1hcC5sYXllcmdyb3VwID0gTC5tYXBib3guZmVhdHVyZUxheWVyKCk7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgJChkYykub24oJ2xheWVyOmFkZGVkJywgZGMubWFwLmFkZExheWVyKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6aGlkZScsIGRjLm1hcC5oaWRlTGF5ZXIpO1xuICAgICQoZGMpLm9uKCdsYXllcjpzaG93JywgZGMubWFwLnNob3dMYXllcik7XG5cbiAgICAvLyAvLyBteSBsb2NhdGlvbiBhcyBsYXllclxuICAgIC8vIHZhciBnZW9sb2NhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VvbG9jYXRlJyk7XG5cbiAgICAkKGRjLm1hcC5tKS5vbignbG9jYXRpb25mb3VuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBkYXRhID0gZS5vcmlnaW5hbEV2ZW50O1xuICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGRhdGEuYm91bmRzKTtcblxuICAgICAgdmFyIGx5ciA9IHtcbiAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgICAgICBnZW9tZXRyeToge1xuICAgICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgICAgY29vcmRpbmF0ZXM6IFtkYXRhLmxhdGxuZy5sbmcsIGRhdGEubGF0bG5nLmxhdF1cbiAgICAgICAgfSxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICd0aXRsZSc6ICdUaGVyZSBZb3UgQXJlJyxcbiAgICAgICAgICAnbWFya2VyLWNvbG9yJzogJyMyMDcxNzgnLFxuICAgICAgICAgICdtYXJrZXItc3ltYm9sJzogJ2hlYXJ0J1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgWyd5b3VyIGxvY2F0aW9uJywgbHlyXSk7XG4gICAgfSk7XG5cbiAgICAkKGRjLm1hcC5tKS5vbignbG9jYXRpb25lcnJvcicsIGZ1bmN0aW9uKCkge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGVyZSB3YXMgYSBwcm9ibGVtIGZpbmRpbmcgeW91ciBsb2NhdGlvbi4nLCAzMDAwKTtcbiAgICB9KTtcblxuICAgIC8vIC8vIE9uY2Ugd2UndmUgZ290IGEgcG9zaXRpb24sIHpvb20gYW5kIGNlbnRlciB0aGUgbWFwXG4gICAgLy8gLy8gb24gaXQsIGFuZCBhZGQgYSBzaW5nbGUgbWFya2VyLlxuICAgIC8vIHRoaXMuX21hcC5vbignbG9jYXRpb25mb3VuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAvLyAgIHRoaXMuX21hcC5maXRCb3VuZHMoZS5ib3VuZHMpO1xuXG5cbiAgICAvLyAgIG15TGF5ZXIuc2V0R2VvSlNPTih7XG4gICAgLy8gICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAvLyAgICAgZ2VvbWV0cnk6IHtcbiAgICAvLyAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgIC8vICAgICAgIGNvb3JkaW5hdGVzOiBbZS5sYXRsbmcubG5nLCBlLmxhdGxuZy5sYXRdXG4gICAgLy8gICAgIH0sXG4gICAgLy8gICAgIHByb3BlcnRpZXM6IHtcbiAgICAvLyAgICAgICAndGl0bGUnOiAnVGhlcmUgWW91IEFyZScsXG4gICAgLy8gICAgICAgJ21hcmtlci1jb2xvcic6ICcjMjA3MTc4JyxcbiAgICAvLyAgICAgICAnbWFya2VyLXN5bWJvbCc6ICdoZWFydCdcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSk7XG5cbiAgICAvLyAgIC8vIEFuZCBoaWRlIHRoZSBnZW9sb2NhdGlvbiBidXR0b25cbiAgICAvLyAgIC8vZ2VvbG9jYXRlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZ2VvbG9jYXRlKTtcbiAgICAvLyB9LmJpbmQodGhpcykpO1xuXG4gICAgLy8gLy8gSWYgdGhlIHVzZXIgY2hvb3NlcyBub3QgdG8gYWxsb3cgdGhlaXIgbG9jYXRpb25cbiAgICAvLyAvLyB0byBiZSBzaGFyZWQsIGRpc3BsYXkgYW4gZXJyb3IgbWVzc2FnZS5cbiAgICAvLyB0aGlzLl9tYXAub24oJ2xvY2F0aW9uZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAvLyAgIGdlb2xvY2F0ZS5pbm5lckhUTUwgPSAnUG9zaXRpb24gY291bGQgbm90IGJlIGZvdW5kJztcbiAgICAvLyB9KTtcblxuXG4gIH1cblxuICBkYy5tYXAuY291bnQgPSAwO1xuXG4gIGRjLm1hcC5hZGRMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIHZhciBmbCA9IGxheWVyLmZlYXR1cmVsYXllcjtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRMYXllcihmbCk7XG5cbiAgICAvLyBjcmVhdGUgcG9wdXAgdGFibGUgZm9yIGVhY2ggZmVhdHVyZVxuICAgIGZsLmVhY2hMYXllcihmdW5jdGlvbihsYXllcikge1xuICAgICAgdmFyIGNvbnRlbnQgPSAnPHRhYmxlIGNsYXNzPVwiZHJvcGNob3AtdGFibGVcIj48dHI+PHRoPlByb3BlcnR5PC90aD48dGg+RGF0YTwvdGg+PC90cj4nO1xuXG4gICAgICBpZiAobGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgY29udGVudCArPSAnPHRyPjx0ZD48c3Ryb25nPicgKyBwcm9wICsgJzwvc3Ryb25nPjwvdGQ+PHRkPicgKyBsYXllci5mZWF0dXJlLnByb3BlcnRpZXNbcHJvcF0gKyAnPC90ZD48L3RyPic7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQgKz0gJzxwPlRoZXJlIGFyZSBubyBwcm9wZXJ0aWVzIHNldCBmb3IgdGhpcyBmZWF0dXJlLjwvcD4nO1xuICAgICAgfVxuICAgICAgY29udGVudCArPSAnPC90YWJsZT4nO1xuXG4gICAgICBsYXllci5iaW5kUG9wdXAoTC5wb3B1cCh7XG4gICAgICAgIG1heFdpZHRoOiA0NTAsXG4gICAgICAgIG1heEhlaWdodDogMjAwLFxuICAgICAgICBhdXRvUGFuUGFkZGluZzogWzQ1LCA0NV0sXG4gICAgICAgIGNsYXNzTmFtZTogJ2Ryb3BjaG9wLXBvcHVwJ1xuICAgICAgfSwgbGF5ZXIpLnNldENvbnRlbnQoY29udGVudCkpO1xuICAgIH0pO1xuXG4gIH07XG5cbiAgZGMubWFwLmhpZGVMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLnJlbW92ZUxheWVyKGxheWVyLmZlYXR1cmVsYXllcik7XG4gIH07XG5cbiAgZGMubWFwLnNob3dMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZExheWVyKGxheWVyLmZlYXR1cmVsYXllcik7XG4gIH07XG5cbiAgZGMubWFwLnJlbW92ZUxheWVyID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAucmVtb3ZlTGF5ZXIoZGMubGF5ZXJzLmxpc3Rbc3RhbXBdLmZlYXR1cmVsYXllcik7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubWVudXMgPSBkYy5tZW51cyB8fCB7fTtcbiAgZGMubWVudXMuZ2VvID0gZGMubWVudXMuZ2VvIHx8IHt9O1xuXG4gIGRjLm1lbnVzLmdlby5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gYnVpbGQgb3BzLmdlbyBjb250YWluZXJcbiAgICB2YXIgZ2VvQ29udGFpbmVyID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnb3BlcmF0aW9ucy1nZW8nKTtcbiAgICBkYy4kZWxlbS5hcHBlbmQoZ2VvQ29udGFpbmVyKTtcblxuICAgIC8vIHdpcmUgdXAgc2lnbmFsIGhhbmRsZXJzXG4gICAgJChkYykub24oJ2xheWVyOnNlbGVjdGVkJywgZGMubWVudXMuZ2VvLmdlb0NoZWNrKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6dW5zZWxlY3RlZCcsIGRjLm1lbnVzLmdlby5nZW9DaGVjayk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpnZW8nLCBkYy5tZW51cy5nZW8uZ2VvRXhlY3V0ZSk7XG5cbiAgICAvLyBjcmVhdGUgZ2VvIGJ1dHRvbnMgJiBmb3Jtc1xuICAgIGZvciAodmFyIGdlb09wIGluIGRjLm9wcy5nZW8pIHtcbiAgICAgIHZhciBnZW9CdG4gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdvcGVyYXRpb24gb3BlcmF0aW9uLWdlbyBvcGVyYXRpb24taW5hY3RpdmUnKVxuICAgICAgICAuaHRtbCgnPGg0PicgKyBnZW9PcCArICc8L2g0PjxwPicgKyBkYy5vcHMuZ2VvW2dlb09wXS5kZXNjcmlwdGlvbiArICc8L3A+JylcbiAgICAgICAgLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJywgZ2VvT3ApO1xuICAgICAgZ2VvQnRuLm9uKCdjbGljaycsIF9oYW5kbGVCdG5DbGljayk7XG5cbiAgICAgIGdlb0NvbnRhaW5lci5hcHBlbmQoZ2VvQnRuKTtcbiAgICB9XG4gIH07XG5cblxuICAvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG4gIC8qIGlnbm9yaW5nIHRoZXNlIGZ1bmN0aW9ucyBpbiBqc2hpbnQgYmVjYXVzZSB3ZSBhcmUgZ2V0dGluZ1xuICBhbiB1bmVjZXNzYXJ5IHN0cmljdCB2aW9sYXRpb24gd2FybmluZywgYnV0IG91ciB1c2FnZSBvZiBgdGhpc2BcbiAgaXMgcHJvcGVyIGhlcmUuICovXG4gIGZ1bmN0aW9uIF9oYW5kbGVCdG5DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIG9wZXJhdGlvbiA9ICQodGhpcykuYXR0cignZGF0YS1vcGVyYXRpb24nKTtcbiAgICAvLyBpZiBvcGVyYXRpb24gcmVxdWlyZXMgbm8gcGFyYW1ldGVycywgZG9uJ3QgcmVuZGVyIGEgZm9ybVxuICAgIGlmICghZGMub3BzLmdlb1tvcGVyYXRpb25dLnBhcmFtZXRlcnMpIHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ29wZXJhdGlvbjpnZW8nLCBbb3BlcmF0aW9uLCBkYy5zZWxlY3Rpb24ubGlzdF0pO1xuICAgIC8vIG90aGVyd2lzZSByZW5kZXIgdGhlIGZvcm1cbiAgICB9IGVsc2Uge1xuICAgICAgJChkYykudHJpZ2dlcignZm9ybTpnZW8nLCBbb3BlcmF0aW9uXSk7XG4gICAgfVxuICB9XG4gIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG5cbiAgLy8gU29ydCB0dXJmIG9wZXJhdGlvbnMgYnkgYXZhaWxhYmxpbGl0eSBhbmQgYWxwaGFiZXRpY2FsbHlcbiAgZnVuY3Rpb24gX3NvcnRHZW8oKSB7XG5cbiAgICAvLyBHZXQgYWxsIG9mIHRoZSB0dXJmIGJ1dHRvbnMgYW5kIHNvcnQgdGhlbSBhbHBoYWJldGljYWxseVxuICAgIHZhciBhbHBoYSA9ICQoJy5vcGVyYXRpb24tZ2VvJykuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gKCQoYikuZGF0YSgnb3BlcmF0aW9uJykgPCAkKGEpLmRhdGEoJ29wZXJhdGlvbicpKSA/IDEgOiAtMTtcbiAgICB9KTtcblxuICAgIC8vIEdyYWIgYWxsIHRoZSBhY3RpdmUgYnV0dG9ucyBhbmQgcmVhcHBlbmQgdGhlbVxuICAgIGFscGhhLmZpbHRlcihmdW5jdGlvbihpLCBkKSB7XG4gICAgICBpZiAoISgkKGQpLnByb3AoJ2Rpc2FibGVkJykpKSB7IHJldHVybiBkOyB9XG4gICAgfSkuYXBwZW5kVG8oJy5vcGVyYXRpb25zLWdlbycpO1xuXG4gICAgLy8gR3JhYiBhbGwgdGhlIGluYWN0aXZlIGJ1dHRvbnMgYW5kIHJlYXBwZW5kIHRoZW1cbiAgICBhbHBoYS5maWx0ZXIoZnVuY3Rpb24oaSwgZCkge1xuICAgICAgaWYgKCQoZCkucHJvcCgnZGlzYWJsZWQnKSkgeyByZXR1cm4gZDsgfVxuICAgIH0pLmFwcGVuZFRvKCcub3BlcmF0aW9ucy1nZW8nKTtcblxuICAgIC8vIFNjcm9sbCB0byB0aGUgdG9wIHRvIGtlZXAgdGhpbmdzIG5pY2VcbiAgICAkKCcub3BlcmF0aW9ucy1nZW8nKS5zY3JvbGxUb3AoMCk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIHR1cmYgZnVuY3Rpb24gYmFzZWQgb24gYnV0dG9uIG9wZXJhdGlvbiBjbGljay5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9yaWdpbmFsIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wZXJhdGlvbiB0byBiZSBleGVjdXRlZCB2aWEgdHVyZlxuICAgKiBAcGFyYW0ge2FycmF5fSBzZXJpZXMgb2YgcGFyYW1ldGVycyB0byBiZSBhcHBsaWVkIHRvIHR1cmYgb3BlcmF0aW9uXG4gICAqL1xuICBkYy5tZW51cy5nZW8uZ2VvRXhlY3V0ZSA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24sIHBhcmFtZXRlcnMpIHtcbiAgICB2YXIgcHJlcCA9IGRjLm1lbnVzLmdlby5wcmVwYXJlVHVyZlBhcmFtcyhvcGVyYXRpb24sIHBhcmFtZXRlcnMpO1xuICAgIHZhciByZXN1bHQgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBkYy5vcHMuZ2VvW29wZXJhdGlvbl0uZXhlY3V0ZShwcmVwLm9wdGlvbnMpO1xuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ1RoYXQgb3BlcmF0aW9uIGlzblxcJ3QgcG9zc2libGUuIFRyeSBjaGFuZ2luZyB0aGUgb3JkZXIgb2YgeW91ciBzZWxlY3Rpb24uJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtwcmVwLm5hbWUsIHJlc3VsdF0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIHBhcmFtZXRlcnMgZm9yIGV4ZWN1dGluZyB3aXRoaW4gYSB0dXJmIGZ1bmN0aW9uIHVzaW5nIC5hcHBseSgpIC0gcmV0dXJucyBhbiBhcnJheVxuICAgKiBAcGFyYW0ge2FycmF5fSBvcHRpb25zIGZyb20gdGhlIHVzZXIgcGFzc2VkIGZyb20gdGhlIG9yaWdpbmFsIGV2ZW50IHRyaWdnZXJcbiAgICovXG4gIGRjLm1lbnVzLmdlby5wcmVwYXJlVHVyZlBhcmFtcyA9IGZ1bmN0aW9uKG9wZXJhdGlvbiwgcGFyYW1zKSB7XG4gICAgdmFyIGRhdGEgPSB7fTtcbiAgICBkYXRhLm9wdGlvbnMgPSBbXTtcblxuICAgIHZhciBnZW9tcyA9IFtdO1xuICAgIHZhciBuYW1lQXJyYXkgPSBbXTtcbiAgICAvLyBnZXQgZ2VvbWV0cnkgYXJyYXkgZnJvbSBzZWxlY3Rpb25cbiAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgIGlmICgkLmluQXJyYXkoJ3N3aXRjaC0nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXAsIHBhcmFtcykgPT09IC0xKSB7XG4gICAgICAgIGdlb21zLnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdlb21zLnVuc2hpZnQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3KTtcbiAgICAgIH1cbiAgICAgIG5hbWVBcnJheS5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUpO1xuICAgIH0pO1xuXG4gICAgLy8gbWVyZ2UgcGFyYW1zIHdpdGggb3B0aW9ucyBhcnJheVxuICAgIGRhdGEub3B0aW9ucyA9ICQubWVyZ2UoZ2VvbXMsIHBhcmFtcyk7XG5cbiAgICAvLyBjcmVhdGUgbmFtZSBhcnJheVxuICAgIGRhdGEubmFtZSA9IGRjLnV0aWwuY29uY2F0KG5hbWVBcnJheSwgJ18nLCBvcGVyYXRpb24pO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgZGMubWVudXMuZ2VvLmdlb0NoZWNrID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgLy8gY2hlY2sgc2VsZWN0aW9uIGNvdW50IHZzIG9wZXJhdGlvbiBtaW4vbWF4XG4gICAgZm9yICh2YXIgbyBpbiBkYy5vcHMuZ2VvKSB7XG4gICAgICB2YXIgb3AgPSBkYy5vcHMuZ2VvW29dO1xuICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA+IG9wLm1heEZlYXR1cmVzIHx8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA8IG9wLm1pbkZlYXR1cmVzKSB7XG4gICAgICAgIHR1cm5JdE9mZihvKTtcbiAgICAgICAgLy8gZG9uJ3QgZ28gYW55IGZ1cnRoZXJcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy8gY2hlY2sgb3BlcmF0aW9uIGFnYWluc3QgZWFjaCBzZWxlY3Rpb24gZGF0YSB0eXBlXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICB2YXIgc2VsID0gZGMuc2VsZWN0aW9uLmxpc3RbeF07XG5cbiAgICAgICAgICAvLyBpZiB0aGUgc2VsZWN0aW9uIHR5cGUgaXMgaW4gdGhlIGFycmF5LCBtYXJrIGl0IGFzIGFjdGl2ZSFcbiAgICAgICAgICBpZiAoJC5pbkFycmF5KHNlbC50eXBlLCBvcC5yZXF1aXJlbWVudHMudHlwZXMpID4gLTEgfHwgb3AucmVxdWlyZW1lbnRzLmdlbmVyYWxGZWF0dXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0dXJuSXRPbihvKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHVybkl0T2ZmKG8pO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHVybkl0T2ZmKG9wKSB7XG4gICAgICB2YXIgYnRuID0gJCgnW2RhdGEtb3BlcmF0aW9uPScrIG9wICsnXScpO1xuICAgICAgYnRuLmFkZENsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHR1cm5JdE9uKG9wKSB7XG4gICAgICB2YXIgYnRuID0gJCgnW2RhdGEtb3BlcmF0aW9uPScrIG9wICsnXScpO1xuICAgICAgYnRuLnJlbW92ZUNsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvLyBTb3J0IHRoZSBsaXN0XG4gICAgX3NvcnRHZW8oKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5tZW51cyA9IGRjLm1lbnVzIHx8IHt9O1xuICBkYy5tZW51cy5sYXllckNvbnRleHRNZW51ID0gZGMubWVudXMubGF5ZXJDb250ZXh0TWVudSB8fCB7fTtcblxuICBkYy5tZW51cy5sYXllckNvbnRleHRNZW51LmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBSZW1vdmUgb3BlbiBtZW51c1xuICAgICQoJ2h0bWwnKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBkYy5tZW51cy5sYXllckNvbnRleHRNZW51LnJlbW92ZUxheWVyQ29udGV4dE1lbnVzKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gR2VuZXJhdGUgbGF5ZXIgY29udGV4dCBtZW51IGRvbSBlbGVtZW50IChib3VuZCB0byByaWdodC1jbGljayBvbiBsYXllcmxpc3QpXG4gIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUuY3JlYXRlTGF5ZXJDb250ZXh0TWVudSA9IGZ1bmN0aW9uKCRsYXllck5hbWVEaXYsIHhQb3MsIHlQb3MpIHtcbiAgICBpZiAoISgkbGF5ZXJOYW1lRGl2IGluc3RhbmNlb2YgalF1ZXJ5KSkge1xuICAgICAgJGxheWVyTmFtZURpdiA9ICQoJGxheWVyTmFtZURpdik7XG4gICAgfVxuXG4gICAgLy8gQ2xvc2UgYW55IGFscmVhZHktb3BlbiBjb250ZXh0bWVudXNcbiAgICBkYy5tZW51cy5sYXllckNvbnRleHRNZW51LnJlbW92ZUxheWVyQ29udGV4dE1lbnVzKCk7XG5cbiAgICAvLyBTZWxlY3QgcmlnaHQtY2xpY2tlZCBsYXllci5cbiAgICB2YXIgbGF5ZXIgPSAkbGF5ZXJOYW1lRGl2LnBhcmVudCgpO1xuICAgIHZhciBseXJEYXRhID0gZGMubGF5ZXJzLmxpc3RbbGF5ZXIuYXR0cignZGF0YS1zdGFtcCcpXTtcblxuICAgIC8vIFNlbGVjdCBsYXllciBpZiB1bnNlbGVjdGVkXG4gICAgaWYgKCEoZHJvcGNob3Auc2VsZWN0aW9uLmlzU2VsZWN0ZWQobHlyRGF0YSkpKSB7XG4gICAgICAkbGF5ZXJOYW1lRGl2LnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIGxlZnQtY2xpY2sgY29udGV4dC1tZW51XG4gICAgdmFyIG1lbnUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdjb250ZXh0LW1lbnUnKTtcblxuICAgIHZhciBtZW51TGlzdCA9ICQoJzx1bD4nKTtcbiAgICBtZW51LmFwcGVuZChtZW51TGlzdCk7XG5cbiAgICAvLyBwb3B1bGF0ZSBjb250ZXh0LW1lbnVcbiAgICB2YXIgbWVudUl0ZW1zID0ge1xuICAgICAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuICAgICAgJ3RpdGxlMSc6ICdMYXllcicsXG4gICAgICAncmVuYW1lJzogZGMub3BzLmZpbGVbJ3JlbmFtZSddLFxuICAgICAgJ2R1cGxpY2F0ZSc6IGRjLm9wcy5maWxlWydkdXBsaWNhdGUnXSxcbiAgICAgICdyZW1vdmUnOiBkYy5vcHMuZmlsZVsncmVtb3ZlJ10sXG4gICAgICAndGl0bGUyJzogJ0dlbycsXG4gICAgICAnZXh0ZW50JzogZGMub3BzLmZpbGVbJ2V4dGVudCddLFxuICAgICAgJ2V4cGFuZCc6IGRjLm9wcy5maWxlWydleHBhbmQnXSxcbiAgICAgICdjb21iaW5lJzogZGMub3BzLmZpbGVbJ2NvbWJpbmUnXSxcbiAgICAgIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG4gICAgfTtcblxuICAgIGZvciAodmFyIG1lbnVJdGVtIGluIG1lbnVJdGVtcykge1xuICAgICAgdmFyIGl0ZW0gPSBtZW51SXRlbXNbbWVudUl0ZW1dO1xuICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyB8fCBpdGVtIGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICAgIG1lbnVMaXN0LmFwcGVuZCgkKCc8bGkgY2xhc3M9XCJ0aXRsZVwiPjxoND4nICsgaXRlbSArICc8L2g0PjwvbGk+JykpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBmaWxlQnRuID0gJCgnPGxpPicpLmFkZENsYXNzKCdtZW51LWFjdGlvbicpXG4gICAgICAgIC5odG1sKCc8ZGl2IGNsYXNzPVwiaWNvblwiPicgKyBpdGVtLmljb24gKyAnPC9kaXY+PGRpdiBjbGFzcz1cImRlc2NyaXB0aW9uXCI+JyArIGl0ZW0uZGVzY3JpcHRpb24gKyAnPC9kaXY+JylcbiAgICAgICAgLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJywgbWVudUl0ZW0pXG4gICAgICAgIC5hdHRyKCdkYXRhLXRvb2x0aXAnLCBpdGVtLmRlc2NyaXB0aW9uKTtcblxuICAgICAgLy8gZGlzYWJsZSBpbnZhbGlkIG9wZXJhdGlvbnNcbiAgICAgIGlmIChcbiAgICAgICAgKGl0ZW0ubWluRmVhdHVyZXMgPiBkcm9wY2hvcC5zZWxlY3Rpb24ubGlzdC5sZW5ndGgpIHx8XG4gICAgICAgIChpdGVtLm1heEZlYXR1cmVzIDwgZHJvcGNob3Auc2VsZWN0aW9uLmxpc3QubGVuZ3RoKVxuICAgICAgKSB7XG4gICAgICAgIGZpbGVCdG4uYWRkQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICAgfVxuICAgICAgZmlsZUJ0bi5vbignY2xpY2snLCBfaGFuZGxlQnRuQ2xpY2spO1xuICAgICAgbWVudUxpc3QuYXBwZW5kKGZpbGVCdG4pO1xuICAgIH1cblxuXG4gICAgLy8gbWFrZSBzdXJlIHRvIHNldCB2aXNpYmlsaXR5OmhpZGRlblxuICAgIG1lbnUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgLy8gYXBwZW5kIHRvIERPTVxuICAgIGxheWVyLnBhcmVudCgpLmFwcGVuZChtZW51KTtcblxuICAgIC8vIGNhbGN1bGF0ZSB0aGUgaGVpZ2h0LCBzZXQgcG9zaXRpb25cbiAgICB2YXIgcG9zaXRpb24gPSBfY2FsY3VsYXRlTWVudUxvY2F0aW9uKCk7XG4gICAgbWVudS5jc3MocG9zaXRpb24pO1xuXG4gICAgLy8gcmVtb3ZlIHZpc2liaWxpdHk6aGlkZGVuXG4gICAgbWVudS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cbiAgICBmdW5jdGlvbiBfY2FsY3VsYXRlTWVudUxvY2F0aW9uKCkge1xuICAgICAgLy8gYnVmZmVyIGZyb20gdGhlIGVkZ2Ugb2YgdGhlIHdpbmRvdyAoaW4gcGl4ZWxzKVxuICAgICAgdmFyIGJ1ZmZlciA9IDEwO1xuXG4gICAgICAvLyBmaXJzdCBnZXQgdGhlIHdpbmRvdyBoZWlnaHRcbiAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cbiAgICAgIC8vIHRoZW4gZ2V0IHRoZSBtZW51IGhlaWdodFxuICAgICAgdmFyIG1lbnVIZWlnaHQgPSBtZW51LmhlaWdodCgpO1xuXG4gICAgICAvLyBjaGVjayB0byBtYWtlIHN1cmUgZnJvbSB0aGUgdG9wIG9mIHdpbmRvdyB0byB0aGUgYm90dG9tIG9mIG1lbnVcbiAgICAgIC8vIGlzIGxhcmdlciB0aGFuIHRoZSB3aW5kb3cgaGVpZ2h0XG4gICAgICBpZiAoIHlQb3MgKyBtZW51SGVpZ2h0IDwgd2luZG93SGVpZ2h0ICkge1xuICAgICAgICAvLyByZXR1cm4gbm9ybWFsbHlcbiAgICAgICAgcmV0dXJuIHt0b3A6IHlQb3MsIGxlZnQ6IHhQb3N9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaWYgaXQgaXNuJ3QsIGZpZ3VyZSBvdXQgYnkgaG93IG11Y2gsIGFuZCByZXR1cm5cbiAgICAgICAgLy8geSBwb3NpdGlvbiB3aXRoIHNhZmUgY29udGV4dCBzcGFjZSBhbmQgYnVmZmVyIGZyb20gdGhlIHdpbmRvd1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9ICh5UG9zICsgbWVudUhlaWdodCkgLSB3aW5kb3dIZWlnaHQ7XG4gICAgICAgIHJldHVybiB7dG9wOiAoeVBvcyAtIGRpZmZlcmVuY2UgLSBidWZmZXIpLCBsZWZ0OiB4UG9zfTtcbiAgICAgIH1cblxuICAgIH1cblxuICB9O1xuXG4gIC8vIFJlbW92ZSBhbnkgb3BlbiBjb250ZXh0LW1lbnVzIGZyb20gRE9NXG4gIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUucmVtb3ZlTGF5ZXJDb250ZXh0TWVudXMgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcuY29udGV4dC1tZW51JykucmVtb3ZlKCk7XG4gIH07XG5cbiAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuICAvKiBpZ25vcmluZyB0aGVzZSBmdW5jdGlvbnMgaW4ganNoaW50IGJlY2F1c2Ugd2UgYXJlIGdldHRpbmdcbiAgYW4gdW5lY2Vzc2FyeSBzdHJpY3QgdmlvbGF0aW9uIHdhcm5pbmcsIGJ1dCBvdXIgdXNhZ2Ugb2YgYHRoaXNgXG4gIGlzIHByb3BlciBoZXJlLiAqL1xuICBmdW5jdGlvbiBfaGFuZGxlQnRuQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgdHJ5IHtcbiAgICAgIGRjLm9wcy5maWxlW29wZXJhdGlvbl0uZXhlY3V0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGlzIG9wZXJhdGlvbiBkb2VzblxcJ3QgZXhpc3QhJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuICAvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5tZW51cyA9IGRjLm1lbnVzIHx8IHt9O1xuICBkYy5tZW51cy5sZWZ0ID0gZGMubWVudXMubGVmdCB8fCB7fTtcblxuICBkYy5tZW51cy5sZWZ0LmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyB3aXJlIHVwIHNpZ25hbCBoYW5kbGVyc1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLWdpc3QnLCBkYy5vcHMuZmlsZVsnbG9hZC1naXN0J10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC11cmwnLCBkYy5vcHMuZmlsZVsnbG9hZC11cmwnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLW92ZXJwYXNzJywgZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLWFyY2dpcycsIGRjLm9wcy5maWxlWydsb2FkLWFyY2dpcyddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOnJlbmFtZScsIGRjLm9wcy5maWxlLnJlbmFtZS5jYWxsYmFjayk7XG5cbiAgICBkYy5tZW51cy5sZWZ0LnNldHVwID0gW1xuICAgICAge1xuICAgICAgICBuYW1lOiAnaW1wb3J0JyxcbiAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtcGx1c1wiPjwvaT4nLFxuICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgJ3VwbG9hZCcsXG4gICAgICAgICAgJ2xvYWQtdXJsJyxcbiAgICAgICAgICAnbG9hZC1naXN0JyxcbiAgICAgICAgICAnbG9hZC1vdmVycGFzcycsXG4gICAgICAgICAgJ2xvYWQtYXJjZ2lzJyxcbiAgICAgICAgICAnbG9jYXRpb24nXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdTYXZlJyxcbiAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZmxvcHB5LW9cIj48L2k+JyxcbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICdzYXZlLWdlb2pzb24nLFxuICAgICAgICAgICdzYXZlLXRvcG9qc29uJyxcbiAgICAgICAgICAnc2F2ZS1zaGFwZWZpbGUnXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICAnaW5mbydcbiAgICBdO1xuXG4gICAgLy8gc2V0dXAgb3BzIGZpbGVcbiAgICB2YXIgbGVmdE1lbnUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1tZW51LWxlZnQnKTtcbiAgICB2YXIgc2V0dXAgPSBkYy5tZW51cy5sZWZ0LnNldHVwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR1cC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGFjdGlvbiA9IHNldHVwW2ldO1xuICAgICAgaWYgKHR5cGVvZiBzZXR1cFtpXSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYoZGMub3BzLmZpbGVbYWN0aW9uXS50eXBlID09PSAnYnJlYWsnKSB7XG4gICAgICAgICAgdmFyICRicmVha1NwYWNlID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbWVudS1hY3Rpb24tYnJlYWsnKTtcbiAgICAgICAgICBsZWZ0TWVudS5hcHBlbmQoJGJyZWFrU3BhY2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxlZnRNZW51LmFwcGVuZChidWlsZE1lbnVCdXR0b24oYWN0aW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYnVpbGQgYSBjb2xsYXBzZWFibGUgbWVudSBcImJ1dHRvblwiXG4gICAgICAgIHZhciBjb2xsYXBzZUJ0biA9ICQoJzxkaXY+JylcbiAgICAgICAgICAuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uIG1lbnUtY29sbGFwc2UnKVxuICAgICAgICAgIC5odG1sKHNldHVwW2ldLmljb24pO1xuICAgICAgICBpZiAoc2V0dXBbaV0ubmFtZSA9PT0gJ2ltcG9ydCcpIGNvbGxhcHNlQnRuLmFkZENsYXNzKCdtZW51LWltcG9ydCcpO1xuXG4gICAgICAgIHZhciBjb2xsYXBzZUlubmVyID0gJCgnPGRpdj4nKVxuICAgICAgICAgIC5hZGRDbGFzcygnbWVudS1jb2xsYXBzZS1pbm5lcicpO1xuXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIGFjdGlvbiBhbmQgYnVpbGQgYSBidXR0b24gZm9yIGl0LCBqdXN0IGxpa2UgYWJvdmUsXG4gICAgICAgIC8vIGJ1dCBhcHBlbmQgaXQgdG8gdGhlIG1lbnUtY29sbGFwc2UtaW5uZXIgZWxlbWVudFxuICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IHNldHVwW2ldLmFjdGlvbnMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICB2YXIgYWN0biA9IHNldHVwW2ldLmFjdGlvbnNbYV07XG4gICAgICAgICAgY29sbGFwc2VJbm5lci5hcHBlbmQoYnVpbGRNZW51QnV0dG9uKGFjdG4pKTtcbiAgICAgICAgfVxuICAgICAgICBjb2xsYXBzZUJ0bi5hcHBlbmQoY29sbGFwc2VJbm5lcik7XG5cbiAgICAgICAgLy8gYXBwZW5kIHRoZSBlbnRpcmUgY29sbGFwc2VCdG4gdG8gdGhlIGxlZnRNZW51XG4gICAgICAgIGxlZnRNZW51LmFwcGVuZChjb2xsYXBzZUJ0bik7XG4gICAgICB9XG4gICAgfVxuICAgIGRjLiRlbGVtLmFwcGVuZChsZWZ0TWVudSk7XG5cbiAgICBmdW5jdGlvbiBidWlsZE1lbnVCdXR0b24oYWN0aW9uKSB7XG4gICAgICB2YXIgYnV0dG9uID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbWVudS1hY3Rpb24nKVxuICAgICAgICAuaHRtbChkYy5vcHMuZmlsZVthY3Rpb25dLmljb24gfHwgJyEnKVxuICAgICAgICAuYXR0cignZGF0YS1vcGVyYXRpb24nLCBhY3Rpb24pXG4gICAgICAgIC5hdHRyKCdkYXRhLXRvb2x0aXAnLCBkYy5vcHMuZmlsZVthY3Rpb25dLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKGRjLm9wcy5maWxlW2FjdGlvbl0udHlwZSA9PT0gJ2luZm8nKSBidXR0b24uYWRkQ2xhc3MoJ2Ryb3BjaG9wLWluZm8nKTtcbiAgICAgIGJ1dHRvbi5vbignY2xpY2snLCBfaGFuZGxlQnRuQ2xpY2spO1xuICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG4gIH07XG5cbiAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuICAvKiBpZ25vcmluZyB0aGVzZSBmdW5jdGlvbnMgaW4ganNoaW50IGJlY2F1c2Ugd2UgYXJlIGdldHRpbmdcbiAgYW4gdW5lY2Vzc2FyeSBzdHJpY3QgdmlvbGF0aW9uIHdhcm5pbmcsIGJ1dCBvdXIgdXNhZ2Ugb2YgYHRoaXNgXG4gIGlzIHByb3BlciBoZXJlLiAqL1xuICBmdW5jdGlvbiBfaGFuZGxlQnRuQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgdHJ5IHtcbiAgICAgIGRjLm9wcy5maWxlW29wZXJhdGlvbl0uZXhlY3V0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGlzIG9wZXJhdGlvbiBkb2VzblxcJ3QgZXhpc3QhJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuICAvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubm90aWZ5ID0gZnVuY3Rpb24odHlwZSwgdGV4dCwgdGltZSkge1xuICAgIHZhciBub3RlID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbm90aWZpY2F0aW9uJylcbiAgICAgIC5hZGRDbGFzcyh0eXBlKVxuICAgICAgLmh0bWwodGV4dCk7XG5cbiAgICAvLyBgdGltZWAgY2FuIGVxdWFsICdjbG9zZScgaW4gb3JkZXIgdG8gY3JlYXRlIGEgY2xvc2UgYnV0dG9uXG4gICAgaWYgKHRpbWUgPT09ICdjbG9zZScpIHtcblxuICAgICAgdmFyICRjbG9zZSA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ25vdGlmaWNhdGlvbi1jbG9zZScpXG4gICAgICAgIC5wcm9wKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgICAgIC5odG1sKCc8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCI+PC9pPicpO1xuXG4gICAgICAkY2xvc2Uub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkKG5vdGUpLmFwcGVuZCgkY2xvc2UpO1xuICAgICAgJChkYy4kZWxlbSkuYXBwZW5kKG5vdGUpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgJChkYy4kZWxlbSkuYXBwZW5kKG5vdGUpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBub3RlLnJlbW92ZSgpO1xuICAgICAgfSwgdGltZSB8fCAzMDAwKTtcblxuICAgIH1cblxuICAgIFxuXG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuZmlsZSA9IHtcblxuICAgIC8vXG4gICAgLy8gSW1wb3J0IERhdGFcbiAgICAvLy9cbiAgICB1cGxvYWQ6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnVXBsb2FkIGZyb20geW91ciBjb21wdXRlciAoLmdlb2pzb24pJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXVwbG9hZFwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGluc3BpcmVkIGZyb20gZ2VvanNvbi5pb1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L2dlb2pzb24uaW8vYmxvYi9naC1wYWdlcy9zcmMvdWkvZmlsZV9iYXIuanMjTDM5MFxuICAgICAgICB2YXIgJGJsaW5kSW5wdXQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAgICAgLmF0dHIoJ3R5cGUnLCAnZmlsZScpXG4gICAgICAgICAgICAgIC5hdHRyKCdtdWx0aXBsZScsICd0cnVlJylcbiAgICAgICAgICAgICAgLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKVxuICAgICAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpXG4gICAgICAgICAgICAgIC5jc3MoJ2hlaWdodCcsICcwJylcbiAgICAgICAgICAgICAgLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLmZpbGVzO1xuICAgICAgICAgICAgICAgICQoZmlsZXMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgICAgICAgZGMudXRpbC5yZWFkRmlsZShmaWxlc1tpXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJGJsaW5kSW5wdXQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRibGluZElucHV0KTtcbiAgICAgICAgJGJsaW5kSW5wdXQuY2xpY2soKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtdXJsJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdJbXBvcnQgZmlsZSBmcm9tIGEgVVJMJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpbmtcIj48L2k+JyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1cmwnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonVVJMJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHA6Ly8nLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtdXJsJ10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIHVybCA9IHBhcmFtZXRlcnNbMF07XG4gICAgICAgIGRjLnV0aWwueGhyKHVybCwgZGMub3BzLmZpbGVbbmFtZV0uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAvLyBnZXQgZmlsZW5hbWUgYmFzZWQgb24gdGhlIGVuZCBvZiB0aGUgdXJsIC0gbm90IHN1cmUgaWYgdGhpcyBpcyBzdXN0YWluYWJsZVxuICAgICAgICAgIHZhciBuYW1lID0geGhyLnJlc3BvbnNlVVJMLnN1YnN0cmluZyh4aHIucmVzcG9uc2VVUkwubGFzdEluZGV4T2YoJy8nKSsxKTtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW25hbWUsIGRhdGEsICd1cmwnLCB4aHIucmVzcG9uc2VVUkxdKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHJldHJpZXZlIEdpc3QuIFBsZWFzZSBjaGVjayB5b3VyIFVSTCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLWdpc3QnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0ltcG9ydCBmaWxlcyBmcm9tIEdpc3QnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZ2l0aHViXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZ2lzdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidHaXN0IElEIG9yIFVSTCcsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdodHRwczovL2dpc3QuZ2l0aHViLmNvbS8nXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1naXN0J10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIGdpc3QgPSBwYXJhbWV0ZXJzWzBdLnNwbGl0KCcvJylbcGFyYW1ldGVyc1swXS5zcGxpdCgnLycpLmxlbmd0aC0xXTtcbiAgICAgICAgdmFyIHVybCA9ICdodHRwczovL2FwaS5naXRodWIuY29tL2dpc3RzLycgKyBnaXN0O1xuICAgICAgICBkYy51dGlsLnhocih1cmwsIGRjLm9wcy5maWxlW25hbWVdLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgZm9yICh2YXIgZiBpbiBkYXRhLmZpbGVzKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGRhdGEuZmlsZXNbZl0uZmlsZW5hbWU7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW25hbWUsIEpTT04ucGFyc2UoZGF0YS5maWxlc1tmXS5jb250ZW50KSwgJ2dpc3QnLCB4aHIucmVzcG9uc2VVUkwuc3BsaXQoJy8nKVt4aHIucmVzcG9uc2VVUkwuc3BsaXQoJy8nKS5sZW5ndGggLSAxXV0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGRjLm5vdGlmeSgnc3VjY2VzcycsICdTdWNjZXNmdWxseSByZXRyaWV2ZWQgZ2lzdCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcmV0cmlldmUgR2lzdC4gUGxlYXNlIGNoZWNrIHlvdXIgVVJMJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtYXJjZ2lzJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSBhbiBBcmNHSVMgU2VydmVyIEZlYXR1cmUgU2VydmljZScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1nbG9iZVwiPjwvaT4nLFxuICAgICAgX3RlbXA6IHsnbGF5ZXJOYW1lJzogJ2FyY2pzb24nfSxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdmZWF0dXJlIHNlcnZpY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRW50ZXIgVVJMIHRvIEFyY0dJUyBGZWF0dXJlIFNlcnZpY2UgKGV4LiBodHRwOi8vc2FtcGxlc2VydmVyNi5hcmNnaXNvbmxpbmUuY29tL2FyY2dpcy9yZXN0L3NlcnZpY2VzL0h1cnJpY2FuZXMvTWFwU2VydmVyLzApJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHA6Ly9zYW1wbGVzZXJ2ZXI2LmFyY2dpc29ubGluZS5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvSHVycmljYW5lcy9NYXBTZXJ2ZXIvMCdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd3aGVyZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBIHdoZXJlIGNsYXVzZSBmb3IgdGhlIHF1ZXJ5IGZpbHRlci4gQW55IGxlZ2FsIFNRTCB3aGVyZSBjbGF1c2Ugb3BlcmF0aW5nIG9uIHRoZSBmaWVsZHMgaW4gdGhlIGxheWVyIGlzIGFsbG93ZWQuJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJzE9MSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZXF1ZXN0IHR5cGUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnc2VsZWN0IEpTT05QIGlmIHlvdSByZWNlaXZlIGNyb3NzLW9yaWdpbiByZXNvdXJjZSBzaGFyaW5nIGVycm9ycycsXG4gICAgICAgICAgdHlwZTogJ3JhZGlvJyxcbiAgICAgICAgICBkZWZhdWx0OiAnQ09SUycsXG4gICAgICAgICAgb3B0aW9uczogWydDT1JTJywgJ0pTT05QJ11cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdsaW1pdCB0byBtYXAnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnb25seSBsb2FkIGZlYXR1cmVzIHdpdGhpbiBjdXJyZW50IG1hcCB2aWV3JyxcbiAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnXG5cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtYXJjZ2lzJ10pO1xuICAgICAgfSxcbiAgICAgIGNoZWNrSnNvbnA6IGZ1bmN0aW9uKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnNbMl0gPT09ICdKU09OUCcpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLWFyY2dpcyddLl90ZW1wLmxheWVyTmFtZSA9IHBhcmFtZXRlcnNbMF07XG4gICAgICAgIHZhciBiYm94ID0gJy0xODAsLTkwLDE4MCw5MCc7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzWzNdKSB7XG4gICAgICAgICAgYmJveCA9IGRjLnV0aWwuZ2V0RXNyaUJCb3goKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXJsID0gcGFyYW1ldGVyc1swXSsnL3F1ZXJ5Lyc7XG4gICAgICAgIHZhciB1cmxQYXJhbXMgPSB7XG4gICAgICAgICAgZjogJ2pzb24nLFxuICAgICAgICAgIGluU1I6IDQzMjYsXG4gICAgICAgICAgb3V0U1I6IDQzMjYsXG4gICAgICAgICAgZ2VvbWV0cnk6IGJib3gsXG4gICAgICAgICAgd2hlcmU6IHBhcmFtZXRlcnNbMV0sXG4gICAgICAgICAgb3V0ZmllbGRzOiAnKidcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNvcnMgPSBkYy5vcHMuZmlsZVsnbG9hZC1hcmNnaXMnXS5jaGVja0pzb25wKHBhcmFtZXRlcnMpO1xuICAgICAgICBkYy51dGlsLmdldCh1cmwsIHVybFBhcmFtcywgY29ycylcbiAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1hcmNnaXMnXS5jYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWGhyLCB0ZXh0U3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnRXJyb3InLCB0ZXh0U3RhdHVzLCBlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgdmFyIGdlb2pzb24gPSBkYy51dGlsLmVzcmkyZ2VvKGRhdGEpO1xuICAgICAgICBpZiAoZGF0YS5mZWF0dXJlcy5sZW5ndGg8MSkge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBmZWF0dXJlcyBmb3VuZCBpbiB5b3VyIHF1ZXJ5LicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZGMub3BzLmZpbGVbJ2xvYWQtYXJjZ2lzJ10uX3RlbXAubGF5ZXJOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgZGMubm90aWZ5KCdzdWNjZXNzJywgJ0ZvdW5kIDxzdHJvbmc+JyArIGRhdGEuZmVhdHVyZXMubGVuZ3RoICsgJyBmZWF0dXJlczwvc3Ryb25nPiBmcm9tIHRoZSBBcmNHSVMgU2VydmljZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLW92ZXJwYXNzJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRlcm1pbmFsXCI+PC9pPicsXG4gICAgICBfdGVtcDoge30sXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncXVlcnknLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonRW50ZXIgYSBzZWFyY2ggcXVlcnkgaW4gdGhlIG92ZXJwYXNzLXR1cmJvIHdpemFyZCBzeW50YXguIExlYXJuIG1vcmUgYWJvdXQgPGEgaHJlZj1cImh0dHA6Ly93aWtpLm9wZW5zdHJlZXRtYXAub3JnL3dpa2kvT3ZlcnBhc3NfdHVyYm8vV2l6YXJkXCIgdGFyZ2V0PVwiX2JsYW5rXCI+dGhlIHN1cHBvcnRlZCBmZWF0dXJlczwvYT4uJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2FtZW5pdHk9YmFyJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2xheWVyIG5hbWUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonTmFtZSBvZiB0aGUgbGF5ZXIgYWRkZWQgaWYgcmVzdWx0cyBhcmUgZm91bmQuJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ292ZXJwYXNzX2xheWVyX25hbWUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLW92ZXJwYXNzJ10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgLy8gc2V0IGxheWVyIG5hbWUgdG8gX3RlbXAgZm9yIGxhdGVyIHVzYWdlXG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uX3RlbXAubGF5ZXJOYW1lID0gcGFyYW1ldGVyc1sxXTsgLy8gdGhpcyBpcyB1Z2x5XG5cbiAgICAgICAgLy8gYnVpbGQgdGhlIHF1ZXJ5IHdpdGggYm91bmRpbmcgYm94XG4gICAgICAgIHZhciBiYm94ID0gZGMudXRpbC5nZXRCQm94KCk7XG4gICAgICAgIHZhciBvdmVycGFzc1F1ZXJ5ID0gb3ZlcnBhc3NXaXphcmQocGFyYW1ldGVyc1swXSk7XG4gICAgICAgIGlmIChvdmVycGFzc1F1ZXJ5ID09PSBmYWxzZSlcbiAgICAgICAgICByZXR1cm4gZGMubm90aWZ5KCdlcnJvcicsICdDYW5cXCd0IGNyZWF0ZSBvdmVycGFzcyBxdWVyeSBmb3IgdGhpcyBzZWFyY2ggaW5wdXQuJyk7XG4gICAgICAgIG92ZXJwYXNzV2l6YXJkRXhwYW5kKG92ZXJwYXNzUXVlcnksIGJib3gsIGZ1bmN0aW9uKGVyciwgZXhwYW5kZWRPdmVycGFzc1F1ZXJ5KSB7XG4gICAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgIHJldHVybiBkYy5ub3RpZnkoJ2Vycm9yJywgJ0Vycm9yIHdoaWxlIGV4cGFuZGluZyBvdmVycGFzcyBxdWVyeTogJyArIGVycik7XG4gICAgICAgICAgZGMudXRpbC54aHIoJ2h0dHA6Ly9vdmVycGFzcy1hcGkuZGUvYXBpL2ludGVycHJldGVyP2RhdGE9JytlbmNvZGVVUklDb21wb25lbnQoZXhwYW5kZWRPdmVycGFzc1F1ZXJ5KSwgZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5jYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB2YXIgZ2VvanNvbiA9IG9zbXRvZ2VvanNvbihkYXRhLCB7XG4gICAgICAgICAgICBmbGF0UHJvcGVydGllczogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghZGF0YS5lbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBlbGVtZW50cyBmb3VuZCBpbiB5b3VyIHF1ZXJ5LicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2RjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uX3RlbXAubGF5ZXJOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnRm91bmQgPHN0cm9uZz4nICsgZGF0YS5lbGVtZW50cy5sZW5ndGggKyAnIGVsZW1lbnRzPC9zdHJvbmc+IGZyb20gdGhlIE92ZXJwYXNzIEFQSScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCBxdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbG9jYXRpb246IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWRkIHlvdXIgbG9jYXRpb24gYXMgYSBsYXllcicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jcm9zc2hhaXJzXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0dlb2xvY2F0aW9uIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBicm93c2VyLicsIDQwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm1hcC5tLmxvY2F0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuXG4gICAgLy9cbiAgICAvLyBFeHBvcnQgRGF0YVxuICAgIC8vXG4gICAgJ3NhdmUtZ2VvanNvbic6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdTYXZlIGFzIEdlb0pTT04nLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZmlsZS1jb2RlLW9cIj48L2k+JyxcbiAgICAgIGNyZWF0ZXNMYXllcjogZmFsc2UsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3KTtcbiAgICAgICAgICB2YXIgdGl0bGUgPSAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnLmdlb2pzb24nO1xuICAgICAgICAgIHNhdmVBcyhuZXcgQmxvYihbY29udGVudF0sIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnXG4gICAgICAgICAgfSksIHRpdGxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnc2F2ZS10b3BvanNvbic6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdTYXZlIGFzIFRvcG9KU09OJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLW9iamVjdC11bmdyb3VwXCI+PC9pPicsXG4gICAgICBjcmVhdGVzTGF5ZXI6IGZhbHNlLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgdG9wb2pzb24udG9wb2xvZ3koe1xuICAgICAgICAgICAgICBjb2xsZWN0aW9uOiBkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXdcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgJ3Byb3BlcnR5LXRyYW5zZm9ybSc6IGZ1bmN0aW9uKGZlYXR1cmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmVhdHVyZS5wcm9wZXJ0aWVzO1xuICAgICAgICAgICAgfX0pXG4gICAgICAgICAgKTtcbiAgICAgICAgICB2YXIgdGl0bGUgPSAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnLnRvcG9qc29uJztcbiAgICAgICAgICBzYXZlQXMobmV3IEJsb2IoW2NvbnRlbnRdLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04J1xuICAgICAgICAgIH0pLCB0aXRsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ3NhdmUtc2hhcGVmaWxlJzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhdmUgYXMgU2hhcGVmaWxlJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGVcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgIGZvbGRlcjogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlczoge1xuICAgICAgICAgICAgICAgIHBvaW50OiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX3BvaW50JyxcbiAgICAgICAgICAgICAgICBwb2x5Z29uOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX3BvbHknLFxuICAgICAgICAgICAgICAgIGxpbmU6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfbGluZSdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNocHdyaXRlLmRvd25sb2FkKGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdywgb3B0aW9ucyk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ0Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gZG93bmxvYWRpbmcgdGhlIHNoYXBlZmlsZS4nICsgZXJyKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGNyZWF0ZXNMYXllcjogZmFsc2VcbiAgICB9LFxuXG5cbiAgICAvL1xuICAgIC8vIExheWVyIE9wdGlvbnNcbiAgICAvL1xuICAgIGV4dGVudDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1ZpZXcgZXh0ZW50IG9mIGxheWVycycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1nbG9iZVwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKCFkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBleHRlbnQgb2YgZW50aXJlIGxheWVyIGxpc3QgaWYgbm90aGluZyBzZWxlY3RlZFxuICAgICAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhkYy5tYXAubGF5ZXJncm91cC5nZXRCb3VuZHMoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGJ1aWxkIHRoZSBib3VuZHMgYmFzZWQgb24gc2VsZWN0ZWQgbGF5ZXJzXG4gICAgICAgICAgdmFyIGJvdW5kcztcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIHZhciBmbCA9IGRjLnNlbGVjdGlvbi5saXN0W2xdLmZlYXR1cmVsYXllcjtcbiAgICAgICAgICAgIGlmKCFsKSBib3VuZHMgPSBmbC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIGVsc2UgYm91bmRzLmV4dGVuZChmbC5nZXRCb3VuZHMoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgIH1cblxuICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBhbmQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdDb252ZXJ0IEZlYXR1cmVDb2xsZWN0aW9uIGludG8gc2VwYXJhdGUgZmVhdHVyZXMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZXhwYW5kXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHZhciBmYyA9IGRjLnNlbGVjdGlvbi5saXN0WzBdO1xuICAgICAgICAgIGlmIChmYy5yYXcudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgICAgJChmYy5yYXcuZmVhdHVyZXMpLmVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2ZjLm5hbWUgKyBjb3VudCArICdfJyArIGZjLnJhdy5mZWF0dXJlc1tmXS5nZW9tZXRyeS50eXBlLCBmYy5yYXcuZmVhdHVyZXNbZl1dKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdUaGF0IG5lZWRzIHRvIGJlIGEgZmVhdHVyZSBjb2xsZWN0aW9uIScpO1xuICAgICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdMYXllciBpcyBub3QgYSBGZWF0dXJlQ29sbGVjdGlvbi4nKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ1BsZWFzZSBzZWxlY3QgYSBzaW5nbGUgbGF5ZXIhJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY29tYmluZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbWJpbmVzIHNlbGVjdGVkIGZlYXR1cmVzIGludG8gYSBzaW5nbGUgRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtY29tcHJlc3NcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZmMgPSB7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogW11cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdFtmXS5yYXcudHlwZSAhPT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgICAgICBmYy5mZWF0dXJlcy5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ZdLnJhdyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCBkYy5zZWxlY3Rpb24ubGlzdFtmXS5uYW1lICsgJyB3YXMgbm90IGFkZGVkIGJlY2F1c2UgaXQgaXMgYWxyZWFkeSBhIEZlYXR1cmVDb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFsnbmV3X0ZlYXR1cmVDb2xsZWN0aW9uJywgZmNdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnTm8gbGF5ZXJzIHNlbGVjdGVkIScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vICd2aWV3LWF0dHJpYnV0ZXMnOiB7XG4gICAgLy8gICBtaW5GZWF0dXJlczogMSxcbiAgICAvLyAgIGRlc2NyaXB0aW9uOiAnU2hvdyBhdHRyaWJ1dGUgdGFibGUnLFxuICAgIC8vICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdGgtbGlzdFwiPjwvaT4nLFxuICAgIC8vICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgIGRjLmF0dHIucmVuZGVyKGRjLnNlbGVjdGlvbi5saXN0WzBdKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9LFxuXG4gICAgZHVwbGljYXRlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRHVwbGljYXRlIHNlbGVjdGVkIGxheWVycycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1maWxlcy1vXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6ZHVwbGljYXRlJywgW3RoaXMuc3RhbXBdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW5hbWU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JlbmFtZSBsYXllcicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1wZW5jaWxcIj48L2k+JyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdOYW1lJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsncmVuYW1lJ10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdQbGVhc2Ugc2VsZWN0IDxzdHJvbmc+b25lIGxheWVyPC9zdHJvbmc+LicpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbmFtZScsIFtkYy5zZWxlY3Rpb24ubGlzdFswXSwgcGFyYW1ldGVyc1swXV0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdSZW1vdmUgc2VsZWN0ZWQgbGF5ZXJzJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoLW9cIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW1vdmUnLCBbdGhpcy5zdGFtcF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICAgIGRjLnV0aWwudXBkYXRlU2VhcmNoKCk7XG4gICAgICB9XG4gICAgfSxcblxuXG4gICAgLy9cbiAgICAvLyBFeHRyYSBWaWV3c1xuICAgIC8vXG4gICAgaW5mbzoge1xuICAgICAgdHlwZTogJ2luZm8nLFxuICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBtb3JlIGFib3V0IGRyb3BjaG9wJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWluZm9cIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2Fib3V0Lmh0bWwnO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuZ2VvID0ge1xuICAgIGFsb25nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGxpbmUgYW5kIHJldHVybnMgYSBwb2ludCBhdCBhIHNwZWNpZmllZCBkaXN0YW5jZSBhbG9uZyB0aGUgbGluZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2Rpc3RhbmNlIGFsb25nIHRoZSBsaW5lJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXRzJyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdraWxvbWV0ZXJzJywgJ3JhZGlhbnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2Fsb25nJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5hbG9uZy5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJlemllcjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBsaW5lIGFuZCByZXR1cm5zIGEgY3VydmVkIHZlcnNpb24gYnkgYXBwbHlpbmcgYSBCZXppZXIgc3BsaW5lIGFsZ29yaXRobS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Jlc29sdXRpb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonVGltZSBpbiBtaWxsaXNlY29uZHMgYmV0d2VlbiBwb2ludHMnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwMDAwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnc2hhcnBuZXNzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2EgbWVhc3VyZSBvZiBob3cgY3VydnkgdGhlIHBhdGggc2hvdWxkIGJlIGJldHdlZW4gc3BsaW5lcycsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogIDAuODVcblxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnYmV6aWVyJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5iZXppZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBidWZmZXI6IHtcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ2FsY3VsYXRlcyBhIGJ1ZmZlciBmb3IgaW5wdXQgZmVhdHVyZXMgZm9yIGEgZ2l2ZW4gcmFkaXVzLiBVbml0cyBzdXBwb3J0ZWQgYXJlIG1pbGVzLCBraWxvbWV0ZXJzLCBhbmQgZGVncmVlcy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Rpc3RhbmNlIHRvIGRyYXcgdGhlIGJ1ZmZlci4nLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdCcsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAnZmVldCcsICdraWxvbWV0ZXJzJywgJ21ldGVycycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmJ1ZmZlci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjZW50ZXI6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHBvaW50IGluIHRoZSBjZW50ZXIgb2YgdGhlIGZlYXR1cmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZWN1cnNpdmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRoZSBvcGVyYXRpb24gb24gZWFjaCBmZWF0dXJlIGluIHRoZSBjb2xsZWN0aW9uIG9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4nLFxuICAgICAgICAgIHR5cGU6ICdyZWN1cnNpdmUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAvLyBpZiBydW5uaW5nIHRoZSBvcGVyYXRpb24gcmVjdXJzaXZlbHkgXCJ0cnVlXCJcbiAgICAgICAgaWYgKHBhcmFtc1sxXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdjZW50ZXInLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuY2VudGVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2VudHJvaWQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHBvaW50IGluIHRoZSBjZW50cm9pZCBvZiB0aGUgZmVhdHVyZXMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZWN1cnNpdmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRoZSBvcGVyYXRpb24gb24gZWFjaCBmZWF0dXJlIGluIHRoZSBjb2xsZWN0aW9uIG9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4nLFxuICAgICAgICAgIHR5cGU6ICdyZWN1cnNpdmUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAvLyBpZiBydW5uaW5nIHRoZSBvcGVyYXRpb24gcmVjdXJzaXZlbHkgXCJ0cnVlXCJcbiAgICAgICAgaWYgKHBhcmFtc1sxXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdjZW50cm9pZCcsIHBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5jZW50cm9pZC5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGRlc3RpbmF0aW9uOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2ludD4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBQb2ludCBhbmQgY2FsY3VsYXRlcyB0aGUgbG9jYXRpb24gb2YgYSBkZXN0aW5hdGlvbiBwb2ludCBnaXZlbiBhIGRpc3RhbmNlIGluIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzOyBhbmQgYmVhcmluZyBpbiBkZWdyZWVzLiBUaGlzIHVzZXMgdGhlIEhhdmVyc2luZSBmb3JtdWxhIHRvIGFjY291bnQgZm9yIGdsb2JhbCBjdXJ2YXR1cmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidkaXN0YW5jZSBmcm9tIHRoZSBzdGFydGluZyBwb2ludCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdiZWFyaW5nJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J3JhbmdpbmcgZnJvbSAtMTgwIHRvIDE4MCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogIDBcblxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXRzJyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdraWxvbWV0ZXJzJywgJ3JhZGlhbnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2Rlc3RpbmF0aW9uJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5kZXN0aW5hdGlvbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVudmVsb3BlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXSAvLyBUT0RPOiBtYWtlIHRoaXMgdGFrZSBmZWF0dXJlcyBhbmQgcnVuIGFjcm9zcyBmdWxsIHNlbGVjdGlvblxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYW55IG51bWJlciBvZiBmZWF0dXJlcyBhbmQgcmV0dXJucyBhIHJlY3Rhbmd1bGFyIFBvbHlnb24gdGhhdCBlbmNvbXBhc3NlcyBhbGwgdmVydGljZXMuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5lbnZlbG9wZS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBsb2RlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgZmVhdHVyZSBvciBzZXQgb2YgZmVhdHVyZXMgYW5kIHJldHVybnMgYWxsIHBvc2l0aW9ucyBhcyBwb2ludHMuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5leHBsb2RlLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIG1pZHBvaW50OiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2ludD4nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgdHdvIHBvaW50cyBhbmQgcmV0dXJucyBhIHBvaW50IG1pZHdheSBiZXR3ZWVuIHRoZW0uJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5taWRwb2ludC5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBzaW1wbGlmeToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZTxQb2x5Z29uPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIExpbmVTdHJpbmcgb3IgUG9seWdvbiBhbmQgcmV0dXJucyBhIHNpbXBsaWZpZWQgdmVyc2lvbi4gSW50ZXJuYWxseSB1c2VzIHNpbXBsaWZ5LWpzIHRvIHBlcmZvcm0gc2ltcGxpZmljYXRpb24uJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndG9sZXJhbmNlJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uIDonc2ltcGxpZmljYXRpb24gdG9sZXJhbmNlJyxcbiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgZGVmYXVsdDogMC4xXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnaGlnaCBxdWFsaXR5JyxcbiAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ3doZXRoZXIgb3Igbm90IHRvIHNwZW5kIG1vcmUgdGltZSB0byBjcmVhdGUgYSBoaWdoZXItcXVhbGl0eSBzaW1wbGlmaWNhdGlvbiB3aXRoIGEgZGlmZmVyZW50IGFsZ29yaXRobScsXG4gICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdzaW1wbGlmeScsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuc2ltcGxpZnkuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0aW46IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUcmlhbmd1bGF0ZWQgaXJyZWd1bGFyIG5ldHdvcmssIGludGVycG9sYXRpb24gbWV0aG9kJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi50aW4uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdW5pb246IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvbHlnb24+J11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIHR3byBwb2x5Z29ucyBhbmQgcmV0dXJucyBhIGNvbWJpbmVkIHBvbHlnb24uIElmIHRoZSBpbnB1dCBwb2x5Z29ucyBhcmUgbm90IGNvbnRpZ3VvdXMsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIE11bHRpUG9seWdvbiBmZWF0dXJlLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYudW5pb24uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgd2l0aGluOiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBzZXQgb2YgcG9pbnRzIGFuZCBhIHNldCBvZiBwb2x5Z29ucyBhbmQgcmV0dXJucyB0aGUgcG9pbnRzIHRoYXQgZmFsbCB3aXRoaW4gdGhlIHBvbHlnb25zLiBGaXJzdCBpbnB1dCBzaG91bGQgYmUgdGhlIHBvaW50cy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ1BvaW50cyB0byBjbGlwJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1NlbGVjdCB0aGUgbGF5ZXIgdGhhdCByZXByZXNlbnRzIHRoZSBwb2ludHMgeW91IHdhbnQgdG8gY2xpcC4gVGhpcyBhc3N1bWVzIHRoZSBvdGhlciBsYXllciBpcyB5b3VyIGNsaXBwaW5nIHBvbHlnb24uJyxcbiAgICAgICAgICB0eXBlOiAnc3dpdGNoJ1xuICAgICAgICAgIC8vIGRlZmF1bHQ6IGRjLnNlbGVjdGlvbi5saXN0WzBdXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYud2l0aGluLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuXG4gIGRjLnNlbGVjdGlvbiA9IHt9O1xuICBkYy5zZWxlY3Rpb24ubGlzdCA9IFtdO1xuXG4gIGRjLnNlbGVjdGlvbi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2xheWVyOnNlbGVjdGVkJywgZGMuc2VsZWN0aW9uLmFkZCk7XG4gICAgJChkYykub24oJ2xheWVyOnVuc2VsZWN0ZWQnLCBkYy5zZWxlY3Rpb24ucmVtb3ZlKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlZCcsIF9sYXllclJlbW92ZWQpO1xuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5hZGQgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdC5wdXNoKGxheWVyKTtcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24ucmVtb3ZlID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGluZGV4ID0gbnVsbDtcbiAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcCA9PT0gbGF5ZXIuc3RhbXApIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGRjLnNlbGVjdGlvbi5saXN0LnNwbGljZShpbmRleCwgMSk7IC8vIHJlbW92ZSBvdXRzaWRlIG9mIHRoZSBsb29wIHNvIHdlIGRvbid0IGJyZWFrIG91ciBjb3VudFxuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICQoJy5sYXllci1uYW1lLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgJCgnLm9wZXJhdGlvbi1nZW8nKS5hZGRDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgJCgnLm9wZXJhdGlvbi1nZW8nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIGRjLnNlbGVjdGlvbi5saXN0ID0gW107XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLmlzU2VsZWN0ZWQgPSBmdW5jdGlvbihseXJEYXRhKSB7XG4gICAgcmV0dXJuIEJvb2xlYW4oZHJvcGNob3Auc2VsZWN0aW9uLmxpc3QuaW5kZXhPZihseXJEYXRhKSArIDEpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9sYXllclJlbW92ZWQoZXZlbnQsIHN0YW1wKSB7XG4gICAgZGMuc2VsZWN0aW9uLnJlbW92ZSh7fSwge3N0YW1wOiBzdGFtcH0pO1xuICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcblxuICBkYy5zaG9ydGN1dHMgPSB7fTtcbiAgZGMuc2hvcnRjdXRzLmxpc3QgPSBbXTtcblxuICBkYy5zaG9ydGN1dHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFNlbGVjdCBBbGxcbiAgICBNb3VzZXRyYXAuYmluZChbJ2NvbW1hbmQrYScsICdjdHJsK2EnXSwgZnVuY3Rpb24oZSkge1xuICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdEFsbCgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgLy8gQ2xlYXIgU2VsZWN0aW9uXG4gICAgTW91c2V0cmFwLmJpbmQoWydjb21tYW5kK2JhY2tzcGFjZScsICdjdHJsK2JhY2tzcGFjZSddLCBmdW5jdGlvbihlKSB7XG4gICAgICBkYy5sYXllcmxpc3QuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIC8vIERlbGV0ZSBTZWxlY3RlZCBMYXllcnNcbiAgICBNb3VzZXRyYXAuYmluZChbJ2N0cmwrc2hpZnQrayddLCBmdW5jdGlvbihlKSB7XG4gICAgICBkYy5vcHMuZmlsZS5yZW1vdmUuZXhlY3V0ZSgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgLy8gVW5jaGVjayBMYXllciBWaXNpYmlsaXR5XG4gICAgTW91c2V0cmFwLmJpbmQoWydjb21tYW5kK3BsdXMnLCAnY3RybCtwbHVzJywgJ2NvbW1hbmQrPScsICdjdHJsKz0nXSwgZnVuY3Rpb24oZSkge1xuICAgICAgZHJvcGNob3AubGF5ZXJsaXN0LmNoZWNrQWxsKHRydWUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgTGF5ZXIgVmlzaWJpbGl0eVxuICAgIE1vdXNldHJhcC5iaW5kKFsnY29tbWFuZCstJywgJ2N0cmwrLSddLCBmdW5jdGlvbihlKSB7XG4gICAgICBkYy5sYXllcmxpc3QudW5jaGVja0FsbCh0cnVlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIGRjO1xuXG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcblxuICBkYy51dGlsID0ge307XG5cbiAgZGMudXRpbC5yZW1vdmVGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL1xcLlteLy5dKyQvLCBcIlwiKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwucmVtb3ZlV2hpdGVTcGFjZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgY29uc29sZS5sb2coc3RyaW5nKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwuY29uY2F0ID0gZnVuY3Rpb24oYXJyYXksIHNlcGFyYXRvciwgcHJlZml4KSB7XG4gICAgdmFyIHN0cmluZyA9ICcnO1xuICAgICQoYXJyYXkpLmVhY2goZnVuY3Rpb24oYSkge1xuICAgICAgc3RyaW5nICs9IHNlcGFyYXRvciArIGFycmF5W2FdO1xuICAgIH0pO1xuICAgIHN0cmluZyA9IHByZWZpeCArIHN0cmluZztcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwueGhyID0gZnVuY3Rpb24odXJsLCBjYWxsYmFjaykge1xuICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKHRydWUpO1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICB4aHIub25sb2FkID0gY2FsbGJhY2suYmluZCh0aGlzLCB4aHIpO1xuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oIHhociApIHtcbiAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoeGhyKTtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVW5hYmxlIHRvIGFjY2VzcyAnICsgdXJsLCAyNTAwKTtcbiAgICB9O1xuICAgIHhoci5zZW5kKCk7XG4gIH07XG5cbiAgZGMudXRpbC5nZXQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGNvcnMpIHtcbiAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgZGF0YTogZGF0YSxcbiAgICAgIGRhdGFUeXBlOiAnanNvbidcbiAgICB9O1xuICAgIGlmKCFkYy51dGlsLmNvcnNTdXBwb3J0IHx8IGNvcnMgPT09IGZhbHNlKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gQ09SUyBzdXBwb3J0LCB1c2luZyBKU09OUCcpO1xuICAgICAgcGFyYW1zLmRhdGFUeXBlID0gJ2pzb25wJztcbiAgICB9XG4gICAgZHJvcGNob3AudXRpbC5sb2FkZXIodHJ1ZSk7XG4gICAgdmFyIHhociA9ICQuYWpheCh1cmwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHhocjtcbiAgfTtcblxuICBkYy51dGlsLnJlYWRGaWxlID0gZnVuY3Rpb24oZmlsZSkge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIC8vIGlmIGEgemlwZmlsZSwgYXNzdW1lIHNoYXBlZmlsZSBmb3Igbm93XG4gICAgaWYgKGZpbGUubmFtZS5pbmRleE9mKCcuemlwJykgPiAtMSB8fCBmaWxlLm5hbWUuaW5kZXhPZignLnNocCcpID4gLTEpIHtcbiAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgIGRjLnV0aWwubG9hZGVyKHRydWUpO1xuICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHNocChyZWFkZXIucmVzdWx0KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJQcm9ibGVtYXRpYyBwcm9qZWN0aW9uIC0gXCIsIGVycm9yKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGdlb2pzb24pIHtcbiAgICAgICAgICAgIGRjLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICghZ2VvanNvbikge1xuICAgICAgICAgICAgICByZXR1cm4gZGMubm90aWZ5KCdlcnJvcicsICdJbnZhbGlkIHByb2plY3Rpb24gb3Igc2hhcGVmaWxlLicsIDI1MDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2dlb2pzb24uZmlsZU5hbWUsIGdlb2pzb25dKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUsICdVVEYtOCcpO1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2ZpbGUubmFtZSwgSlNPTi5wYXJzZShyZWFkZXIucmVzdWx0KV0pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb3J3YXJkVG9HZW9Kc29uSW8oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICB2YXIgdXJsID0gXCJodHRwOi8vZ2VvanNvbi5pby8jZGF0YT1kYXRhOmFwcGxpY2F0aW9uL2pzb24sXCIgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgd2luZG93LmxvY2F0aW9uID0gdXJsO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmpzb25Gcm9tVXJsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKVxuICAgICAgICAgIC5zcGxpdCgvKCY/Z2lzdD18Jj91cmw9KS9nKVxuICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQubGVuZ3RoID4gMDtcbiAgICAgICAgICB9KTtcblxuICAgIHZhciByZXN1bHQgPSB7fTtcblxuICAgIHF1ZXJ5LmZvckVhY2goZnVuY3Rpb24ocGFydCwgaSkge1xuICAgICAgaWYgKGkgPT09IDAgfHwgaSAlIDIgPT09IDApIHtcbiAgICAgICAgdmFyIGtleSA9IHBhcnQucmVwbGFjZSgvJnw9L2csICcnKTtcblxuICAgICAgICBpZiAoIXJlc3VsdFtrZXldKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdFtrZXldLnB1c2goZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5W2kgKyAxXSkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBkYy51dGlsLnVwZGF0ZVNlYXJjaCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsYXllcnMgPSBbXTtcblxuICAgIE9iamVjdC5rZXlzKGRjLmxheWVycy5saXN0KS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICAvKlxuICAgICAgICoqIElmIGEgbGF5ZXIgaGFzIGEgdHlwZSBhbmQgVVJMIChhIGdpc3Qgb3IgZXh0ZXJuYWwgR2VvSlNPTiBsaW5rKSxcbiAgICAgICAqKiBhbmQgd2UgaGF2ZW4ndCByZWNvcmVkIHRoaXMgdHlwZS11cmwgY29tYm8gYWxyZWFkeSwgYWRkIGl0IHRvIHRoZVxuICAgICAgICoqIHVuaXF1ZSBsaXN0LiBUaGUgbGFzdCBjaGVjayBpcyBuZWVkZWQgdG8gYWNjb3VudCBmb3IgZ2lzdHMgd2l0aFxuICAgICAgICoqIG11bHRpcGxlIGxheWVycy5cbiAgICAgICAqL1xuICAgICAgaWYgKGRjLmxheWVycy5saXN0W2xheWVyXS5sdHlwZSAmJiBkYy5sYXllcnMubGlzdFtsYXllcl0udXJsICYmIGxheWVycy5pbmRleE9mKGRjLmxheWVycy5saXN0W2xheWVyXS5sdHlwZSArICc9JyArIGRjLmxheWVycy5saXN0W2xheWVyXS51cmwpIDwgMCkge1xuICAgICAgICBsYXllcnMucHVzaChkYy5sYXllcnMubGlzdFtsYXllcl0ubHR5cGUgKyAnPScgKyBkYy5sYXllcnMubGlzdFtsYXllcl0udXJsKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBzZWFyY2ggPSBsYXllcnMubGVuZ3RoID8gICgnPycgKyBsYXllcnMuam9pbignJicpKSA6ICcvJztcblxuICAgIC8vIE9ubHkgdXBkYXRlIHRoZSBVUkkgaWYgYW55dGhpbmcgaGFzIGNoYW5nZWRcbiAgICBpZiAoc2VhcmNoICE9PSB3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgc2VhcmNoKTtcbiAgICB9XG5cbiAgfTtcblxuICBkYy51dGlsLmV4ZWN1dGVVcmxQYXJhbXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGF0YSA9IGRjLnV0aWwuanNvbkZyb21VcmwoKTtcblxuICAgIC8vIGxvYWQgZ2lzdFxuICAgIGlmIChkYXRhLmdpc3QgJiYgZGF0YS5naXN0Lmxlbmd0aCkge1xuICAgICAgJChkYXRhLmdpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1naXN0J10uZ2V0KHt9LCAnbG9hZC1naXN0JywgW2RhdGEuZ2lzdFtpXV0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gbG9hZFxuICAgIGlmIChkYXRhLnVybCAmJiBkYXRhLnVybC5sZW5ndGgpIHtcbiAgICAgICQoZGF0YS51cmwpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC11cmwnXS5nZXQoe30sICdsb2FkLXVybCcsIFtkYXRhLnVybFtpXV0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGRjLnV0aWwuZ2V0RmlsZUV4dGVuc2lvbiA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gICAgcmV0dXJuIGZpbGVuYW1lLnN1YnN0cihmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpKzEpO1xuICB9O1xuXG4gIGRjLnV0aWwuZ2V0QkJveCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBib3VuZHMgPSBkYy5tYXAubS5nZXRCb3VuZHMoKSxcbiAgICAgICAgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCksXG4gICAgICAgIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpO1xuICAgIC8vIHdlIHNob3VsZCBwcm9iYWJseSBjaGVjayB0aGUgc2l6ZSBoZXJlP1xuICAgIC8vIG5vZGUoNTcuNywxMS45LDU3LjgsMTIuMClcbiAgICByZXR1cm4gc3cubGF0KycsJytzdy5sbmcrJywnK25lLmxhdCsnLCcrbmUubG5nO1xuICB9O1xuXG4gIGRjLnV0aWwuZ2V0RXNyaUJCb3ggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm91bmRzID0gZGMubWFwLm0uZ2V0Qm91bmRzKCksXG4gICAgICAgIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpLFxuICAgICAgICBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTtcbiAgICByZXR1cm4gc3cubG5nKycsJytzdy5sYXQrJywnK25lLmxuZysnLCcrbmUubGF0O1xuICB9O1xuXG4gIGRjLnV0aWwudW5jb2xsZWN0ID0gZnVuY3Rpb24oZmMpIHtcbiAgICByZXR1cm4gZmMuZmVhdHVyZXNbMF07XG4gIH07XG5cbiAgZGMudXRpbC5lc3JpMmdlbyA9IGZ1bmN0aW9uKGFyY2pzb24pIHtcbiAgICByZXR1cm4gdG9HZW9KU09OKGFyY2pzb24pO1xuICB9O1xuXG4gIGRjLnV0aWwuZXhlY3V0ZUZDID0gZnVuY3Rpb24oZmMsIG9wZXJhdGlvbiwgcGFyYW1zKSB7XG5cbiAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuICAgIHZhciBuZXdGQyA9IHt9O1xuICAgIG5ld0ZDLnR5cGUgPSAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIG5ld0ZDLmZlYXR1cmVzID0gW107XG5cbiAgICBmb3IgKHZhciBmID0gMDsgZiA8IGZjLmZlYXR1cmVzLmxlbmd0aDsgZisrKSB7XG4gICAgICBuZXdQYXJhbXNbMF0gPSBmYy5mZWF0dXJlc1tmXTtcbiAgICAgIHZhciBmZWF0dXJlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmVhdHVyZSA9IHR1cmZbb3BlcmF0aW9uXS5hcHBseShudWxsLCBuZXdQYXJhbXMpO1xuICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXMgPSBmYy5mZWF0dXJlc1tmXS5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCBlcnIpO1xuICAgICAgfVxuICAgICAgbmV3RkMuZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3RkM7XG5cbiAgfTtcblxuICBkYy51dGlsLmxvYWRlciA9IGZ1bmN0aW9uKHllcykge1xuICAgIHZhciBsb2FkZXIgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1sb2FkZXInKTtcblxuICAgIGlmICh5ZXMpIHtcbiAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZHJvcGNob3AtbG9hZGluZycpO1xuICAgICAgJCgnYm9keScpLmFwcGVuZChsb2FkZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRpbmcnKTtcbiAgICAgICQoJy5kcm9wY2hvcC1sb2FkZXInKS5hZGRDbGFzcygnbG9hZGVyLWNvbXBsZXRlJykuZmFkZU91dCgyMDAwLCBmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGRjLnV0aWwuY29yc1N1cHBvcnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJ1hNTEh0dHByZXF1ZXN0JyBpbiB3aW5kb3cgJiYgJ3dpdGhDcmVkZW50aWFscycgaW4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
