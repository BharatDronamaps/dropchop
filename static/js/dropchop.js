var dropchop=function(e){return e=e||{},e.version="0.2.3",e.init=function(t){t||e.util.error("No options provided in dropchop.init()"),e.options=t,$(t.id).length||e.util.error("Element with options.id does not exist."),e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.menus.geo.init(),e.menus.left.init(),e.menus.layerContextMenu.init(),e.form.init(),e.shortcuts.init(),location.search.length&&e.util.executeUrlParams()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},radio:function(e){var t=$("<div>").attr("class","radioGroup"),a=e.name.replace(/\s/g,"");return $(e.options).each(function(r){var o=e.options[r],n=o.replace(/\s/g,""),i=$("<label>").addClass("sub-label").attr("for",n),s=$("<input>").attr("type","radio").attr("id",n).attr("name",a).addClass("radio").val(o);o===e["default"]&&s.prop("defaultChecked",!0),i.append(o),i.appendTo(t),s.appendTo(t)}),t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input id="allCheckboxes" type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),s=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),l=$('<button title="More Options">').addClass("layer-action layer-dropdown").html('<i class="fa fa-ellipsis-h"></i>');s.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;if(!i)return;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),s=i.parent().attr("data-stamp");t===r&&(a=e),t===s&&(o=e)}),a>o?$(".layer-element").each(function(t){t>=o&&t<=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){t<o&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey||t.ctrlKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),n.on("contextmenu",function(t){e.menus.layerContextMenu.createLayerContextMenu(this,t.offsetX,t.pageY),t.preventDefault()}),l.on("click",function(t){return e.menus.layerContextMenu.createLayerContextMenu($(this).siblings(".layer-name"),t.pageX-40,t.pageY),t.preventDefault(),!1}),n.on("dblclick",function(t){e.ops.file.extent.execute()}),o.append(n),o.append(s),o.append(i),o.append(l),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show(),$(e).trigger("layerlist:added",n)},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.selectAll=function(){$(".layer-element").each(function(t){e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})},e.layerlist.checkAll=function(t){for(var r in e.layers.list){var o=e.layers.list[r];t&&!dropchop.selection.isSelected(o)||a(e.layers.list[r].stamp,!0)}},e.layerlist.uncheckAll=function(t){for(var r in e.layers.list){var o=e.layers.list[r];t&&!dropchop.selection.isSelected(o)||a(o.stamp,!1)}},e.layerlist.toggleAll=function(t){document.getElementById("allCheckboxes").checked?e.layerlist.checkAll():e.layerlist.uncheckAll()},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r,o,n){"Topology"===r.type&&(r=topojson.client.feature(r,r.objects[Object.keys(r.objects)[0]]));var i=e.layers.makeLayer(a,r);e.layers.list[i.stamp]=i,o&&n&&(e.layers.list[i.stamp].ltype=o,e.layers.list[i.stamp].url=n),e.notify("success","<strong>"+i.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[i]),o&&n&&e.util.updateSearch()},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),e.map.baseLayers=L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer),$(e.map.m).on("locationfound",function(t){var a=t.originalEvent;e.map.m.fitBounds(a.bounds);var r={type:"Feature",geometry:{type:"Point",coordinates:[a.latlng.lng,a.latlng.lat]},properties:{title:"There You Are","marker-color":"#207178","marker-symbol":"heart"}};$(e).trigger("file:added",["your location",r])}),$(e.map.m).on("locationerror",function(){e.notify("error","There was a problem finding your location.",3e3)})}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(){var e=$(".operation-geo").sort(function(e,t){return $(t).data("operation")<$(e).data("operation")?1:-1});e.filter(function(e,t){if(!$(t).prop("disabled"))return t}).appendTo(".operations-geo"),e.filter(function(e,t){if($(t).prop("disabled"))return t}).appendTo(".operations-geo"),$(".operations-geo").scrollTop(0)}return e=e||{},e.menus=e.menus||{},e.menus.geo=e.menus.geo||{},e.menus.geo.init=function(){var a=$("<div>").addClass("operations-geo");e.$elem.append(a),$(e).on("layer:selected",e.menus.geo.geoCheck),$(e).on("layer:unselected",e.menus.geo.geoCheck),$(e).on("operation:geo",e.menus.geo.geoExecute);for(var r in e.ops.geo){var o=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+r+"</h4><p>"+e.ops.geo[r].description+"</p>").prop("disabled",!0).attr("data-operation",r);o.on("click",t),a.append(o)}},e.menus.geo.geoExecute=function(t,a,r){var o=e.menus.geo.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.menus.geo.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){$.inArray("switch-"+e.selection.list[t].stamp,a)===-1?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.menus.geo.geoCheck=function(t,r){function o(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function n(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var i in e.ops.geo){var s=e.ops.geo[i];if(e.selection.list.length>s.maxFeatures||e.selection.list.length<s.minFeatures)o(i);else for(var l=0;l<e.selection.list.length;l++){var c=e.selection.list[l];$.inArray(c.type,s.requirements.types)>-1||s.requirements.generalFeature===!0?n(i):o(i)}}a()},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.menus=e.menus||{},e.menus.layerContextMenu=e.menus.layerContextMenu||{},e.menus.layerContextMenu.init=function(){$("html").bind("click",function(t){e.menus.layerContextMenu.removeLayerContextMenus()})},e.menus.layerContextMenu.createLayerContextMenu=function(a,r,o){function n(){var e=10,t=$(window).height(),a=l.height();if(o+a<t)return{top:o,left:r};var n=o+a-t;return{top:o-n-e,left:r}}a instanceof jQuery||(a=$(a)),e.menus.layerContextMenu.removeLayerContextMenus();var i=a.parent(),s=e.layers.list[i.attr("data-stamp")];dropchop.selection.isSelected(s)||a.trigger("click");var l=$("<div>").addClass("context-menu"),c=$("<ul>");l.append(c);var p={title1:"Layer",rename:e.ops.file.rename,duplicate:e.ops.file.duplicate,remove:e.ops.file.remove,title2:"Geo",extent:e.ops.file.extent,expand:e.ops.file.expand,combine:e.ops.file.combine};for(var u in p){var d=p[u];if("string"==typeof d||d instanceof String)c.append($('<li class="title"><h4>'+d+"</h4></li>"));else{var f=$("<li>").addClass("menu-action").html('<div class="icon">'+d.icon+'</div><div class="description">'+d.description+"</div>").attr("data-operation",u).attr("data-tooltip",d.description);(d.minFeatures>dropchop.selection.list.length||d.maxFeatures<dropchop.selection.list.length)&&f.addClass("operation-inactive"),f.on("click",t),c.append(f)}}l.addClass("hidden"),i.parent().append(l);var m=n();l.css(m),l.removeClass("hidden")},e.menus.layerContextMenu.removeLayerContextMenus=function(){$(".context-menu").remove()},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.menus=e.menus||{},e.menus.left=e.menus.left||{},e.menus.left.init=function(){function a(a){var r=$("<button>").addClass("menu-action").html(e.ops.file[a].icon||"!").attr("data-operation",a).attr("data-tooltip",e.ops.file[a].description);return"info"===e.ops.file[a].type&&r.addClass("dropchop-info"),r.on("click",t),r}$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:load-arcgis",e.ops.file["load-arcgis"].get),$(e).on("operation:file:load-custom-base",e.ops.file["load-custom-base"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback),e.menus.left.setup=[{name:"import",icon:'<i class="fa fa-plus"></i>',actions:["upload","load-url","load-gist","load-overpass","load-arcgis","load-custom-base","location"]},{name:"Save",icon:'<i class="fa fa-floppy-o"></i>',actions:["save-geojson","save-topojson","save-shapefile"]},"info"];for(var r=$("<div>").addClass("dropchop-menu-left"),o=e.menus.left.setup,n=0;n<o.length;n++){var i=o[n];if("object"!=typeof o[n])if("break"===e.ops.file[i].type){var s=$("<div>").addClass("menu-action-break");r.append(s)}else r.append(a(i));else{var l=$("<div>").addClass("menu-action menu-collapse").html(o[n].icon);"import"===o[n].name&&l.addClass("menu-import");for(var c=$("<div>").addClass("menu-collapse-inner"),p=0;p<o[n].actions.length;p++){var u=o[n].actions[p];c.append(a(u))}l.append(c),r.append(l)}}e.$elem.append(r)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);if("close"===r){var n=$("<button>").addClass("notification-close").prop("type","button").html('<i class="fa fa-times"></i>');n.on("click",function(e){$(this).parent().remove()}),$(o).append(n),$(e.$elem).append(o)}else $(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r,"url",t.responseURL])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content),"gist",t.responseURL.split("/")[t.responseURL.split("/").length-1]])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-arcgis":{description:"Query an ArcGIS Server Feature Service",icon:'<i class="fa fa-globe"></i>',_temp:{layerName:"arcjson"},parameters:[{name:"feature service",description:"Enter URL to ArcGIS Feature Service (ex. http://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/0)",type:"text","default":"http://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/0"},{name:"where",description:"A where clause for the query filter. Any legal SQL where clause operating on the fields in the layer is allowed.",type:"text","default":"1=1"},{name:"request type",description:"select JSONP if you receive cross-origin resource sharing errors",type:"radio","default":"CORS",options:["CORS","JSONP"]},{name:"limit to map",description:"only load features within current map view",type:"checkbox"}],execute:function(){$(e).trigger("form:file",["load-arcgis"])},checkJsonp:function(e){return"JSONP"!==e[2]},get:function(t,a,r){e.ops.file["load-arcgis"]._temp.layerName=r[0];var o="-180,-90,180,90";r[3]&&(o=e.util.getEsriBBox());var n=r[0]+"/query/",i={f:"json",inSR:4326,outSR:4326,geometry:o,where:r[1],outfields:"*"},s=e.ops.file["load-arcgis"].checkJsonp(r);e.util.get(n,i,s).done(function(t){e.ops.file["load-arcgis"].callback(t)}).fail(function(t,a,r){dropchop.util.loader(!1),e.notify("Error",a,r)})},callback:function(t){dropchop.util.loader(!1);var a=e.util.esri2geo(t);t.features.length<1?e.notify("info","No features found in your query."):($(e).trigger("file:added",[e.ops.file["load-arcgis"]._temp.layerName,a]),e.notify("success","Found <strong>"+t.features.length+" features</strong> from the ArcGIS Service"))}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Enter a search query in the overpass-turbo wizard syntax. Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_turbo/Wizard" target="_blank">the supported features</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox(),n=overpassWizard(r[0]);return n===!1?e.notify("error","Can't create overpass query for this search input."):void overpassWizardExpand(n,o,function(t,a){return t?e.notify("error","Error while expanding overpass query: "+t):void e.util.xhr("http://overpass-api.de/api/interpreter?data="+encodeURIComponent(a),e.ops.file["load-overpass"].callback)})},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r,{flatProperties:!0});r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},location:{description:"Add your location as a layer",icon:'<i class="fa fa-crosshairs"></i>',execute:function(){navigator.geolocation?e.map.m.locate():e.notify("error","Geolocation is not available on this browser.",4e3)}},"load-custom-base":{description:"Add custom Mapbox basemap",icon:'<i class="fa fa-map-o"></i>',_temp:"",parameters:[{name:"Map ID",description:"Map ID",type:"text","default":"username.id"},{name:"Custom Base Layer Name",description:"Name of the custom baselayer added.",type:"text","default":"Basemap name"}],execute:function(){$(e).trigger("form:file",["load-custom-base"])},get:function(t,a,r){e.ops.file["load-custom-base"]._temp=r[0],e.ops.file["load-custom-base"]._temp_1=r[1];var o="https://api.mapbox.com/v4/"+e.ops.file["load-custom-base"]._temp+".html?access_token="+e.map.token;e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=e.map.baseLayers.addBaseLayer(L.mapbox.tileLayer(e.ops.file["load-custom-base"]._temp),e.ops.file["load-custom-base"]._temp_1);L.mapbox.tileLayer(r).addTo(e.map.m)}else e.notify("error",t.status+": could not retrieve base map. Please check your Map ID")}},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-topojson":{minFeatures:1,description:"Save as TopoJSON",icon:'<i class="fa fa-object-ungroup"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(topojson.topology({collection:e.selection.list[t].raw},{"property-transform":function(e){return e.properties}})),r="dropchop_"+e.selection.list[t].name+".topojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},duplicate:{minFeatures:1,description:"Duplicate selected layers",icon:'<i class="fa fa-files-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:duplicate",[this.stamp])}),e.selection.clear()}},rename:{minFeatures:1,maxFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear(),e.util.updateSearch()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){
var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e.selection.isSelected=function(e){return Boolean(dropchop.selection.list.indexOf(e)+1)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.shortcuts={},e.shortcuts.list=[],e.shortcuts.init=function(){Mousetrap.bind(["command+a","ctrl+a"],function(t){return e.layerlist.selectAll(),!1}),Mousetrap.bind(["command+backspace","ctrl+backspace"],function(t){return e.layerlist.clearSelection(),!1}),Mousetrap.bind(["ctrl+shift+k"],function(t){return e.ops.file.remove.execute(),!1}),Mousetrap.bind(["command+plus","ctrl+plus","command+=","ctrl+="],function(e){return dropchop.layerlist.checkAll(!0),!1}),Mousetrap.bind(["command+-","ctrl+-"],function(t){return e.layerlist.uncheckAll(!0),!1})},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^\/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.get=function(t,a,r){var o={data:a,dataType:"json"};e.util.corsSupport&&r!==!1||(console.log("No CORS support, using JSONP"),o.dataType="jsonp"),dropchop.util.loader(!0);var n=$.ajax(t,o);return n},e.util.readFile=function(t){var a=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(a.readAsArrayBuffer(t),e.util.loader(!0),a.onloadend=function(t){shp(a.result)["catch"](function(e){console.log("Problematic projection - ",e)}).then(function(t){return e.util.loader(!1),t?void $(e).trigger("file:added",[t.fileName,t]):e.notify("error","Invalid projection or shapefile.",2500)})}):(a.readAsText(t,"UTF-8"),a.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(a.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1).split(/(&?gist=|&?url=)/g).filter(function(e){return e.length>0}),t={};return e.forEach(function(a,r){if(0===r||r%2===0){var o=a.replace(/&|=/g,"");t[o]||(t[o]=[]),t[o].push(decodeURIComponent(e[r+1]))}}),t},e.util.updateSearch=function(){var t=[];Object.keys(e.layers.list).forEach(function(a){e.layers.list[a].ltype&&e.layers.list[a].url&&t.indexOf(e.layers.list[a].ltype+"="+e.layers.list[a].url)<0&&t.push(e.layers.list[a].ltype+"="+e.layers.list[a].url)});var a=t.length?"?"+t.join("&"):"/";a!==window.location.search&&window.history.pushState(null,null,a)},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.getEsriBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lng+","+a.lat+","+r.lng+","+r.lat},e.util.uncollect=function(e){return e.features[0]},e.util.esri2geo=function(e){return toGeoJSON(e)},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var s;try{s=turf[a].apply(null,o),s.properties=t.features[i].properties||{}}catch(l){e.notify("error",l)}n.features.push(s)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.corsSupport=function(){return"XMLHttprequest"in window&&"withCredentials"in new window.XMLHttpRequest},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibWVudXMuZ2VvLmRyb3BjaG9wLmpzIiwibWVudXMubGF5ZXItY29udGV4dC1tZW51LmRyb3BjaG9wLmpzIiwibWVudXMubGVmdC5kcm9wY2hvcC5qcyIsIm5vdGlmeS5kcm9wY2hvcC5qcyIsIm9wcy5maWxlLmRyb3BjaG9wLmpzIiwib3BzLmdlby5kcm9wY2hvcC5qcyIsInNlbGVjdGlvbi5kcm9wY2hvcC5qcyIsInNob3J0Y3V0cy5kcm9wY2hvcC5qcyIsInV0aWwuZHJvcGNob3AuanMiXSwibmFtZXMiOlsiZHJvcGNob3AiLCJkYyIsInZlcnNpb24iLCJpbml0Iiwib3B0cyIsInV0aWwiLCJlcnJvciIsIm9wdGlvbnMiLCIkIiwiaWQiLCJsZW5ndGgiLCIkZWxlbSIsImxheWVycyIsInByZXBhcmUiLCJtYXAiLCJzZWxlY3Rpb24iLCJsYXllcmxpc3QiLCJkcm9wem9uZSIsIm1lbnVzIiwiZ2VvIiwibGVmdCIsImxheWVyQ29udGV4dE1lbnUiLCJmb3JtIiwic2hvcnRjdXRzIiwibG9jYXRpb24iLCJzZWFyY2giLCJleGVjdXRlVXJsUGFyYW1zIiwiYm9vbSIsImNvbnNvbGUiLCJsb2ciLCJfZXZlbnRzIiwiJGNvbnRhaW5lciIsIm9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRoaXMiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZmlsZXMiLCJvcmlnaW5hbEV2ZW50IiwiZGF0YVRyYW5zZmVyIiwiZWFjaCIsImkiLCJyZWFkRmlsZSIsImZpbGUiLCJvcGVyYXRpb24iLCJjcmVhdGUiLCJvcHMiLCJuYW1lIiwiaW5mbyIsInRyaWdnZXIiLCJyZW1vdmUiLCIkaHRtbCIsImF0dHIiLCJ0ZXh0IiwiYXBwZW5kVG8iLCJkZXNjcmlwdGlvbiIsInBhcmFtZXRlcnMiLCJwIiwiY3JlYXRlUGFyYW0iLCIkc3VibWl0IiwiJGNhbmNlbCIsImRhdGEiLCJzZXJpYWxpemVBcnJheSIsInB1c2giLCJ2YWx1ZSIsImFwcGVuZCIsInBhcmFtIiwiJGlucHV0IiwiJGxhYmVsIiwiJGZpZWxkIiwiaW5wdXRzIiwidHlwZSIsImh0bWwiLCJudW1iZXIiLCIkaSIsInNlbGVjdCIsIiRvcHQiLCJjaGVja2JveCIsInJhZGlvIiwiZ3JvdXBOYW1lIiwicmVwbGFjZSIsIm9wdCIsIm9wdElkIiwiJGxibCIsInZhbCIsInByb3AiLCJzd2l0Y2giLCJsaXN0Iiwic3RhbXAiLCJyZWN1cnNpdmUiLCIkbGJsMSIsIiRvcHQxIiwiJGxibDIiLCIkb3B0MiIsImxheWVyVHlwZUljb24iLCJpY29uIiwiZWxlbVRvZ2dsZSIsImJvb2wiLCJmaW5kIiwiZWxlbXMiLCJ0YXJnZXQiLCJoYXNDbGFzcyIsImNsZWFyIiwibGlIZWxwZXIiLCJ0b2dnbGVMYXllcnMiLCJ0b2dnbGVBbGwiLCJhZGRMYXllckxpc3RJdGVtIiwicmVtb3ZlTGF5ZXJMaXN0SXRlbSIsInJlbmFtZSIsIm5ld05hbWUiLCJsYXllciIsImxheWVybGlzdEl0ZW0iLCJsYXllckRpdiIsImRlbGF5IiwicXVldWUiLCJuZXh0IiwibGF5ZXJUeXBlIiwiY2hlY2tlZCIsImRyb3Bkb3duIiwic2hpZnRLZXkiLCJ0b0NvdW50IiwiZnJvbUNvdW50IiwidG8iLCJmcm9tIiwiX2xhc3RTZWxlY3RlZCIsImUiLCJjaGVjayIsInRvU3RhbXAiLCJwYXJlbnQiLCJmcm9tU3RhbXAiLCJsIiwic2VsZWN0TGF5ZXIiLCJtZXRhS2V5IiwiY3RybEtleSIsInNlbGVjdFRvZ2dsZSIsImNsZWFyU2VsZWN0aW9uIiwiY3JlYXRlTGF5ZXJDb250ZXh0TWVudSIsIm9mZnNldFgiLCJwYWdlWSIsInNpYmxpbmdzIiwicGFnZVgiLCJleHRlbnQiLCJleGVjdXRlIiwiaGlkZSIsInNob3ciLCIkaXRlbSIsImx5ciIsInNlbGVjdEFsbCIsImNoZWNrQWxsIiwibXVzdEJlU2VsZWN0ZWQiLCJpc1NlbGVjdGVkIiwidW5jaGVja0FsbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJmYWRlT3V0IiwiZ2V0VHlwZSIsImdqIiwiZ2VvbWV0cnkiLCJhZGQiLCJkdXBsaWNhdGUiLCJibG9iIiwibHR5cGUiLCJ1cmwiLCJ0b3BvanNvbiIsImNsaWVudCIsImZlYXR1cmUiLCJvYmplY3RzIiwiT2JqZWN0Iiwia2V5cyIsIm1ha2VMYXllciIsIm5vdGlmeSIsInVwZGF0ZVNlYXJjaCIsImVyciIsInJhdyIsImpzb24iLCJnZW9qc29uIiwiZmwiLCJMIiwibWFwYm94IiwiZmVhdHVyZUxheWVyIiwicmVtb3ZlRmlsZUV4dGVuc2lvbiIsImZlYXR1cmVsYXllciIsImRhdGVBZGRlZCIsIkRhdGUiLCJfbWFrZU1hcCIsInRva2VuIiwiYWNjZXNzVG9rZW4iLCJtIiwiem9vbUNvbnRyb2wiLCJ3b3JsZENvcHlKdW1wIiwic2V0VmlldyIsImNvbnRyb2wiLCJ6b29tIiwicG9zaXRpb24iLCJhZGRUbyIsImdlb2NvZGVyQ29udHJvbCIsImJhc2VMYXllcnMiLCJNYXBib3ggU3RyZWV0cyIsInRpbGVMYXllciIsIk1hcGJveCBPdXRkb29ycyIsIk1hcGJveCBMaWdodCIsIk1hcGJveCBEYXJrIiwiTWFwYm94IFNhdGVsbGl0ZSIsImNvbGxhcHNlZCIsImxheWVyZ3JvdXAiLCJhZGRMYXllciIsImhpZGVMYXllciIsInNob3dMYXllciIsImZpdEJvdW5kcyIsImJvdW5kcyIsImNvb3JkaW5hdGVzIiwibGF0bG5nIiwibG5nIiwibGF0IiwicHJvcGVydGllcyIsInRpdGxlIiwibWFya2VyLWNvbG9yIiwibWFya2VyLXN5bWJvbCIsInJlbW92ZUxheWVyIiwiY291bnQiLCJlYWNoTGF5ZXIiLCJjb250ZW50IiwiYmluZFBvcHVwIiwicG9wdXAiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImF1dG9QYW5QYWRkaW5nIiwiY2xhc3NOYW1lIiwic2V0Q29udGVudCIsIl9oYW5kbGVCdG5DbGljayIsIl9zb3J0R2VvIiwiYWxwaGEiLCJzb3J0IiwiYSIsImIiLCJmaWx0ZXIiLCJkIiwic2Nyb2xsVG9wIiwiZ2VvQ29udGFpbmVyIiwiZ2VvQ2hlY2siLCJnZW9FeGVjdXRlIiwiZ2VvT3AiLCJnZW9CdG4iLCJwcmVwIiwicHJlcGFyZVR1cmZQYXJhbXMiLCJyZXN1bHQiLCJwYXJhbXMiLCJnZW9tcyIsIm5hbWVBcnJheSIsImluQXJyYXkiLCJ1bnNoaWZ0IiwibWVyZ2UiLCJjb25jYXQiLCJ0dXJuSXRPZmYiLCJvcCIsImJ0biIsInR1cm5JdE9uIiwibyIsIm1heEZlYXR1cmVzIiwibWluRmVhdHVyZXMiLCJ4Iiwic2VsIiwicmVxdWlyZW1lbnRzIiwidHlwZXMiLCJnZW5lcmFsRmVhdHVyZSIsImJpbmQiLCJyZW1vdmVMYXllckNvbnRleHRNZW51cyIsIiRsYXllck5hbWVEaXYiLCJ4UG9zIiwieVBvcyIsIl9jYWxjdWxhdGVNZW51TG9jYXRpb24iLCJidWZmZXIiLCJ3aW5kb3dIZWlnaHQiLCJ3aW5kb3ciLCJoZWlnaHQiLCJtZW51SGVpZ2h0IiwibWVudSIsInRvcCIsImRpZmZlcmVuY2UiLCJqUXVlcnkiLCJseXJEYXRhIiwibWVudUxpc3QiLCJtZW51SXRlbXMiLCJ0aXRsZTEiLCJ0aXRsZTIiLCJleHBhbmQiLCJjb21iaW5lIiwibWVudUl0ZW0iLCJpdGVtIiwiU3RyaW5nIiwiZmlsZUJ0biIsImNzcyIsImJ1aWxkTWVudUJ1dHRvbiIsImFjdGlvbiIsImJ1dHRvbiIsImdldCIsImNhbGxiYWNrIiwic2V0dXAiLCJhY3Rpb25zIiwibGVmdE1lbnUiLCIkYnJlYWtTcGFjZSIsImNvbGxhcHNlQnRuIiwiY29sbGFwc2VJbm5lciIsImFjdG4iLCJ0aW1lIiwibm90ZSIsIiRjbG9zZSIsInNldFRpbWVvdXQiLCJ1cGxvYWQiLCIkYmxpbmRJbnB1dCIsImNsaWNrIiwibG9hZC11cmwiLCJkZWZhdWx0IiwieGhyIiwieGhyRXZlbnQiLCJsb2FkZXIiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZVVSTCIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwibG9hZC1naXN0IiwiZ2lzdCIsInNwbGl0IiwiZiIsImZpbGVuYW1lIiwibG9hZC1hcmNnaXMiLCJfdGVtcCIsImxheWVyTmFtZSIsImNoZWNrSnNvbnAiLCJiYm94IiwiZ2V0RXNyaUJCb3giLCJ1cmxQYXJhbXMiLCJpblNSIiwib3V0U1IiLCJ3aGVyZSIsIm91dGZpZWxkcyIsImNvcnMiLCJkb25lIiwiZmFpbCIsImpxWGhyIiwidGV4dFN0YXR1cyIsImVzcmkyZ2VvIiwiZmVhdHVyZXMiLCJsb2FkLW92ZXJwYXNzIiwiZ2V0QkJveCIsIm92ZXJwYXNzUXVlcnkiLCJvdmVycGFzc1dpemFyZCIsIm92ZXJwYXNzV2l6YXJkRXhwYW5kIiwiZXhwYW5kZWRPdmVycGFzc1F1ZXJ5IiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwib3NtdG9nZW9qc29uIiwiZmxhdFByb3BlcnRpZXMiLCJlbGVtZW50cyIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwibG9jYXRlIiwibG9hZC1jdXN0b20tYmFzZSIsIl90ZW1wXzEiLCJuZXdMYXllciIsImFkZEJhc2VMYXllciIsInNhdmUtZ2VvanNvbiIsImNyZWF0ZXNMYXllciIsInN0cmluZ2lmeSIsInNhdmVBcyIsIkJsb2IiLCJzYXZlLXRvcG9qc29uIiwidG9wb2xvZ3kiLCJjb2xsZWN0aW9uIiwicHJvcGVydHktdHJhbnNmb3JtIiwic2F2ZS1zaGFwZWZpbGUiLCJmb2xkZXIiLCJwb2ludCIsInBvbHlnb24iLCJsaW5lIiwic2hwd3JpdGUiLCJkb3dubG9hZCIsImV4dGVuZCIsImdldEJvdW5kcyIsImZjIiwiRXJyb3IiLCJhbG9uZyIsImV4ZWN1dGVGQyIsInR1cmYiLCJhcHBseSIsImJlemllciIsImNlbnRlciIsImNlbnRyb2lkIiwiZGVzdGluYXRpb24iLCJlbnZlbG9wZSIsImV4cGxvZGUiLCJtaWRwb2ludCIsInNpbXBsaWZ5IiwidGluIiwidW5pb24iLCJ3aXRoaW4iLCJfbGF5ZXJSZW1vdmVkIiwiaW5kZXgiLCJzcGxpY2UiLCJCb29sZWFuIiwiaW5kZXhPZiIsIk1vdXNldHJhcCIsInN0cmluZyIsInJlbW92ZVdoaXRlU3BhY2UiLCJhcnJheSIsInNlcGFyYXRvciIsInByZWZpeCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ubG9hZCIsIm9uZXJyb3IiLCJzZW5kIiwiZGF0YVR5cGUiLCJjb3JzU3VwcG9ydCIsImFqYXgiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwicmVhZEFzQXJyYXlCdWZmZXIiLCJvbmxvYWRlbmQiLCJzaHAiLCJ0aGVuIiwiZmlsZU5hbWUiLCJyZWFkQXNUZXh0IiwianNvbkZyb21VcmwiLCJxdWVyeSIsInN1YnN0ciIsImZvckVhY2giLCJwYXJ0Iiwia2V5IiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJnZXRGaWxlRXh0ZW5zaW9uIiwic3ciLCJnZXRTb3V0aFdlc3QiLCJuZSIsImdldE5vcnRoRWFzdCIsInVuY29sbGVjdCIsImFyY2pzb24iLCJ0b0dlb0pTT04iLCJuZXdQYXJhbXMiLCJuZXdGQyIsInllcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsVUFBQSxTQUFBQyxHQW1EQSxNQWxEQUEsR0FBQUEsTUFDQUEsRUFBQUMsUUFBQSxRQUNBRCxFQUFBRSxLQUFBLFNBQUFDLEdBQ0FBLEdBQ0FILEVBQUFJLEtBQUFDLE1BQUEsMENBRUFMLEVBQUFNLFFBQUFILEVBRUFJLEVBQUFKLEVBQUFLLElBQUFDLFFBQ0FULEVBQUFJLEtBQUFDLE1BQUEsMkNBRUFMLEVBQUFVLE1BQUFILEVBQUFKLEVBQUFLLElBR0FSLEVBQUFXLE9BQUFDLFVBR0FaLEVBQUFhLElBQUFYLE9BR0FGLEVBQUFjLFVBQUFaLE9BR0FGLEVBQUFlLFVBQUFiLEtBQUEsYUFHQUYsRUFBQWdCLFNBQUFULEVBQUEsU0FHQVAsRUFBQWlCLE1B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RCIsImZpbGUiOiJkcm9wY2hvcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBkYyA9IGRjIHx8IHt9O1xuICBkYy52ZXJzaW9uID0gJzAuMi4zJztcbiAgZGMuaW5pdCA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICBpZighb3B0cykge1xuICAgICAgZGMudXRpbC5lcnJvcignTm8gb3B0aW9ucyBwcm92aWRlZCBpbiBkcm9wY2hvcC5pbml0KCknKTtcbiAgICB9XG4gICAgZGMub3B0aW9ucyA9IG9wdHM7XG5cbiAgICBpZighJChvcHRzLmlkKS5sZW5ndGgpIHtcbiAgICAgIGRjLnV0aWwuZXJyb3IoJ0VsZW1lbnQgd2l0aCBvcHRpb25zLmlkIGRvZXMgbm90IGV4aXN0LicpO1xuICAgIH1cbiAgICBkYy4kZWxlbSA9ICQob3B0cy5pZCk7XG5cbiAgICAvLyBzZXR1cCBsYXllcnNcbiAgICBkYy5sYXllcnMucHJlcGFyZSgpO1xuXG4gICAgLy8gc2V0dXAgbWFwXG4gICAgZGMubWFwLmluaXQoKTtcblxuICAgIC8vIHNldHVwIHNlbGVjdGlvblxuICAgIGRjLnNlbGVjdGlvbi5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBsYXllcmxpc3RcbiAgICBkYy5sYXllcmxpc3QuaW5pdCgnbGF5ZXJsaXN0Jyk7XG5cbiAgICAvLyBzZXR1cCBkcm9wem9uZVxuICAgIGRjLmRyb3B6b25lKCQoJ2JvZHknKSk7XG5cbiAgICAvLyBzZXR1cCBtZW51c1xuICAgIGRjLm1lbnVzLmdlby5pbml0KCk7XG4gICAgZGMubWVudXMubGVmdC5pbml0KCk7XG4gICAgZGMubWVudXMubGF5ZXJDb250ZXh0TWVudS5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBmb3Jtc1xuICAgIGRjLmZvcm0uaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAga2V5Ym9hcmQgc2hvcnRjdXRzXG4gICAgZGMuc2hvcnRjdXRzLmluaXQoKTtcblxuICAgIC8vIGdldCBVUkwgaW5mb3JtYXRpb24gaWYgaXQgZXhpc3RzXG4gICAgaWYobG9jYXRpb24uc2VhcmNoLmxlbmd0aCkge1xuICAgICAgZGMudXRpbC5leGVjdXRlVXJsUGFyYW1zKCk7XG4gICAgfVxuXG4gIH07XG5cbiAgZGMuYm9vbSA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdzaGFrYWxha2EnKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGRyb3B6b25lLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGFpbmVyIGVsZW1lbnQgKGxldHMgZG8gZG9jdW1lbnQuYm9keSlcbiAgICovXG4gIGRjLmRyb3B6b25lID0gZnVuY3Rpb24oJGNvbnRhaW5lcikge1xuICAgIF9ldmVudHMoJGNvbnRhaW5lcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gX2V2ZW50cygkY29udGFpbmVyKSB7XG4gICAgJGNvbnRhaW5lci5vbignZHJhZ292ZXInLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICB9KTtcblxuICAgICRjb250YWluZXIub24oJ2RyYWdsZWF2ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgIH0pO1xuXG4gICAgJGNvbnRhaW5lci5vbignZHJvcCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgICAgdmFyIGZpbGVzID0gZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgICAkKGZpbGVzKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMudXRpbC5yZWFkRmlsZShmaWxlc1tpXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5mb3JtID0gZGMuZm9ybSB8fCB7fTtcbiAgZGMuZm9ybS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2Zvcm06Z2VvJywgZGMuZm9ybS5nZW8pO1xuICAgICQoZGMpLm9uKCdmb3JtOmZpbGUnLCBkYy5mb3JtLmZpbGUpO1xuICB9O1xuXG4gIGRjLmZvcm0uZ2VvID0gZnVuY3Rpb24oZXZlbnQsIG9wZXJhdGlvbikge1xuICAgIGRjLmZvcm0uY3JlYXRlKG9wZXJhdGlvbiwgZGMub3BzLmdlb1tvcGVyYXRpb25dLCAnZ2VvJyk7XG4gIH07XG5cbiAgZGMuZm9ybS5maWxlID0gZnVuY3Rpb24oZXZlbnQsIG9wZXJhdGlvbikge1xuICAgIGRjLmZvcm0uY3JlYXRlKG9wZXJhdGlvbiwgZGMub3BzLmZpbGVbb3BlcmF0aW9uXSwgJ2ZpbGU6JyArIG9wZXJhdGlvbik7XG4gIH07XG5cbiAgZGMuZm9ybS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCBpbmZvLCB0cmlnZ2VyKSB7XG4gICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICB2YXIgJGh0bWwgPSAkKCc8Zm9ybT4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybSBkcm9wY2hvcC1mb3JtLScrdHJpZ2dlcilcbiAgICAgICAgICAuYXR0cignaWQnLCAnZHJvcGNob3AtZm9ybScpXG4gICAgICAgICAgLmF0dHIoJ2RhdGEnLCBuYW1lKTtcbiAgICB2YXIgJHRpdGxlID0gJCgnPGgyPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXRpdGxlJykudGV4dChuYW1lKS5hcHBlbmRUbygkaHRtbCk7XG4gICAgdmFyICRkZXNjID0gJCgnPHA+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tZGVzY3JpcHRpb24nKS50ZXh0KGluZm8uZGVzY3JpcHRpb24pLmFwcGVuZFRvKCRodG1sKTtcblxuICAgIC8vIGNyZWF0ZSBwYXJhbXNcbiAgICBpZihpbmZvLnBhcmFtZXRlcnMpIHtcbiAgICAgICQoaW5mby5wYXJhbWV0ZXJzKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcCA9IGRjLmZvcm0uY3JlYXRlUGFyYW0odGhpcyk7XG4gICAgICAgIHAuYXBwZW5kVG8oJGh0bWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIHN1Ym1pdCBidXR0b25cbiAgICB2YXIgJHN1Ym1pdCA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWJ0biBkcm9wY2hvcC1idG4tZ3JlZW4gZHJvcGNob3AtZm9ybS1zdWJtaXQnKS50ZXh0KCdFeGVjdXRlJykuYXR0cignZm9yJywgbmFtZSk7XG4gICAgdmFyICRjYW5jZWwgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdkcm9wY2hvcC1idG4gZHJvcGNob3AtYnRuLWNhbmNlbCBkcm9wY2hvcC1mb3JtLWNhbmNlbCcpLnRleHQoJ0NhbmNlbCcpLmF0dHIoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgJGNhbmNlbC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgJGh0bWwub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gZ2V0IHRoZSBwYXJhbWV0ZXJzIGZyb20gdGhlIGZvcm1cbiAgICAgIHZhciBwYXJhbWV0ZXJzID0gW107XG4gICAgICB2YXIgZGF0YSA9ICQodGhpcykuc2VyaWFsaXplQXJyYXkoKTtcbiAgICAgICQoZGF0YSkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHBhcmFtZXRlcnMucHVzaChkYXRhW2ldLnZhbHVlKTtcbiAgICAgIH0pO1xuICAgICAgJChkYykudHJpZ2dlcignb3BlcmF0aW9uOicgKyB0cmlnZ2VyLCBbbmFtZSwgcGFyYW1ldGVyc10pO1xuICAgICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICAkaHRtbC5hcHBlbmQoJHN1Ym1pdCk7XG4gICAgJGh0bWwuYXBwZW5kKCRjYW5jZWwpO1xuXG4gICAgZGMuJGVsZW0uYXBwZW5kKCRodG1sKTtcbiAgICAvLyBzdWJtaXQgYnV0dG9uIG5lZWRzIHRyaWdnZXIgb3BlcmF0aW9uOmdlbyB3aXRoIG9wIGFuZCBwYXJhbWV0ZXIgYXJyYXlcbiAgfTtcblxuICBkYy5mb3JtLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgICQoJyNkcm9wY2hvcC1mb3JtJykucmVtb3ZlKCk7XG4gIH07XG5cbiAgZGMuZm9ybS5jcmVhdGVQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgdmFyICRpbnB1dCA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyJyk7XG4gICAgdmFyICRsYWJlbCA9ICQoJzxsYWJlbD4nKS50ZXh0KHBhcmFtLm5hbWUpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlci1sYWJlbCcpO1xuICAgIHZhciAkZmllbGQgPSBkYy5mb3JtLmlucHV0c1twYXJhbS50eXBlXShwYXJhbSk7XG4gICAgJGZpZWxkLmFwcGVuZFRvKCRsYWJlbCk7XG4gICAgaWYocGFyYW0uZGVzY3JpcHRpb24ubGVuZ3RoKSB7XG4gICAgICAkKCc8cD4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXItZGVzY3JpcHRpb24nKS5odG1sKHBhcmFtLmRlc2NyaXB0aW9uKS5hcHBlbmRUbygkbGFiZWwpO1xuICAgIH1cbiAgICAkaW5wdXQuYXBwZW5kKCRsYWJlbCk7XG4gICAgcmV0dXJuICRpbnB1dDtcbiAgfTtcblxuICBkYy5mb3JtLmlucHV0cyA9IHtcbiAgICBudW1iZXI6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ251bWJlcicpXG4gICAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgICAgIC5hdHRyKCd2YWx1ZScsIHAuZGVmYXVsdCk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICBzZWxlY3Q6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxzZWxlY3Q+JykuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkKHAub3B0aW9ucykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciAkb3B0ID0gJCgnPG9wdGlvbj4nKS50ZXh0KHAub3B0aW9uc1tpXSlcbiAgICAgICAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5vcHRpb25zW2ldKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkaSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHRleHQ6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ3RleHQnKVxuICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpXG4gICAgICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgY2hlY2tib3g6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JylcbiAgICAgICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHJhZGlvOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpLmF0dHIoJ2NsYXNzJywgJ3JhZGlvR3JvdXAnKTtcbiAgICAgIHZhciBncm91cE5hbWUgPSBwLm5hbWUucmVwbGFjZSgvXFxzL2csICcnKTtcbiAgICAgICQocC5vcHRpb25zKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdmFyIG9wdCA9IHAub3B0aW9uc1tpXTtcbiAgICAgICAgdmFyIG9wdElkID0gb3B0LnJlcGxhY2UoL1xccy9nLCAnJyk7XG4gICAgICAgIHZhciAkbGJsID0gJCgnPGxhYmVsPicpXG4gICAgICAgICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJylcbiAgICAgICAgICAgICAgLmF0dHIoJ2ZvcicsIG9wdElkKTtcblxuICAgICAgICB2YXIgJG9wdCA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgICAgICAgIC5hdHRyKCdpZCcsIG9wdElkKVxuICAgICAgICAgICAgICAuYXR0cignbmFtZScsIGdyb3VwTmFtZSlcbiAgICAgICAgICAgICAgLmFkZENsYXNzKCdyYWRpbycpXG4gICAgICAgICAgICAgIC52YWwob3B0KTtcbiAgICAgICAgaWYgKG9wdCA9PT0gcC5kZWZhdWx0KSB7XG4gICAgICAgICAgJG9wdC5wcm9wKCdkZWZhdWx0Q2hlY2tlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgICRsYmwuYXBwZW5kKG9wdCk7XG4gICAgICAgICRsYmwuYXBwZW5kVG8oJGkpO1xuICAgICAgICAkb3B0LmFwcGVuZFRvKCRpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc3dpdGNoOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpO1xuICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciAkbGJsID0gJCgnPGxhYmVsPicpXG4gICAgICAgICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICAgIHZhciAkb3B0ID0gJCgnPGlucHV0PicpXG4gICAgICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ3JhZGlvJylcbiAgICAgICAgICAgICAgLnZhbCgnc3dpdGNoLScgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcClcbiAgICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgICAkb3B0LmFwcGVuZFRvKCRsYmwpO1xuICAgICAgICAkbGJsLmFwcGVuZChkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lKTtcbiAgICAgICAgJGxibC5hcHBlbmRUbygkaSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHJlY3Vyc2l2ZTogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGRpdj4nKTtcblxuICAgICAgdmFyICRsYmwxID0gJCgnPGxhYmVsPicpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgdmFyICRvcHQxID0gJCgnPGlucHV0PicpXG4gICAgICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgICAgICAudmFsKCd0cnVlJylcbiAgICAgICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICRvcHQxLmFwcGVuZFRvKCRsYmwxKTtcbiAgICAgICRsYmwxLmFwcGVuZCgnSW5kaXZpZHVhbCBmZWF0dXJlcycpO1xuXG4gICAgICB2YXIgJGxibDIgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICB2YXIgJG9wdDIgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ3JhZGlvJylcbiAgICAgICAgICAgIC52YWwoJ2ZhbHNlJylcbiAgICAgICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICRvcHQyLmFwcGVuZFRvKCRsYmwyKTtcbiAgICAgICRsYmwyLmFwcGVuZCgnRW50aXJlIGNvbGxlY3Rpb24nKTtcblxuICAgICAgJGxibDEuYXBwZW5kVG8oJGkpO1xuICAgICAgJGxibDIuYXBwZW5kVG8oJGkpO1xuXG4gICAgICByZXR1cm4gJGk7XG4gICAgfVxuICB9O1xuXG4gIC8vIGRjLmZvcm0uZ2V0VmFsdWVzID0gZnVuY3Rpb24oJGZvcm0pIHtcbiAgLy8gICB2YXIgdmFsdWVzID0gW107XG4gIC8vICAgY29uc29sZS5sb2coJGZvcm0pO1xuICAvLyAgIHJldHVybiB2YWx1ZXM7XG4gIC8vIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubGF5ZXJsaXN0ID0ge307XG4gIGRjLmxheWVybGlzdC5lbGVtcyA9IHt9O1xuXG4gIGRjLmxheWVybGlzdC5pbml0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRjLmxheWVybGlzdC4kZWxlbSA9ICQoJzxvbD4nKS5hZGRDbGFzcyhuYW1lKTtcbiAgICBkYy4kZWxlbS5hcHBlbmQoZGMubGF5ZXJsaXN0LiRlbGVtKTtcblxuICAgIC8vIENsaWNraW5nIG9uIGxheWVybGlzdCBidXQgbm90IGxheWVyIChpZSBiZWxvdyBsYXllcnMpIGNsZWFycyBzZWxlY3Rpb25cbiAgICBkYy5sYXllcmxpc3QuJGVsZW0ub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICgkKGV2ZW50LnRhcmdldCkuaGFzQ2xhc3MobmFtZSkpIHtcbiAgICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgbGlIZWxwZXIgPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLWhlbHAnKVxuICAgICAgLmh0bWwoJ1dlbGNvbWUgdG8gPHN0cm9uZz5kcm9wY2hvcDwvc3Ryb25nPiEgSGVyZSB5b3UgY2FuIGRyYWcgYW5kIGRyb3AgZmlsZXMgYW5kIHRoZXkgd2lsbCBzaG93IHVwIGluIHRoZSBsYXllciBsaXN0IGJlbG93Ljxicj48YnI+VG8gdGhlIGxlZnQgeW91IGNhbiB1cGxvYWQgYW5kIHNhdmUgeW91ciBmaWxlcyBvciA8YSBocmVmPVwiLz9naXN0PTA5MTI5YzIwZWMwMjBiODNiZjg1XCI+YWRkIGV4YW1wbGUgZGF0YTwvYT4gb3IgdGhlIDxhIGhyZWY9XCIvP2dpc3Q9ZDA2NmI1NzJlOGE4YWQyYjZkMTZcIj5VUyBTdGF0ZXM8L2E+Ljxicj48YnI+VG8gdGhlIHJpZ2h0IHlvdVxcJ2xsIG5vdGljZSBzb21lIGdlb3NwYXRpYWwgb3BlcmF0aW9ucyB0aGF0IGJlY29tZSBhdmFpbGFibGUgYmFzZWQgb24gc2VsZWN0aW5nIHNwZWNpZmljIGxheWVycy4nICk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZChsaUhlbHBlcik7XG5cbiAgICB2YXIgdG9nZ2xlTGF5ZXJzID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci10b2dnbGVBbGwnKVxuICAgICAgLmh0bWwoJzxsYWJlbD48aW5wdXQgaWQ9XCJhbGxDaGVja2JveGVzXCIgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD5Ub2dnbGUgYWxsIGxheWVyczwvbGFiZWw+Jyk7XG4gICAgdG9nZ2xlTGF5ZXJzLm9uKCdjaGFuZ2UnLCBkYy5sYXllcmxpc3QudG9nZ2xlQWxsKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0uYXBwZW5kKHRvZ2dsZUxheWVycyk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6YWRkZWQnLCBkYy5sYXllcmxpc3QuYWRkTGF5ZXJMaXN0SXRlbSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBkYy5sYXllcmxpc3QucmVtb3ZlTGF5ZXJMaXN0SXRlbSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbmFtZWQnLCBkYy5sYXllcmxpc3QucmVuYW1lKTtcbiAgfTtcblxuICBkYy5sYXllcmxpc3QucmVuYW1lID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wLCBuZXdOYW1lKSB7XG4gICAgJCgnW2RhdGEtc3RhbXA9JytzdGFtcCsnXScpLmZpbmQoJy5sYXllci1uYW1lJykudGV4dChuZXdOYW1lKTtcbiAgfTtcblxuICAvLyB0cmlnZ2VyZWQgaW4gZHJvcGNob3AuanNcbiAgZGMubGF5ZXJsaXN0LmFkZExheWVyTGlzdEl0ZW0gPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgbGF5ZXJsaXN0SXRlbSA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItZWxlbWVudCcpLmF0dHIoJ2RhdGEtc3RhbXAnLCBsYXllci5zdGFtcCk7XG4gICAgdmFyIGxheWVyRGl2ID0gJCgnPGRpdj4nKVxuICAgICAgLmFkZENsYXNzKCdsYXllci1uYW1lIGxheWVyLW5ldycpXG4gICAgICAudGV4dChsYXllci5uYW1lKVxuICAgICAgLmRlbGF5KDMwMDApXG4gICAgICAucXVldWUoZnVuY3Rpb24obmV4dCkge1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdsYXllci1uZXcnKTtcbiAgICAgIH0pO1xuXG4gICAgdmFyIGxheWVyVHlwZSA9ICQoJzxzcGFuPicpLmFkZENsYXNzKCdsYXllci10eXBlLWltYWdlIHNwcml0ZSBzcHJpdGUtbGF5ZXItJytsYXllclR5cGVJY29uKGxheWVyLnR5cGUpKTtcbiAgICB2YXIgY2hlY2tib3ggPSAkKCc8aW5wdXQ+JykuYWRkQ2xhc3MoJ2xheWVyLXRvZ2dsZScpLnByb3Aoeyd0eXBlJzogJ2NoZWNrYm94JywgJ2NoZWNrZWQnOiB0cnVlfSk7XG4gICAgdmFyIGRyb3Bkb3duID0gJCgnPGJ1dHRvbiB0aXRsZT1cIk1vcmUgT3B0aW9uc1wiPicpLmFkZENsYXNzKCdsYXllci1hY3Rpb24gbGF5ZXItZHJvcGRvd24nKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLWVsbGlwc2lzLWhcIj48L2k+Jyk7XG5cbiAgICBjaGVja2JveC5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgLy8gdHJpZ2dlciBsYXllcjpzaG93XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNob3cnLCBbbGF5ZXJdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmhpZGUnLCBbbGF5ZXJdKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxheWVyRGl2Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAvLyBjaGVjayBmb3Iga2V5cyBiZWluZyBoZWxkIGZvciBzcGVjaWFsIHNlbGVjdGlvblxuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgIC8vIHNlbGVjdCBhbGwgbGF5ZXJlcyBpbiBiZXR3ZWVuIHByZXZpb3VzIHRhcmdldCBhbmQgdGFyZ2V0XG4gICAgICAgIC8vIG5vdGU6IGRvbid0IHVuc2VsZWN0IGxheWVycyBhbHJlYWR5IHNlbGVjdGVkLCBqdXN0IGFkZCB0byBzZWxlY3Rpb25cbiAgICAgICAgdmFyIHRvU2VsZWN0ID0gW107XG4gICAgICAgIHZhciB0byA9ICQodGhpcyk7XG4gICAgICAgIHZhciBmcm9tID0gZGMubGF5ZXJsaXN0Ll9sYXN0U2VsZWN0ZWQ7XG4gICAgICAgIHZhciB0b0NvdW50LCBmcm9tQ291bnQ7XG5cbiAgICAgICAgaWYgKCFmcm9tKSByZXR1cm47XG5cbiAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICB2YXIgY2hlY2sgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICB2YXIgdG9TdGFtcCA9IHRvLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICB2YXIgZnJvbVN0YW1wID0gZnJvbS5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgaWYgKGNoZWNrID09PSB0b1N0YW1wKSB0b0NvdW50ID0gZTtcbiAgICAgICAgICBpZiAoY2hlY2sgPT09IGZyb21TdGFtcCkgZnJvbUNvdW50ID0gZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRvQ291bnQgPiBmcm9tQ291bnQpIHtcbiAgICAgICAgICAvLyBsb29wIHVwXG4gICAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIGlmIChsID49IGZyb21Db3VudCAmJiBsIDw9IHRvQ291bnQgKSB7XG4gICAgICAgICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RMYXllcigkKHRoaXMpLmZpbmQoJy5sYXllci1uYW1lJyksIGRjLmxheWVycy5saXN0WyQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIGlmIChsIDwgZnJvbUNvdW50ICYmIGwgPj0gdG9Db3VudCApIHtcbiAgICAgICAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdExheWVyKCQodGhpcykuZmluZCgnLmxheWVyLW5hbWUnKSwgZGMubGF5ZXJzLmxpc3RbJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXkpIHtcbiAgICAgICAgLy8gYWRkL3JlbW92ZSBzZWxlY3RlZCBsYXllciB0byBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0VG9nZ2xlKCQodGhpcyksIGxheWVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNsZWFyIHNlbGVjdGlvbiBhbmQgc2VsZWN0IHRhcmdldFxuICAgICAgICBkYy5sYXllcmxpc3QuY2xlYXJTZWxlY3Rpb24oJCh0aGlzKSwgbGF5ZXIpO1xuICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0VG9nZ2xlKCQodGhpcyksIGxheWVyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxheWVyRGl2Lm9uKCdjb250ZXh0bWVudScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBkYy5tZW51cy5sYXllckNvbnRleHRNZW51LmNyZWF0ZUxheWVyQ29udGV4dE1lbnUoXG4gICAgICAgIHRoaXMsIGV2ZW50Lm9mZnNldFgsIGV2ZW50LnBhZ2VZXG4gICAgICApO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIGRyb3Bkb3duLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBkYy5tZW51cy5sYXllckNvbnRleHRNZW51LmNyZWF0ZUxheWVyQ29udGV4dE1lbnUoXG4gICAgICAgIC8vIEkgaGF2ZSBubyBpZGVhIHdoeSB3ZSBuZWVkIHRvIHN1YnRyYWN0IDQwcHggYnV0IHRoYXQncyB3aGF0XG4gICAgICAgIC8vIGl0IHRha2VzIHRvIG1ha2UgaXQgcG9zaXRpb24gY29ycmVjdGx5Li4uXG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5sYXllci1uYW1lJyksIGV2ZW50LnBhZ2VYIC0gNDAsIGV2ZW50LnBhZ2VZXG4gICAgICApO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybiBmYWxzZTsgLy8gZGlzYWJsZSBmdXJ0aGVyIGNsaWNrIGhhbmRsZXJzXG4gICAgfSk7XG5cbiAgICBsYXllckRpdi5vbignZGJsY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZGMub3BzLmZpbGUuZXh0ZW50LmV4ZWN1dGUoKTtcbiAgICB9KTtcblxuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGxheWVyRGl2KTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChjaGVja2JveCk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQobGF5ZXJUeXBlKTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChkcm9wZG93bik7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZChsYXllcmxpc3RJdGVtKTtcblxuICAgIGRjLmxheWVybGlzdC5lbGVtc1tsYXllci5zdGFtcF0gPSBsYXllcmxpc3RJdGVtO1xuXG4gICAgLy8gaGlkZSBoZWxwZXIgdGV4dFxuICAgICQoJy5sYXllci1oZWxwJykuaGlkZSgpO1xuICAgICQoJy5sYXllci10b2dnbGVBbGwnKS5zaG93KCk7XG5cbiAgICAvLyBzZW5kIG91dCBsYXllcmxpc3Q6YWRkZWQgc2lnbmFsXG4gICAgJChkYykudHJpZ2dlcignbGF5ZXJsaXN0OmFkZGVkJywgbGF5ZXJEaXYpO1xuICB9O1xuXG4gIGRjLmxheWVybGlzdC5zZWxlY3RMYXllciA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBpZiAoISRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAkaXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNlbGVjdGVkJywgW2x5cl0pO1xuICAgIH1cbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBpZiAoJGl0ZW0uaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICRpdGVtLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6dW5zZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9XG4gICAgZGMubGF5ZXJsaXN0Ll9sYXN0U2VsZWN0ZWQgPSAkaXRlbTtcbiAgfTtcbiAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24oJGl0ZW0sIGx5cikge1xuICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICB9O1xuICBkYy5sYXllcmxpc3Quc2VsZWN0QWxsID0gZnVuY3Rpb24oKSB7XG4gICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RMYXllcigkKHRoaXMpLmZpbmQoJy5sYXllci1uYW1lJyksIGRjLmxheWVycy5saXN0WyQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgfSk7XG4gIH07XG4gIGRjLmxheWVybGlzdC5jaGVja0FsbCA9IGZ1bmN0aW9uKG11c3RCZVNlbGVjdGVkKSB7XG4gICAgZm9yICh2YXIgaSBpbiBkYy5sYXllcnMubGlzdCkge1xuICAgICAgdmFyIGxheWVyID0gZGMubGF5ZXJzLmxpc3RbaV07XG4gICAgICBpZiAobXVzdEJlU2VsZWN0ZWQgJiYgIWRyb3BjaG9wLnNlbGVjdGlvbi5pc1NlbGVjdGVkKGxheWVyKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGVsZW1Ub2dnbGUoZGMubGF5ZXJzLmxpc3RbaV0uc3RhbXAsIHRydWUpO1xuICAgIH1cbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnVuY2hlY2tBbGwgPSBmdW5jdGlvbihtdXN0QmVTZWxlY3RlZCkge1xuICAgIGZvciAodmFyIGkgaW4gZGMubGF5ZXJzLmxpc3QpIHtcbiAgICAgIHZhciBsYXllciA9IGRjLmxheWVycy5saXN0W2ldO1xuICAgICAgaWYgKG11c3RCZVNlbGVjdGVkICYmICFkcm9wY2hvcC5zZWxlY3Rpb24uaXNTZWxlY3RlZChsYXllcikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBlbGVtVG9nZ2xlKGxheWVyLnN0YW1wLCBmYWxzZSk7XG4gICAgfVxuICB9O1xuICBkYy5sYXllcmxpc3QudG9nZ2xlQWxsID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbENoZWNrYm94ZXMnKS5jaGVja2VkKSB7XG4gICAgICBkYy5sYXllcmxpc3QuY2hlY2tBbGwoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGMubGF5ZXJsaXN0LnVuY2hlY2tBbGwoKTtcbiAgICB9XG4gIH07XG4gIGRjLmxheWVybGlzdC5yZW1vdmVMYXllckxpc3RJdGVtID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgJCgnW2RhdGEtc3RhbXA9JytzdGFtcCsnXScpLmZhZGVPdXQoMzAwLCBmdW5jdGlvbigpIHtcbiAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICBkZWxldGUgZGMubGF5ZXJsaXN0LmVsZW1zW3N0YW1wXTtcblxuICAgICAgLy8gc2hvdyBoZWxwZXIgdGV4dCBpZiBubyBsYXllcnMgZXhpc3RcbiAgICAgIC8vIHRoaXMgaGFzIHRvIGNoZWNrIGluc2lkZSBzaW5jZSB0aGVyZSBpcyBhIDMwMCBtcyBkZWxheSB3aXRoIHRoZSBmYWRlXG4gICAgICBpZiAoJCgnLmxheWVyLWVsZW1lbnQnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgJCgnLmxheWVyLWhlbHAnKS5zaG93KCk7XG4gICAgICAgICQoJy5sYXllci10b2dnbGVBbGwnKS5oaWRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbGF5ZXJUeXBlSWNvbih0eXBlKSB7XG4gICAgdmFyIGljb247XG4gICAgc3dpdGNoKHR5cGUpIHtcbiAgICAgIGNhc2UgJ0ZlYXR1cmVDb2xsZWN0aW9uJzpcbiAgICAgICAgaWNvbiA9ICdmZWF0dXJlY29sbGVjdGlvbic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxQb2ludD4nOlxuICAgICAgY2FzZSAnRmVhdHVyZTxNdWx0aVBvaW50Pic6XG4gICAgICAgIGljb24gPSAncG9pbnQnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TGluZVN0cmluZz4nOlxuICAgICAgY2FzZSAnRmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+JzpcbiAgICAgICAgaWNvbiA9ICdsaW5lJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPFBvbHlnb24+JzpcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlQb2x5Z29uPic6XG4gICAgICAgIGljb24gPSAncG9seWdvbic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxHZW9tZXRyeUNvbGxlY3Rpb24+JzpcbiAgICAgICAgaWNvbiA9ICdnZW9tJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpY29uID0gJ2RlZmF1bHQnO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGljb247XG4gIH1cblxuICBmdW5jdGlvbiBlbGVtVG9nZ2xlKHN0YW1wLCBib29sKSB7XG4gICAgJCgnLmxheWVyLWVsZW1lbnRbZGF0YS1zdGFtcD0nK3N0YW1wKyddJylcbiAgICAgIC5maW5kKCcubGF5ZXItdG9nZ2xlJylcbiAgICAgIC5wcm9wKCdjaGVja2VkJywgYm9vbClcbiAgICAgIC50cmlnZ2VyKCdjaGFuZ2UnKTsgLy8gc2V0cyBvZmYgYSBjaGFpbiByZWFjdGlvblxuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubGF5ZXJzID0ge307XG4gIGRjLmxheWVycy5saXN0ID0ge307XG5cbiAgZGMubGF5ZXJzLnByZXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignZmlsZTphZGRlZCcsIGRjLmxheWVycy5hZGQpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmUnLCBkYy5sYXllcnMucmVtb3ZlKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6ZHVwbGljYXRlJywgZGMubGF5ZXJzLmR1cGxpY2F0ZSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbmFtZScsIGRjLmxheWVycy5yZW5hbWUpO1xuICB9O1xuXG4vKipcbiAqIEFkZCBhIGxheWVyIHRvIHRoZSBsYXllcnMgbGlzdCBhbmQgdHJpZ2dlciBsYXllcjphZGRlZCBmb3Igc3Vic2NyaWJlcnMgdG8gcGljayB1cC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxuICogQHBhcmFtIHtvYmplY3R9IGZpbGUgb2JqZWN0XG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZSBibG9iIHRvIGJlIGNvbnZlcnRlZCB3aXRoIEpTT04ucGFyc2UoKVxuICovXG4gIGRjLmxheWVycy5hZGQgPSBmdW5jdGlvbihldmVudCwgbmFtZSwgYmxvYiwgbHR5cGUsIHVybCkge1xuICAgIGlmIChibG9iLnR5cGUgPT09IFwiVG9wb2xvZ3lcIikge1xuICAgICAgYmxvYiA9IHRvcG9qc29uLmNsaWVudC5mZWF0dXJlKGJsb2IsIGJsb2Iub2JqZWN0c1tPYmplY3Qua2V5cyhibG9iLm9iamVjdHMpWzBdXSk7XG4gICAgfVxuXG4gICAgdmFyIGwgPSBkYy5sYXllcnMubWFrZUxheWVyKG5hbWUsIGJsb2IpO1xuICAgIGRjLmxheWVycy5saXN0W2wuc3RhbXBdID0gbDtcblxuICAgIGlmIChsdHlwZSAmJiB1cmwpIHtcbiAgICAgIGRjLmxheWVycy5saXN0W2wuc3RhbXBdLmx0eXBlID0gbHR5cGU7XG4gICAgICBkYy5sYXllcnMubGlzdFtsLnN0YW1wXS51cmwgPSB1cmw7XG4gICAgfVxuXG4gICAgZGMubm90aWZ5KCdzdWNjZXNzJywgJzxzdHJvbmc+JytsLm5hbWUrJzwvc3Ryb25nPiBoYXMgYmVlbiBhZGRlZCEnLCAzNTAwKTtcblxuICAgIC8vIHRyaWdnZXIgbGF5ZXI6YWRkZWRcbiAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjphZGRlZCcsIFtsXSk7XG5cbiAgICAvLyBVcGRhdGUgVVJMLCBpZiBhcHBsaWNhYmxlXG4gICAgaWYgKGx0eXBlICYmIHVybCkge1xuICAgICAgZGMudXRpbC51cGRhdGVTZWFyY2goKTtcbiAgICB9XG5cbiAgfTtcblxuLyoqXG4gKiBSZW1vdmUgYSBsYXllciwgd2hpY2ggdHJpZ2dlcnMgbGF5ZXI6cmVtb3ZlZCBmb3IgdGhlIHJlc3Qgb2YgdGhlIGFwcFxuICogQHBhcmFtIHtzdHJpbmd9IGxheWVyIHN0YW1wXG4gKi9cbiAgZGMubGF5ZXJzLnJlbW92ZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIC8vIHRyaWdnZXIgbGF5ZXI6cmVtb3ZlZFxuICAgIHRyeSB7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW1vdmVkJywgW3N0YW1wXSk7XG4gICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnPHN0cm9uZz4nICsgZGMubGF5ZXJzLmxpc3Rbc3RhbXBdLm5hbWUgKyAnPC9zdHJvbmc+IGhhcyBiZWVuIHJlbW92ZWQuJyk7XG4gICAgICBkZWxldGUgZGMubGF5ZXJzLmxpc3Rbc3RhbXBdO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGVyZSB3YXMgYSBwcm9ibGVtIHJlbW92aW5nIHRoZSBsYXllci4nKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH07XG5cbiAgZGMubGF5ZXJzLmR1cGxpY2F0ZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIHZhciBseXIgPSBkYy5sYXllcnMubGlzdFtzdGFtcF07XG4gICAgLy8gbmVlZCB0byBjcmVhdGUgbmV3IGxheWVyIHNvIHdlIGNhbiBnZXQgYSB1bmlxZSBMLnN0YW1wKClcbiAgICBkYy5sYXllcnMuYWRkKHt9LCAnY29weV8nK2x5ci5uYW1lLCBseXIucmF3KTtcbiAgfTtcblxuICBkYy5sYXllcnMucmVuYW1lID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyLCBuZXdOYW1lKSB7XG4gICAgLy8gcmVuYW1lIGluIGxheWVyIG9iamVjdFxuICAgIGRjLmxheWVycy5saXN0W2xheWVyLnN0YW1wXS5uYW1lID0gbmV3TmFtZTtcblxuICAgIC8vIHJlbmFtZSBpbiBsYXllcmxpc3RcbiAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW5hbWVkJywgW2xheWVyLnN0YW1wLCBuZXdOYW1lXSk7XG4gIH07XG5cbiAgZGMubGF5ZXJzLm1ha2VMYXllciA9IGZ1bmN0aW9uKG5hbWUsIGpzb24pIHtcbiAgICB2YXIgZ2VvanNvbiA9IGpzb247XG4gICAgLy8gaWYgKGpzb24udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJyAmJiBqc29uLmZlYXR1cmVzLmxlbmd0aCA9PT0gMSkge1xuICAgIC8vICAgZ2VvanNvbiA9IGRjLnV0aWwudW5jb2xsZWN0KGpzb24pO1xuICAgIC8vIH1cblxuICAgIHZhciBmbCA9IEwubWFwYm94LmZlYXR1cmVMYXllcihnZW9qc29uKTtcbiAgICB2YXIgbGF5ZXIgPSB7XG4gICAgICBuYW1lOiBkYy51dGlsLnJlbW92ZUZpbGVFeHRlbnNpb24obmFtZSksXG4gICAgICBzdGFtcDogTC5zdGFtcChmbCksXG4gICAgICByYXc6IGdlb2pzb24sXG4gICAgICB0eXBlOiBnZXRUeXBlKGdlb2pzb24pLFxuICAgICAgZmVhdHVyZWxheWVyOiBmbCxcbiAgICAgIGRhdGVBZGRlZDogbmV3IERhdGUoKVxuICAgIH07XG4gICAgcmV0dXJuIGxheWVyO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFR5cGUoZ2opIHtcbiAgICBpZiAoZ2oudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgcmV0dXJuICdGZWF0dXJlQ29sbGVjdGlvbic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnai50eXBlICsgJzwnICsgZ2ouZ2VvbWV0cnkudHlwZSArICc+JztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5tYXAgPSB7fTtcblxuICBkYy5tYXAuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGRjLm1hcC4kZWxlbSA9ICQoJzxkaXY+JykucHJvcCgnaWQnLCAnZHJvcGNob3AtbWFwJykuYWRkQ2xhc3MoJ21hcCcpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChkYy5tYXAuJGVsZW0pO1xuXG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBkYy5tYXAucmVtb3ZlTGF5ZXIpO1xuXG4gICAgX21ha2VNYXAoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBfbWFrZU1hcCgpIHtcbiAgICBkYy5tYXAudG9rZW4gPSBMLm1hcGJveC5hY2Nlc3NUb2tlbiA9ICdway5leUoxSWpvaWMzWnRZWFIwYUdWM2N5SXNJbUVpT2lKVk1VbFVSMHhySW4wLk53ZVNfQXR0anN3dE41d1J1V0NTTkEnO1xuICAgIGRjLm1hcC5tID0gTC5tYXBib3gubWFwKCdkcm9wY2hvcC1tYXAnLCBudWxsLCB7XG4gICAgICB6b29tQ29udHJvbDogZmFsc2UsXG4gICAgICB3b3JsZENvcHlKdW1wOiB0cnVlXG4gICAgfSkuc2V0VmlldyhbMCwwXSwgMyk7XG5cbiAgICAvLyBzZXRzIHRoZSBsb2NhdGlvbiBvZiB0aGUgem9vbSBidXR0b25zIHRvIHRoZSB0b3AgcmlnaHRcbiAgICBMLmNvbnRyb2wuem9vbSh7XG4gICAgICBwb3NpdGlvbjogJ3RvcGxlZnQnXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgTC5tYXBib3guZ2VvY29kZXJDb250cm9sKCdtYXBib3gucGxhY2VzJywge1xuICAgICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIHZhciBiYXNlTGF5ZXJzID0ge1xuICAgICAgXCJNYXBib3ggU3RyZWV0c1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5zdHJlZXRzJyksXG4gICAgICBcIk1hcGJveCBPdXRkb29yc1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5vdXRkb29ycycpLFxuICAgICAgXCJNYXBib3ggTGlnaHRcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3gubGlnaHQnKSxcbiAgICAgIFwiTWFwYm94IERhcmtcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guZGFyaycpLFxuICAgICAgXCJNYXBib3ggU2F0ZWxsaXRlXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LnNhdGVsbGl0ZScpLFxuICAgIH07XG5cbiAgICBiYXNlTGF5ZXJzWydNYXBib3ggU3RyZWV0cyddLmFkZFRvKGRjLm1hcC5tKTtcbiAgICAvLyBzZXRzIGxvY2F0aW9uIG9mIGJhc2UgbGF5ZXIgY29udHJvbCB0byB0aGUgYm90dG9tIHJpZ2h0XG4gICAgZGMubWFwLmJhc2VMYXllcnMgPSBMLmNvbnRyb2wubGF5ZXJzKGJhc2VMYXllcnMsIHt9LCB7XG4gICAgICBwb3NpdGlvbjogJ2JvdHRvbXJpZ2h0JyxcbiAgICAgIGNvbGxhcHNlZDogZmFsc2VcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICBkYy5tYXAubGF5ZXJncm91cCA9IEwubWFwYm94LmZlYXR1cmVMYXllcigpO1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjphZGRlZCcsIGRjLm1hcC5hZGRMYXllcik7XG4gICAgJChkYykub24oJ2xheWVyOmhpZGUnLCBkYy5tYXAuaGlkZUxheWVyKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6c2hvdycsIGRjLm1hcC5zaG93TGF5ZXIpO1xuXG4gICAgLy8gLy8gbXkgbG9jYXRpb24gYXMgbGF5ZXJcbiAgICAvLyB2YXIgZ2VvbG9jYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlb2xvY2F0ZScpO1xuXG4gICAgJChkYy5tYXAubSkub24oJ2xvY2F0aW9uZm91bmQnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZGF0YSA9IGUub3JpZ2luYWxFdmVudDtcbiAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhkYXRhLmJvdW5kcyk7XG5cbiAgICAgIHZhciBseXIgPSB7XG4gICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBbZGF0YS5sYXRsbmcubG5nLCBkYXRhLmxhdGxuZy5sYXRdXG4gICAgICAgIH0sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAndGl0bGUnOiAnVGhlcmUgWW91IEFyZScsXG4gICAgICAgICAgJ21hcmtlci1jb2xvcic6ICcjMjA3MTc4JyxcbiAgICAgICAgICAnbWFya2VyLXN5bWJvbCc6ICdoZWFydCdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFsneW91ciBsb2NhdGlvbicsIGx5cl0pO1xuICAgIH0pO1xuXG4gICAgJChkYy5tYXAubSkub24oJ2xvY2F0aW9uZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBmaW5kaW5nIHlvdXIgbG9jYXRpb24uJywgMzAwMCk7XG4gICAgfSk7XG5cbiAgICAvLyAvLyBPbmNlIHdlJ3ZlIGdvdCBhIHBvc2l0aW9uLCB6b29tIGFuZCBjZW50ZXIgdGhlIG1hcFxuICAgIC8vIC8vIG9uIGl0LCBhbmQgYWRkIGEgc2luZ2xlIG1hcmtlci5cbiAgICAvLyB0aGlzLl9tYXAub24oJ2xvY2F0aW9uZm91bmQnLCBmdW5jdGlvbihlKSB7XG4gICAgLy8gICB0aGlzLl9tYXAuZml0Qm91bmRzKGUuYm91bmRzKTtcblxuXG4gICAgLy8gICBteUxheWVyLnNldEdlb0pTT04oe1xuICAgIC8vICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgLy8gICAgIGdlb21ldHJ5OiB7XG4gICAgLy8gICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAvLyAgICAgICBjb29yZGluYXRlczogW2UubGF0bG5nLmxuZywgZS5sYXRsbmcubGF0XVxuICAgIC8vICAgICB9LFxuICAgIC8vICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgLy8gICAgICAgJ3RpdGxlJzogJ1RoZXJlIFlvdSBBcmUnLFxuICAgIC8vICAgICAgICdtYXJrZXItY29sb3InOiAnIzIwNzE3OCcsXG4gICAgLy8gICAgICAgJ21hcmtlci1zeW1ib2wnOiAnaGVhcnQnXG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH0pO1xuXG4gICAgLy8gICAvLyBBbmQgaGlkZSB0aGUgZ2VvbG9jYXRpb24gYnV0dG9uXG4gICAgLy8gICAvL2dlb2xvY2F0ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGdlb2xvY2F0ZSk7XG4gICAgLy8gfS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIC8vIElmIHRoZSB1c2VyIGNob29zZXMgbm90IHRvIGFsbG93IHRoZWlyIGxvY2F0aW9uXG4gICAgLy8gLy8gdG8gYmUgc2hhcmVkLCBkaXNwbGF5IGFuIGVycm9yIG1lc3NhZ2UuXG4gICAgLy8gdGhpcy5fbWFwLm9uKCdsb2NhdGlvbmVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gICBnZW9sb2NhdGUuaW5uZXJIVE1MID0gJ1Bvc2l0aW9uIGNvdWxkIG5vdCBiZSBmb3VuZCc7XG4gICAgLy8gfSk7XG5cblxuICB9XG5cbiAgZGMubWFwLmNvdW50ID0gMDtcblxuICBkYy5tYXAuYWRkTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgZmwgPSBsYXllci5mZWF0dXJlbGF5ZXI7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkTGF5ZXIoZmwpO1xuXG4gICAgLy8gY3JlYXRlIHBvcHVwIHRhYmxlIGZvciBlYWNoIGZlYXR1cmVcbiAgICBmbC5lYWNoTGF5ZXIoZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgIHZhciBjb250ZW50ID0gJzx0YWJsZSBjbGFzcz1cImRyb3BjaG9wLXRhYmxlXCI+PHRyPjx0aD5Qcm9wZXJ0eTwvdGg+PHRoPkRhdGE8L3RoPjwvdHI+JztcblxuICAgICAgaWYgKGxheWVyLmZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGxheWVyLmZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICAgIGNvbnRlbnQgKz0gJzx0cj48dGQ+PHN0cm9uZz4nICsgcHJvcCArICc8L3N0cm9uZz48L3RkPjx0ZD4nICsgbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzW3Byb3BdICsgJzwvdGQ+PC90cj4nO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50ICs9ICc8cD5UaGVyZSBhcmUgbm8gcHJvcGVydGllcyBzZXQgZm9yIHRoaXMgZmVhdHVyZS48L3A+JztcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgKz0gJzwvdGFibGU+JztcblxuICAgICAgbGF5ZXIuYmluZFBvcHVwKEwucG9wdXAoe1xuICAgICAgICBtYXhXaWR0aDogNDUwLFxuICAgICAgICBtYXhIZWlnaHQ6IDIwMCxcbiAgICAgICAgYXV0b1BhblBhZGRpbmc6IFs0NSwgNDVdLFxuICAgICAgICBjbGFzc05hbWU6ICdkcm9wY2hvcC1wb3B1cCdcbiAgICAgIH0sIGxheWVyKS5zZXRDb250ZW50KGNvbnRlbnQpKTtcbiAgICB9KTtcblxuICB9O1xuXG4gIGRjLm1hcC5oaWRlTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5yZW1vdmVMYXllcihsYXllci5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIGRjLm1hcC5zaG93TGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRMYXllcihsYXllci5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIGRjLm1hcC5yZW1vdmVMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLnJlbW92ZUxheWVyKGRjLmxheWVycy5saXN0W3N0YW1wXS5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm1lbnVzID0gZGMubWVudXMgfHwge307XG4gIGRjLm1lbnVzLmdlbyA9IGRjLm1lbnVzLmdlbyB8fCB7fTtcblxuICBkYy5tZW51cy5nZW8uaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGJ1aWxkIG9wcy5nZW8gY29udGFpbmVyXG4gICAgdmFyIGdlb0NvbnRhaW5lciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ29wZXJhdGlvbnMtZ2VvJyk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGdlb0NvbnRhaW5lcik7XG5cbiAgICAvLyB3aXJlIHVwIHNpZ25hbCBoYW5kbGVyc1xuICAgICQoZGMpLm9uKCdsYXllcjpzZWxlY3RlZCcsIGRjLm1lbnVzLmdlby5nZW9DaGVjayk7XG4gICAgJChkYykub24oJ2xheWVyOnVuc2VsZWN0ZWQnLCBkYy5tZW51cy5nZW8uZ2VvQ2hlY2spO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246Z2VvJywgZGMubWVudXMuZ2VvLmdlb0V4ZWN1dGUpO1xuXG4gICAgLy8gY3JlYXRlIGdlbyBidXR0b25zICYgZm9ybXNcbiAgICBmb3IgKHZhciBnZW9PcCBpbiBkYy5vcHMuZ2VvKSB7XG4gICAgICB2YXIgZ2VvQnRuID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnb3BlcmF0aW9uIG9wZXJhdGlvbi1nZW8gb3BlcmF0aW9uLWluYWN0aXZlJylcbiAgICAgICAgLmh0bWwoJzxoND4nICsgZ2VvT3AgKyAnPC9oND48cD4nICsgZGMub3BzLmdlb1tnZW9PcF0uZGVzY3JpcHRpb24gKyAnPC9wPicpXG4gICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIC5hdHRyKCdkYXRhLW9wZXJhdGlvbicsIGdlb09wKTtcbiAgICAgIGdlb0J0bi5vbignY2xpY2snLCBfaGFuZGxlQnRuQ2xpY2spO1xuXG4gICAgICBnZW9Db250YWluZXIuYXBwZW5kKGdlb0J0bik7XG4gICAgfVxuICB9O1xuXG5cbiAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuICAvKiBpZ25vcmluZyB0aGVzZSBmdW5jdGlvbnMgaW4ganNoaW50IGJlY2F1c2Ugd2UgYXJlIGdldHRpbmdcbiAgYW4gdW5lY2Vzc2FyeSBzdHJpY3QgdmlvbGF0aW9uIHdhcm5pbmcsIGJ1dCBvdXIgdXNhZ2Ugb2YgYHRoaXNgXG4gIGlzIHByb3BlciBoZXJlLiAqL1xuICBmdW5jdGlvbiBfaGFuZGxlQnRuQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgLy8gaWYgb3BlcmF0aW9uIHJlcXVpcmVzIG5vIHBhcmFtZXRlcnMsIGRvbid0IHJlbmRlciBhIGZvcm1cbiAgICBpZiAoIWRjLm9wcy5nZW9bb3BlcmF0aW9uXS5wYXJhbWV0ZXJzKSB7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdvcGVyYXRpb246Z2VvJywgW29wZXJhdGlvbiwgZGMuc2VsZWN0aW9uLmxpc3RdKTtcbiAgICAvLyBvdGhlcndpc2UgcmVuZGVyIHRoZSBmb3JtXG4gICAgfSBlbHNlIHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06Z2VvJywgW29wZXJhdGlvbl0pO1xuICAgIH1cbiAgfVxuICAvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuXG4gIC8vIFNvcnQgdHVyZiBvcGVyYXRpb25zIGJ5IGF2YWlsYWJsaWxpdHkgYW5kIGFscGhhYmV0aWNhbGx5XG4gIGZ1bmN0aW9uIF9zb3J0R2VvKCkge1xuXG4gICAgLy8gR2V0IGFsbCBvZiB0aGUgdHVyZiBidXR0b25zIGFuZCBzb3J0IHRoZW0gYWxwaGFiZXRpY2FsbHlcbiAgICB2YXIgYWxwaGEgPSAkKCcub3BlcmF0aW9uLWdlbycpLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuICgkKGIpLmRhdGEoJ29wZXJhdGlvbicpIDwgJChhKS5kYXRhKCdvcGVyYXRpb24nKSkgPyAxIDogLTE7XG4gICAgfSk7XG5cbiAgICAvLyBHcmFiIGFsbCB0aGUgYWN0aXZlIGJ1dHRvbnMgYW5kIHJlYXBwZW5kIHRoZW1cbiAgICBhbHBoYS5maWx0ZXIoZnVuY3Rpb24oaSwgZCkge1xuICAgICAgaWYgKCEoJChkKS5wcm9wKCdkaXNhYmxlZCcpKSkgeyByZXR1cm4gZDsgfVxuICAgIH0pLmFwcGVuZFRvKCcub3BlcmF0aW9ucy1nZW8nKTtcblxuICAgIC8vIEdyYWIgYWxsIHRoZSBpbmFjdGl2ZSBidXR0b25zIGFuZCByZWFwcGVuZCB0aGVtXG4gICAgYWxwaGEuZmlsdGVyKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgIGlmICgkKGQpLnByb3AoJ2Rpc2FibGVkJykpIHsgcmV0dXJuIGQ7IH1cbiAgICB9KS5hcHBlbmRUbygnLm9wZXJhdGlvbnMtZ2VvJyk7XG5cbiAgICAvLyBTY3JvbGwgdG8gdGhlIHRvcCB0byBrZWVwIHRoaW5ncyBuaWNlXG4gICAgJCgnLm9wZXJhdGlvbnMtZ2VvJykuc2Nyb2xsVG9wKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSB0dXJmIGZ1bmN0aW9uIGJhc2VkIG9uIGJ1dHRvbiBvcGVyYXRpb24gY2xpY2suXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcmlnaW5hbCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRpb24gdG8gYmUgZXhlY3V0ZWQgdmlhIHR1cmZcbiAgICogQHBhcmFtIHthcnJheX0gc2VyaWVzIG9mIHBhcmFtZXRlcnMgdG8gYmUgYXBwbGllZCB0byB0dXJmIG9wZXJhdGlvblxuICAgKi9cbiAgZGMubWVudXMuZ2VvLmdlb0V4ZWN1dGUgPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uLCBwYXJhbWV0ZXJzKSB7XG4gICAgdmFyIHByZXAgPSBkYy5tZW51cy5nZW8ucHJlcGFyZVR1cmZQYXJhbXMob3BlcmF0aW9uLCBwYXJhbWV0ZXJzKTtcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZGMub3BzLmdlb1tvcGVyYXRpb25dLmV4ZWN1dGUocHJlcC5vcHRpb25zKTtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgZGMubm90aWZ5KCdUaGF0IG9wZXJhdGlvbiBpc25cXCd0IHBvc3NpYmxlLiBUcnkgY2hhbmdpbmcgdGhlIG9yZGVyIG9mIHlvdXIgc2VsZWN0aW9uLicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbcHJlcC5uYW1lLCByZXN1bHRdKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJlcGFyZSBwYXJhbWV0ZXJzIGZvciBleGVjdXRpbmcgd2l0aGluIGEgdHVyZiBmdW5jdGlvbiB1c2luZyAuYXBwbHkoKSAtIHJldHVybnMgYW4gYXJyYXlcbiAgICogQHBhcmFtIHthcnJheX0gb3B0aW9ucyBmcm9tIHRoZSB1c2VyIHBhc3NlZCBmcm9tIHRoZSBvcmlnaW5hbCBldmVudCB0cmlnZ2VyXG4gICAqL1xuICBkYy5tZW51cy5nZW8ucHJlcGFyZVR1cmZQYXJhbXMgPSBmdW5jdGlvbihvcGVyYXRpb24sIHBhcmFtcykge1xuICAgIHZhciBkYXRhID0ge307XG4gICAgZGF0YS5vcHRpb25zID0gW107XG5cbiAgICB2YXIgZ2VvbXMgPSBbXTtcbiAgICB2YXIgbmFtZUFycmF5ID0gW107XG4gICAgLy8gZ2V0IGdlb21ldHJ5IGFycmF5IGZyb20gc2VsZWN0aW9uXG4gICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBpZiAoJC5pbkFycmF5KCdzd2l0Y2gtJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wLCBwYXJhbXMpID09PSAtMSkge1xuICAgICAgICBnZW9tcy5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZW9tcy51bnNoaWZ0KGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICB9XG4gICAgICBuYW1lQXJyYXkucHVzaChkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lKTtcbiAgICB9KTtcblxuICAgIC8vIG1lcmdlIHBhcmFtcyB3aXRoIG9wdGlvbnMgYXJyYXlcbiAgICBkYXRhLm9wdGlvbnMgPSAkLm1lcmdlKGdlb21zLCBwYXJhbXMpO1xuXG4gICAgLy8gY3JlYXRlIG5hbWUgYXJyYXlcbiAgICBkYXRhLm5hbWUgPSBkYy51dGlsLmNvbmNhdChuYW1lQXJyYXksICdfJywgb3BlcmF0aW9uKTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9O1xuXG4gIGRjLm1lbnVzLmdlby5nZW9DaGVjayA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIC8vIGNoZWNrIHNlbGVjdGlvbiBjb3VudCB2cyBvcGVyYXRpb24gbWluL21heFxuICAgIGZvciAodmFyIG8gaW4gZGMub3BzLmdlbykge1xuICAgICAgdmFyIG9wID0gZGMub3BzLmdlb1tvXTtcbiAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPiBvcC5tYXhGZWF0dXJlcyB8fCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPCBvcC5taW5GZWF0dXJlcykge1xuICAgICAgICB0dXJuSXRPZmYobyk7XG4gICAgICAgIC8vIGRvbid0IGdvIGFueSBmdXJ0aGVyXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIC8vIGNoZWNrIG9wZXJhdGlvbiBhZ2FpbnN0IGVhY2ggc2VsZWN0aW9uIGRhdGEgdHlwZVxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aDsgeCsrKSB7XG4gICAgICAgICAgdmFyIHNlbCA9IGRjLnNlbGVjdGlvbi5saXN0W3hdO1xuXG4gICAgICAgICAgLy8gaWYgdGhlIHNlbGVjdGlvbiB0eXBlIGlzIGluIHRoZSBhcnJheSwgbWFyayBpdCBhcyBhY3RpdmUhXG4gICAgICAgICAgaWYgKCQuaW5BcnJheShzZWwudHlwZSwgb3AucmVxdWlyZW1lbnRzLnR5cGVzKSA+IC0xIHx8IG9wLnJlcXVpcmVtZW50cy5nZW5lcmFsRmVhdHVyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdHVybkl0T24obyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHR1cm5JdE9mZihvKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHR1cm5JdE9mZihvcCkge1xuICAgICAgdmFyIGJ0biA9ICQoJ1tkYXRhLW9wZXJhdGlvbj0nKyBvcCArJ10nKTtcbiAgICAgIGJ0bi5hZGRDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICBidG4ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0dXJuSXRPbihvcCkge1xuICAgICAgdmFyIGJ0biA9ICQoJ1tkYXRhLW9wZXJhdGlvbj0nKyBvcCArJ10nKTtcbiAgICAgIGJ0bi5yZW1vdmVDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICBidG4ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLy8gU29ydCB0aGUgbGlzdFxuICAgIF9zb3J0R2VvKCk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm1lbnVzID0gZGMubWVudXMgfHwge307XG4gIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUgPSBkYy5tZW51cy5sYXllckNvbnRleHRNZW51IHx8IHt9O1xuXG4gIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFJlbW92ZSBvcGVuIG1lbnVzXG4gICAgJCgnaHRtbCcpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUucmVtb3ZlTGF5ZXJDb250ZXh0TWVudXMoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBHZW5lcmF0ZSBsYXllciBjb250ZXh0IG1lbnUgZG9tIGVsZW1lbnQgKGJvdW5kIHRvIHJpZ2h0LWNsaWNrIG9uIGxheWVybGlzdClcbiAgZGMubWVudXMubGF5ZXJDb250ZXh0TWVudS5jcmVhdGVMYXllckNvbnRleHRNZW51ID0gZnVuY3Rpb24oJGxheWVyTmFtZURpdiwgeFBvcywgeVBvcykge1xuICAgIGlmICghKCRsYXllck5hbWVEaXYgaW5zdGFuY2VvZiBqUXVlcnkpKSB7XG4gICAgICAkbGF5ZXJOYW1lRGl2ID0gJCgkbGF5ZXJOYW1lRGl2KTtcbiAgICB9XG5cbiAgICAvLyBDbG9zZSBhbnkgYWxyZWFkeS1vcGVuIGNvbnRleHRtZW51c1xuICAgIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUucmVtb3ZlTGF5ZXJDb250ZXh0TWVudXMoKTtcblxuICAgIC8vIFNlbGVjdCByaWdodC1jbGlja2VkIGxheWVyLlxuICAgIHZhciBsYXllciA9ICRsYXllck5hbWVEaXYucGFyZW50KCk7XG4gICAgdmFyIGx5ckRhdGEgPSBkYy5sYXllcnMubGlzdFtsYXllci5hdHRyKCdkYXRhLXN0YW1wJyldO1xuXG4gICAgLy8gU2VsZWN0IGxheWVyIGlmIHVuc2VsZWN0ZWRcbiAgICBpZiAoIShkcm9wY2hvcC5zZWxlY3Rpb24uaXNTZWxlY3RlZChseXJEYXRhKSkpIHtcbiAgICAgICRsYXllck5hbWVEaXYudHJpZ2dlcignY2xpY2snKTtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgbGVmdC1jbGljayBjb250ZXh0LW1lbnVcbiAgICB2YXIgbWVudSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2NvbnRleHQtbWVudScpO1xuXG4gICAgdmFyIG1lbnVMaXN0ID0gJCgnPHVsPicpO1xuICAgIG1lbnUuYXBwZW5kKG1lbnVMaXN0KTtcblxuICAgIC8vIHBvcHVsYXRlIGNvbnRleHQtbWVudVxuICAgIHZhciBtZW51SXRlbXMgPSB7XG4gICAgICAvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG4gICAgICAndGl0bGUxJzogJ0xheWVyJyxcbiAgICAgICdyZW5hbWUnOiBkYy5vcHMuZmlsZVsncmVuYW1lJ10sXG4gICAgICAnZHVwbGljYXRlJzogZGMub3BzLmZpbGVbJ2R1cGxpY2F0ZSddLFxuICAgICAgJ3JlbW92ZSc6IGRjLm9wcy5maWxlWydyZW1vdmUnXSxcbiAgICAgICd0aXRsZTInOiAnR2VvJyxcbiAgICAgICdleHRlbnQnOiBkYy5vcHMuZmlsZVsnZXh0ZW50J10sXG4gICAgICAnZXhwYW5kJzogZGMub3BzLmZpbGVbJ2V4cGFuZCddLFxuICAgICAgJ2NvbWJpbmUnOiBkYy5vcHMuZmlsZVsnY29tYmluZSddLFxuICAgICAgLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgbWVudUl0ZW0gaW4gbWVudUl0ZW1zKSB7XG4gICAgICB2YXIgaXRlbSA9IG1lbnVJdGVtc1ttZW51SXRlbV07XG4gICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnIHx8IGl0ZW0gaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgbWVudUxpc3QuYXBwZW5kKCQoJzxsaSBjbGFzcz1cInRpdGxlXCI+PGg0PicgKyBpdGVtICsgJzwvaDQ+PC9saT4nKSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIGZpbGVCdG4gPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uJylcbiAgICAgICAgLmh0bWwoJzxkaXYgY2xhc3M9XCJpY29uXCI+JyArIGl0ZW0uaWNvbiArICc8L2Rpdj48ZGl2IGNsYXNzPVwiZGVzY3JpcHRpb25cIj4nICsgaXRlbS5kZXNjcmlwdGlvbiArICc8L2Rpdj4nKVxuICAgICAgICAuYXR0cignZGF0YS1vcGVyYXRpb24nLCBtZW51SXRlbSlcbiAgICAgICAgLmF0dHIoJ2RhdGEtdG9vbHRpcCcsIGl0ZW0uZGVzY3JpcHRpb24pO1xuXG4gICAgICAvLyBkaXNhYmxlIGludmFsaWQgb3BlcmF0aW9uc1xuICAgICAgaWYgKFxuICAgICAgICAoaXRlbS5taW5GZWF0dXJlcyA+IGRyb3BjaG9wLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCkgfHxcbiAgICAgICAgKGl0ZW0ubWF4RmVhdHVyZXMgPCBkcm9wY2hvcC5zZWxlY3Rpb24ubGlzdC5sZW5ndGgpXG4gICAgICApIHtcbiAgICAgICAgZmlsZUJ0bi5hZGRDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICB9XG4gICAgICBmaWxlQnRuLm9uKCdjbGljaycsIF9oYW5kbGVCdG5DbGljayk7XG4gICAgICBtZW51TGlzdC5hcHBlbmQoZmlsZUJ0bik7XG4gICAgfVxuXG5cbiAgICAvLyBtYWtlIHN1cmUgdG8gc2V0IHZpc2liaWxpdHk6aGlkZGVuXG4gICAgbWVudS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAvLyBhcHBlbmQgdG8gRE9NXG4gICAgbGF5ZXIucGFyZW50KCkuYXBwZW5kKG1lbnUpO1xuXG4gICAgLy8gY2FsY3VsYXRlIHRoZSBoZWlnaHQsIHNldCBwb3NpdGlvblxuICAgIHZhciBwb3NpdGlvbiA9IF9jYWxjdWxhdGVNZW51TG9jYXRpb24oKTtcbiAgICBtZW51LmNzcyhwb3NpdGlvbik7XG5cbiAgICAvLyByZW1vdmUgdmlzaWJpbGl0eTpoaWRkZW5cbiAgICBtZW51LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgIGZ1bmN0aW9uIF9jYWxjdWxhdGVNZW51TG9jYXRpb24oKSB7XG4gICAgICAvLyBidWZmZXIgZnJvbSB0aGUgZWRnZSBvZiB0aGUgd2luZG93IChpbiBwaXhlbHMpXG4gICAgICB2YXIgYnVmZmVyID0gMTA7XG5cbiAgICAgIC8vIGZpcnN0IGdldCB0aGUgd2luZG93IGhlaWdodFxuICAgICAgdmFyIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcblxuICAgICAgLy8gdGhlbiBnZXQgdGhlIG1lbnUgaGVpZ2h0XG4gICAgICB2YXIgbWVudUhlaWdodCA9IG1lbnUuaGVpZ2h0KCk7XG5cbiAgICAgIC8vIGNoZWNrIHRvIG1ha2Ugc3VyZSBmcm9tIHRoZSB0b3Agb2Ygd2luZG93IHRvIHRoZSBib3R0b20gb2YgbWVudVxuICAgICAgLy8gaXMgbGFyZ2VyIHRoYW4gdGhlIHdpbmRvdyBoZWlnaHRcbiAgICAgIGlmICggeVBvcyArIG1lbnVIZWlnaHQgPCB3aW5kb3dIZWlnaHQgKSB7XG4gICAgICAgIC8vIHJldHVybiBub3JtYWxseVxuICAgICAgICByZXR1cm4ge3RvcDogeVBvcywgbGVmdDogeFBvc307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiBpdCBpc24ndCwgZmlndXJlIG91dCBieSBob3cgbXVjaCwgYW5kIHJldHVyblxuICAgICAgICAvLyB5IHBvc2l0aW9uIHdpdGggc2FmZSBjb250ZXh0IHNwYWNlIGFuZCBidWZmZXIgZnJvbSB0aGUgd2luZG93XG4gICAgICAgIHZhciBkaWZmZXJlbmNlID0gKHlQb3MgKyBtZW51SGVpZ2h0KSAtIHdpbmRvd0hlaWdodDtcbiAgICAgICAgcmV0dXJuIHt0b3A6ICh5UG9zIC0gZGlmZmVyZW5jZSAtIGJ1ZmZlciksIGxlZnQ6IHhQb3N9O1xuICAgICAgfVxuXG4gICAgfVxuXG4gIH07XG5cbiAgLy8gUmVtb3ZlIGFueSBvcGVuIGNvbnRleHQtbWVudXMgZnJvbSBET01cbiAgZGMubWVudXMubGF5ZXJDb250ZXh0TWVudS5yZW1vdmVMYXllckNvbnRleHRNZW51cyA9IGZ1bmN0aW9uKCkge1xuICAgICQoJy5jb250ZXh0LW1lbnUnKS5yZW1vdmUoKTtcbiAgfTtcblxuICAvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG4gIC8qIGlnbm9yaW5nIHRoZXNlIGZ1bmN0aW9ucyBpbiBqc2hpbnQgYmVjYXVzZSB3ZSBhcmUgZ2V0dGluZ1xuICBhbiB1bmVjZXNzYXJ5IHN0cmljdCB2aW9sYXRpb24gd2FybmluZywgYnV0IG91ciB1c2FnZSBvZiBgdGhpc2BcbiAgaXMgcHJvcGVyIGhlcmUuICovXG4gIGZ1bmN0aW9uIF9oYW5kbGVCdG5DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIG9wZXJhdGlvbiA9ICQodGhpcykuYXR0cignZGF0YS1vcGVyYXRpb24nKTtcbiAgICB0cnkge1xuICAgICAgZGMub3BzLmZpbGVbb3BlcmF0aW9uXS5leGVjdXRlKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoaXMgb3BlcmF0aW9uIGRvZXNuXFwndCBleGlzdCEnKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH07XG4gIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm1lbnVzID0gZGMubWVudXMgfHwge307XG4gIGRjLm1lbnVzLmxlZnQgPSBkYy5tZW51cy5sZWZ0IHx8IHt9O1xuXG4gIGRjLm1lbnVzLmxlZnQuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIHdpcmUgdXAgc2lnbmFsIGhhbmRsZXJzXG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtZ2lzdCcsIGRjLm9wcy5maWxlWydsb2FkLWdpc3QnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLXVybCcsIGRjLm9wcy5maWxlWydsb2FkLXVybCddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtb3ZlcnBhc3MnLCBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtYXJjZ2lzJywgZGMub3BzLmZpbGVbJ2xvYWQtYXJjZ2lzJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC1jdXN0b20tYmFzZScsIGRjLm9wcy5maWxlWydsb2FkLWN1c3RvbS1iYXNlJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6cmVuYW1lJywgZGMub3BzLmZpbGUucmVuYW1lLmNhbGxiYWNrKTtcblxuICAgIGRjLm1lbnVzLmxlZnQuc2V0dXAgPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdpbXBvcnQnLFxuICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1wbHVzXCI+PC9pPicsXG4gICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAndXBsb2FkJyxcbiAgICAgICAgICAnbG9hZC11cmwnLFxuICAgICAgICAgICdsb2FkLWdpc3QnLFxuICAgICAgICAgICdsb2FkLW92ZXJwYXNzJyxcbiAgICAgICAgICAnbG9hZC1hcmNnaXMnLFxuICAgICAgICAgICdsb2FkLWN1c3RvbS1iYXNlJyxcbiAgICAgICAgICAnbG9jYXRpb24nXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdTYXZlJyxcbiAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZmxvcHB5LW9cIj48L2k+JyxcbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICdzYXZlLWdlb2pzb24nLFxuICAgICAgICAgICdzYXZlLXRvcG9qc29uJyxcbiAgICAgICAgICAnc2F2ZS1zaGFwZWZpbGUnXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICAnaW5mbydcbiAgICBdO1xuXG4gICAgLy8gc2V0dXAgb3BzIGZpbGVcbiAgICB2YXIgbGVmdE1lbnUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1tZW51LWxlZnQnKTtcbiAgICB2YXIgc2V0dXAgPSBkYy5tZW51cy5sZWZ0LnNldHVwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR1cC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGFjdGlvbiA9IHNldHVwW2ldO1xuICAgICAgaWYgKHR5cGVvZiBzZXR1cFtpXSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYoZGMub3BzLmZpbGVbYWN0aW9uXS50eXBlID09PSAnYnJlYWsnKSB7XG4gICAgICAgICAgdmFyICRicmVha1NwYWNlID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbWVudS1hY3Rpb24tYnJlYWsnKTtcbiAgICAgICAgICBsZWZ0TWVudS5hcHBlbmQoJGJyZWFrU3BhY2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxlZnRNZW51LmFwcGVuZChidWlsZE1lbnVCdXR0b24oYWN0aW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYnVpbGQgYSBjb2xsYXBzZWFibGUgbWVudSBcImJ1dHRvblwiXG4gICAgICAgIHZhciBjb2xsYXBzZUJ0biA9ICQoJzxkaXY+JylcbiAgICAgICAgICAuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uIG1lbnUtY29sbGFwc2UnKVxuICAgICAgICAgIC5odG1sKHNldHVwW2ldLmljb24pO1xuICAgICAgICBpZiAoc2V0dXBbaV0ubmFtZSA9PT0gJ2ltcG9ydCcpIGNvbGxhcHNlQnRuLmFkZENsYXNzKCdtZW51LWltcG9ydCcpO1xuXG4gICAgICAgIHZhciBjb2xsYXBzZUlubmVyID0gJCgnPGRpdj4nKVxuICAgICAgICAgIC5hZGRDbGFzcygnbWVudS1jb2xsYXBzZS1pbm5lcicpO1xuXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIGFjdGlvbiBhbmQgYnVpbGQgYSBidXR0b24gZm9yIGl0LCBqdXN0IGxpa2UgYWJvdmUsXG4gICAgICAgIC8vIGJ1dCBhcHBlbmQgaXQgdG8gdGhlIG1lbnUtY29sbGFwc2UtaW5uZXIgZWxlbWVudFxuICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IHNldHVwW2ldLmFjdGlvbnMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICB2YXIgYWN0biA9IHNldHVwW2ldLmFjdGlvbnNbYV07XG4gICAgICAgICAgY29sbGFwc2VJbm5lci5hcHBlbmQoYnVpbGRNZW51QnV0dG9uKGFjdG4pKTtcbiAgICAgICAgfVxuICAgICAgICBjb2xsYXBzZUJ0bi5hcHBlbmQoY29sbGFwc2VJbm5lcik7XG5cbiAgICAgICAgLy8gYXBwZW5kIHRoZSBlbnRpcmUgY29sbGFwc2VCdG4gdG8gdGhlIGxlZnRNZW51XG4gICAgICAgIGxlZnRNZW51LmFwcGVuZChjb2xsYXBzZUJ0bik7XG4gICAgICB9XG4gICAgfVxuICAgIGRjLiRlbGVtLmFwcGVuZChsZWZ0TWVudSk7XG5cbiAgICBmdW5jdGlvbiBidWlsZE1lbnVCdXR0b24oYWN0aW9uKSB7XG4gICAgICB2YXIgYnV0dG9uID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbWVudS1hY3Rpb24nKVxuICAgICAgICAuaHRtbChkYy5vcHMuZmlsZVthY3Rpb25dLmljb24gfHwgJyEnKVxuICAgICAgICAuYXR0cignZGF0YS1vcGVyYXRpb24nLCBhY3Rpb24pXG4gICAgICAgIC5hdHRyKCdkYXRhLXRvb2x0aXAnLCBkYy5vcHMuZmlsZVthY3Rpb25dLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKGRjLm9wcy5maWxlW2FjdGlvbl0udHlwZSA9PT0gJ2luZm8nKSBidXR0b24uYWRkQ2xhc3MoJ2Ryb3BjaG9wLWluZm8nKTtcbiAgICAgIGJ1dHRvbi5vbignY2xpY2snLCBfaGFuZGxlQnRuQ2xpY2spO1xuICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG4gIH07XG5cbiAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuICAvKiBpZ25vcmluZyB0aGVzZSBmdW5jdGlvbnMgaW4ganNoaW50IGJlY2F1c2Ugd2UgYXJlIGdldHRpbmdcbiAgYW4gdW5lY2Vzc2FyeSBzdHJpY3QgdmlvbGF0aW9uIHdhcm5pbmcsIGJ1dCBvdXIgdXNhZ2Ugb2YgYHRoaXNgXG4gIGlzIHByb3BlciBoZXJlLiAqL1xuICBmdW5jdGlvbiBfaGFuZGxlQnRuQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgdHJ5IHtcbiAgICAgIGRjLm9wcy5maWxlW29wZXJhdGlvbl0uZXhlY3V0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGlzIG9wZXJhdGlvbiBkb2VzblxcJ3QgZXhpc3QhJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuICAvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubm90aWZ5ID0gZnVuY3Rpb24odHlwZSwgdGV4dCwgdGltZSkge1xuICAgIHZhciBub3RlID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbm90aWZpY2F0aW9uJylcbiAgICAgIC5hZGRDbGFzcyh0eXBlKVxuICAgICAgLmh0bWwodGV4dCk7XG5cbiAgICAvLyBgdGltZWAgY2FuIGVxdWFsICdjbG9zZScgaW4gb3JkZXIgdG8gY3JlYXRlIGEgY2xvc2UgYnV0dG9uXG4gICAgaWYgKHRpbWUgPT09ICdjbG9zZScpIHtcblxuICAgICAgdmFyICRjbG9zZSA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ25vdGlmaWNhdGlvbi1jbG9zZScpXG4gICAgICAgIC5wcm9wKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgICAgIC5odG1sKCc8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCI+PC9pPicpO1xuXG4gICAgICAkY2xvc2Uub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkKG5vdGUpLmFwcGVuZCgkY2xvc2UpO1xuICAgICAgJChkYy4kZWxlbSkuYXBwZW5kKG5vdGUpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgJChkYy4kZWxlbSkuYXBwZW5kKG5vdGUpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBub3RlLnJlbW92ZSgpO1xuICAgICAgfSwgdGltZSB8fCAzMDAwKTtcblxuICAgIH1cblxuICAgIFxuXG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuZmlsZSA9IHtcblxuICAgIC8vXG4gICAgLy8gSW1wb3J0IERhdGFcbiAgICAvLy9cbiAgICB1cGxvYWQ6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnVXBsb2FkIGZyb20geW91ciBjb21wdXRlciAoLmdlb2pzb24pJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXVwbG9hZFwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGluc3BpcmVkIGZyb20gZ2VvanNvbi5pb1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L2dlb2pzb24uaW8vYmxvYi9naC1wYWdlcy9zcmMvdWkvZmlsZV9iYXIuanMjTDM5MFxuICAgICAgICB2YXIgJGJsaW5kSW5wdXQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAgICAgLmF0dHIoJ3R5cGUnLCAnZmlsZScpXG4gICAgICAgICAgICAgIC5hdHRyKCdtdWx0aXBsZScsICd0cnVlJylcbiAgICAgICAgICAgICAgLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKVxuICAgICAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpXG4gICAgICAgICAgICAgIC5jc3MoJ2hlaWdodCcsICcwJylcbiAgICAgICAgICAgICAgLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLmZpbGVzO1xuICAgICAgICAgICAgICAgICQoZmlsZXMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgICAgICAgZGMudXRpbC5yZWFkRmlsZShmaWxlc1tpXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJGJsaW5kSW5wdXQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRibGluZElucHV0KTtcbiAgICAgICAgJGJsaW5kSW5wdXQuY2xpY2soKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtdXJsJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdJbXBvcnQgZmlsZSBmcm9tIGEgVVJMJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpbmtcIj48L2k+JyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1cmwnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonVVJMJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHA6Ly8nLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtdXJsJ10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIHVybCA9IHBhcmFtZXRlcnNbMF07XG4gICAgICAgIGRjLnV0aWwueGhyKHVybCwgZGMub3BzLmZpbGVbbmFtZV0uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAvLyBnZXQgZmlsZW5hbWUgYmFzZWQgb24gdGhlIGVuZCBvZiB0aGUgdXJsIC0gbm90IHN1cmUgaWYgdGhpcyBpcyBzdXN0YWluYWJsZVxuICAgICAgICAgIHZhciBuYW1lID0geGhyLnJlc3BvbnNlVVJMLnN1YnN0cmluZyh4aHIucmVzcG9uc2VVUkwubGFzdEluZGV4T2YoJy8nKSsxKTtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW25hbWUsIGRhdGEsICd1cmwnLCB4aHIucmVzcG9uc2VVUkxdKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHJldHJpZXZlIEdpc3QuIFBsZWFzZSBjaGVjayB5b3VyIFVSTCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLWdpc3QnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0ltcG9ydCBmaWxlcyBmcm9tIEdpc3QnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZ2l0aHViXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZ2lzdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidHaXN0IElEIG9yIFVSTCcsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdodHRwczovL2dpc3QuZ2l0aHViLmNvbS8nXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1naXN0J10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIGdpc3QgPSBwYXJhbWV0ZXJzWzBdLnNwbGl0KCcvJylbcGFyYW1ldGVyc1swXS5zcGxpdCgnLycpLmxlbmd0aC0xXTtcbiAgICAgICAgdmFyIHVybCA9ICdodHRwczovL2FwaS5naXRodWIuY29tL2dpc3RzLycgKyBnaXN0O1xuICAgICAgICBkYy51dGlsLnhocih1cmwsIGRjLm9wcy5maWxlW25hbWVdLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgZm9yICh2YXIgZiBpbiBkYXRhLmZpbGVzKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGRhdGEuZmlsZXNbZl0uZmlsZW5hbWU7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW25hbWUsIEpTT04ucGFyc2UoZGF0YS5maWxlc1tmXS5jb250ZW50KSwgJ2dpc3QnLCB4aHIucmVzcG9uc2VVUkwuc3BsaXQoJy8nKVt4aHIucmVzcG9uc2VVUkwuc3BsaXQoJy8nKS5sZW5ndGggLSAxXV0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGRjLm5vdGlmeSgnc3VjY2VzcycsICdTdWNjZXNmdWxseSByZXRyaWV2ZWQgZ2lzdCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcmV0cmlldmUgR2lzdC4gUGxlYXNlIGNoZWNrIHlvdXIgVVJMJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtYXJjZ2lzJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSBhbiBBcmNHSVMgU2VydmVyIEZlYXR1cmUgU2VydmljZScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1nbG9iZVwiPjwvaT4nLFxuICAgICAgX3RlbXA6IHsnbGF5ZXJOYW1lJzogJ2FyY2pzb24nfSxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdmZWF0dXJlIHNlcnZpY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRW50ZXIgVVJMIHRvIEFyY0dJUyBGZWF0dXJlIFNlcnZpY2UgKGV4LiBodHRwOi8vc2FtcGxlc2VydmVyNi5hcmNnaXNvbmxpbmUuY29tL2FyY2dpcy9yZXN0L3NlcnZpY2VzL0h1cnJpY2FuZXMvTWFwU2VydmVyLzApJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHA6Ly9zYW1wbGVzZXJ2ZXI2LmFyY2dpc29ubGluZS5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvSHVycmljYW5lcy9NYXBTZXJ2ZXIvMCdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd3aGVyZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBIHdoZXJlIGNsYXVzZSBmb3IgdGhlIHF1ZXJ5IGZpbHRlci4gQW55IGxlZ2FsIFNRTCB3aGVyZSBjbGF1c2Ugb3BlcmF0aW5nIG9uIHRoZSBmaWVsZHMgaW4gdGhlIGxheWVyIGlzIGFsbG93ZWQuJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJzE9MSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZXF1ZXN0IHR5cGUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnc2VsZWN0IEpTT05QIGlmIHlvdSByZWNlaXZlIGNyb3NzLW9yaWdpbiByZXNvdXJjZSBzaGFyaW5nIGVycm9ycycsXG4gICAgICAgICAgdHlwZTogJ3JhZGlvJyxcbiAgICAgICAgICBkZWZhdWx0OiAnQ09SUycsXG4gICAgICAgICAgb3B0aW9uczogWydDT1JTJywgJ0pTT05QJ11cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdsaW1pdCB0byBtYXAnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnb25seSBsb2FkIGZlYXR1cmVzIHdpdGhpbiBjdXJyZW50IG1hcCB2aWV3JyxcbiAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnXG5cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtYXJjZ2lzJ10pO1xuICAgICAgfSxcbiAgICAgIGNoZWNrSnNvbnA6IGZ1bmN0aW9uKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnNbMl0gPT09ICdKU09OUCcpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLWFyY2dpcyddLl90ZW1wLmxheWVyTmFtZSA9IHBhcmFtZXRlcnNbMF07XG4gICAgICAgIHZhciBiYm94ID0gJy0xODAsLTkwLDE4MCw5MCc7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzWzNdKSB7XG4gICAgICAgICAgYmJveCA9IGRjLnV0aWwuZ2V0RXNyaUJCb3goKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXJsID0gcGFyYW1ldGVyc1swXSsnL3F1ZXJ5Lyc7XG4gICAgICAgIHZhciB1cmxQYXJhbXMgPSB7XG4gICAgICAgICAgZjogJ2pzb24nLFxuICAgICAgICAgIGluU1I6IDQzMjYsXG4gICAgICAgICAgb3V0U1I6IDQzMjYsXG4gICAgICAgICAgZ2VvbWV0cnk6IGJib3gsXG4gICAgICAgICAgd2hlcmU6IHBhcmFtZXRlcnNbMV0sXG4gICAgICAgICAgb3V0ZmllbGRzOiAnKidcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNvcnMgPSBkYy5vcHMuZmlsZVsnbG9hZC1hcmNnaXMnXS5jaGVja0pzb25wKHBhcmFtZXRlcnMpO1xuICAgICAgICBkYy51dGlsLmdldCh1cmwsIHVybFBhcmFtcywgY29ycylcbiAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1hcmNnaXMnXS5jYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWGhyLCB0ZXh0U3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnRXJyb3InLCB0ZXh0U3RhdHVzLCBlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgdmFyIGdlb2pzb24gPSBkYy51dGlsLmVzcmkyZ2VvKGRhdGEpO1xuICAgICAgICBpZiAoZGF0YS5mZWF0dXJlcy5sZW5ndGg8MSkge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBmZWF0dXJlcyBmb3VuZCBpbiB5b3VyIHF1ZXJ5LicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZGMub3BzLmZpbGVbJ2xvYWQtYXJjZ2lzJ10uX3RlbXAubGF5ZXJOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgZGMubm90aWZ5KCdzdWNjZXNzJywgJ0ZvdW5kIDxzdHJvbmc+JyArIGRhdGEuZmVhdHVyZXMubGVuZ3RoICsgJyBmZWF0dXJlczwvc3Ryb25nPiBmcm9tIHRoZSBBcmNHSVMgU2VydmljZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLW92ZXJwYXNzJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRlcm1pbmFsXCI+PC9pPicsXG4gICAgICBfdGVtcDoge30sXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncXVlcnknLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonRW50ZXIgYSBzZWFyY2ggcXVlcnkgaW4gdGhlIG92ZXJwYXNzLXR1cmJvIHdpemFyZCBzeW50YXguIExlYXJuIG1vcmUgYWJvdXQgPGEgaHJlZj1cImh0dHA6Ly93aWtpLm9wZW5zdHJlZXRtYXAub3JnL3dpa2kvT3ZlcnBhc3NfdHVyYm8vV2l6YXJkXCIgdGFyZ2V0PVwiX2JsYW5rXCI+dGhlIHN1cHBvcnRlZCBmZWF0dXJlczwvYT4uJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2FtZW5pdHk9YmFyJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2xheWVyIG5hbWUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonTmFtZSBvZiB0aGUgbGF5ZXIgYWRkZWQgaWYgcmVzdWx0cyBhcmUgZm91bmQuJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ292ZXJwYXNzX2xheWVyX25hbWUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLW92ZXJwYXNzJ10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgLy8gc2V0IGxheWVyIG5hbWUgdG8gX3RlbXAgZm9yIGxhdGVyIHVzYWdlXG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uX3RlbXAubGF5ZXJOYW1lID0gcGFyYW1ldGVyc1sxXTsgLy8gdGhpcyBpcyB1Z2x5XG5cbiAgICAgICAgLy8gYnVpbGQgdGhlIHF1ZXJ5IHdpdGggYm91bmRpbmcgYm94XG4gICAgICAgIHZhciBiYm94ID0gZGMudXRpbC5nZXRCQm94KCk7XG4gICAgICAgIHZhciBvdmVycGFzc1F1ZXJ5ID0gb3ZlcnBhc3NXaXphcmQocGFyYW1ldGVyc1swXSk7XG4gICAgICAgIGlmIChvdmVycGFzc1F1ZXJ5ID09PSBmYWxzZSlcbiAgICAgICAgICByZXR1cm4gZGMubm90aWZ5KCdlcnJvcicsICdDYW5cXCd0IGNyZWF0ZSBvdmVycGFzcyBxdWVyeSBmb3IgdGhpcyBzZWFyY2ggaW5wdXQuJyk7XG4gICAgICAgIG92ZXJwYXNzV2l6YXJkRXhwYW5kKG92ZXJwYXNzUXVlcnksIGJib3gsIGZ1bmN0aW9uKGVyciwgZXhwYW5kZWRPdmVycGFzc1F1ZXJ5KSB7XG4gICAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgIHJldHVybiBkYy5ub3RpZnkoJ2Vycm9yJywgJ0Vycm9yIHdoaWxlIGV4cGFuZGluZyBvdmVycGFzcyBxdWVyeTogJyArIGVycik7XG4gICAgICAgICAgZGMudXRpbC54aHIoJ2h0dHA6Ly9vdmVycGFzcy1hcGkuZGUvYXBpL2ludGVycHJldGVyP2RhdGE9JytlbmNvZGVVUklDb21wb25lbnQoZXhwYW5kZWRPdmVycGFzc1F1ZXJ5KSwgZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5jYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB2YXIgZ2VvanNvbiA9IG9zbXRvZ2VvanNvbihkYXRhLCB7XG4gICAgICAgICAgICBmbGF0UHJvcGVydGllczogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghZGF0YS5lbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBlbGVtZW50cyBmb3VuZCBpbiB5b3VyIHF1ZXJ5LicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2RjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uX3RlbXAubGF5ZXJOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnRm91bmQgPHN0cm9uZz4nICsgZGF0YS5lbGVtZW50cy5sZW5ndGggKyAnIGVsZW1lbnRzPC9zdHJvbmc+IGZyb20gdGhlIE92ZXJwYXNzIEFQSScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCBxdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbG9jYXRpb246IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWRkIHlvdXIgbG9jYXRpb24gYXMgYSBsYXllcicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jcm9zc2hhaXJzXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0dlb2xvY2F0aW9uIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBicm93c2VyLicsIDQwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm1hcC5tLmxvY2F0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLWN1c3RvbS1iYXNlJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdBZGQgY3VzdG9tIE1hcGJveCBiYXNlbWFwJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLW1hcC1vXCI+PC9pPicsXG4gICAgICBfdGVtcDogJycsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnTWFwIElEJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J01hcCBJRCcsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICd1c2VybmFtZS5pZCcsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnQ3VzdG9tIEJhc2UgTGF5ZXIgTmFtZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidOYW1lIG9mIHRoZSBjdXN0b20gYmFzZWxheWVyIGFkZGVkLicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdCYXNlbWFwIG5hbWUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLWN1c3RvbS1iYXNlJ10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtY3VzdG9tLWJhc2UnXS5fdGVtcCA9IHBhcmFtZXRlcnNbMF07XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLWN1c3RvbS1iYXNlJ10uX3RlbXBfMSA9IHBhcmFtZXRlcnNbMV07XG4gICAgICAgIHZhciB1cmwgPSAnaHR0cHM6Ly9hcGkubWFwYm94LmNvbS92NC8nICsgZGMub3BzLmZpbGVbJ2xvYWQtY3VzdG9tLWJhc2UnXS5fdGVtcCArICcuaHRtbD9hY2Nlc3NfdG9rZW49JyArIGRjLm1hcC50b2tlbjtcbiAgICAgICAgZGMudXRpbC54aHIodXJsLCBkYy5vcHMuZmlsZVtuYW1lXS5jYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIG5ld0xheWVyID0gZGMubWFwLmJhc2VMYXllcnMuYWRkQmFzZUxheWVyKEwubWFwYm94LnRpbGVMYXllcihkYy5vcHMuZmlsZVsnbG9hZC1jdXN0b20tYmFzZSddLl90ZW1wKSxcbiAgICAgICAgICAgIGRjLm9wcy5maWxlWydsb2FkLWN1c3RvbS1iYXNlJ10uX3RlbXBfMSk7XG4gICAgICAgICAgTC5tYXBib3gudGlsZUxheWVyKG5ld0xheWVyKS5hZGRUbyhkYy5tYXAubSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcmV0cmlldmUgYmFzZSBtYXAuIFBsZWFzZSBjaGVjayB5b3VyIE1hcCBJRCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vXG4gICAgLy8gRXhwb3J0IERhdGFcbiAgICAvL1xuICAgICdzYXZlLWdlb2pzb24nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBHZW9KU09OJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGUtY29kZS1vXCI+PC9pPicsXG4gICAgICBjcmVhdGVzTGF5ZXI6IGZhbHNlLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICAgICAgdmFyIHRpdGxlID0gJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJy5nZW9qc29uJztcbiAgICAgICAgICBzYXZlQXMobmV3IEJsb2IoW2NvbnRlbnRdLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04J1xuICAgICAgICAgIH0pLCB0aXRsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ3NhdmUtdG9wb2pzb24nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBUb3BvSlNPTicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1vYmplY3QtdW5ncm91cFwiPjwvaT4nLFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgIHRvcG9qc29uLnRvcG9sb2d5KHtcbiAgICAgICAgICAgICAgY29sbGVjdGlvbjogZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICdwcm9wZXJ0eS10cmFuc2Zvcm0nOiBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmUucHJvcGVydGllcztcbiAgICAgICAgICAgIH19KVxuICAgICAgICAgICk7XG4gICAgICAgICAgdmFyIHRpdGxlID0gJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJy50b3BvanNvbic7XG4gICAgICAgICAgc2F2ZUFzKG5ldyBCbG9iKFtjb250ZW50XSwge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCdcbiAgICAgICAgICB9KSwgdGl0bGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdzYXZlLXNoYXBlZmlsZSc6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdTYXZlIGFzIFNoYXBlZmlsZScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1maWxlXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICBmb2xkZXI6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSxcbiAgICAgICAgICAgICAgdHlwZXM6IHtcbiAgICAgICAgICAgICAgICBwb2ludDogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19wb2ludCcsXG4gICAgICAgICAgICAgICAgcG9seWdvbjogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19wb2x5JyxcbiAgICAgICAgICAgICAgICBsaW5lOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX2xpbmUnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzaHB3cml0ZS5kb3dubG9hZChkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcsIG9wdGlvbnMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZGMubm90aWZ5KCdFcnJvcicsICdUaGVyZSB3YXMgYSBwcm9ibGVtIGRvd25sb2FkaW5nIHRoZSBzaGFwZWZpbGUuJyArIGVycik7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBjcmVhdGVzTGF5ZXI6IGZhbHNlXG4gICAgfSxcblxuXG4gICAgLy9cbiAgICAvLyBMYXllciBPcHRpb25zXG4gICAgLy9cbiAgICBleHRlbnQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdWaWV3IGV4dGVudCBvZiBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZ2xvYmVcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZighZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gZXh0ZW50IG9mIGVudGlyZSBsYXllciBsaXN0IGlmIG5vdGhpbmcgc2VsZWN0ZWRcbiAgICAgICAgICBkYy5tYXAubS5maXRCb3VuZHMoZGMubWFwLmxheWVyZ3JvdXAuZ2V0Qm91bmRzKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG90aGVyd2lzZSBidWlsZCB0aGUgYm91bmRzIGJhc2VkIG9uIHNlbGVjdGVkIGxheWVyc1xuICAgICAgICAgIHZhciBib3VuZHM7XG4gICAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICB2YXIgZmwgPSBkYy5zZWxlY3Rpb24ubGlzdFtsXS5mZWF0dXJlbGF5ZXI7XG4gICAgICAgICAgICBpZighbCkgYm91bmRzID0gZmwuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICBlbHNlIGJvdW5kcy5leHRlbmQoZmwuZ2V0Qm91bmRzKCkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZXhwYW5kOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29udmVydCBGZWF0dXJlQ29sbGVjdGlvbiBpbnRvIHNlcGFyYXRlIGZlYXR1cmVzJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWV4cGFuZFwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB2YXIgZmMgPSBkYy5zZWxlY3Rpb24ubGlzdFswXTtcbiAgICAgICAgICBpZiAoZmMucmF3LnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICAgICQoZmMucmF3LmZlYXR1cmVzKS5lYWNoKGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtmYy5uYW1lICsgY291bnQgKyAnXycgKyBmYy5yYXcuZmVhdHVyZXNbZl0uZ2VvbWV0cnkudHlwZSwgZmMucmF3LmZlYXR1cmVzW2ZdXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVGhhdCBuZWVkcyB0byBiZSBhIGZlYXR1cmUgY29sbGVjdGlvbiEnKTtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnTGF5ZXIgaXMgbm90IGEgRmVhdHVyZUNvbGxlY3Rpb24uJyk7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdQbGVhc2Ugc2VsZWN0IGEgc2luZ2xlIGxheWVyIScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNvbWJpbmU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdDb21iaW5lcyBzZWxlY3RlZCBmZWF0dXJlcyBpbnRvIGEgc2luZ2xlIEZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWNvbXByZXNzXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGZjID0ge1xuICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICAgICAgZmVhdHVyZXM6IFtdXG4gICAgICAgIH07XG4gICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3RbZl0ucmF3LnR5cGUgIT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICAgICAgZmMuZmVhdHVyZXMucHVzaChkYy5zZWxlY3Rpb24ubGlzdFtmXS5yYXcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgZGMuc2VsZWN0aW9uLmxpc3RbZl0ubmFtZSArICcgd2FzIG5vdCBhZGRlZCBiZWNhdXNlIGl0IGlzIGFscmVhZHkgYSBGZWF0dXJlQ29sbGVjdGlvbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbJ25ld19GZWF0dXJlQ29sbGVjdGlvbicsIGZjXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ05vIGxheWVycyBzZWxlY3RlZCEnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyAndmlldy1hdHRyaWJ1dGVzJzoge1xuICAgIC8vICAgbWluRmVhdHVyZXM6IDEsXG4gICAgLy8gICBkZXNjcmlwdGlvbjogJ1Nob3cgYXR0cmlidXRlIHRhYmxlJyxcbiAgICAvLyAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRoLWxpc3RcIj48L2k+JyxcbiAgICAvLyAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vICAgICBkYy5hdHRyLnJlbmRlcihkYy5zZWxlY3Rpb24ubGlzdFswXSk7XG4gICAgLy8gICB9XG4gICAgLy8gfSxcblxuICAgIGR1cGxpY2F0ZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0R1cGxpY2F0ZSBzZWxlY3RlZCBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZmlsZXMtb1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmR1cGxpY2F0ZScsIFt0aGlzLnN0YW1wXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVuYW1lOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdSZW5hbWUgbGF5ZXInLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnTmFtZScsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ3JlbmFtZSddKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnUGxlYXNlIHNlbGVjdCA8c3Ryb25nPm9uZSBsYXllcjwvc3Ryb25nPi4nKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW5hbWUnLCBbZGMuc2VsZWN0aW9uLmxpc3RbMF0sIHBhcmFtZXRlcnNbMF1dKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVtb3ZlIHNlbGVjdGVkIGxheWVycycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaC1vXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlJywgW3RoaXMuc3RhbXBdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgICBkYy51dGlsLnVwZGF0ZVNlYXJjaCgpO1xuICAgICAgfVxuICAgIH0sXG5cblxuICAgIC8vXG4gICAgLy8gRXh0cmEgVmlld3NcbiAgICAvL1xuICAgIGluZm86IHtcbiAgICAgIHR5cGU6ICdpbmZvJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTGVhcm4gbW9yZSBhYm91dCBkcm9wY2hvcCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1pbmZvXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJy9hYm91dC5odG1sJztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5vcHMgPSBkYy5vcHMgfHwge307XG5cbiAgZGMub3BzLmdlbyA9IHtcbiAgICBhbG9uZzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBsaW5lIGFuZCByZXR1cm5zIGEgcG9pbnQgYXQgYSBzcGVjaWZpZWQgZGlzdGFuY2UgYWxvbmcgdGhlIGxpbmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidkaXN0YW5jZSBhbG9uZyB0aGUgbGluZScsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0cycsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAna2lsb21ldGVycycsICdyYWRpYW5zJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdhbG9uZycsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuYWxvbmcuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBiZXppZXI6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgbGluZSBhbmQgcmV0dXJucyBhIGN1cnZlZCB2ZXJzaW9uIGJ5IGFwcGx5aW5nIGEgQmV6aWVyIHNwbGluZSBhbGdvcml0aG0uJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZXNvbHV0aW9uJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1RpbWUgaW4gbWlsbGlzZWNvbmRzIGJldHdlZW4gcG9pbnRzJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMDAwMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3NoYXJwbmVzcycsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidhIG1lYXN1cmUgb2YgaG93IGN1cnZ5IHRoZSBwYXRoIHNob3VsZCBiZSBiZXR3ZWVuIHNwbGluZXMnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6ICAwLjg1XG5cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2JlemllcicsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuYmV6aWVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYnVmZmVyOiB7XG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NhbGN1bGF0ZXMgYSBidWZmZXIgZm9yIGlucHV0IGZlYXR1cmVzIGZvciBhIGdpdmVuIHJhZGl1cy4gVW5pdHMgc3VwcG9ydGVkIGFyZSBtaWxlcywga2lsb21ldGVycywgYW5kIGRlZ3JlZXMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdEaXN0YW5jZSB0byBkcmF3IHRoZSBidWZmZXIuJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXQnLFxuICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ21pbGVzJywgJ2ZlZXQnLCAna2lsb21ldGVycycsICdtZXRlcnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5idWZmZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2VudGVyOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZXMgYSBwb2ludCBpbiB0aGUgY2VudGVyIG9mIHRoZSBmZWF0dXJlLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVjdXJzaXZlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1J1biB0aGUgb3BlcmF0aW9uIG9uIGVhY2ggZmVhdHVyZSBpbiB0aGUgY29sbGVjdGlvbiBvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uJyxcbiAgICAgICAgICB0eXBlOiAncmVjdXJzaXZlJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgLy8gaWYgcnVubmluZyB0aGUgb3BlcmF0aW9uIHJlY3Vyc2l2ZWx5IFwidHJ1ZVwiXG4gICAgICAgIGlmIChwYXJhbXNbMV0gPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnY2VudGVyJywgcGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmNlbnRlci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNlbnRyb2lkOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZXMgYSBwb2ludCBpbiB0aGUgY2VudHJvaWQgb2YgdGhlIGZlYXR1cmVzLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVjdXJzaXZlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1J1biB0aGUgb3BlcmF0aW9uIG9uIGVhY2ggZmVhdHVyZSBpbiB0aGUgY29sbGVjdGlvbiBvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uJyxcbiAgICAgICAgICB0eXBlOiAncmVjdXJzaXZlJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgLy8gaWYgcnVubmluZyB0aGUgb3BlcmF0aW9uIHJlY3Vyc2l2ZWx5IFwidHJ1ZVwiXG4gICAgICAgIGlmIChwYXJhbXNbMV0gPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnY2VudHJvaWQnLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuY2VudHJvaWQuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBkZXN0aW5hdGlvbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9pbnQ+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgUG9pbnQgYW5kIGNhbGN1bGF0ZXMgdGhlIGxvY2F0aW9uIG9mIGEgZGVzdGluYXRpb24gcG9pbnQgZ2l2ZW4gYSBkaXN0YW5jZSBpbiBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVyczsgYW5kIGJlYXJpbmcgaW4gZGVncmVlcy4gVGhpcyB1c2VzIHRoZSBIYXZlcnNpbmUgZm9ybXVsYSB0byBhY2NvdW50IGZvciBnbG9iYWwgY3VydmF0dXJlLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZGlzdGFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnRpbmcgcG9pbnQnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnYmVhcmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidyYW5naW5nIGZyb20gLTE4MCB0byAxODAnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6ICAwXG5cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0cycsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAna2lsb21ldGVycycsICdyYWRpYW5zJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdkZXN0aW5hdGlvbicsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuZGVzdGluYXRpb24uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlbnZlbG9wZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ10gLy8gVE9ETzogbWFrZSB0aGlzIHRha2UgZmVhdHVyZXMgYW5kIHJ1biBhY3Jvc3MgZnVsbCBzZWxlY3Rpb25cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGFueSBudW1iZXIgb2YgZmVhdHVyZXMgYW5kIHJldHVybnMgYSByZWN0YW5ndWxhciBQb2x5Z29uIHRoYXQgZW5jb21wYXNzZXMgYWxsIHZlcnRpY2VzLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuZW52ZWxvcGUuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZXhwbG9kZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGZlYXR1cmUgb3Igc2V0IG9mIGZlYXR1cmVzIGFuZCByZXR1cm5zIGFsbCBwb3NpdGlvbnMgYXMgcG9pbnRzLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuZXhwbG9kZS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBtaWRwb2ludDoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9pbnQ+J11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIHR3byBwb2ludHMgYW5kIHJldHVybnMgYSBwb2ludCBtaWR3YXkgYmV0d2VlbiB0aGVtLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYubWlkcG9pbnQuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2ltcGxpZnk6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmU8UG9seWdvbj4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBMaW5lU3RyaW5nIG9yIFBvbHlnb24gYW5kIHJldHVybnMgYSBzaW1wbGlmaWVkIHZlcnNpb24uIEludGVybmFsbHkgdXNlcyBzaW1wbGlmeS1qcyB0byBwZXJmb3JtIHNpbXBsaWZpY2F0aW9uLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3RvbGVyYW5jZScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA6J3NpbXBsaWZpY2F0aW9uIHRvbGVyYW5jZScsXG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IDAuMVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2hpZ2ggcXVhbGl0eScsXG4gICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICd3aGV0aGVyIG9yIG5vdCB0byBzcGVuZCBtb3JlIHRpbWUgdG8gY3JlYXRlIGEgaGlnaGVyLXF1YWxpdHkgc2ltcGxpZmljYXRpb24gd2l0aCBhIGRpZmZlcmVudCBhbGdvcml0aG0nLFxuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnc2ltcGxpZnknLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLnNpbXBsaWZ5LmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdGluOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVHJpYW5ndWxhdGVkIGlycmVndWxhciBuZXR3b3JrLCBpbnRlcnBvbGF0aW9uIG1ldGhvZCcsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYudGluLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuaW9uOiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2x5Z29uPiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyB0d28gcG9seWdvbnMgYW5kIHJldHVybnMgYSBjb21iaW5lZCBwb2x5Z29uLiBJZiB0aGUgaW5wdXQgcG9seWdvbnMgYXJlIG5vdCBjb250aWd1b3VzLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYSBNdWx0aVBvbHlnb24gZmVhdHVyZS4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLnVuaW9uLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHdpdGhpbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgc2V0IG9mIHBvaW50cyBhbmQgYSBzZXQgb2YgcG9seWdvbnMgYW5kIHJldHVybnMgdGhlIHBvaW50cyB0aGF0IGZhbGwgd2l0aGluIHRoZSBwb2x5Z29ucy4gRmlyc3QgaW5wdXQgc2hvdWxkIGJlIHRoZSBwb2ludHMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdQb2ludHMgdG8gY2xpcCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidTZWxlY3QgdGhlIGxheWVyIHRoYXQgcmVwcmVzZW50cyB0aGUgcG9pbnRzIHlvdSB3YW50IHRvIGNsaXAuIFRoaXMgYXNzdW1lcyB0aGUgb3RoZXIgbGF5ZXIgaXMgeW91ciBjbGlwcGluZyBwb2x5Z29uLicsXG4gICAgICAgICAgdHlwZTogJ3N3aXRjaCdcbiAgICAgICAgICAvLyBkZWZhdWx0OiBkYy5zZWxlY3Rpb24ubGlzdFswXVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLndpdGhpbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcblxuICBkYy5zZWxlY3Rpb24gPSB7fTtcbiAgZGMuc2VsZWN0aW9uLmxpc3QgPSBbXTtcblxuICBkYy5zZWxlY3Rpb24uaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdsYXllcjpzZWxlY3RlZCcsIGRjLnNlbGVjdGlvbi5hZGQpO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMuc2VsZWN0aW9uLnJlbW92ZSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBfbGF5ZXJSZW1vdmVkKTtcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uYWRkID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3QucHVzaChsYXllcik7XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLnJlbW92ZSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIHZhciBpbmRleCA9IG51bGw7XG4gICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXAgPT09IGxheWVyLnN0YW1wKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdC5zcGxpY2UoaW5kZXgsIDEpOyAvLyByZW1vdmUgb3V0c2lkZSBvZiB0aGUgbG9vcCBzbyB3ZSBkb24ndCBicmVhayBvdXIgY291bnRcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcubGF5ZXItbmFtZS5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICQoJy5vcGVyYXRpb24tZ2VvJykuYWRkQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICQoJy5vcGVyYXRpb24tZ2VvJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdCA9IFtdO1xuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5pc1NlbGVjdGVkID0gZnVuY3Rpb24obHlyRGF0YSkge1xuICAgIHJldHVybiBCb29sZWFuKGRyb3BjaG9wLnNlbGVjdGlvbi5saXN0LmluZGV4T2YobHlyRGF0YSkgKyAxKTtcbiAgfTtcblxuICBmdW5jdGlvbiBfbGF5ZXJSZW1vdmVkKGV2ZW50LCBzdGFtcCkge1xuICAgIGRjLnNlbGVjdGlvbi5yZW1vdmUoe30sIHtzdGFtcDogc3RhbXB9KTtcbiAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgfVxuXG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG5cbiAgZGMuc2hvcnRjdXRzID0ge307XG4gIGRjLnNob3J0Y3V0cy5saXN0ID0gW107XG5cbiAgZGMuc2hvcnRjdXRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBTZWxlY3QgQWxsXG4gICAgTW91c2V0cmFwLmJpbmQoWydjb21tYW5kK2EnLCAnY3RybCthJ10sIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RBbGwoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIC8vIENsZWFyIFNlbGVjdGlvblxuICAgIE1vdXNldHJhcC5iaW5kKFsnY29tbWFuZCtiYWNrc3BhY2UnLCAnY3RybCtiYWNrc3BhY2UnXSwgZnVuY3Rpb24oZSkge1xuICAgICAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvLyBEZWxldGUgU2VsZWN0ZWQgTGF5ZXJzXG4gICAgTW91c2V0cmFwLmJpbmQoWydjdHJsK3NoaWZ0K2snXSwgZnVuY3Rpb24oZSkge1xuICAgICAgZGMub3BzLmZpbGUucmVtb3ZlLmV4ZWN1dGUoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIC8vIFVuY2hlY2sgTGF5ZXIgVmlzaWJpbGl0eVxuICAgIE1vdXNldHJhcC5iaW5kKFsnY29tbWFuZCtwbHVzJywgJ2N0cmwrcGx1cycsICdjb21tYW5kKz0nLCAnY3RybCs9J10sIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGRyb3BjaG9wLmxheWVybGlzdC5jaGVja0FsbCh0cnVlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIExheWVyIFZpc2liaWxpdHlcbiAgICBNb3VzZXRyYXAuYmluZChbJ2NvbW1hbmQrLScsICdjdHJsKy0nXSwgZnVuY3Rpb24oZSkge1xuICAgICAgZGMubGF5ZXJsaXN0LnVuY2hlY2tBbGwodHJ1ZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH07XG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG5cbiAgZGMudXRpbCA9IHt9O1xuXG4gIGRjLnV0aWwucmVtb3ZlRmlsZUV4dGVuc2lvbiA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cXC5bXi8uXSskLywgXCJcIik7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLnJlbW92ZVdoaXRlU3BhY2UgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xuICAgIGNvbnNvbGUubG9nKHN0cmluZyk7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLmNvbmNhdCA9IGZ1bmN0aW9uKGFycmF5LCBzZXBhcmF0b3IsIHByZWZpeCkge1xuICAgIHZhciBzdHJpbmcgPSAnJztcbiAgICAkKGFycmF5KS5lYWNoKGZ1bmN0aW9uKGEpIHtcbiAgICAgIHN0cmluZyArPSBzZXBhcmF0b3IgKyBhcnJheVthXTtcbiAgICB9KTtcbiAgICBzdHJpbmcgPSBwcmVmaXggKyBzdHJpbmc7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLnhociA9IGZ1bmN0aW9uKHVybCwgY2FsbGJhY2spIHtcbiAgICBkcm9wY2hvcC51dGlsLmxvYWRlcih0cnVlKTtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgeGhyLm9ubG9hZCA9IGNhbGxiYWNrLmJpbmQodGhpcywgeGhyKTtcbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCB4aHIgKSB7XG4gICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICBjb25zb2xlLmVycm9yKHhocik7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1VuYWJsZSB0byBhY2Nlc3MgJyArIHVybCwgMjUwMCk7XG4gICAgfTtcbiAgICB4aHIuc2VuZCgpO1xuICB9O1xuXG4gIGRjLnV0aWwuZ2V0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb3JzKSB7XG4gICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgIGRhdGE6IGRhdGEsXG4gICAgICBkYXRhVHlwZTogJ2pzb24nXG4gICAgfTtcbiAgICBpZighZGMudXRpbC5jb3JzU3VwcG9ydCB8fCBjb3JzID09PSBmYWxzZSkge1xuICAgICAgY29uc29sZS5sb2coJ05vIENPUlMgc3VwcG9ydCwgdXNpbmcgSlNPTlAnKTtcbiAgICAgIHBhcmFtcy5kYXRhVHlwZSA9ICdqc29ucCc7XG4gICAgfVxuICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKHRydWUpO1xuICAgIHZhciB4aHIgPSAkLmFqYXgodXJsLCBwYXJhbXMpO1xuICAgIHJldHVybiB4aHI7XG4gIH07XG5cbiAgZGMudXRpbC5yZWFkRmlsZSA9IGZ1bmN0aW9uKGZpbGUpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAvLyBpZiBhIHppcGZpbGUsIGFzc3VtZSBzaGFwZWZpbGUgZm9yIG5vd1xuICAgIGlmIChmaWxlLm5hbWUuaW5kZXhPZignLnppcCcpID4gLTEgfHwgZmlsZS5uYW1lLmluZGV4T2YoJy5zaHAnKSA+IC0xKSB7XG4gICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7XG4gICAgICBkYy51dGlsLmxvYWRlcih0cnVlKTtcbiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBzaHAocmVhZGVyLnJlc3VsdClcbiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUHJvYmxlbWF0aWMgcHJvamVjdGlvbiAtIFwiLCBlcnJvcik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihnZW9qc29uKSB7XG4gICAgICAgICAgICBkYy51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgICAgICBpZiAoIWdlb2pzb24pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRjLm5vdGlmeSgnZXJyb3InLCAnSW52YWxpZCBwcm9qZWN0aW9uIG9yIHNoYXBlZmlsZS4nLCAyNTAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtnZW9qc29uLmZpbGVOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlLCAnVVRGLTgnKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtmaWxlLm5hbWUsIEpTT04ucGFyc2UocmVhZGVyLnJlc3VsdCldKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9yd2FyZFRvR2VvSnNvbklvKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2dlb2pzb24uaW8vI2RhdGE9ZGF0YTphcHBsaWNhdGlvbi9qc29uLFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHVybDtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5qc29uRnJvbVVybCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBxdWVyeSA9IGxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSlcbiAgICAgICAgICAuc3BsaXQoLygmP2dpc3Q9fCY/dXJsPSkvZylcbiAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBkLmxlbmd0aCA+IDA7XG4gICAgICAgICAgfSk7XG5cbiAgICB2YXIgcmVzdWx0ID0ge307XG5cbiAgICBxdWVyeS5mb3JFYWNoKGZ1bmN0aW9uKHBhcnQsIGkpIHtcbiAgICAgIGlmIChpID09PSAwIHx8IGkgJSAyID09PSAwKSB7XG4gICAgICAgIHZhciBrZXkgPSBwYXJ0LnJlcGxhY2UoLyZ8PS9nLCAnJyk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHRba2V5XSkge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gW107XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHRba2V5XS5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChxdWVyeVtpICsgMV0pKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgZGMudXRpbC51cGRhdGVTZWFyY2ggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGF5ZXJzID0gW107XG5cbiAgICBPYmplY3Qua2V5cyhkYy5sYXllcnMubGlzdCkuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xuICAgICAgLypcbiAgICAgICAqKiBJZiBhIGxheWVyIGhhcyBhIHR5cGUgYW5kIFVSTCAoYSBnaXN0IG9yIGV4dGVybmFsIEdlb0pTT04gbGluayksXG4gICAgICAgKiogYW5kIHdlIGhhdmVuJ3QgcmVjb3JlZCB0aGlzIHR5cGUtdXJsIGNvbWJvIGFscmVhZHksIGFkZCBpdCB0byB0aGVcbiAgICAgICAqKiB1bmlxdWUgbGlzdC4gVGhlIGxhc3QgY2hlY2sgaXMgbmVlZGVkIHRvIGFjY291bnQgZm9yIGdpc3RzIHdpdGhcbiAgICAgICAqKiBtdWx0aXBsZSBsYXllcnMuXG4gICAgICAgKi9cbiAgICAgIGlmIChkYy5sYXllcnMubGlzdFtsYXllcl0ubHR5cGUgJiYgZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLnVybCAmJiBsYXllcnMuaW5kZXhPZihkYy5sYXllcnMubGlzdFtsYXllcl0ubHR5cGUgKyAnPScgKyBkYy5sYXllcnMubGlzdFtsYXllcl0udXJsKSA8IDApIHtcbiAgICAgICAgbGF5ZXJzLnB1c2goZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLmx0eXBlICsgJz0nICsgZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLnVybCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgc2VhcmNoID0gbGF5ZXJzLmxlbmd0aCA/ICAoJz8nICsgbGF5ZXJzLmpvaW4oJyYnKSkgOiAnLyc7XG5cbiAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgVVJJIGlmIGFueXRoaW5nIGhhcyBjaGFuZ2VkXG4gICAgaWYgKHNlYXJjaCAhPT0gd2luZG93LmxvY2F0aW9uLnNlYXJjaCkge1xuICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHNlYXJjaCk7XG4gICAgfVxuXG4gIH07XG5cbiAgZGMudXRpbC5leGVjdXRlVXJsUGFyYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRhdGEgPSBkYy51dGlsLmpzb25Gcm9tVXJsKCk7XG5cbiAgICAvLyBsb2FkIGdpc3RcbiAgICBpZiAoZGF0YS5naXN0ICYmIGRhdGEuZ2lzdC5sZW5ndGgpIHtcbiAgICAgICQoZGF0YS5naXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtZ2lzdCddLmdldCh7fSwgJ2xvYWQtZ2lzdCcsIFtkYXRhLmdpc3RbaV1dKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGxvYWRcbiAgICBpZiAoZGF0YS51cmwgJiYgZGF0YS51cmwubGVuZ3RoKSB7XG4gICAgICAkKGRhdGEudXJsKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtdXJsJ10uZ2V0KHt9LCAnbG9hZC11cmwnLCBbZGF0YS51cmxbaV1dKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmdldEZpbGVFeHRlbnNpb24gPSBmdW5jdGlvbihmaWxlbmFtZSkge1xuICAgIHJldHVybiBmaWxlbmFtZS5zdWJzdHIoZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKSsxKTtcbiAgfTtcblxuICBkYy51dGlsLmdldEJCb3ggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm91bmRzID0gZGMubWFwLm0uZ2V0Qm91bmRzKCksXG4gICAgICAgIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpLFxuICAgICAgICBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTtcbiAgICAvLyB3ZSBzaG91bGQgcHJvYmFibHkgY2hlY2sgdGhlIHNpemUgaGVyZT9cbiAgICAvLyBub2RlKDU3LjcsMTEuOSw1Ny44LDEyLjApXG4gICAgcmV0dXJuIHN3LmxhdCsnLCcrc3cubG5nKycsJytuZS5sYXQrJywnK25lLmxuZztcbiAgfTtcblxuICBkYy51dGlsLmdldEVzcmlCQm94ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJvdW5kcyA9IGRjLm1hcC5tLmdldEJvdW5kcygpLFxuICAgICAgICBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKSxcbiAgICAgICAgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7XG4gICAgcmV0dXJuIHN3LmxuZysnLCcrc3cubGF0KycsJytuZS5sbmcrJywnK25lLmxhdDtcbiAgfTtcblxuICBkYy51dGlsLnVuY29sbGVjdCA9IGZ1bmN0aW9uKGZjKSB7XG4gICAgcmV0dXJuIGZjLmZlYXR1cmVzWzBdO1xuICB9O1xuXG4gIGRjLnV0aWwuZXNyaTJnZW8gPSBmdW5jdGlvbihhcmNqc29uKSB7XG4gICAgcmV0dXJuIHRvR2VvSlNPTihhcmNqc29uKTtcbiAgfTtcblxuICBkYy51dGlsLmV4ZWN1dGVGQyA9IGZ1bmN0aW9uKGZjLCBvcGVyYXRpb24sIHBhcmFtcykge1xuXG4gICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcbiAgICB2YXIgbmV3RkMgPSB7fTtcbiAgICBuZXdGQy50eXBlID0gJ0ZlYXR1cmVDb2xsZWN0aW9uJztcbiAgICBuZXdGQy5mZWF0dXJlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgZiA9IDA7IGYgPCBmYy5mZWF0dXJlcy5sZW5ndGg7IGYrKykge1xuICAgICAgbmV3UGFyYW1zWzBdID0gZmMuZmVhdHVyZXNbZl07XG4gICAgICB2YXIgZmVhdHVyZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZlYXR1cmUgPSB0dXJmW29wZXJhdGlvbl0uYXBwbHkobnVsbCwgbmV3UGFyYW1zKTtcbiAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzID0gZmMuZmVhdHVyZXNbZl0ucHJvcGVydGllcyB8fCB7fTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH1cbiAgICAgIG5ld0ZDLmZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0ZDO1xuXG4gIH07XG5cbiAgZGMudXRpbC5sb2FkZXIgPSBmdW5jdGlvbih5ZXMpIHtcbiAgICB2YXIgbG9hZGVyID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnZHJvcGNob3AtbG9hZGVyJyk7XG5cbiAgICBpZiAoeWVzKSB7XG4gICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRpbmcnKTtcbiAgICAgICQoJ2JvZHknKS5hcHBlbmQobG9hZGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdkcm9wY2hvcC1sb2FkaW5nJyk7XG4gICAgICAkKCcuZHJvcGNob3AtbG9hZGVyJykuYWRkQ2xhc3MoJ2xvYWRlci1jb21wbGV0ZScpLmZhZGVPdXQoMjAwMCwgZnVuY3Rpb24oKXtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmNvcnNTdXBwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICdYTUxIdHRwcmVxdWVzdCcgaW4gd2luZG93ICYmICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cblxufSkoZHJvcGNob3AgfHwge30pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
