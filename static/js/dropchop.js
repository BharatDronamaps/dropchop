var dropchop=function(e){return e=e||{},e.version="0.1",e.init=function(t){if(!t){var a=new Error("No options provided in dropchop.init()");throw a}if(e.options=t,!$(t.id).length){var a=new Error("Element with options.id does not exist.");throw a}e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.ops.init(),e.form.init(),location.search.length&&e.util.executeUrlParams(),e.util.welcome()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),l=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),s=$("<button>").addClass("layer-action layer-remove").html('<i class="fa fa-times"></i>'),p=$("<button>").addClass("layer-action layer-duplicate").html('<i class="fa fa-files-o"></i>');p.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:duplicate",[$(this).parent().attr("data-stamp")]),!1}),s.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:remove",[$(this).parent().attr("data-stamp")]),e.selection.clear(),!1}),l.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),l=i.parent().attr("data-stamp");t===r&&(a=e),t===l&&(o=e)}),console.log(a,o),a>o?$(".layer-element").each(function(t){t>=o&&a>=t&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){o>t&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),o.append(n),o.append(l),o.append(i),o.append(s),o.append(p),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show()},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.toggleAll=function(t){function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}if($(this).find("input").prop("checked"))for(var r in e.layers.list)a(e.layers.list[r].stamp,!0);else for(var o in e.layers.list)a(e.layers.list[o].stamp,!1)},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r){var o=e.layers.makeLayer(a,r);e.layers.list[o.stamp]=o,e.notify("success","<strong>"+o.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[o])},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer),$(e.map.m).on("locationfound",function(t){var a=t.originalEvent;e.map.m.fitBounds(a.bounds);var r={type:"Feature",geometry:{type:"Point",coordinates:[a.latlng.lng,a.latlng.lat]},properties:{title:"There You Are","marker-color":"#207178","marker-symbol":"heart"}};$(e).trigger("file:added",["your location",r])}),$(e.map.m).on("locationerror",function(){e.notify("error","There was a problem finding your location.",3e3)})}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);$(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.ops=e.ops||{},e.ops.init=function(){var r=$("<div>").addClass("operations-geo");e.$elem.append(r);for(var o in e.ops.geo){var n=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+o+"</h4><p>"+e.ops.geo[o].description+"</p>").prop("disabled",!0).attr("data-operation",o);n.on("click",t),r.append(n)}$(e).on("layer:selected",e.ops.geoCheck),$(e).on("layer:unselected",e.ops.geoCheck),$(e).on("operation:geo",e.ops.geoExecute),$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback);var i=$("<div>").addClass("dropchop-menu-left");for(var l in e.ops.file)if("break"===e.ops.file[l].type){var s=$("<div>").addClass("menu-action-break");i.append(s)}else{var p=$("<button>").addClass("menu-action").html(e.ops.file[l].icon||"A").attr("data-operation",l).attr("data-tooltip",e.ops.file[l].description);"info"===e.ops.file[l].type&&p.addClass("dropchop-info"),p.on("click",a),i.append(p)}e.$elem.append(i)},e.ops.geoExecute=function(t,a,r){var o=e.ops.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.ops.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){-1===$.inArray("switch-"+e.selection.list[t].stamp,a)?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.ops.geoCheck=function(t,a){function r(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function o(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var n in e.ops.geo){var i=e.ops.geo[n];if(e.selection.list.length>i.maxFeatures||e.selection.list.length<i.minFeatures)r(n);else for(var l=0;l<e.selection.list.length;l++){var s=e.selection.list[l];$.inArray(s.type,i.requirements.types)>-1||i.requirements.generalFeature===!0?o(n):r(n)}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content)])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide" target="_blank">the query language</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox();e.util.xhr("http://overpass-api.de/api/interpreter?[out:json];node["+r[0]+"]("+o+");out;",e.ops.file["load-overpass"].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r);r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},location:{description:"Add your location as a layer",icon:'<i class="fa fa-crosshairs"></i>',execute:function(){navigator.geolocation?e.map.m.locate():e.notify("error","Geolocation is not available on this browser.",4e3)}},break1:{type:"break"},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++)!function(t){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}(t)}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},break2:{type:"break"},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},break3:{type:"break"},rename:{minFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){console.log(a,r),$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){console.log(this.stamp),$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){console.log(e);var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.readFile=function(t){var a=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(a.readAsArrayBuffer(t),e.util.loader(!0),a.onloadend=function(t){shp(a.result).then(function(t){e.util.loader(!1),$(e).trigger("file:added",[t.fileName,t])})}):(a.readAsText(t,"UTF-8"),a.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(a.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1).split(/(&?gist=|&?url=)/g).filter(function(e){return e.length>0}),t={};return e.forEach(function(a,r){if(0===r||r%2===0){var o=a.replace(/&|=/g,"");t[o]||(t[o]=[]),t[o].push(decodeURIComponent(e[r+1]))}}),t},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.uncollect=function(e){return e.features[0]},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var l;try{l=turf[a].apply(null,o),l.properties=t.features[i].properties||{}}catch(s){e.notify("error",s)}n.features.push(l)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.welcome=function(){var e="\nWelcome to Dropchop!\n";e+="Once you drop, the chop don't stop.\n\n",e+="This project is brought to you by the great people of CUGOS, the Cascadian chapter of OSGeo. If you are ever in Seattle, hit us up\nhello@cugos.org\n\n",e+="You can learn more about this project at dropchop.io/about.",console.log(e)},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibm90aWZ5LmRyb3BjaG9wLmpzIiwib3BzLmRyb3BjaG9wLmpzIiwib3BzLmZpbGUuZHJvcGNob3AuanMiLCJvcHMuZ2VvLmRyb3BjaG9wLmpzIiwic2VsZWN0aW9uLmRyb3BjaG9wLmpzIiwidXRpbC5kcm9wY2hvcC5qcyJdLCJuYW1lcyI6WyJkcm9wY2hvcCIsImRjIiwidmVyc2lvbiIsImluaXQiLCJvcHRzIiwiZXJyIiwiRXJyb3IiLCJvcHRpb25zIiwiJCIsImlkIiwibGVuZ3RoIiwiJGVsZW0iLCJsYXllcnMiLCJwcmVwYXJlIiwibWFwIiwic2VsZWN0aW9uIiwibGF5ZXJsaXN0IiwiZHJvcHpvbmUiLCJvcHMiLCJmb3JtIiwibG9jYXRpb24iLCJzZWFyY2giLCJ1dGlsIiwiZXhlY3V0ZVVybFBhcmFtcyIsIndlbGNvbWUiLCJib29tIiwiY29uc29sZSIsImxvZyIsIl9ldmVudHMiLCIkY29udGFpbmVyIiwib24iLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwidGhpcyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJmaWxlcyIsIm9yaWdpbmFsRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJlYWNoIiwiaSIsInJlYWRGaWxlIiwiZ2VvIiwiZmlsZSIsIm9wZXJhdGlvbiIsImNyZWF0ZSIsIm5hbWUiLCJpbmZvIiwidHJpZ2dlciIsInJlbW92ZSIsIiRodG1sIiwiYXR0ciIsInRleHQiLCJhcHBlbmRUbyIsImRlc2NyaXB0aW9uIiwicGFyYW1ldGVycyIsInAiLCJjcmVhdGVQYXJhbSIsIiRzdWJtaXQiLCIkY2FuY2VsIiwiZGF0YSIsInNlcmlhbGl6ZUFycmF5IiwicHVzaCIsInZhbHVlIiwiYXBwZW5kIiwicGFyYW0iLCIkaW5wdXQiLCIkbGFiZWwiLCIkZmllbGQiLCJpbnB1dHMiLCJ0eXBlIiwiaHRtbCIsIm51bWJlciIsIiRpIiwic2VsZWN0IiwiJG9wdCIsImNoZWNrYm94Iiwic3dpdGNoIiwibGlzdCIsIiRsYmwiLCJ2YWwiLCJzdGFtcCIsInJlY3Vyc2l2ZSIsIiRsYmwxIiwiJG9wdDEiLCIkbGJsMiIsIiRvcHQyIiwibGF5ZXJUeXBlSWNvbiIsImljb24iLCJlbGVtcyIsInRhcmdldCIsImhhc0NsYXNzIiwiY2xlYXIiLCJsaUhlbHBlciIsInRvZ2dsZUxheWVycyIsInRvZ2dsZUFsbCIsImFkZExheWVyTGlzdEl0ZW0iLCJyZW1vdmVMYXllckxpc3RJdGVtIiwicmVuYW1lIiwibmV3TmFtZSIsImZpbmQiLCJsYXllciIsImxheWVybGlzdEl0ZW0iLCJsYXllckRpdiIsImRlbGF5IiwicXVldWUiLCJuZXh0IiwibGF5ZXJUeXBlIiwicHJvcCIsImNoZWNrZWQiLCJkdXBsaWNhdGUiLCJwYXJlbnQiLCJzaGlmdEtleSIsInRvQ291bnQiLCJmcm9tQ291bnQiLCJ0byIsImZyb20iLCJfbGFzdFNlbGVjdGVkIiwiZSIsImNoZWNrIiwidG9TdGFtcCIsImZyb21TdGFtcCIsImwiLCJzZWxlY3RMYXllciIsIm1ldGFLZXkiLCJzZWxlY3RUb2dnbGUiLCJjbGVhclNlbGVjdGlvbiIsImhpZGUiLCJzaG93IiwiJGl0ZW0iLCJseXIiLCJlbGVtVG9nZ2xlIiwiYm9vbCIsIm8iLCJmYWRlT3V0IiwiZ2V0VHlwZSIsImdqIiwiZ2VvbWV0cnkiLCJhZGQiLCJibG9iIiwibWFrZUxheWVyIiwibm90aWZ5IiwicmF3IiwianNvbiIsImdlb2pzb24iLCJmbCIsIkwiLCJtYXBib3giLCJmZWF0dXJlTGF5ZXIiLCJyZW1vdmVGaWxlRXh0ZW5zaW9uIiwiZmVhdHVyZWxheWVyIiwiZGF0ZUFkZGVkIiwiRGF0ZSIsIl9tYWtlTWFwIiwidG9rZW4iLCJhY2Nlc3NUb2tlbiIsIm0iLCJ6b29tQ29udHJvbCIsIndvcmxkQ29weUp1bXAiLCJzZXRWaWV3IiwiY29udHJvbCIsInpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiZ2VvY29kZXJDb250cm9sIiwiYmFzZUxheWVycyIsIk1hcGJveCBTdHJlZXRzIiwidGlsZUxheWVyIiwiTWFwYm94IE91dGRvb3JzIiwiTWFwYm94IExpZ2h0IiwiTWFwYm94IERhcmsiLCJNYXBib3ggU2F0ZWxsaXRlIiwiY29sbGFwc2VkIiwibGF5ZXJncm91cCIsImFkZExheWVyIiwiaGlkZUxheWVyIiwic2hvd0xheWVyIiwiZml0Qm91bmRzIiwiYm91bmRzIiwiY29vcmRpbmF0ZXMiLCJsYXRsbmciLCJsbmciLCJsYXQiLCJwcm9wZXJ0aWVzIiwidGl0bGUiLCJtYXJrZXItY29sb3IiLCJtYXJrZXItc3ltYm9sIiwicmVtb3ZlTGF5ZXIiLCJjb3VudCIsImVhY2hMYXllciIsImNvbnRlbnQiLCJmZWF0dXJlIiwiYmluZFBvcHVwIiwicG9wdXAiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImF1dG9QYW5QYWRkaW5nIiwiY2xhc3NOYW1lIiwic2V0Q29udGVudCIsInRpbWUiLCJub3RlIiwic2V0VGltZW91dCIsIl9nZW9CdG5DbGljayIsIl9maWxlQnRuQ2xpY2siLCJleGVjdXRlIiwiZ2VvQ29udGFpbmVyIiwiZ2VvT3AiLCJnZW9CdG4iLCJnZW9DaGVjayIsImdlb0V4ZWN1dGUiLCJnZXQiLCJjYWxsYmFjayIsImxlZnRNZW51IiwiZmlsZU9wIiwiJGJyZWFrU3BhY2UiLCJmaWxlQnRuIiwicHJlcCIsInByZXBhcmVUdXJmUGFyYW1zIiwicmVzdWx0IiwicGFyYW1zIiwiZ2VvbXMiLCJuYW1lQXJyYXkiLCJpbkFycmF5IiwidW5zaGlmdCIsIm1lcmdlIiwiY29uY2F0IiwidHVybkl0T2ZmIiwib3AiLCJidG4iLCJ0dXJuSXRPbiIsIm1heEZlYXR1cmVzIiwibWluRmVhdHVyZXMiLCJ4Iiwic2VsIiwicmVxdWlyZW1lbnRzIiwidHlwZXMiLCJnZW5lcmFsRmVhdHVyZSIsInVwbG9hZCIsIiRibGluZElucHV0IiwiY3NzIiwiY2xpY2siLCJsb2FkLXVybCIsImRlZmF1bHQiLCJ1cmwiLCJ4aHIiLCJ4aHJFdmVudCIsImxvYWRlciIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlVVJMIiwic3Vic3RyaW5nIiwibGFzdEluZGV4T2YiLCJsb2FkLWdpc3QiLCJnaXN0Iiwic3BsaXQiLCJmIiwiZmlsZW5hbWUiLCJsb2FkLW92ZXJwYXNzIiwiX3RlbXAiLCJsYXllck5hbWUiLCJiYm94IiwiZ2V0QkJveCIsIm9zbXRvZ2VvanNvbiIsImVsZW1lbnRzIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJsb2NhdGUiLCJicmVhazEiLCJzYXZlLWdlb2pzb24iLCJjcmVhdGVzTGF5ZXIiLCJzdHJpbmdpZnkiLCJzYXZlQXMiLCJCbG9iIiwic2F2ZS1zaGFwZWZpbGUiLCJmb2xkZXIiLCJwb2ludCIsInBvbHlnb24iLCJsaW5lIiwic2hwd3JpdGUiLCJkb3dubG9hZCIsImJyZWFrMiIsImV4dGVudCIsImV4dGVuZCIsImdldEJvdW5kcyIsImV4cGFuZCIsImZjIiwiZmVhdHVyZXMiLCJjb21iaW5lIiwiYnJlYWszIiwid2luZG93IiwiYWxvbmciLCJleGVjdXRlRkMiLCJ0dXJmIiwiYXBwbHkiLCJiZXppZXIiLCJidWZmZXIiLCJjZW50ZXIiLCJjZW50cm9pZCIsImRlc3RpbmF0aW9uIiwiZW52ZWxvcGUiLCJleHBsb2RlIiwibWlkcG9pbnQiLCJzaW1wbGlmeSIsInRpbiIsInVuaW9uIiwid2l0aGluIiwiX2xheWVyUmVtb3ZlZCIsImluZGV4Iiwic3BsaWNlIiwic3RyaW5nIiwicmVwbGFjZSIsInJlbW92ZVdoaXRlU3BhY2UiLCJhcnJheSIsInNlcGFyYXRvciIsInByZWZpeCIsImEiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJiaW5kIiwib25lcnJvciIsImVycm9yIiwic2VuZCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJpbmRleE9mIiwicmVhZEFzQXJyYXlCdWZmZXIiLCJvbmxvYWRlbmQiLCJzaHAiLCJ0aGVuIiwiZmlsZU5hbWUiLCJyZWFkQXNUZXh0IiwianNvbkZyb21VcmwiLCJxdWVyeSIsInN1YnN0ciIsImZpbHRlciIsImQiLCJmb3JFYWNoIiwicGFydCIsImtleSIsImRlY29kZVVSSUNvbXBvbmVudCIsImdldEZpbGVFeHRlbnNpb24iLCJzdyIsImdldFNvdXRoV2VzdCIsIm5lIiwiZ2V0Tm9ydGhFYXN0IiwidW5jb2xsZWN0IiwibmV3UGFyYW1zIiwibmV3RkMiLCJ5ZXMiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLFVBQUEsU0FBQUMsR0FrREEsTUFqREFBLEdBQUFBLE1BQ0FBLEVBQUFDLFFBQUEsTUFDQUQsRUFBQUUsS0FBQSxTQUFBQyxHQUNBLElBQUFBLEVBQUEsQ0FDQSxHQUFBQyxHQUFBLEdBQUFDLE9BQUEseUNBQ0EsTUFBQUQsR0FJQSxHQUZBSixFQUFBTSxRQUFBSCxHQUVBSSxFQUFBSixFQUFBSyxJQUFBQyxPQUFBLENBQ0EsR0FBQUwsR0FBQSxHQUFBQyxPQUFBLDBDQUNBLE1BQUFELEdBRUFKLEVBQUFVLE1BQUFILEVBQUFKLEVBQUFLLElBR0FSLEVBQUFXLE9BQUFDLFVBR0FaLEVBQUFhLElBQUFYLE9BR0FGLEVBQUFjLFVBQUFaLE9BR0FGLEVBQUFlLFVBQUFiLEtBQUEsYUFHQUYsRUFBQWdCLFNBQUFULEVBQUEsU0FHQVAsRUFBQWlCLElBQUFmLE9BR0FGLEVBQUFrQixLQUFBaEIsT0FHQWlCLFNBQUFDLE9BQUFYLFFBQ0FULEVBQUFxQixLQUFBQyxtQkFHQXRCLEVBQUFxQixLQUFBRSxXQUlBdkIsRUFBQXdCLEtBQUEsV0FDQUMsUUFBQUMsSUFBQSxjQUdBMUIsR0FFQUQsY0NwREFBLFNBQUEsU0FBQUMsR0FFQSxZQVlBLFNBQUEyQixHQUFBQyxHQUNBQSxFQUFBQyxHQUFBLFdBQUEsU0FBQUMsR0FDQUEsRUFBQUMsaUJBQ0FELEVBQUFFLGtCQUNBekIsRUFBQTBCLE1BQUFDLFNBQUEsY0FHQU4sRUFBQUMs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QUFSLFdBQUF3RyxFQUFBQyxTQUFBL0IsR0FBQTFFLGVBQ0EsTUFBQW5MLEdBQ0FKLEVBQUE2SSxPQUFBLFFBQUF6SSxHQUVBMFYsRUFBQTlELFNBQUFsTyxLQUFBaUksR0FHQSxNQUFBK0osSUFJQTlWLEVBQUFxQixLQUFBaU8sT0FBQSxTQUFBeUcsR0FDQSxHQUFBekcsR0FBQS9PLEVBQUEsU0FBQTJCLFNBQUEsa0JBRUE2VCxJQUNBeFYsRUFBQSxRQUFBMkIsU0FBQSxvQkFDQTNCLEVBQUEsUUFBQXlELE9BQUFzTCxLQUVBL08sRUFBQSxRQUFBNEIsWUFBQSxvQkFDQTVCLEVBQUEsb0JBQUEyQixTQUFBLG1CQUFBb0csUUFBQSxJQUFBLFdBQ0EvSCxFQUFBMEIsTUFBQWdCLGFBS0FqRCxFQUFBcUIsS0FBQUUsUUFBQSxXQUNBLEdBQUFBLEdBQUEsMEJBQ0FBLElBQUEsMENBQ0FBLEdBQUEsMEpBQ0FBLEdBQUEsOERBQ0FFLFFBQUFDLElBQUFILElBR0F2QixHQUdBRCIsImZpbGUiOiJkcm9wY2hvcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBkYyA9IGRjIHx8IHt9O1xuICBkYy52ZXJzaW9uID0gJzAuMSc7XG4gIGRjLmluaXQgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgaWYoIW9wdHMpIHtcbiAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ05vIG9wdGlvbnMgcHJvdmlkZWQgaW4gZHJvcGNob3AuaW5pdCgpJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIGRjLm9wdGlvbnMgPSBvcHRzO1xuXG4gICAgaWYoISQob3B0cy5pZCkubGVuZ3RoKSB7XG4gICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdFbGVtZW50IHdpdGggb3B0aW9ucy5pZCBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgZGMuJGVsZW0gPSAkKG9wdHMuaWQpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJzXG4gICAgZGMubGF5ZXJzLnByZXBhcmUoKTtcblxuICAgIC8vIHNldHVwIG1hcFxuICAgIGRjLm1hcC5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBzZWxlY3Rpb25cbiAgICBkYy5zZWxlY3Rpb24uaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJsaXN0XG4gICAgZGMubGF5ZXJsaXN0LmluaXQoJ2xheWVybGlzdCcpO1xuXG4gICAgLy8gc2V0dXAgZHJvcHpvbmVcbiAgICBkYy5kcm9wem9uZSgkKCdib2R5JykpO1xuXG4gICAgLy8gc2V0dXAgb3BlcmF0aW9uc1xuICAgIGRjLm9wcy5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBmb3Jtc1xuICAgIGRjLmZvcm0uaW5pdCgpO1xuXG4gICAgLy8gZ2V0IFVSTCBpbmZvcm1hdGlvbiBpZiBpdCBleGlzdHNcbiAgICBpZihsb2NhdGlvbi5zZWFyY2gubGVuZ3RoKSB7XG4gICAgICBkYy51dGlsLmV4ZWN1dGVVcmxQYXJhbXMoKTtcbiAgICB9XG5cbiAgICBkYy51dGlsLndlbGNvbWUoKTtcblxuICB9O1xuXG4gIGRjLmJvb20gPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnc2hha2FsYWthJyk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBkcm9wem9uZS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRhaW5lciBlbGVtZW50IChsZXRzIGRvIGRvY3VtZW50LmJvZHkpXG4gICAqL1xuICBkYy5kcm9wem9uZSA9IGZ1bmN0aW9uKCRjb250YWluZXIpIHtcbiAgICBfZXZlbnRzKCRjb250YWluZXIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9ldmVudHMoJGNvbnRhaW5lcikge1xuICAgICRjb250YWluZXIub24oJ2RyYWdvdmVyJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgfSk7XG5cbiAgICAkY29udGFpbmVyLm9uKCdkcmFnbGVhdmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICB9KTtcblxuICAgICRjb250YWluZXIub24oJ2Ryb3AnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICAgIHZhciBmaWxlcyA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgICAgJChmaWxlcykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLnV0aWwucmVhZEZpbGUoZmlsZXNbaV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5mb3JtID0gZGMuZm9ybSB8fCB7fTtcbiAgZGMuZm9ybS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2Zvcm06Z2VvJywgZGMuZm9ybS5nZW8pO1xuICAgICQoZGMpLm9uKCdmb3JtOmZpbGUnLCBkYy5mb3JtLmZpbGUpO1xuICB9O1xuXG4gIGRjLmZvcm0uZ2VvID0gZnVuY3Rpb24oZXZlbnQsIG9wZXJhdGlvbikge1xuICAgIGRjLmZvcm0uY3JlYXRlKG9wZXJhdGlvbiwgZGMub3BzLmdlb1tvcGVyYXRpb25dLCAnZ2VvJyk7XG4gIH07XG5cbiAgZGMuZm9ybS5maWxlID0gZnVuY3Rpb24oZXZlbnQsIG9wZXJhdGlvbikge1xuICAgIGRjLmZvcm0uY3JlYXRlKG9wZXJhdGlvbiwgZGMub3BzLmZpbGVbb3BlcmF0aW9uXSwgJ2ZpbGU6JyArIG9wZXJhdGlvbik7XG4gIH07XG5cbiAgZGMuZm9ybS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCBpbmZvLCB0cmlnZ2VyKSB7XG4gICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICB2YXIgJGh0bWwgPSAkKCc8Zm9ybT4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybSBkcm9wY2hvcC1mb3JtLScrdHJpZ2dlcilcbiAgICAgIC5hdHRyKCdpZCcsICdkcm9wY2hvcC1mb3JtJylcbiAgICAgIC5hdHRyKCdkYXRhJywgbmFtZSk7XG4gICAgdmFyICR0aXRsZSA9ICQoJzxoMj4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS10aXRsZScpLnRleHQobmFtZSkuYXBwZW5kVG8oJGh0bWwpO1xuICAgIHZhciAkZGVzYyA9ICQoJzxwPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLWRlc2NyaXB0aW9uJykudGV4dChpbmZvLmRlc2NyaXB0aW9uKS5hcHBlbmRUbygkaHRtbCk7XG5cbiAgICAvLyBjcmVhdGUgcGFyYW1zXG4gICAgaWYoaW5mby5wYXJhbWV0ZXJzKSB7XG4gICAgICAkKGluZm8ucGFyYW1ldGVycykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHAgPSBkYy5mb3JtLmNyZWF0ZVBhcmFtKHRoaXMpO1xuICAgICAgICBwLmFwcGVuZFRvKCRodG1sKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSBzdWJtaXQgYnV0dG9uXG4gICAgdmFyICRzdWJtaXQgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdkcm9wY2hvcC1idG4gZHJvcGNob3AtYnRuLWdyZWVuIGRyb3BjaG9wLWZvcm0tc3VibWl0JykudGV4dCgnRXhlY3V0ZScpLmF0dHIoJ2ZvcicsIG5hbWUpO1xuICAgIHZhciAkY2FuY2VsID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnZHJvcGNob3AtYnRuIGRyb3BjaG9wLWJ0bi1jYW5jZWwgZHJvcGNob3AtZm9ybS1jYW5jZWwnKS50ZXh0KCdDYW5jZWwnKS5hdHRyKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICRjYW5jZWwub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgICRodG1sLm9uKCdzdWJtaXQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vIGdldCB0aGUgcGFyYW1ldGVycyBmcm9tIHRoZSBmb3JtXG4gICAgICB2YXIgcGFyYW1ldGVycyA9IFtdO1xuICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLnNlcmlhbGl6ZUFycmF5KCk7XG4gICAgICAkKGRhdGEpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnB1c2goZGF0YVtpXS52YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ29wZXJhdGlvbjonICsgdHJpZ2dlciwgW25hbWUsIHBhcmFtZXRlcnNdKTtcbiAgICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgJGh0bWwuYXBwZW5kKCRzdWJtaXQpO1xuICAgICRodG1sLmFwcGVuZCgkY2FuY2VsKTtcblxuICAgIGRjLiRlbGVtLmFwcGVuZCgkaHRtbCk7XG4gICAgLy8gc3VibWl0IGJ1dHRvbiBuZWVkcyB0cmlnZ2VyIG9wZXJhdGlvbjpnZW8gd2l0aCBvcCBhbmQgcGFyYW1ldGVyIGFycmF5XG4gIH07XG5cbiAgZGMuZm9ybS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcjZHJvcGNob3AtZm9ybScpLnJlbW92ZSgpO1xuICB9O1xuXG4gIGRjLmZvcm0uY3JlYXRlUGFyYW0gPSBmdW5jdGlvbihwYXJhbSkge1xuICAgIHZhciAkaW5wdXQgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlcicpO1xuICAgIHZhciAkbGFiZWwgPSAkKCc8bGFiZWw+JykudGV4dChwYXJhbS5uYW1lKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXItbGFiZWwnKTtcbiAgICB2YXIgJGZpZWxkID0gZGMuZm9ybS5pbnB1dHNbcGFyYW0udHlwZV0ocGFyYW0pO1xuICAgICRmaWVsZC5hcHBlbmRUbygkbGFiZWwpO1xuICAgIGlmKHBhcmFtLmRlc2NyaXB0aW9uLmxlbmd0aCkge1xuICAgICAgJCgnPHA+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyLWRlc2NyaXB0aW9uJykuaHRtbChwYXJhbS5kZXNjcmlwdGlvbikuYXBwZW5kVG8oJGxhYmVsKTtcbiAgICB9XG4gICAgJGlucHV0LmFwcGVuZCgkbGFiZWwpO1xuICAgIHJldHVybiAkaW5wdXQ7XG4gIH07XG5cbiAgZGMuZm9ybS5pbnB1dHMgPSB7XG4gICAgbnVtYmVyOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICdudW1iZXInKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHNlbGVjdDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPHNlbGVjdD4nKS5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICQocC5vcHRpb25zKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdmFyICRvcHQgPSAkKCc8b3B0aW9uPicpLnRleHQocC5vcHRpb25zW2ldKVxuICAgICAgICAgIC5hdHRyKCd2YWx1ZScsIHAub3B0aW9uc1tpXSk7XG4gICAgICAgICRvcHQuYXBwZW5kVG8oJGkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICB0ZXh0OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICd0ZXh0JylcbiAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpXG4gICAgICAgIC5hdHRyKCd2YWx1ZScsIHAuZGVmYXVsdCk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICBjaGVja2JveDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGlucHV0PicpLmF0dHIoJ3R5cGUnLCAnY2hlY2tib3gnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHN3aXRjaDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGRpdj4nKTtcbiAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgJGxibCA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICAgIHZhciAkb3B0ID0gJCgnPGlucHV0PicpXG4gICAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAgIC52YWwoJ3N3aXRjaC0nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXApXG4gICAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgICAkb3B0LmFwcGVuZFRvKCRsYmwpO1xuICAgICAgICAkbGJsLmFwcGVuZChkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lKTtcbiAgICAgICAgJGxibC5hcHBlbmRUbygkaSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHJlY3Vyc2l2ZTogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGRpdj4nKTtcblxuICAgICAgdmFyICRsYmwxID0gJCgnPGxhYmVsPicpXG4gICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICB2YXIgJG9wdDEgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAudmFsKCd0cnVlJylcbiAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJG9wdDEuYXBwZW5kVG8oJGxibDEpO1xuICAgICAgJGxibDEuYXBwZW5kKCdJbmRpdmlkdWFsIGZlYXR1cmVzJyk7XG5cbiAgICAgIHZhciAkbGJsMiA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgdmFyICRvcHQyID0gJCgnPGlucHV0PicpXG4gICAgICAgIC5hdHRyKCd0eXBlJywgJ3JhZGlvJylcbiAgICAgICAgLnZhbCgnZmFsc2UnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkb3B0Mi5hcHBlbmRUbygkbGJsMik7XG4gICAgICAkbGJsMi5hcHBlbmQoJ0VudGlyZSBjb2xsZWN0aW9uJyk7XG5cbiAgICAgICRsYmwxLmFwcGVuZFRvKCRpKTtcbiAgICAgICRsYmwyLmFwcGVuZFRvKCRpKTtcblxuICAgICAgcmV0dXJuICRpO1xuICAgIH1cbiAgfTtcblxuICAvLyBkYy5mb3JtLmdldFZhbHVlcyA9IGZ1bmN0aW9uKCRmb3JtKSB7XG4gIC8vICAgdmFyIHZhbHVlcyA9IFtdO1xuICAvLyAgIGNvbnNvbGUubG9nKCRmb3JtKTtcbiAgLy8gICByZXR1cm4gdmFsdWVzO1xuICAvLyB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVybGlzdCA9IHt9O1xuICBkYy5sYXllcmxpc3QuZWxlbXMgPSB7fTtcblxuICBkYy5sYXllcmxpc3QuaW5pdCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0gPSAkKCc8b2w+JykuYWRkQ2xhc3MobmFtZSk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGRjLmxheWVybGlzdC4kZWxlbSk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAoJChldmVudC50YXJnZXQpLmhhc0NsYXNzKG5hbWUpKSB7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGxpSGVscGVyID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci1oZWxwJylcbiAgICAgIC5odG1sKCdXZWxjb21lIHRvIDxzdHJvbmc+ZHJvcGNob3A8L3N0cm9uZz4hIEhlcmUgeW91IGNhbiBkcmFnIGFuZCBkcm9wIGZpbGVzIGFuZCB0aGV5IHdpbGwgc2hvdyB1cCBpbiB0aGUgbGF5ZXIgbGlzdCBiZWxvdy48YnI+PGJyPlRvIHRoZSBsZWZ0IHlvdSBjYW4gdXBsb2FkIGFuZCBzYXZlIHlvdXIgZmlsZXMgb3IgPGEgaHJlZj1cIi8/Z2lzdD0wOTEyOWMyMGVjMDIwYjgzYmY4NVwiPmFkZCBleGFtcGxlIGRhdGE8L2E+IG9yIHRoZSA8YSBocmVmPVwiLz9naXN0PWQwNjZiNTcyZThhOGFkMmI2ZDE2XCI+VVMgU3RhdGVzPC9hPi48YnI+PGJyPlRvIHRoZSByaWdodCB5b3VcXCdsbCBub3RpY2Ugc29tZSBnZW9zcGF0aWFsIG9wZXJhdGlvbnMgdGhhdCBiZWNvbWUgYXZhaWxhYmxlIGJhc2VkIG9uIHNlbGVjdGluZyBzcGVjaWZpYyBsYXllcnMuJyApO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGlIZWxwZXIpO1xuXG4gICAgdmFyIHRvZ2dsZUxheWVycyA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItdG9nZ2xlQWxsJylcbiAgICAgIC5odG1sKCc8bGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNoZWNrZWQ+VG9nZ2xlIGFsbCBsYXllcnM8L2xhYmVsPicpO1xuICAgIHRvZ2dsZUxheWVycy5vbignY2hhbmdlJywgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZCh0b2dnbGVMYXllcnMpO1xuXG4gICAgJChkYykub24oJ2xheWVyOmFkZGVkJywgZGMubGF5ZXJsaXN0LmFkZExheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgZGMubGF5ZXJsaXN0LnJlbW92ZUxheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWVkJywgZGMubGF5ZXJsaXN0LnJlbmFtZSk7XG4gIH07XG5cbiAgZGMubGF5ZXJsaXN0LnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCwgbmV3TmFtZSkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5maW5kKCcubGF5ZXItbmFtZScpLnRleHQobmV3TmFtZSk7XG4gIH07XG5cbiAgLy8gdHJpZ2dlcmVkIGluIGRyb3BjaG9wLmpzXG4gIGRjLmxheWVybGlzdC5hZGRMYXllckxpc3RJdGVtID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGxheWVybGlzdEl0ZW0gPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLWVsZW1lbnQnKS5hdHRyKCdkYXRhLXN0YW1wJywgbGF5ZXIuc3RhbXApO1xuICAgIHZhciBsYXllckRpdiA9ICQoJzxkaXY+JylcbiAgICAgIC5hZGRDbGFzcygnbGF5ZXItbmFtZSBsYXllci1uZXcnKVxuICAgICAgLnRleHQobGF5ZXIubmFtZSlcbiAgICAgIC5kZWxheSgzMDAwKVxuICAgICAgLnF1ZXVlKGZ1bmN0aW9uKG5leHQpIHtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnbGF5ZXItbmV3Jyk7XG4gICAgICB9KTtcblxuICAgIFxuICAgIHZhciBsYXllclR5cGUgPSAkKCc8c3Bhbj4nKS5hZGRDbGFzcygnbGF5ZXItdHlwZS1pbWFnZSBzcHJpdGUgc3ByaXRlLWxheWVyLScrbGF5ZXJUeXBlSWNvbihsYXllci50eXBlKSk7XG4gICAgdmFyIGNoZWNrYm94ID0gJCgnPGlucHV0PicpLmFkZENsYXNzKCdsYXllci10b2dnbGUnKS5wcm9wKHsndHlwZSc6ICdjaGVja2JveCcsICdjaGVja2VkJzogdHJ1ZX0pO1xuICAgIHZhciByZW1vdmUgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdsYXllci1hY3Rpb24gbGF5ZXItcmVtb3ZlJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiPjwvaT4nKTtcbiAgICB2YXIgZHVwbGljYXRlID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbGF5ZXItYWN0aW9uIGxheWVyLWR1cGxpY2F0ZScpLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtZmlsZXMtb1wiPjwvaT4nKTtcblxuICAgIGR1cGxpY2F0ZS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmR1cGxpY2F0ZScsIFskKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgIFxuICAgIHJlbW92ZS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZScsIFskKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgXG4gICAgY2hlY2tib3gub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgIC8vIHRyaWdnZXIgbGF5ZXI6c2hvd1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzaG93JywgW2xheWVyXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpoaWRlJywgW2xheWVyXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsYXllckRpdi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAvLyBjaGVjayBmb3Iga2V5cyBiZWluZyBoZWxkIGZvciBzcGVjaWFsIHNlbGVjdGlvblxuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgIC8vIHNlbGVjdCBhbGwgbGF5ZXJlcyBpbiBiZXR3ZWVuIHByZXZpb3VzIHRhcmdldCBhbmQgdGFyZ2V0XG4gICAgICAgIC8vIG5vdGU6IGRvbid0IHVuc2VsZWN0IGxheWVycyBhbHJlYWR5IHNlbGVjdGVkLCBqdXN0IGFkZCB0byBzZWxlY3Rpb25cbiAgICAgICAgdmFyIHRvU2VsZWN0ID0gW107XG4gICAgICAgIHZhciB0byA9ICQodGhpcyk7XG4gICAgICAgIHZhciBmcm9tID0gZGMubGF5ZXJsaXN0Ll9sYXN0U2VsZWN0ZWQ7XG4gICAgICAgIHZhciB0b0NvdW50LCBmcm9tQ291bnQ7XG5cbiAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICB2YXIgY2hlY2sgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICB2YXIgdG9TdGFtcCA9IHRvLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICB2YXIgZnJvbVN0YW1wID0gZnJvbS5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgaWYgKGNoZWNrID09PSB0b1N0YW1wKSB0b0NvdW50ID0gZTtcbiAgICAgICAgICBpZiAoY2hlY2sgPT09IGZyb21TdGFtcCkgZnJvbUNvdW50ID0gZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2codG9Db3VudCwgZnJvbUNvdW50KTtcbiAgICAgICAgaWYgKHRvQ291bnQgPiBmcm9tQ291bnQpIHtcbiAgICAgICAgICAvLyBsb29wIHVwXG4gICAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIGlmIChsID49IGZyb21Db3VudCAmJiBsIDw9IHRvQ291bnQgKSB7XG4gICAgICAgICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RMYXllcigkKHRoaXMpLmZpbmQoJy5sYXllci1uYW1lJyksIGRjLmxheWVycy5saXN0WyQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIGlmIChsIDwgZnJvbUNvdW50ICYmIGwgPj0gdG9Db3VudCApIHtcbiAgICAgICAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdExheWVyKCQodGhpcykuZmluZCgnLmxheWVyLW5hbWUnKSwgZGMubGF5ZXJzLmxpc3RbJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChldmVudC5tZXRhS2V5KSB7XG4gICAgICAgIC8vIGFkZC9yZW1vdmUgc2VsZWN0ZWQgbGF5ZXIgdG8gY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSgkKHRoaXMpLCBsYXllcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjbGVhciBzZWxlY3Rpb24gYW5kIHNlbGVjdCB0YXJnZXRcbiAgICAgICAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uKCQodGhpcyksIGxheWVyKTtcbiAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSgkKHRoaXMpLCBsYXllcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChsYXllckRpdik7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoY2hlY2tib3gpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGxheWVyVHlwZSk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQocmVtb3ZlKTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChkdXBsaWNhdGUpO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGF5ZXJsaXN0SXRlbSk7XG5cbiAgICBkYy5sYXllcmxpc3QuZWxlbXNbbGF5ZXIuc3RhbXBdID0gbGF5ZXJsaXN0SXRlbTtcblxuICAgIC8vIGhpZGUgaGVscGVyIHRleHRcbiAgICAkKCcubGF5ZXItaGVscCcpLmhpZGUoKTtcbiAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuc2hvdygpO1xuICB9O1xuXG4gIGRjLmxheWVybGlzdC5zZWxlY3RMYXllciA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBpZiAoISRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAkaXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNlbGVjdGVkJywgW2x5cl0pO1xuICAgIH1cbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBpZiAoJGl0ZW0uaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICRpdGVtLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6dW5zZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9XG4gICAgZGMubGF5ZXJsaXN0Ll9sYXN0U2VsZWN0ZWQgPSAkaXRlbTtcbiAgfTtcbiAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24oJGl0ZW0sIGx5cikge1xuICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGxheWVyVHlwZUljb24odHlwZSkge1xuICAgIHZhciBpY29uO1xuICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICBjYXNlICdGZWF0dXJlQ29sbGVjdGlvbic6XG4gICAgICAgIGljb24gPSAnZmVhdHVyZWNvbGxlY3Rpb24nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8UG9pbnQ+JzogXG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpUG9pbnQ+JzogXG4gICAgICAgIGljb24gPSAncG9pbnQnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TGluZVN0cmluZz4nOiBcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPic6IFxuICAgICAgICBpY29uID0gJ2xpbmUnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8UG9seWdvbj4nOiBcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlQb2x5Z29uPic6IFxuICAgICAgICBpY29uID0gJ3BvbHlnb24nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPic6IFxuICAgICAgICBpY29uID0gJ2dlb20nO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGljb24gPSAnZGVmYXVsdCc7XG4gICAgICAgIGJyZWFrOyBcbiAgICB9XG4gICAgcmV0dXJuIGljb247XG4gIH1cblxuICBkYy5sYXllcmxpc3QudG9nZ2xlQWxsID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAvLyB0dXJuIHRoZW0gb25cbiAgICBpZiAoJCh0aGlzKS5maW5kKCdpbnB1dCcpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgZm9yICh2YXIgaSBpbiBkYy5sYXllcnMubGlzdCkge1xuICAgICAgICBlbGVtVG9nZ2xlKGRjLmxheWVycy5saXN0W2ldLnN0YW1wLCB0cnVlKTtcbiAgICAgIH1cbiAgICAvLyB0dXJuIHRoZW0gb2ZmXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIG8gaW4gZGMubGF5ZXJzLmxpc3QpIHtcbiAgICAgICAgZWxlbVRvZ2dsZShkYy5sYXllcnMubGlzdFtvXS5zdGFtcCwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVsZW1Ub2dnbGUoc3RhbXAsIGJvb2wpIHtcbiAgICAgICQoJy5sYXllci1lbGVtZW50W2RhdGEtc3RhbXA9JytzdGFtcCsnXScpXG4gICAgICAgIC5maW5kKCcubGF5ZXItdG9nZ2xlJylcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCBib29sKVxuICAgICAgICAudHJpZ2dlcignY2hhbmdlJyk7IC8vIHNldHMgb2ZmIGEgY2hhaW4gcmVhY3Rpb25cbiAgICB9XG4gIH07XG5cbiAgZGMubGF5ZXJsaXN0LnJlbW92ZUxheWVyTGlzdEl0ZW0gPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICAkKCdbZGF0YS1zdGFtcD0nK3N0YW1wKyddJykuZmFkZU91dCgzMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSBkYy5sYXllcmxpc3QuZWxlbXNbc3RhbXBdO1xuXG4gICAgICAvLyBzaG93IGhlbHBlciB0ZXh0IGlmIG5vIGxheWVycyBleGlzdFxuICAgICAgLy8gdGhpcyBoYXMgdG8gY2hlY2sgaW5zaWRlIHNpbmNlIHRoZXJlIGlzIGEgMzAwIG1zIGRlbGF5IHdpdGggdGhlIGZhZGVcbiAgICAgIGlmICgkKCcubGF5ZXItZWxlbWVudCcpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAkKCcubGF5ZXItaGVscCcpLnNob3coKTtcbiAgICAgICAgJCgnLmxheWVyLXRvZ2dsZUFsbCcpLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5sYXllcnMgPSB7fTtcbiAgZGMubGF5ZXJzLmxpc3QgPSB7fTtcblxuICBkYy5sYXllcnMucHJlcGFyZSA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdmaWxlOmFkZGVkJywgZGMubGF5ZXJzLmFkZCk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZScsIGRjLmxheWVycy5yZW1vdmUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpkdXBsaWNhdGUnLCBkYy5sYXllcnMuZHVwbGljYXRlKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVuYW1lJywgZGMubGF5ZXJzLnJlbmFtZSk7XG4gIH07XG5cbi8qKlxuICogQWRkIGEgbGF5ZXIgdG8gdGhlIGxheWVycyBsaXN0IGFuZCB0cmlnZ2VyIGxheWVyOmFkZGVkIGZvciBzdWJzY3JpYmVycyB0byBwaWNrIHVwLlxuICogQHBhcmFtIHtvYmplY3R9IGV2ZW50XG4gKiBAcGFyYW0ge29iamVjdH0gZmlsZSBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlIGJsb2IgdG8gYmUgY29udmVydGVkIHdpdGggSlNPTi5wYXJzZSgpXG4gKi9cbiAgZGMubGF5ZXJzLmFkZCA9IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBibG9iKSB7XG4gICAgdmFyIGwgPSBkYy5sYXllcnMubWFrZUxheWVyKG5hbWUsIGJsb2IpO1xuICAgIGRjLmxheWVycy5saXN0W2wuc3RhbXBdID0gbDtcblxuICAgIGRjLm5vdGlmeSgnc3VjY2VzcycsICc8c3Ryb25nPicrbC5uYW1lKyc8L3N0cm9uZz4gaGFzIGJlZW4gYWRkZWQhJywgMzUwMCk7XG5cbiAgICAvLyB0cmlnZ2VyIGxheWVyOmFkZGVkXG4gICAgJChkYykudHJpZ2dlcignbGF5ZXI6YWRkZWQnLCBbbF0pO1xuICB9O1xuXG4vKipcbiAqIFJlbW92ZSBhIGxheWVyLCB3aGljaCB0cmlnZ2VycyBsYXllcjpyZW1vdmVkIGZvciB0aGUgcmVzdCBvZiB0aGUgYXBwXG4gKiBAcGFyYW0ge3N0cmluZ30gbGF5ZXIgc3RhbXBcbiAqL1xuICBkYy5sYXllcnMucmVtb3ZlID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgLy8gdHJpZ2dlciBsYXllcjpyZW1vdmVkXG4gICAgdHJ5IHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZWQnLCBbc3RhbXBdKTtcbiAgICAgIGRjLm5vdGlmeSgnaW5mbycsICc8c3Ryb25nPicgKyBkYy5sYXllcnMubGlzdFtzdGFtcF0ubmFtZSArICc8L3N0cm9uZz4gaGFzIGJlZW4gcmVtb3ZlZC4nKTtcbiAgICAgIGRlbGV0ZSBkYy5sYXllcnMubGlzdFtzdGFtcF07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gcmVtb3ZpbmcgdGhlIGxheWVyLicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICBcbiAgfTtcblxuICBkYy5sYXllcnMuZHVwbGljYXRlID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgdmFyIGx5ciA9IGRjLmxheWVycy5saXN0W3N0YW1wXTtcbiAgICAvLyBuZWVkIHRvIGNyZWF0ZSBuZXcgbGF5ZXIgc28gd2UgY2FuIGdldCBhIHVuaXFlIEwuc3RhbXAoKVxuICAgIGRjLmxheWVycy5hZGQoe30sICdjb3B5XycrbHlyLm5hbWUsIGx5ci5yYXcpO1xuICB9O1xuXG4gIGRjLmxheWVycy5yZW5hbWUgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIsIG5ld05hbWUpIHtcbiAgICAvLyByZW5hbWUgaW4gbGF5ZXIgb2JqZWN0XG4gICAgZGMubGF5ZXJzLmxpc3RbbGF5ZXIuc3RhbXBdLm5hbWUgPSBuZXdOYW1lO1xuXG4gICAgLy8gcmVuYW1lIGluIGxheWVybGlzdFxuICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbmFtZWQnLCBbbGF5ZXIuc3RhbXAsIG5ld05hbWVdKTtcbiAgfTtcblxuICBkYy5sYXllcnMubWFrZUxheWVyID0gZnVuY3Rpb24obmFtZSwganNvbikge1xuICAgIHZhciBnZW9qc29uID0ganNvbjtcbiAgICAvLyBpZiAoanNvbi50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nICYmIGpzb24uZmVhdHVyZXMubGVuZ3RoID09PSAxKSB7XG4gICAgLy8gICBnZW9qc29uID0gZGMudXRpbC51bmNvbGxlY3QoanNvbik7XG4gICAgLy8gfVxuXG4gICAgdmFyIGZsID0gTC5tYXBib3guZmVhdHVyZUxheWVyKGdlb2pzb24pO1xuICAgIHZhciBsYXllciA9IHtcbiAgICAgIG5hbWU6IGRjLnV0aWwucmVtb3ZlRmlsZUV4dGVuc2lvbihuYW1lKSxcbiAgICAgIHN0YW1wOiBMLnN0YW1wKGZsKSxcbiAgICAgIHJhdzogZ2VvanNvbixcbiAgICAgIHR5cGU6IGdldFR5cGUoZ2VvanNvbiksXG4gICAgICBmZWF0dXJlbGF5ZXI6IGZsLFxuICAgICAgZGF0ZUFkZGVkOiBuZXcgRGF0ZSgpXG4gICAgfTtcbiAgICByZXR1cm4gbGF5ZXI7XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0VHlwZShnaikge1xuICAgIGlmIChnai50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICByZXR1cm4gJ0ZlYXR1cmVDb2xsZWN0aW9uJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdqLnR5cGUgKyAnPCcgKyBnai5nZW9tZXRyeS50eXBlICsgJz4nO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5tYXAgPSB7fTtcblxuICBkYy5tYXAuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGRjLm1hcC4kZWxlbSA9ICQoJzxkaXY+JykucHJvcCgnaWQnLCAnZHJvcGNob3AtbWFwJykuYWRkQ2xhc3MoJ21hcCcpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChkYy5tYXAuJGVsZW0pO1xuXG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBkYy5tYXAucmVtb3ZlTGF5ZXIpO1xuXG4gICAgX21ha2VNYXAoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBfbWFrZU1hcCgpIHtcbiAgICBkYy5tYXAudG9rZW4gPSBMLm1hcGJveC5hY2Nlc3NUb2tlbiA9ICdway5leUoxSWpvaWMzWnRZWFIwYUdWM2N5SXNJbUVpT2lKVk1VbFVSMHhySW4wLk53ZVNfQXR0anN3dE41d1J1V0NTTkEnO1xuICAgIGRjLm1hcC5tID0gTC5tYXBib3gubWFwKCdkcm9wY2hvcC1tYXAnLCBudWxsLCB7XG4gICAgICB6b29tQ29udHJvbDogZmFsc2UsXG4gICAgICB3b3JsZENvcHlKdW1wOiB0cnVlXG4gICAgfSkuc2V0VmlldyhbMCwwXSwgMyk7XG5cbiAgICAvLyBzZXRzIHRoZSBsb2NhdGlvbiBvZiB0aGUgem9vbSBidXR0b25zIHRvIHRoZSB0b3AgcmlnaHRcbiAgICBMLmNvbnRyb2wuem9vbSh7XG4gICAgICBwb3NpdGlvbjogJ3RvcGxlZnQnXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgTC5tYXBib3guZ2VvY29kZXJDb250cm9sKCdtYXBib3gucGxhY2VzJywge1xuICAgICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIHZhciBiYXNlTGF5ZXJzID0ge1xuICAgICAgXCJNYXBib3ggU3RyZWV0c1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5zdHJlZXRzJyksXG4gICAgICBcIk1hcGJveCBPdXRkb29yc1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5vdXRkb29ycycpLFxuICAgICAgXCJNYXBib3ggTGlnaHRcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3gubGlnaHQnKSxcbiAgICAgIFwiTWFwYm94IERhcmtcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guZGFyaycpLFxuICAgICAgXCJNYXBib3ggU2F0ZWxsaXRlXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LnNhdGVsbGl0ZScpXG4gICAgfTtcblxuICAgIGJhc2VMYXllcnNbJ01hcGJveCBTdHJlZXRzJ10uYWRkVG8oZGMubWFwLm0pO1xuICAgIC8vIHNldHMgbG9jYXRpb24gb2YgYmFzZSBsYXllciBjb250cm9sIHRvIHRoZSBib3R0b20gcmlnaHRcbiAgICBMLmNvbnRyb2wubGF5ZXJzKGJhc2VMYXllcnMsIHt9LCB7XG4gICAgICBwb3NpdGlvbjogJ2JvdHRvbXJpZ2h0JyxcbiAgICAgIGNvbGxhcHNlZDogZmFsc2VcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICBkYy5tYXAubGF5ZXJncm91cCA9IEwubWFwYm94LmZlYXR1cmVMYXllcigpO1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjphZGRlZCcsIGRjLm1hcC5hZGRMYXllcik7XG4gICAgJChkYykub24oJ2xheWVyOmhpZGUnLCBkYy5tYXAuaGlkZUxheWVyKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6c2hvdycsIGRjLm1hcC5zaG93TGF5ZXIpO1xuXG4gICAgLy8gLy8gbXkgbG9jYXRpb24gYXMgbGF5ZXJcbiAgICAvLyB2YXIgZ2VvbG9jYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlb2xvY2F0ZScpO1xuXG4gICAgJChkYy5tYXAubSkub24oJ2xvY2F0aW9uZm91bmQnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZGF0YSA9IGUub3JpZ2luYWxFdmVudDtcbiAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhkYXRhLmJvdW5kcyk7XG5cbiAgICAgIHZhciBseXIgPSB7XG4gICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBbZGF0YS5sYXRsbmcubG5nLCBkYXRhLmxhdGxuZy5sYXRdXG4gICAgICAgIH0sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAndGl0bGUnOiAnVGhlcmUgWW91IEFyZScsXG4gICAgICAgICAgJ21hcmtlci1jb2xvcic6ICcjMjA3MTc4JyxcbiAgICAgICAgICAnbWFya2VyLXN5bWJvbCc6ICdoZWFydCdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFsneW91ciBsb2NhdGlvbicsIGx5cl0pO1xuICAgIH0pO1xuXG4gICAgJChkYy5tYXAubSkub24oJ2xvY2F0aW9uZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBmaW5kaW5nIHlvdXIgbG9jYXRpb24uJywgMzAwMCk7XG4gICAgfSk7XG5cbiAgICAvLyAvLyBPbmNlIHdlJ3ZlIGdvdCBhIHBvc2l0aW9uLCB6b29tIGFuZCBjZW50ZXIgdGhlIG1hcFxuICAgIC8vIC8vIG9uIGl0LCBhbmQgYWRkIGEgc2luZ2xlIG1hcmtlci5cbiAgICAvLyB0aGlzLl9tYXAub24oJ2xvY2F0aW9uZm91bmQnLCBmdW5jdGlvbihlKSB7XG4gICAgLy8gICB0aGlzLl9tYXAuZml0Qm91bmRzKGUuYm91bmRzKTtcblxuXG4gICAgLy8gICBteUxheWVyLnNldEdlb0pTT04oe1xuICAgIC8vICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgLy8gICAgIGdlb21ldHJ5OiB7XG4gICAgLy8gICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAvLyAgICAgICBjb29yZGluYXRlczogW2UubGF0bG5nLmxuZywgZS5sYXRsbmcubGF0XVxuICAgIC8vICAgICB9LFxuICAgIC8vICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgLy8gICAgICAgJ3RpdGxlJzogJ1RoZXJlIFlvdSBBcmUnLFxuICAgIC8vICAgICAgICdtYXJrZXItY29sb3InOiAnIzIwNzE3OCcsXG4gICAgLy8gICAgICAgJ21hcmtlci1zeW1ib2wnOiAnaGVhcnQnXG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH0pO1xuXG4gICAgLy8gICAvLyBBbmQgaGlkZSB0aGUgZ2VvbG9jYXRpb24gYnV0dG9uXG4gICAgLy8gICAvL2dlb2xvY2F0ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGdlb2xvY2F0ZSk7XG4gICAgLy8gfS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIC8vIElmIHRoZSB1c2VyIGNob29zZXMgbm90IHRvIGFsbG93IHRoZWlyIGxvY2F0aW9uXG4gICAgLy8gLy8gdG8gYmUgc2hhcmVkLCBkaXNwbGF5IGFuIGVycm9yIG1lc3NhZ2UuXG4gICAgLy8gdGhpcy5fbWFwLm9uKCdsb2NhdGlvbmVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gICBnZW9sb2NhdGUuaW5uZXJIVE1MID0gJ1Bvc2l0aW9uIGNvdWxkIG5vdCBiZSBmb3VuZCc7XG4gICAgLy8gfSk7XG5cblxuICB9XG5cbiAgZGMubWFwLmNvdW50ID0gMDtcblxuICBkYy5tYXAuYWRkTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgZmwgPSBsYXllci5mZWF0dXJlbGF5ZXI7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkTGF5ZXIoZmwpO1xuXG4gICAgLy8gY3JlYXRlIHBvcHVwIHRhYmxlIGZvciBlYWNoIGZlYXR1cmVcbiAgICBmbC5lYWNoTGF5ZXIoZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgIHZhciBjb250ZW50ID0gJzx0YWJsZSBjbGFzcz1cImRyb3BjaG9wLXRhYmxlXCI+PHRyPjx0aD5Qcm9wZXJ0eTwvdGg+PHRoPkRhdGE8L3RoPjwvdHI+JztcblxuICAgICAgaWYgKGxheWVyLmZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGxheWVyLmZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICAgIGNvbnRlbnQgKz0gJzx0cj48dGQ+PHN0cm9uZz4nICsgcHJvcCArICc8L3N0cm9uZz48L3RkPjx0ZD4nICsgbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzW3Byb3BdICsgJzwvdGQ+PC90cj4nO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50ICs9ICc8cD5UaGVyZSBhcmUgbm8gcHJvcGVydGllcyBzZXQgZm9yIHRoaXMgZmVhdHVyZS48L3A+JztcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgKz0gJzwvdGFibGU+JztcblxuICAgICAgbGF5ZXIuYmluZFBvcHVwKEwucG9wdXAoe1xuICAgICAgICBtYXhXaWR0aDogNDUwLFxuICAgICAgICBtYXhIZWlnaHQ6IDIwMCxcbiAgICAgICAgYXV0b1BhblBhZGRpbmc6IFs0NSwgNDVdLFxuICAgICAgICBjbGFzc05hbWU6ICdkcm9wY2hvcC1wb3B1cCdcbiAgICAgIH0sIGxheWVyKS5zZXRDb250ZW50KGNvbnRlbnQpKTtcbiAgICB9KTtcblxuICB9O1xuXG4gIGRjLm1hcC5oaWRlTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5yZW1vdmVMYXllcihsYXllci5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIGRjLm1hcC5zaG93TGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRMYXllcihsYXllci5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIGRjLm1hcC5yZW1vdmVMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLnJlbW92ZUxheWVyKGRjLmxheWVycy5saXN0W3N0YW1wXS5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubm90aWZ5ID0gZnVuY3Rpb24odHlwZSwgdGV4dCwgdGltZSkge1xuICAgIHZhciBub3RlID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbm90aWZpY2F0aW9uJylcbiAgICAgIC5hZGRDbGFzcyh0eXBlKVxuICAgICAgLmh0bWwodGV4dCk7XG5cbiAgICAkKGRjLiRlbGVtKS5hcHBlbmQobm90ZSk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgbm90ZS5yZW1vdmUoKTtcbiAgICB9LCB0aW1lIHx8IDMwMDApO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGJ1aWxkIG9wcy5nZW8gY29udGFpbmVyXG4gICAgdmFyIGdlb0NvbnRhaW5lciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ29wZXJhdGlvbnMtZ2VvJyk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGdlb0NvbnRhaW5lcik7XG5cbiAgICAvLyBjcmVhdGUgZ2VvIGJ1dHRvbnMgJiBmb3Jtc1xuICAgIGZvciAodmFyIGdlb09wIGluIGRjLm9wcy5nZW8pIHtcbiAgICAgIHZhciBnZW9CdG4gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdvcGVyYXRpb24gb3BlcmF0aW9uLWdlbyBvcGVyYXRpb24taW5hY3RpdmUnKVxuICAgICAgICAuaHRtbCgnPGg0PicgKyBnZW9PcCArICc8L2g0PjxwPicgKyBkYy5vcHMuZ2VvW2dlb09wXS5kZXNjcmlwdGlvbiArICc8L3A+JylcbiAgICAgICAgLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJywgZ2VvT3ApO1xuICAgICAgZ2VvQnRuLm9uKCdjbGljaycsIF9nZW9CdG5DbGljayk7XG5cbiAgICAgIGdlb0NvbnRhaW5lci5hcHBlbmQoZ2VvQnRuKTtcbiAgICB9XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6c2VsZWN0ZWQnLCBkYy5vcHMuZ2VvQ2hlY2spO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMub3BzLmdlb0NoZWNrKTtcbiAgICAvLyAkKCcub3BlcmF0aW9uLWdlbycpLnJlbW92ZUNsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAvLyAkKCcub3BlcmF0aW9uLWdlbycpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246Z2VvJywgZGMub3BzLmdlb0V4ZWN1dGUpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLWdpc3QnLCBkYy5vcHMuZmlsZVsnbG9hZC1naXN0J10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC11cmwnLCBkYy5vcHMuZmlsZVsnbG9hZC11cmwnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLW92ZXJwYXNzJywgZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpyZW5hbWUnLCBkYy5vcHMuZmlsZS5yZW5hbWUuY2FsbGJhY2spO1xuXG4gICAgLy8gc2V0dXAgb3BzIGZpbGVcbiAgICB2YXIgbGVmdE1lbnUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1tZW51LWxlZnQnKTtcbiAgICBmb3IgKHZhciBmaWxlT3AgaW4gZGMub3BzLmZpbGUpIHtcbiAgICAgIGlmKGRjLm9wcy5maWxlW2ZpbGVPcF0udHlwZSA9PT0gJ2JyZWFrJykge1xuICAgICAgICB2YXIgJGJyZWFrU3BhY2UgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdtZW51LWFjdGlvbi1icmVhaycpO1xuICAgICAgICBsZWZ0TWVudS5hcHBlbmQoJGJyZWFrU3BhY2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGZpbGVCdG4gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdtZW51LWFjdGlvbicpXG4gICAgICAgICAgLmh0bWwoZGMub3BzLmZpbGVbZmlsZU9wXS5pY29uIHx8ICdBJylcbiAgICAgICAgICAuYXR0cignZGF0YS1vcGVyYXRpb24nLCBmaWxlT3ApXG4gICAgICAgICAgLmF0dHIoJ2RhdGEtdG9vbHRpcCcsIGRjLm9wcy5maWxlW2ZpbGVPcF0uZGVzY3JpcHRpb24pO1xuICAgICAgICAgIGlmIChkYy5vcHMuZmlsZVtmaWxlT3BdLnR5cGUgPT09ICdpbmZvJykgZmlsZUJ0bi5hZGRDbGFzcygnZHJvcGNob3AtaW5mbycpO1xuICAgICAgICBmaWxlQnRuLm9uKCdjbGljaycsIF9maWxlQnRuQ2xpY2spO1xuICAgICAgICBsZWZ0TWVudS5hcHBlbmQoZmlsZUJ0bik7XG4gICAgICB9XG4gICAgfVxuICAgIGRjLiRlbGVtLmFwcGVuZChsZWZ0TWVudSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gX2dlb0J0bkNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgb3BlcmF0aW9uID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9wZXJhdGlvbicpO1xuICAgIC8vIGlmIG9wZXJhdGlvbiByZXF1aXJlcyBubyBwYXJhbWV0ZXJzLCBkb24ndCByZW5kZXIgYSBmb3JtXG4gICAgaWYgKCFkYy5vcHMuZ2VvW29wZXJhdGlvbl0ucGFyYW1ldGVycykge1xuICAgICAgJChkYykudHJpZ2dlcignb3BlcmF0aW9uOmdlbycsIFtvcGVyYXRpb24sIGRjLnNlbGVjdGlvbi5saXN0XSk7XG4gICAgLy8gb3RoZXJ3aXNlIHJlbmRlciB0aGUgZm9ybVxuICAgIH0gZWxzZSB7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmdlbycsIFtvcGVyYXRpb25dKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfZmlsZUJ0bkNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgdHJ5IHtcbiAgICAgIGRjLm9wcy5maWxlW29wZXJhdGlvbl0uZXhlY3V0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGlzIG9wZXJhdGlvbiBkb2VzblxcJ3QgZXhpc3QhJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSB0dXJmIGZ1bmN0aW9uIGJhc2VkIG9uIGJ1dHRvbiBvcGVyYXRpb24gY2xpY2suXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcmlnaW5hbCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRpb24gdG8gYmUgZXhlY3V0ZWQgdmlhIHR1cmZcbiAgICogQHBhcmFtIHthcnJheX0gc2VyaWVzIG9mIHBhcmFtZXRlcnMgdG8gYmUgYXBwbGllZCB0byB0dXJmIG9wZXJhdGlvblxuICAgKi9cbiAgZGMub3BzLmdlb0V4ZWN1dGUgPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uLCBwYXJhbWV0ZXJzKSB7XG4gICAgdmFyIHByZXAgPSBkYy5vcHMucHJlcGFyZVR1cmZQYXJhbXMob3BlcmF0aW9uLCBwYXJhbWV0ZXJzKTtcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZGMub3BzLmdlb1tvcGVyYXRpb25dLmV4ZWN1dGUocHJlcC5vcHRpb25zKTtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgZGMubm90aWZ5KCdUaGF0IG9wZXJhdGlvbiBpc25cXCd0IHBvc3NpYmxlLiBUcnkgY2hhbmdpbmcgdGhlIG9yZGVyIG9mIHlvdXIgc2VsZWN0aW9uLicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbcHJlcC5uYW1lLCByZXN1bHRdKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJlcGFyZSBwYXJhbWV0ZXJzIGZvciBleGVjdXRpbmcgd2l0aGluIGEgdHVyZiBmdW5jdGlvbiB1c2luZyAuYXBwbHkoKSAtIHJldHVybnMgYW4gYXJyYXlcbiAgICogQHBhcmFtIHthcnJheX0gb3B0aW9ucyBmcm9tIHRoZSB1c2VyIHBhc3NlZCBmcm9tIHRoZSBvcmlnaW5hbCBldmVudCB0cmlnZ2VyXG4gICAqL1xuICBkYy5vcHMucHJlcGFyZVR1cmZQYXJhbXMgPSBmdW5jdGlvbihvcGVyYXRpb24sIHBhcmFtcykge1xuICAgIHZhciBkYXRhID0ge307XG4gICAgZGF0YS5vcHRpb25zID0gW107XG5cbiAgICB2YXIgZ2VvbXMgPSBbXTtcbiAgICB2YXIgbmFtZUFycmF5ID0gW107XG4gICAgLy8gZ2V0IGdlb21ldHJ5IGFycmF5IGZyb20gc2VsZWN0aW9uXG4gICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBpZiAoJC5pbkFycmF5KCdzd2l0Y2gtJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wLCBwYXJhbXMpID09PSAtMSkge1xuICAgICAgICBnZW9tcy5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZW9tcy51bnNoaWZ0KGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICB9XG4gICAgICBuYW1lQXJyYXkucHVzaChkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lKTtcbiAgICB9KTtcblxuICAgIC8vIG1lcmdlIHBhcmFtcyB3aXRoIG9wdGlvbnMgYXJyYXlcbiAgICBkYXRhLm9wdGlvbnMgPSAkLm1lcmdlKGdlb21zLCBwYXJhbXMpO1xuXG4gICAgLy8gY3JlYXRlIG5hbWUgYXJyYXlcbiAgICBkYXRhLm5hbWUgPSBkYy51dGlsLmNvbmNhdChuYW1lQXJyYXksICdfJywgb3BlcmF0aW9uKTtcbiAgICBcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICBkYy5vcHMuZ2VvQ2hlY2sgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcblxuICAgIC8vIGNoZWNrIHNlbGVjdGlvbiBjb3VudCB2cyBvcGVyYXRpb24gbWluL21heFxuICAgIGZvciAodmFyIG8gaW4gZGMub3BzLmdlbykge1xuICAgICAgdmFyIG9wID0gZGMub3BzLmdlb1tvXTtcbiAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPiBvcC5tYXhGZWF0dXJlcyB8fCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPCBvcC5taW5GZWF0dXJlcykge1xuICAgICAgICB0dXJuSXRPZmYobyk7XG4gICAgICAgIC8vIGRvbid0IGdvIGFueSBmdXJ0aGVyXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIC8vIGNoZWNrIG9wZXJhdGlvbiBhZ2FpbnN0IGVhY2ggc2VsZWN0aW9uIGRhdGEgdHlwZVxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aDsgeCsrKSB7XG4gICAgICAgICAgdmFyIHNlbCA9IGRjLnNlbGVjdGlvbi5saXN0W3hdO1xuXG4gICAgICAgICAgLy8gaWYgdGhlIHNlbGVjdGlvbiB0eXBlIGlzIGluIHRoZSBhcnJheSwgbWFyayBpdCBhcyBhY3RpdmUhXG4gICAgICAgICAgaWYgKCQuaW5BcnJheShzZWwudHlwZSwgb3AucmVxdWlyZW1lbnRzLnR5cGVzKSA+IC0xIHx8IG9wLnJlcXVpcmVtZW50cy5nZW5lcmFsRmVhdHVyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdHVybkl0T24obyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHR1cm5JdE9mZihvKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHR1cm5JdE9mZihvcCkge1xuICAgICAgdmFyIGJ0biA9ICQoJ1tkYXRhLW9wZXJhdGlvbj0nKyBvcCArJ10nKTtcbiAgICAgIGJ0bi5hZGRDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICBidG4ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0dXJuSXRPbihvcCkge1xuICAgICAgdmFyIGJ0biA9ICQoJ1tkYXRhLW9wZXJhdGlvbj0nKyBvcCArJ10nKTtcbiAgICAgIGJ0bi5yZW1vdmVDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICBidG4ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfVxuICAgIFxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuZmlsZSA9IHtcbiAgICB1cGxvYWQ6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnVXBsb2FkIGZyb20geW91ciBjb21wdXRlciAoLmdlb2pzb24pJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXVwbG9hZFwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGluc3BpcmVkIGZyb20gZ2VvanNvbi5pb1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L2dlb2pzb24uaW8vYmxvYi9naC1wYWdlcy9zcmMvdWkvZmlsZV9iYXIuanMjTDM5MFxuICAgICAgICB2YXIgJGJsaW5kSW5wdXQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAuYXR0cigndHlwZScsICdmaWxlJylcbiAgICAgICAgICAuYXR0cignbXVsdGlwbGUnLCAndHJ1ZScpXG4gICAgICAgICAgLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKVxuICAgICAgICAgIC5jc3MoJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJylcbiAgICAgICAgICAuY3NzKCdoZWlnaHQnLCAnMCcpXG4gICAgICAgICAgLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBmaWxlcyA9IHRoaXMuZmlsZXM7XG4gICAgICAgICAgICAkKGZpbGVzKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgICAgLy8gdmFyIGV4dCA9IGRjLnV0aWwuZ2V0RmlsZUV4dGVuc2lvbihmaWxlc1tpXS5uYW1lKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIC8vIGlmIGl0IGlzIGEgc2hhcGVmaWxlIG9yIHppcCBmaWxlXG4gICAgICAgICAgICAgIC8vIGlmIChleHQgPT09ICdzaHAnIHx8IGV4dCA9PT0gJ3ppcCcpIHtcbiAgICAgICAgICAgICAgLy8gICAvLyB1cGxvYWQgYSBzaGFwZWZpbGUgYW5kIGFkZCB0aGUgbGF5ZXJcbiAgICAgICAgICAgICAgLy8gICBkYy51dGlsLnJlYWRTaHBGaWxlXG4gICAgICAgICAgICAgIC8vICAgc2hwKFwiZmlsZXMvcGFuZHJcIikudGhlbihmdW5jdGlvbihnZW9qc29uKXtcbiAgICAgICAgICAgICAgLy8gICAgIC8vZG8gc29tZXRoaW5nIHdpdGggeW91ciBnZW9qc29uIFxuICAgICAgICAgICAgICAvLyAgIH0pO1xuICAgICAgICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRjLnV0aWwucmVhZEZpbGUoZmlsZXNbaV0pO1xuICAgICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJGJsaW5kSW5wdXQucmVtb3ZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGJsaW5kSW5wdXQpO1xuICAgICAgICAkYmxpbmRJbnB1dC5jbGljaygpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAnbG9hZC11cmwnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0ltcG9ydCBmaWxlIGZyb20gYSBVUkwnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtbGlua1wiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VybCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidVUkwnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnaHR0cDovLycsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC11cmwnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICB2YXIgdXJsID0gcGFyYW1ldGVyc1swXTtcbiAgICAgICAgZGMudXRpbC54aHIodXJsLCBkYy5vcHMuZmlsZVtuYW1lXS5jYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIC8vIGdldCBmaWxlbmFtZSBiYXNlZCBvbiB0aGUgZW5kIG9mIHRoZSB1cmwgLSBub3Qgc3VyZSBpZiB0aGlzIGlzIHN1c3RhaW5hYmxlXG4gICAgICAgICAgdmFyIG5hbWUgPSB4aHIucmVzcG9uc2VVUkwuc3Vic3RyaW5nKHhoci5yZXNwb25zZVVSTC5sYXN0SW5kZXhPZignLycpKzEpO1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbbmFtZSwgZGF0YV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHJldHJpZXZlIEdpc3QuIFBsZWFzZSBjaGVjayB5b3VyIFVSTCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLWdpc3QnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0ltcG9ydCBmaWxlcyBmcm9tIEdpc3QnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZ2l0aHViXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZ2lzdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidHaXN0IElEIG9yIFVSTCcsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdodHRwczovL2dpc3QuZ2l0aHViLmNvbS8nXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1naXN0J10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIGdpc3QgPSBwYXJhbWV0ZXJzWzBdLnNwbGl0KCcvJylbcGFyYW1ldGVyc1swXS5zcGxpdCgnLycpLmxlbmd0aC0xXTtcbiAgICAgICAgdmFyIHVybCA9ICdodHRwczovL2FwaS5naXRodWIuY29tL2dpc3RzLycgKyBnaXN0O1xuICAgICAgICBkYy51dGlsLnhocih1cmwsIGRjLm9wcy5maWxlW25hbWVdLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgZm9yICh2YXIgZiBpbiBkYXRhLmZpbGVzKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGRhdGEuZmlsZXNbZl0uZmlsZW5hbWU7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW25hbWUsIEpTT04ucGFyc2UoZGF0YS5maWxlc1tmXS5jb250ZW50KV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnU3VjY2VzZnVsbHkgcmV0cmlldmVkIGdpc3QnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHJldHJpZXZlIEdpc3QuIFBsZWFzZSBjaGVjayB5b3VyIFVSTCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLW92ZXJwYXNzJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRlcm1pbmFsXCI+PC9pPicsXG4gICAgICBfdGVtcDoge30sXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncXVlcnknLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonTGVhcm4gbW9yZSBhYm91dCA8YSBocmVmPVwiaHR0cDovL3dpa2kub3BlbnN0cmVldG1hcC5vcmcvd2lraS9PdmVycGFzc19BUEkvTGFuZ3VhZ2VfR3VpZGVcIiB0YXJnZXQ9XCJfYmxhbmtcIj50aGUgcXVlcnkgbGFuZ3VhZ2U8L2E+LicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdhbWVuaXR5PWJhcidcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdsYXllciBuYW1lJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J05hbWUgb2YgdGhlIGxheWVyIGFkZGVkIGlmIHJlc3VsdHMgYXJlIGZvdW5kLicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdvdmVycGFzc19sYXllcl9uYW1lJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1vdmVycGFzcyddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIC8vIHNldCBsYXllciBuYW1lIHRvIF90ZW1wIGZvciBsYXRlciB1c2FnZVxuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLl90ZW1wLmxheWVyTmFtZSA9IHBhcmFtZXRlcnNbMV07IC8vIHRoaXMgaXMgdWdseVxuXG4gICAgICAgIC8vIGJ1aWxkIHRoZSBxdWVyeSB3aXRoIGJvdW5kaW5nIGJveFxuICAgICAgICB2YXIgYmJveCA9IGRjLnV0aWwuZ2V0QkJveCgpO1xuICAgICAgICBkYy51dGlsLnhocignaHR0cDovL292ZXJwYXNzLWFwaS5kZS9hcGkvaW50ZXJwcmV0ZXI/W291dDpqc29uXTtub2RlWycrcGFyYW1ldGVyc1swXSsnXSgnK2Jib3grJyk7b3V0OycsIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB2YXIgZ2VvanNvbiA9IG9zbXRvZ2VvanNvbihkYXRhKTtcbiAgICAgICAgICBpZiAoIWRhdGEuZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnTm8gZWxlbWVudHMgZm91bmQgaW4geW91ciBxdWVyeS4nKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLl90ZW1wLmxheWVyTmFtZSwgZ2VvanNvbl0pO1xuICAgICAgICAgICAgZGMubm90aWZ5KCdzdWNjZXNzJywgJ0ZvdW5kIDxzdHJvbmc+JyArIGRhdGEuZWxlbWVudHMubGVuZ3RoICsgJyBlbGVtZW50czwvc3Ryb25nPiBmcm9tIHRoZSBPdmVycGFzcyBBUEknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcXVlcnkgdGhlIE92ZXJwYXNzIEFQSScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGxvY2F0aW9uOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0FkZCB5b3VyIGxvY2F0aW9uIGFzIGEgbGF5ZXInLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtY3Jvc3NoYWlyc1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghbmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdHZW9sb2NhdGlvbiBpcyBub3QgYXZhaWxhYmxlIG9uIHRoaXMgYnJvd3Nlci4nLCA0MDAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5tYXAubS5sb2NhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnYnJlYWsxJzogeyB0eXBlOiAnYnJlYWsnIH0sXG5cbiAgICAnc2F2ZS1nZW9qc29uJzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhdmUgYXMgR2VvSlNPTicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1maWxlLWNvZGUtb1wiPjwvaT4nLFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAoZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYy5zZWxlY3Rpb24ubGlzdFtmaWxlXS5yYXcpO1xuICAgICAgICAgICAgdmFyIHRpdGxlID0gJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtmaWxlXS5uYW1lICsgJy5nZW9qc29uJztcbiAgICAgICAgICAgIHNhdmVBcyhuZXcgQmxvYihbY29udGVudF0sIHtcbiAgICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCdcbiAgICAgICAgICAgIH0pLCB0aXRsZSk7XG4gICAgICAgICAgfSkoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ3NhdmUtc2hhcGVmaWxlJzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhdmUgYXMgU2hhcGVmaWxlJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGVcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgIGZvbGRlcjogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlczoge1xuICAgICAgICAgICAgICAgIHBvaW50OiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX3BvaW50JyxcbiAgICAgICAgICAgICAgICBwb2x5Z29uOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX3BvbHknLFxuICAgICAgICAgICAgICAgIGxpbmU6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfbGluZSdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNocHdyaXRlLmRvd25sb2FkKGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdywgb3B0aW9ucyk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ0Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gZG93bmxvYWRpbmcgdGhlIHNoYXBlZmlsZS4nICsgZXJyKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGNyZWF0ZXNMYXllcjogZmFsc2VcbiAgICB9LFxuXG4gICAgJ2JyZWFrMic6IHsgdHlwZTogJ2JyZWFrJyB9LFxuXG4gICAgZXh0ZW50OiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVmlldyBleHRlbnQgb2YgbGF5ZXJzJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWdsb2JlXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoIWRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCkge1xuICAgICAgICAgIC8vIGV4dGVudCBvZiBlbnRpcmUgbGF5ZXIgbGlzdCBpZiBub3RoaW5nIHNlbGVjdGVkXG4gICAgICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGRjLm1hcC5sYXllcmdyb3VwLmdldEJvdW5kcygpKTsgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG90aGVyd2lzZSBidWlsZCB0aGUgYm91bmRzIGJhc2VkIG9uIHNlbGVjdGVkIGxheWVyc1xuICAgICAgICAgIHZhciBib3VuZHM7XG4gICAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICB2YXIgZmwgPSBkYy5zZWxlY3Rpb24ubGlzdFtsXS5mZWF0dXJlbGF5ZXI7XG4gICAgICAgICAgICBpZighbCkgYm91bmRzID0gZmwuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICBlbHNlIGJvdW5kcy5leHRlbmQoZmwuZ2V0Qm91bmRzKCkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBhbmQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdDb252ZXJ0IEZlYXR1cmVDb2xsZWN0aW9uIGludG8gc2VwYXJhdGUgZmVhdHVyZXMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZXhwYW5kXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHZhciBmYyA9IGRjLnNlbGVjdGlvbi5saXN0WzBdO1xuICAgICAgICAgIGlmIChmYy5yYXcudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgICAgJChmYy5yYXcuZmVhdHVyZXMpLmVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2ZjLm5hbWUgKyBjb3VudCArICdfJyArIGZjLnJhdy5mZWF0dXJlc1tmXS5nZW9tZXRyeS50eXBlLCBmYy5yYXcuZmVhdHVyZXNbZl1dKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdUaGF0IG5lZWRzIHRvIGJlIGEgZmVhdHVyZSBjb2xsZWN0aW9uIScpO1xuICAgICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdMYXllciBpcyBub3QgYSBGZWF0dXJlQ29sbGVjdGlvbi4nKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ1BsZWFzZSBzZWxlY3QgYSBzaW5nbGUgbGF5ZXIhJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY29tYmluZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbWJpbmVzIHNlbGVjdGVkIGZlYXR1cmVzIGludG8gYSBzaW5nbGUgRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtY29tcHJlc3NcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZmMgPSB7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogW11cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdFtmXS5yYXcudHlwZSAhPT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgICAgICBmYy5mZWF0dXJlcy5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ZdLnJhdyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCBkYy5zZWxlY3Rpb24ubGlzdFtmXS5uYW1lICsgJyB3YXMgbm90IGFkZGVkIGJlY2F1c2UgaXQgaXMgYWxyZWFkeSBhIEZlYXR1cmVDb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFsnbmV3X0ZlYXR1cmVDb2xsZWN0aW9uJywgZmNdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnTm8gbGF5ZXJzIHNlbGVjdGVkIScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vICd2aWV3LWF0dHJpYnV0ZXMnOiB7XG4gICAgLy8gICBtaW5GZWF0dXJlczogMSxcbiAgICAvLyAgIGRlc2NyaXB0aW9uOiAnU2hvdyBhdHRyaWJ1dGUgdGFibGUnLFxuICAgIC8vICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdGgtbGlzdFwiPjwvaT4nLFxuICAgIC8vICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgIGRjLmF0dHIucmVuZGVyKGRjLnNlbGVjdGlvbi5saXN0WzBdKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9LFxuXG4gICAgJ2JyZWFrMyc6IHsgdHlwZTogJ2JyZWFrJyB9LFxuXG4gICAgcmVuYW1lOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVuYW1lIGxheWVyJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXBlbmNpbFwiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ05hbWUnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydyZW5hbWUnXSk7ICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnUGxlYXNlIHNlbGVjdCA8c3Ryb25nPm9uZSBsYXllcjwvc3Ryb25nPi4nKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICBjb25zb2xlLmxvZyhuYW1lLCBwYXJhbWV0ZXJzKTtcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVuYW1lJywgW2RjLnNlbGVjdGlvbi5saXN0WzBdLCBwYXJhbWV0ZXJzWzBdXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JlbW92ZSBzZWxlY3RlZCBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdHJhc2gtb1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhbXApO1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZScsIFt0aGlzLnN0YW1wXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5mbzoge1xuICAgICAgdHlwZTogJ2luZm8nLFxuICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBtb3JlIGFib3V0IGRyb3BjaG9wJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWluZm9cIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2Fib3V0Lmh0bWwnO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5vcHMgPSBkYy5vcHMgfHwge307XG5cbiAgZGMub3BzLmdlbyA9IHtcbiAgICBhbG9uZzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBsaW5lIGFuZCByZXR1cm5zIGEgcG9pbnQgYXQgYSBzcGVjaWZpZWQgZGlzdGFuY2UgYWxvbmcgdGhlIGxpbmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidkaXN0YW5jZSBhbG9uZyB0aGUgbGluZScsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0cycsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAna2lsb21ldGVycycsICdyYWRpYW5zJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdhbG9uZycsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuYWxvbmcuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBiZXppZXI6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgbGluZSBhbmQgcmV0dXJucyBhIGN1cnZlZCB2ZXJzaW9uIGJ5IGFwcGx5aW5nIGEgQmV6aWVyIHNwbGluZSBhbGdvcml0aG0uJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZXNvbHV0aW9uJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1RpbWUgaW4gbWlsbGlzZWNvbmRzIGJldHdlZW4gcG9pbnRzJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMDAwMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3NoYXJwbmVzcycsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidhIG1lYXN1cmUgb2YgaG93IGN1cnZ5IHRoZSBwYXRoIHNob3VsZCBiZSBiZXR3ZWVuIHNwbGluZXMnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6ICAwLjg1XG5cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2JlemllcicsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuYmV6aWVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYnVmZmVyOiB7XG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NhbGN1bGF0ZXMgYSBidWZmZXIgZm9yIGlucHV0IGZlYXR1cmVzIGZvciBhIGdpdmVuIHJhZGl1cy4gVW5pdHMgc3VwcG9ydGVkIGFyZSBtaWxlcywga2lsb21ldGVycywgYW5kIGRlZ3JlZXMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdEaXN0YW5jZSB0byBkcmF3IHRoZSBidWZmZXIuJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXQnLFxuICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ21pbGVzJywgJ2ZlZXQnLCAna2lsb21ldGVycycsICdtZXRlcnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5idWZmZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2VudGVyOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZXMgYSBwb2ludCBpbiB0aGUgY2VudGVyIG9mIHRoZSBmZWF0dXJlLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVjdXJzaXZlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1J1biB0aGUgb3BlcmF0aW9uIG9uIGVhY2ggZmVhdHVyZSBpbiB0aGUgY29sbGVjdGlvbiBvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uJyxcbiAgICAgICAgICB0eXBlOiAncmVjdXJzaXZlJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgLy8gaWYgcnVubmluZyB0aGUgb3BlcmF0aW9uIHJlY3Vyc2l2ZWx5IFwidHJ1ZVwiXG4gICAgICAgIGlmIChwYXJhbXNbMV0gPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnY2VudGVyJywgcGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmNlbnRlci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNlbnRyb2lkOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZXMgYSBwb2ludCBpbiB0aGUgY2VudHJvaWQgb2YgdGhlIGZlYXR1cmVzLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVjdXJzaXZlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1J1biB0aGUgb3BlcmF0aW9uIG9uIGVhY2ggZmVhdHVyZSBpbiB0aGUgY29sbGVjdGlvbiBvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uJyxcbiAgICAgICAgICB0eXBlOiAncmVjdXJzaXZlJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgLy8gaWYgcnVubmluZyB0aGUgb3BlcmF0aW9uIHJlY3Vyc2l2ZWx5IFwidHJ1ZVwiXG4gICAgICAgIGlmIChwYXJhbXNbMV0gPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnY2VudHJvaWQnLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuY2VudHJvaWQuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBkZXN0aW5hdGlvbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9pbnQ+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgUG9pbnQgYW5kIGNhbGN1bGF0ZXMgdGhlIGxvY2F0aW9uIG9mIGEgZGVzdGluYXRpb24gcG9pbnQgZ2l2ZW4gYSBkaXN0YW5jZSBpbiBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVyczsgYW5kIGJlYXJpbmcgaW4gZGVncmVlcy4gVGhpcyB1c2VzIHRoZSBIYXZlcnNpbmUgZm9ybXVsYSB0byBhY2NvdW50IGZvciBnbG9iYWwgY3VydmF0dXJlLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZGlzdGFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnRpbmcgcG9pbnQnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnYmVhcmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidyYW5naW5nIGZyb20gLTE4MCB0byAxODAnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6ICAwXG5cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0cycsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAna2lsb21ldGVycycsICdyYWRpYW5zJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdkZXN0aW5hdGlvbicsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuZGVzdGluYXRpb24uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlbnZlbG9wZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ10gLy8gVE9ETzogbWFrZSB0aGlzIHRha2UgZmVhdHVyZXMgYW5kIHJ1biBhY3Jvc3MgZnVsbCBzZWxlY3Rpb25cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGFueSBudW1iZXIgb2YgZmVhdHVyZXMgYW5kIHJldHVybnMgYSByZWN0YW5ndWxhciBQb2x5Z29uIHRoYXQgZW5jb21wYXNzZXMgYWxsIHZlcnRpY2VzLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuZW52ZWxvcGUuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZXhwbG9kZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGZlYXR1cmUgb3Igc2V0IG9mIGZlYXR1cmVzIGFuZCByZXR1cm5zIGFsbCBwb3NpdGlvbnMgYXMgcG9pbnRzLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuZXhwbG9kZS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBtaWRwb2ludDoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9pbnQ+J11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIHR3byBwb2ludHMgYW5kIHJldHVybnMgYSBwb2ludCBtaWR3YXkgYmV0d2VlbiB0aGVtLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYubWlkcG9pbnQuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2ltcGxpZnk6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmU8UG9seWdvbj4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBMaW5lU3RyaW5nIG9yIFBvbHlnb24gYW5kIHJldHVybnMgYSBzaW1wbGlmaWVkIHZlcnNpb24uIEludGVybmFsbHkgdXNlcyBzaW1wbGlmeS1qcyB0byBwZXJmb3JtIHNpbXBsaWZpY2F0aW9uLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3RvbGVyYW5jZScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA6J3NpbXBsaWZpY2F0aW9uIHRvbGVyYW5jZScsXG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IDAuMVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2hpZ2ggcXVhbGl0eScsXG4gICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICd3aGV0aGVyIG9yIG5vdCB0byBzcGVuZCBtb3JlIHRpbWUgdG8gY3JlYXRlIGEgaGlnaGVyLXF1YWxpdHkgc2ltcGxpZmljYXRpb24gd2l0aCBhIGRpZmZlcmVudCBhbGdvcml0aG0nLFxuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnc2ltcGxpZnknLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLnNpbXBsaWZ5LmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdGluOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVHJpYW5ndWxhdGVkIGlycmVndWxhciBuZXR3b3JrLCBpbnRlcnBvbGF0aW9uIG1ldGhvZCcsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYudGluLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuaW9uOiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2x5Z29uPiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyB0d28gcG9seWdvbnMgYW5kIHJldHVybnMgYSBjb21iaW5lZCBwb2x5Z29uLiBJZiB0aGUgaW5wdXQgcG9seWdvbnMgYXJlIG5vdCBjb250aWd1b3VzLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYSBNdWx0aVBvbHlnb24gZmVhdHVyZS4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLnVuaW9uLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHdpdGhpbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgc2V0IG9mIHBvaW50cyBhbmQgYSBzZXQgb2YgcG9seWdvbnMgYW5kIHJldHVybnMgdGhlIHBvaW50cyB0aGF0IGZhbGwgd2l0aGluIHRoZSBwb2x5Z29ucy4gRmlyc3QgaW5wdXQgc2hvdWxkIGJlIHRoZSBwb2ludHMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdQb2ludHMgdG8gY2xpcCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidTZWxlY3QgdGhlIGxheWVyIHRoYXQgcmVwcmVzZW50cyB0aGUgcG9pbnRzIHlvdSB3YW50IHRvIGNsaXAuIFRoaXMgYXNzdW1lcyB0aGUgb3RoZXIgbGF5ZXIgaXMgeW91ciBjbGlwcGluZyBwb2x5Z29uLicsXG4gICAgICAgICAgdHlwZTogJ3N3aXRjaCdcbiAgICAgICAgICAvLyBkZWZhdWx0OiBkYy5zZWxlY3Rpb24ubGlzdFswXVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHBhcmFtcyk7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLndpdGhpbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBcbiAgZGMuc2VsZWN0aW9uID0ge307XG4gIGRjLnNlbGVjdGlvbi5saXN0ID0gW107XG5cbiAgZGMuc2VsZWN0aW9uLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignbGF5ZXI6c2VsZWN0ZWQnLCBkYy5zZWxlY3Rpb24uYWRkKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6dW5zZWxlY3RlZCcsIGRjLnNlbGVjdGlvbi5yZW1vdmUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgX2xheWVyUmVtb3ZlZCk7XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLmFkZCA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIGRjLnNlbGVjdGlvbi5saXN0LnB1c2gobGF5ZXIpO1xuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5yZW1vdmUgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgaW5kZXggPSBudWxsO1xuICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wID09PSBsYXllci5zdGFtcCkge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3Quc3BsaWNlKGluZGV4LCAxKTsgLy8gcmVtb3ZlIG91dHNpZGUgb2YgdGhlIGxvb3Agc28gd2UgZG9uJ3QgYnJlYWsgb3VyIGNvdW50XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgJCgnLmxheWVyLW5hbWUuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAkKCcub3BlcmF0aW9uLWdlbycpLmFkZENsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAkKCcub3BlcmF0aW9uLWdlbycpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3QgPSBbXTtcbiAgfTtcblxuICBmdW5jdGlvbiBfbGF5ZXJSZW1vdmVkKGV2ZW50LCBzdGFtcCkge1xuICAgIGRjLnNlbGVjdGlvbi5yZW1vdmUoe30sIHtzdGFtcDogc3RhbXB9KTtcbiAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgfVxuXG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG5cbiAgZGMudXRpbCA9IHt9O1xuXG4gIGRjLnV0aWwucmVtb3ZlRmlsZUV4dGVuc2lvbiA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cXC5bXi8uXSskLywgXCJcIik7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLnJlbW92ZVdoaXRlU3BhY2UgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xuICAgIGNvbnNvbGUubG9nKHN0cmluZyk7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLmNvbmNhdCA9IGZ1bmN0aW9uKGFycmF5LCBzZXBhcmF0b3IsIHByZWZpeCkge1xuICAgIHZhciBzdHJpbmcgPSAnJztcbiAgICAkKGFycmF5KS5lYWNoKGZ1bmN0aW9uKGEpIHtcbiAgICAgIHN0cmluZyArPSBzZXBhcmF0b3IgKyBhcnJheVthXTtcbiAgICB9KTtcbiAgICBzdHJpbmcgPSBwcmVmaXggKyBzdHJpbmc7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLnhociA9IGZ1bmN0aW9uKHVybCwgY2FsbGJhY2spIHtcbiAgICBkcm9wY2hvcC51dGlsLmxvYWRlcih0cnVlKTtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgeGhyLm9ubG9hZCA9IGNhbGxiYWNrLmJpbmQodGhpcywgeGhyKTtcbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCB4aHIgKSB7XG4gICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICBjb25zb2xlLmVycm9yKHhocik7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1VuYWJsZSB0byBhY2Nlc3MgJyArIHVybCwgMjUwMCk7XG4gICAgfTtcbiAgICB4aHIuc2VuZCgpO1xuICB9O1xuXG4gIGRjLnV0aWwucmVhZEZpbGUgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgLy8gaWYgYSB6aXBmaWxlLCBhc3N1bWUgc2hhcGVmaWxlIGZvciBub3dcbiAgICBpZiAoZmlsZS5uYW1lLmluZGV4T2YoJy56aXAnKSA+IC0xIHx8IGZpbGUubmFtZS5pbmRleE9mKCcuc2hwJykgPiAtMSkge1xuICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xuICAgICAgZGMudXRpbC5sb2FkZXIodHJ1ZSk7XG4gICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgc2hwKHJlYWRlci5yZXN1bHQpLnRoZW4oZnVuY3Rpb24oZ2VvanNvbikge1xuICAgICAgICAgIGRjLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2dlb2pzb24uZmlsZU5hbWUsIGdlb2pzb25dKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlLCAnVVRGLTgnKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtmaWxlLm5hbWUsIEpTT04ucGFyc2UocmVhZGVyLnJlc3VsdCldKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9yd2FyZFRvR2VvSnNvbklvKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2dlb2pzb24uaW8vI2RhdGE9ZGF0YTphcHBsaWNhdGlvbi9qc29uLFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHVybDtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5qc29uRnJvbVVybCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBxdWVyeSA9IGxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSlcbiAgICAgIC5zcGxpdCgvKCY/Z2lzdD18Jj91cmw9KS9nKVxuICAgICAgLmZpbHRlcihmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBkLmxlbmd0aCA+IDA7XG4gICAgICB9KTtcblxuICAgIHZhciByZXN1bHQgPSB7fVxuXG4gICAgcXVlcnkuZm9yRWFjaChmdW5jdGlvbihwYXJ0LCBpKSB7XG4gICAgICBpZiAoaSA9PT0gMCB8fCBpICUgMiA9PT0gMCkge1xuICAgICAgICB2YXIga2V5ID0gcGFydC5yZXBsYWNlKC8mfD0vZywgJycpO1xuXG4gICAgICAgIGlmICghcmVzdWx0W2tleV0pIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IFtdXG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHRba2V5XS5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChxdWVyeVtpICsgMV0pKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgZGMudXRpbC5leGVjdXRlVXJsUGFyYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRhdGEgPSBkYy51dGlsLmpzb25Gcm9tVXJsKCk7XG5cbiAgICAvLyBsb2FkIGdpc3RcbiAgICBpZiAoZGF0YS5naXN0ICYmIGRhdGEuZ2lzdC5sZW5ndGgpIHtcbiAgICAgICQoZGF0YS5naXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtZ2lzdCddLmdldCh7fSwgJ2xvYWQtZ2lzdCcsIFtkYXRhLmdpc3RbaV1dKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGxvYWRcbiAgICBpZiAoZGF0YS51cmwgJiYgZGF0YS51cmwubGVuZ3RoKSB7XG4gICAgICAkKGRhdGEudXJsKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtdXJsJ10uZ2V0KHt9LCAnbG9hZC11cmwnLCBbZGF0YS51cmxbaV1dKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmdldEZpbGVFeHRlbnNpb24gPSBmdW5jdGlvbihmaWxlbmFtZSkge1xuICAgIHJldHVybiBmaWxlbmFtZS5zdWJzdHIoZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKSsxKTtcbiAgfTtcblxuICBkYy51dGlsLmdldEJCb3ggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm91bmRzID0gZGMubWFwLm0uZ2V0Qm91bmRzKCksXG4gICAgICAgICAgICBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKSxcbiAgICAgICAgICAgIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpO1xuICAgIC8vIHdlIHNob3VsZCBwcm9iYWJseSBjaGVjayB0aGUgc2l6ZSBoZXJlP1xuICAgIC8vIG5vZGUoNTcuNywxMS45LDU3LjgsMTIuMClcbiAgICByZXR1cm4gc3cubGF0KycsJytzdy5sbmcrJywnK25lLmxhdCsnLCcrbmUubG5nO1xuICB9O1xuXG4gIGRjLnV0aWwudW5jb2xsZWN0ID0gZnVuY3Rpb24oZmMpIHtcbiAgICByZXR1cm4gZmMuZmVhdHVyZXNbMF07XG4gIH07XG5cbiAgZGMudXRpbC5leGVjdXRlRkMgPSBmdW5jdGlvbihmYywgb3BlcmF0aW9uLCBwYXJhbXMpIHtcblxuICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG4gICAgdmFyIG5ld0ZDID0ge307XG4gICAgbmV3RkMudHlwZSA9ICdGZWF0dXJlQ29sbGVjdGlvbic7XG4gICAgbmV3RkMuZmVhdHVyZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGYgPSAwOyBmIDwgZmMuZmVhdHVyZXMubGVuZ3RoOyBmKyspIHtcbiAgICAgIG5ld1BhcmFtc1swXSA9IGZjLmZlYXR1cmVzW2ZdO1xuICAgICAgdmFyIGZlYXR1cmU7XG4gICAgICB0cnkge1xuICAgICAgICBmZWF0dXJlID0gdHVyZltvcGVyYXRpb25dLmFwcGx5KG51bGwsIG5ld1BhcmFtcyk7XG4gICAgICAgIGZlYXR1cmUucHJvcGVydGllcyA9IGZjLmZlYXR1cmVzW2ZdLnByb3BlcnRpZXMgfHwge307XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIGVycik7XG4gICAgICB9XG4gICAgICBuZXdGQy5mZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdGQztcblxuICB9O1xuXG4gIGRjLnV0aWwubG9hZGVyID0gZnVuY3Rpb24oeWVzKSB7XG4gICAgdmFyIGxvYWRlciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRlcicpO1xuXG4gICAgaWYgKHllcykge1xuICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdkcm9wY2hvcC1sb2FkaW5nJyk7XG4gICAgICAkKCdib2R5JykuYXBwZW5kKGxvYWRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZHJvcGNob3AtbG9hZGluZycpO1xuICAgICAgJCgnLmRyb3BjaG9wLWxvYWRlcicpLmFkZENsYXNzKCdsb2FkZXItY29tcGxldGUnKS5mYWRlT3V0KDIwMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC53ZWxjb21lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHdlbGNvbWUgPSAnXFxuV2VsY29tZSB0byBEcm9wY2hvcCFcXG4nO1xuICAgICAgICB3ZWxjb21lICs9ICdPbmNlIHlvdSBkcm9wLCB0aGUgY2hvcCBkb25cXCd0IHN0b3AuXFxuXFxuJztcbiAgICAgICAgd2VsY29tZSArPSAnVGhpcyBwcm9qZWN0IGlzIGJyb3VnaHQgdG8geW91IGJ5IHRoZSBncmVhdCBwZW9wbGUgb2YgQ1VHT1MsIHRoZSBDYXNjYWRpYW4gY2hhcHRlciBvZiBPU0dlby4gSWYgeW91IGFyZSBldmVyIGluIFNlYXR0bGUsIGhpdCB1cyB1cFxcbmhlbGxvQGN1Z29zLm9yZ1xcblxcbic7XG4gICAgICAgIHdlbGNvbWUgKz0gJ1lvdSBjYW4gbGVhcm4gbW9yZSBhYm91dCB0aGlzIHByb2plY3QgYXQgZHJvcGNob3AuaW8vYWJvdXQuJ1xuICAgIGNvbnNvbGUubG9nKHdlbGNvbWUpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
