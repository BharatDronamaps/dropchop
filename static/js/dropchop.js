var dropchop=function(e){return e=e||{},e.version="0.1.1",e.init=function(t){t||e.util.error("No options provided in dropchop.init()"),e.options=t,$(t.id).length||e.util.error("Element with options.id does not exist."),e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.ops.init(),e.form.init(),location.search.length&&e.util.executeUrlParams()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),l=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),s=$("<button>").addClass("layer-action layer-remove").html('<i class="fa fa-times"></i>'),p=$("<button>").addClass("layer-action layer-duplicate").html('<i class="fa fa-files-o"></i>');p.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:duplicate",[$(this).parent().attr("data-stamp")]),!1}),s.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:remove",[$(this).parent().attr("data-stamp")]),e.util.updateSearch(),e.selection.clear(),!1}),l.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),l=i.parent().attr("data-stamp");t===r&&(a=e),t===l&&(o=e)}),a>o?$(".layer-element").each(function(t){t>=o&&a>=t&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){o>t&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),o.append(n),o.append(l),o.append(i),o.append(s),o.append(p),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show()},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.toggleAll=function(t){function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}if($(this).find("input").prop("checked"))for(var r in e.layers.list)a(e.layers.list[r].stamp,!0);else for(var o in e.layers.list)a(e.layers.list[o].stamp,!1)},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r,o,n){var i=e.layers.makeLayer(a,r);e.layers.list[i.stamp]=i,o&&n&&(e.layers.list[i.stamp].ltype=o,e.layers.list[i.stamp].url=n),e.notify("success","<strong>"+i.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[i]),o&&n&&e.util.updateSearch()},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer),$(e.map.m).on("locationfound",function(t){var a=t.originalEvent;e.map.m.fitBounds(a.bounds);var r={type:"Feature",geometry:{type:"Point",coordinates:[a.latlng.lng,a.latlng.lat]},properties:{title:"There You Are","marker-color":"#207178","marker-symbol":"heart"}};$(e).trigger("file:added",["your location",r])}),$(e.map.m).on("locationerror",function(){e.notify("error","There was a problem finding your location.",3e3)})}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);if("close"===r){var n=$("<button>").addClass("notification-close").prop("type","button").html('<i class="fa fa-times"></i>');n.on("click",function(e){$(this).parent().remove()}),$(o).append(n),$(e.$elem).append(o)}else $(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.ops=e.ops||{},e.ops.init=function(){function r(t){var r=$("<button>").addClass("menu-action").html(e.ops.file[t].icon||"!").attr("data-operation",t).attr("data-tooltip",e.ops.file[t].description);return"info"===e.ops.file[t].type&&r.addClass("dropchop-info"),r.on("click",a),r}var o=$("<div>").addClass("operations-geo");e.$elem.append(o);for(var n in e.ops.geo){var i=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+n+"</h4><p>"+e.ops.geo[n].description+"</p>").prop("disabled",!0).attr("data-operation",n);i.on("click",t),o.append(i)}$(e).on("layer:selected",e.ops.geoCheck),$(e).on("layer:unselected",e.ops.geoCheck),$(e).on("operation:geo",e.ops.geoExecute),$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback),e.ops.setup=[{name:"import",icon:'<i class="fa fa-plus"></i>',actions:["upload","load-url","load-gist","load-overpass","location"]},{name:"Save",icon:'<i class="fa fa-floppy-o"></i>',actions:["save-geojson","save-shapefile"]},{name:"Geo Actions",icon:'<i class="fa fa-wrench"></i>',actions:["extent","expand","combine","rename","remove"]},"info"];for(var l=$("<div>").addClass("dropchop-menu-left"),s=e.ops.setup,p=0;p<s.length;p++){var c=s[p];if("object"!=typeof s[p])if("break"===e.ops.file[c].type){var u=$("<div>").addClass("menu-action-break");l.append(u)}else l.append(r(c));else{var d=$("<div>").addClass("menu-action menu-collapse").html(s[p].icon);"import"===s[p].name&&d.addClass("menu-import");for(var f=$("<div>").addClass("menu-collapse-inner"),m=0;m<s[p].actions.length;m++){var y=e.ops.setup[p].actions[m];f.append(r(y))}d.append(f),l.append(d)}}e.$elem.append(l)},e.ops.geoExecute=function(t,a,r){var o=e.ops.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.ops.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){-1===$.inArray("switch-"+e.selection.list[t].stamp,a)?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.ops.geoCheck=function(t,a){function r(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function o(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var n in e.ops.geo){var i=e.ops.geo[n];if(e.selection.list.length>i.maxFeatures||e.selection.list.length<i.minFeatures)r(n);else for(var l=0;l<e.selection.list.length;l++){var s=e.selection.list[l];$.inArray(s.type,i.requirements.types)>-1||i.requirements.generalFeature===!0?o(n):r(n)}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r,"url",t.responseURL])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content),"gist",t.responseURL.split("/")[t.responseURL.split("/").length-1]])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide" target="_blank">the query language</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox();e.util.xhr("http://overpass-api.de/api/interpreter?[out:json];node["+r[0]+"]("+o+");out;",e.ops.file["load-overpass"].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r,{flatProperties:!0});r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},location:{description:"Add your location as a layer",icon:'<i class="fa fa-crosshairs"></i>',execute:function(){navigator.geolocation?e.map.m.locate():e.notify("error","Geolocation is not available on this browser.",4e3)}},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},rename:{minFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.readFile=function(t){var a=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(a.readAsArrayBuffer(t),e.util.loader(!0),a.onloadend=function(t){shp(a.result)["catch"](function(e){console.log("Problematic projection - ",e)}).then(function(t){return e.util.loader(!1),t?void $(e).trigger("file:added",[t.fileName,t]):e.notify("error","Invalid projection or shapefile.",2500)})}):(a.readAsText(t,"UTF-8"),a.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(a.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1).split(/(&?gist=|&?url=)/g).filter(function(e){return e.length>0}),t={};return e.forEach(function(a,r){if(0===r||r%2===0){var o=a.replace(/&|=/g,"");t[o]||(t[o]=[]),t[o].push(decodeURIComponent(e[r+1]))}}),t},e.util.updateSearch=function(){var t=[];Object.keys(e.layers.list).forEach(function(a){e.layers.list[a].ltype&&e.layers.list[a].url&&t.indexOf(e.layers.list[a].ltype+"="+e.layers.list[a].url)<0&&t.push(e.layers.list[a].ltype+"="+e.layers.list[a].url)});var a=t.length?"?"+t.join("&"):"/";a!==window.location.search&&window.history.pushState(null,null,a)},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.uncollect=function(e){return e.features[0]},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var l;try{l=turf[a].apply(null,o),l.properties=t.features[i].properties||{}}catch(s){e.notify("error",s)}n.features.push(l)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.error=function(e){var t=new Error(e);throw t},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibm90aWZ5LmRyb3BjaG9wLmpzIiwib3BzLmRyb3BjaG9wLmpzIiwib3BzLmZpbGUuZHJvcGNob3AuanMiLCJvcHMuZ2VvLmRyb3BjaG9wLmpzIiwic2VsZWN0aW9uLmRyb3BjaG9wLmpzIiwidXRpbC5kcm9wY2hvcC5qcyJdLCJuYW1lcyI6WyJkcm9wY2hvcCIsImRjIiwidmVyc2lvbiIsImluaXQiLCJvcHRzIiwidXRpbCIsImVycm9yIiwib3B0aW9ucyIsIiQiLCJpZCIsImxlbmd0aCIsIiRlbGVtIiwibGF5ZXJzIiwicHJlcGFyZSIsIm1hcCIsInNlbGVjdGlvbiIsImxheWVybGlzdCIsImRyb3B6b25lIiwib3BzIiwiZm9ybSIsImxvY2F0aW9uIiwic2VhcmNoIiwiZXhlY3V0ZVVybFBhcmFtcyIsImJvb20iLCJjb25zb2xlIiwibG9nIiwiX2V2ZW50cyIsIiRjb250YWluZXIiLCJvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJ0aGlzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImZpbGVzIiwib3JpZ2luYWxFdmVudCIsImRhdGFUcmFuc2ZlciIsImVhY2giLCJpIiwicmVhZEZpbGUiLCJnZW8iLCJmaWxlIiwib3BlcmF0aW9uIiwiY3JlYXRlIiwibmFtZSIsImluZm8iLCJ0cmlnZ2VyIiwicmVtb3ZlIiwiJGh0bWwiLCJhdHRyIiwidGV4dCIsImFwcGVuZFRvIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwicCIsImNyZWF0ZVBhcmFtIiwiJHN1Ym1pdCIsIiRjYW5jZWwiLCJkYXRhIiwic2VyaWFsaXplQXJyYXkiLCJwdXNoIiwidmFsdWUiLCJhcHBlbmQiLCJwYXJhbSIsIiRpbnB1dCIsIiRsYWJlbCIsIiRmaWVsZCIsImlucHV0cyIsInR5cGUiLCJodG1sIiwibnVtYmVyIiwiJGkiLCJzZWxlY3QiLCIkb3B0IiwiY2hlY2tib3giLCJzd2l0Y2giLCJsaXN0IiwiJGxibCIsInZhbCIsInN0YW1wIiwicmVjdXJzaXZlIiwiJGxibDEiLCIkb3B0MSIsIiRsYmwyIiwiJG9wdDIiLCJsYXllclR5cGVJY29uIiwiaWNvbiIsImVsZW1zIiwidGFyZ2V0IiwiaGFzQ2xhc3MiLCJjbGVhciIsImxpSGVscGVyIiwidG9nZ2xlTGF5ZXJzIiwidG9nZ2xlQWxsIiwiYWRkTGF5ZXJMaXN0SXRlbSIsInJlbW92ZUxheWVyTGlzdEl0ZW0iLCJyZW5hbWUiLCJuZXdOYW1lIiwiZmluZCIsImxheWVyIiwibGF5ZXJsaXN0SXRlbSIsImxheWVyRGl2IiwiZGVsYXkiLCJxdWV1ZSIsIm5leHQiLCJsYXllclR5cGUiLCJwcm9wIiwiY2hlY2tlZCIsImR1cGxpY2F0ZSIsInBhcmVudCIsInVwZGF0ZVNlYXJjaCIsInNoaWZ0S2V5IiwidG9Db3VudCIsImZyb21Db3VudCIsInRvIiwiZnJvbSIsIl9sYXN0U2VsZWN0ZWQiLCJlIiwiY2hlY2siLCJ0b1N0YW1wIiwiZnJvbVN0YW1wIiwibCIsInNlbGVjdExheWVyIiwibWV0YUtleSIsInNlbGVjdFRvZ2dsZSIsImNsZWFyU2VsZWN0aW9uIiwiaGlkZSIsInNob3ciLCIkaXRlbSIsImx5ciIsImVsZW1Ub2dnbGUiLCJib29sIiwibyIsImZhZGVPdXQiLCJnZXRUeXBlIiwiZ2oiLCJnZW9tZXRyeSIsImFkZCIsImJsb2IiLCJsdHlwZSIsInVybCIsIm1ha2VMYXllciIsIm5vdGlmeSIsImVyciIsInJhdyIsImpzb24iLCJnZW9qc29uIiwiZmwiLCJMIiwibWFwYm94IiwiZmVhdHVyZUxheWVyIiwicmVtb3ZlRmlsZUV4dGVuc2lvbiIsImZlYXR1cmVsYXllciIsImRhdGVBZGRlZCIsIkRhdGUiLCJfbWFrZU1hcCIsInRva2VuIiwiYWNjZXNzVG9rZW4iLCJtIiwiem9vbUNvbnRyb2wiLCJ3b3JsZENvcHlKdW1wIiwic2V0VmlldyIsImNvbnRyb2wiLCJ6b29tIiwicG9zaXRpb24iLCJhZGRUbyIsImdlb2NvZGVyQ29udHJvbCIsImJhc2VMYXllcnMiLCJNYXBib3ggU3RyZWV0cyIsInRpbGVMYXllciIsIk1hcGJveCBPdXRkb29ycyIsIk1hcGJveCBMaWdodCIsIk1hcGJveCBEYXJrIiwiTWFwYm94IFNhdGVsbGl0ZSIsImNvbGxhcHNlZCIsImxheWVyZ3JvdXAiLCJhZGRMYXllciIsImhpZGVMYXllciIsInNob3dMYXllciIsImZpdEJvdW5kcyIsImJvdW5kcyIsImNvb3JkaW5hdGVzIiwibGF0bG5nIiwibG5nIiwibGF0IiwicHJvcGVydGllcyIsInRpdGxlIiwibWFya2VyLWNvbG9yIiwibWFya2VyLXN5bWJvbCIsInJlbW92ZUxheWVyIiwiY291bnQiLCJlYWNoTGF5ZXIiLCJjb250ZW50IiwiZmVhdHVyZSIsImJpbmRQb3B1cCIsInBvcHVwIiwibWF4V2lkdGgiLCJtYXhIZWlnaHQiLCJhdXRvUGFuUGFkZGluZyIsImNsYXNzTmFtZSIsInNldENvbnRlbnQiLCJ0aW1lIiwibm90ZSIsIiRjbG9zZSIsInNldFRpbWVvdXQiLCJfZ2VvQnRuQ2xpY2siLCJfZmlsZUJ0bkNsaWNrIiwiZXhlY3V0ZSIsImJ1aWxkTWVudUJ1dHRvbiIsImFjdGlvbiIsImJ1dHRvbiIsImdlb0NvbnRhaW5lciIsImdlb09wIiwiZ2VvQnRuIiwiZ2VvQ2hlY2siLCJnZW9FeGVjdXRlIiwiZ2V0IiwiY2FsbGJhY2siLCJzZXR1cCIsImFjdGlvbnMiLCJsZWZ0TWVudSIsIiRicmVha1NwYWNlIiwiY29sbGFwc2VCdG4iLCJjb2xsYXBzZUlubmVyIiwiYSIsImFjdG4iLCJwcmVwIiwicHJlcGFyZVR1cmZQYXJhbXMiLCJyZXN1bHQiLCJwYXJhbXMiLCJnZW9tcyIsIm5hbWVBcnJheSIsImluQXJyYXkiLCJ1bnNoaWZ0IiwibWVyZ2UiLCJjb25jYXQiLCJ0dXJuSXRPZmYiLCJvcCIsImJ0biIsInR1cm5JdE9uIiwibWF4RmVhdHVyZXMiLCJtaW5GZWF0dXJlcyIsIngiLCJzZWwiLCJyZXF1aXJlbWVudHMiLCJ0eXBlcyIsImdlbmVyYWxGZWF0dXJlIiwidXBsb2FkIiwiJGJsaW5kSW5wdXQiLCJjc3MiLCJjbGljayIsImxvYWQtdXJsIiwiZGVmYXVsdCIsInhociIsInhockV2ZW50IiwibG9hZGVyIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2VVUkwiLCJzdWJzdHJpbmciLCJsYXN0SW5kZXhPZiIsImxvYWQtZ2lzdCIsImdpc3QiLCJzcGxpdCIsImYiLCJmaWxlbmFtZSIsImxvYWQtb3ZlcnBhc3MiLCJfdGVtcCIsImxheWVyTmFtZSIsImJib3giLCJnZXRCQm94Iiwib3NtdG9nZW9qc29uIiwiZmxhdFByb3BlcnRpZXMiLCJlbGVtZW50cyIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwibG9jYXRlIiwic2F2ZS1nZW9qc29uIiwiY3JlYXRlc0xheWVyIiwic3RyaW5naWZ5Iiwic2F2ZUFzIiwiQmxvYiIsInNhdmUtc2hhcGVmaWxlIiwiZm9sZGVyIiwicG9pbnQiLCJwb2x5Z29uIiwibGluZSIsInNocHdyaXRlIiwiZG93bmxvYWQiLCJleHRlbnQiLCJleHRlbmQiLCJnZXRCb3VuZHMiLCJleHBhbmQiLCJmYyIsIkVycm9yIiwiZmVhdHVyZXMiLCJjb21iaW5lIiwid2luZG93IiwiYWxvbmciLCJleGVjdXRlRkMiLCJ0dXJmIiwiYXBwbHkiLCJiZXppZXIiLCJidWZmZXIiLCJjZW50ZXIiLCJjZW50cm9pZCIsImRlc3RpbmF0aW9uIiwiZW52ZWxvcGUiLCJleHBsb2RlIiwibWlkcG9pbnQiLCJzaW1wbGlmeSIsInRpbiIsInVuaW9uIiwid2l0aGluIiwiX2xheWVyUmVtb3ZlZCIsImluZGV4Iiwic3BsaWNlIiwic3RyaW5nIiwicmVwbGFjZSIsInJlbW92ZVdoaXRlU3BhY2UiLCJhcnJheSIsInNlcGFyYXRvciIsInByZWZpeCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ubG9hZCIsImJpbmQiLCJvbmVycm9yIiwic2VuZCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJpbmRleE9mIiwicmVhZEFzQXJyYXlCdWZmZXIiLCJvbmxvYWRlbmQiLCJzaHAiLCJ0aGVuIiwiZmlsZU5hbWUiLCJyZWFkQXNUZXh0IiwianNvbkZyb21VcmwiLCJxdWVyeSIsInN1YnN0ciIsImZpbHRlciIsImQiLCJmb3JFYWNoIiwicGFydCIsImtleSIsImRlY29kZVVSSUNvbXBvbmVudCIsIk9iamVjdCIsImtleXMiLCJqb2luIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsImdldEZpbGVFeHRlbnNpb24iLCJzdyIsImdldFNvdXRoV2VzdCIsIm5lIiwiZ2V0Tm9ydGhFYXN0IiwidW5jb2xsZWN0IiwibmV3UGFyYW1zIiwibmV3RkMiLCJ5ZXMiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLFVBQUEsU0FBQUMsR0E4Q0EsTUE3Q0FBLEdBQUFBLE1BQ0FBLEVBQUFDLFFBQUEsUUFDQUQsRUFBQUUsS0FBQSxTQUFBQyxHQUNBQSxHQUNBSCxFQUFBSSxLQUFBQyxNQUFBLDBDQUVBTCxFQUFBTSxRQUFBSCxFQUVBSSxFQUFBSixFQUFBSyxJQUFBQyxRQUNBVCxFQUFBSSxLQUFBQyxNQUFBLDJDQUVBTCxFQUFBVSxNQUFBSCxFQUFBSixFQUFBSyxJQUdBUixFQUFBVyxPQUFBQyxVQUdBWixFQUFBYSxJQUFBWCxPQUdBRixFQUFBYyxVQUFBWixPQUdBRixFQUFBZSxVQUFBYixLQUFBLGFBR0FGLEVBQUFnQixTQUFBVCxFQUFBLFNBR0FQLEVBQUFpQixJQUFBZixPQUdBRixFQUFBa0IsS0FBQWhCLE9BR0FpQixTQUFBQyxPQUFBWCxRQUNBVCxFQUFBSSxLQUFBaUIsb0JBS0FyQixFQUFBc0IsS0FBQSxXQUNBQyxRQUFBQyxJQUFBLGNBR0F4QixHQUVBRCxjQ2hEQUEsU0FBQSxTQUFBQyxHQUVBLFlBWUEsU0FBQXlCLEdBQUFDLEdBQ0FBLEVBQUFDLEdBQUEsV0FBQSxTQUFBQyxHQUNB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Q0ExQixFQUFBLG9CQUFBeUIsU0FBQSxtQkFBQXFHLFFBQUEsSUFBQSxXQUNBOUgsRUFBQXdCLE1BQUFnQixhQUtBL0MsRUFBQUksS0FBQUMsTUFBQSxTQUFBMEksR0FDQSxHQUFBMUksR0FBQSxHQUFBbVMsT0FBQXpKLEVBQ0EsTUFBQTFJLElBR0FMLEdBR0FEIiwiZmlsZSI6ImRyb3BjaG9wLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIGRjID0gZGMgfHwge307XG4gIGRjLnZlcnNpb24gPSAnMC4xLjEnO1xuICBkYy5pbml0ID0gZnVuY3Rpb24ob3B0cykge1xuICAgIGlmKCFvcHRzKSB7XG4gICAgICBkYy51dGlsLmVycm9yKCdObyBvcHRpb25zIHByb3ZpZGVkIGluIGRyb3BjaG9wLmluaXQoKScpO1xuICAgIH1cbiAgICBkYy5vcHRpb25zID0gb3B0cztcblxuICAgIGlmKCEkKG9wdHMuaWQpLmxlbmd0aCkge1xuICAgICAgZGMudXRpbC5lcnJvcignRWxlbWVudCB3aXRoIG9wdGlvbnMuaWQgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgfVxuICAgIGRjLiRlbGVtID0gJChvcHRzLmlkKTtcblxuICAgIC8vIHNldHVwIGxheWVyc1xuICAgIGRjLmxheWVycy5wcmVwYXJlKCk7XG5cbiAgICAvLyBzZXR1cCBtYXBcbiAgICBkYy5tYXAuaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgc2VsZWN0aW9uXG4gICAgZGMuc2VsZWN0aW9uLmluaXQoKTtcblxuICAgIC8vIHNldHVwIGxheWVybGlzdFxuICAgIGRjLmxheWVybGlzdC5pbml0KCdsYXllcmxpc3QnKTtcblxuICAgIC8vIHNldHVwIGRyb3B6b25lXG4gICAgZGMuZHJvcHpvbmUoJCgnYm9keScpKTtcblxuICAgIC8vIHNldHVwIG9wZXJhdGlvbnNcbiAgICBkYy5vcHMuaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgZm9ybXNcbiAgICBkYy5mb3JtLmluaXQoKTtcblxuICAgIC8vIGdldCBVUkwgaW5mb3JtYXRpb24gaWYgaXQgZXhpc3RzXG4gICAgaWYobG9jYXRpb24uc2VhcmNoLmxlbmd0aCkge1xuICAgICAgZGMudXRpbC5leGVjdXRlVXJsUGFyYW1zKCk7XG4gICAgfVxuXG4gIH07XG5cbiAgZGMuYm9vbSA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdzaGFrYWxha2EnKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGRyb3B6b25lLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGFpbmVyIGVsZW1lbnQgKGxldHMgZG8gZG9jdW1lbnQuYm9keSlcbiAgICovXG4gIGRjLmRyb3B6b25lID0gZnVuY3Rpb24oJGNvbnRhaW5lcikge1xuICAgIF9ldmVudHMoJGNvbnRhaW5lcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gX2V2ZW50cygkY29udGFpbmVyKSB7XG4gICAgJGNvbnRhaW5lci5vbignZHJhZ292ZXInLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICB9KTtcblxuICAgICRjb250YWluZXIub24oJ2RyYWdsZWF2ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgIH0pO1xuXG4gICAgJGNvbnRhaW5lci5vbignZHJvcCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgICAgdmFyIGZpbGVzID0gZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgICAkKGZpbGVzKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMudXRpbC5yZWFkRmlsZShmaWxlc1tpXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmZvcm0gPSBkYy5mb3JtIHx8IHt9O1xuICBkYy5mb3JtLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignZm9ybTpnZW8nLCBkYy5mb3JtLmdlbyk7XG4gICAgJChkYykub24oJ2Zvcm06ZmlsZScsIGRjLmZvcm0uZmlsZSk7XG4gIH07XG5cbiAgZGMuZm9ybS5nZW8gPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uKSB7XG4gICAgZGMuZm9ybS5jcmVhdGUob3BlcmF0aW9uLCBkYy5vcHMuZ2VvW29wZXJhdGlvbl0sICdnZW8nKTtcbiAgfTtcblxuICBkYy5mb3JtLmZpbGUgPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uKSB7XG4gICAgZGMuZm9ybS5jcmVhdGUob3BlcmF0aW9uLCBkYy5vcHMuZmlsZVtvcGVyYXRpb25dLCAnZmlsZTonICsgb3BlcmF0aW9uKTtcbiAgfTtcblxuICBkYy5mb3JtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIGluZm8sIHRyaWdnZXIpIHtcbiAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgIHZhciAkaHRtbCA9ICQoJzxmb3JtPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtIGRyb3BjaG9wLWZvcm0tJyt0cmlnZ2VyKVxuICAgICAgLmF0dHIoJ2lkJywgJ2Ryb3BjaG9wLWZvcm0nKVxuICAgICAgLmF0dHIoJ2RhdGEnLCBuYW1lKTtcbiAgICB2YXIgJHRpdGxlID0gJCgnPGgyPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXRpdGxlJykudGV4dChuYW1lKS5hcHBlbmRUbygkaHRtbCk7XG4gICAgdmFyICRkZXNjID0gJCgnPHA+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tZGVzY3JpcHRpb24nKS50ZXh0KGluZm8uZGVzY3JpcHRpb24pLmFwcGVuZFRvKCRodG1sKTtcblxuICAgIC8vIGNyZWF0ZSBwYXJhbXNcbiAgICBpZihpbmZvLnBhcmFtZXRlcnMpIHtcbiAgICAgICQoaW5mby5wYXJhbWV0ZXJzKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcCA9IGRjLmZvcm0uY3JlYXRlUGFyYW0odGhpcyk7XG4gICAgICAgIHAuYXBwZW5kVG8oJGh0bWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIHN1Ym1pdCBidXR0b25cbiAgICB2YXIgJHN1Ym1pdCA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWJ0biBkcm9wY2hvcC1idG4tZ3JlZW4gZHJvcGNob3AtZm9ybS1zdWJtaXQnKS50ZXh0KCdFeGVjdXRlJykuYXR0cignZm9yJywgbmFtZSk7XG4gICAgdmFyICRjYW5jZWwgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdkcm9wY2hvcC1idG4gZHJvcGNob3AtYnRuLWNhbmNlbCBkcm9wY2hvcC1mb3JtLWNhbmNlbCcpLnRleHQoJ0NhbmNlbCcpLmF0dHIoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgJGNhbmNlbC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgJGh0bWwub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gZ2V0IHRoZSBwYXJhbWV0ZXJzIGZyb20gdGhlIGZvcm1cbiAgICAgIHZhciBwYXJhbWV0ZXJzID0gW107XG4gICAgICB2YXIgZGF0YSA9ICQodGhpcykuc2VyaWFsaXplQXJyYXkoKTtcbiAgICAgICQoZGF0YSkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHBhcmFtZXRlcnMucHVzaChkYXRhW2ldLnZhbHVlKTtcbiAgICAgIH0pO1xuICAgICAgJChkYykudHJpZ2dlcignb3BlcmF0aW9uOicgKyB0cmlnZ2VyLCBbbmFtZSwgcGFyYW1ldGVyc10pO1xuICAgICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICAkaHRtbC5hcHBlbmQoJHN1Ym1pdCk7XG4gICAgJGh0bWwuYXBwZW5kKCRjYW5jZWwpO1xuXG4gICAgZGMuJGVsZW0uYXBwZW5kKCRodG1sKTtcbiAgICAvLyBzdWJtaXQgYnV0dG9uIG5lZWRzIHRyaWdnZXIgb3BlcmF0aW9uOmdlbyB3aXRoIG9wIGFuZCBwYXJhbWV0ZXIgYXJyYXlcbiAgfTtcblxuICBkYy5mb3JtLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgICQoJyNkcm9wY2hvcC1mb3JtJykucmVtb3ZlKCk7XG4gIH07XG5cbiAgZGMuZm9ybS5jcmVhdGVQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgdmFyICRpbnB1dCA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyJyk7XG4gICAgdmFyICRsYWJlbCA9ICQoJzxsYWJlbD4nKS50ZXh0KHBhcmFtLm5hbWUpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlci1sYWJlbCcpO1xuICAgIHZhciAkZmllbGQgPSBkYy5mb3JtLmlucHV0c1twYXJhbS50eXBlXShwYXJhbSk7XG4gICAgJGZpZWxkLmFwcGVuZFRvKCRsYWJlbCk7XG4gICAgaWYocGFyYW0uZGVzY3JpcHRpb24ubGVuZ3RoKSB7XG4gICAgICAkKCc8cD4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXItZGVzY3JpcHRpb24nKS5odG1sKHBhcmFtLmRlc2NyaXB0aW9uKS5hcHBlbmRUbygkbGFiZWwpO1xuICAgIH1cbiAgICAkaW5wdXQuYXBwZW5kKCRsYWJlbCk7XG4gICAgcmV0dXJuICRpbnB1dDtcbiAgfTtcblxuICBkYy5mb3JtLmlucHV0cyA9IHtcbiAgICBudW1iZXI6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ251bWJlcicpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc2VsZWN0OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8c2VsZWN0PicpLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJChwLm9wdGlvbnMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgJG9wdCA9ICQoJzxvcHRpb24+JykudGV4dChwLm9wdGlvbnNbaV0pXG4gICAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5vcHRpb25zW2ldKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkaSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHRleHQ6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ3RleHQnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIGNoZWNrYm94OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICdjaGVja2JveCcpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc3dpdGNoOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpO1xuICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciAkbGJsID0gJCgnPGxhYmVsPicpXG4gICAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgICAgdmFyICRvcHQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgICAgLnZhbCgnc3dpdGNoLScgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcClcbiAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAgICRvcHQuYXBwZW5kVG8oJGxibCk7XG4gICAgICAgICRsYmwuYXBwZW5kKGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUpO1xuICAgICAgICAkbGJsLmFwcGVuZFRvKCRpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgcmVjdXJzaXZlOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpO1xuXG4gICAgICB2YXIgJGxibDEgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgIHZhciAkb3B0MSA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgIC52YWwoJ3RydWUnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkb3B0MS5hcHBlbmRUbygkbGJsMSk7XG4gICAgICAkbGJsMS5hcHBlbmQoJ0luZGl2aWR1YWwgZmVhdHVyZXMnKTtcblxuICAgICAgdmFyICRsYmwyID0gJCgnPGxhYmVsPicpXG4gICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICB2YXIgJG9wdDIgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAudmFsKCdmYWxzZScpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICRvcHQyLmFwcGVuZFRvKCRsYmwyKTtcbiAgICAgICRsYmwyLmFwcGVuZCgnRW50aXJlIGNvbGxlY3Rpb24nKTtcblxuICAgICAgJGxibDEuYXBwZW5kVG8oJGkpO1xuICAgICAgJGxibDIuYXBwZW5kVG8oJGkpO1xuXG4gICAgICByZXR1cm4gJGk7XG4gICAgfVxuICB9O1xuXG4gIC8vIGRjLmZvcm0uZ2V0VmFsdWVzID0gZnVuY3Rpb24oJGZvcm0pIHtcbiAgLy8gICB2YXIgdmFsdWVzID0gW107XG4gIC8vICAgY29uc29sZS5sb2coJGZvcm0pO1xuICAvLyAgIHJldHVybiB2YWx1ZXM7XG4gIC8vIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVybGlzdCA9IHt9O1xuICBkYy5sYXllcmxpc3QuZWxlbXMgPSB7fTtcblxuICBkYy5sYXllcmxpc3QuaW5pdCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0gPSAkKCc8b2w+JykuYWRkQ2xhc3MobmFtZSk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGRjLmxheWVybGlzdC4kZWxlbSk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAoJChldmVudC50YXJnZXQpLmhhc0NsYXNzKG5hbWUpKSB7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGxpSGVscGVyID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci1oZWxwJylcbiAgICAgIC5odG1sKCdXZWxjb21lIHRvIDxzdHJvbmc+ZHJvcGNob3A8L3N0cm9uZz4hIEhlcmUgeW91IGNhbiBkcmFnIGFuZCBkcm9wIGZpbGVzIGFuZCB0aGV5IHdpbGwgc2hvdyB1cCBpbiB0aGUgbGF5ZXIgbGlzdCBiZWxvdy48YnI+PGJyPlRvIHRoZSBsZWZ0IHlvdSBjYW4gdXBsb2FkIGFuZCBzYXZlIHlvdXIgZmlsZXMgb3IgPGEgaHJlZj1cIi8/Z2lzdD0wOTEyOWMyMGVjMDIwYjgzYmY4NVwiPmFkZCBleGFtcGxlIGRhdGE8L2E+IG9yIHRoZSA8YSBocmVmPVwiLz9naXN0PWQwNjZiNTcyZThhOGFkMmI2ZDE2XCI+VVMgU3RhdGVzPC9hPi48YnI+PGJyPlRvIHRoZSByaWdodCB5b3VcXCdsbCBub3RpY2Ugc29tZSBnZW9zcGF0aWFsIG9wZXJhdGlvbnMgdGhhdCBiZWNvbWUgYXZhaWxhYmxlIGJhc2VkIG9uIHNlbGVjdGluZyBzcGVjaWZpYyBsYXllcnMuJyApO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGlIZWxwZXIpO1xuXG4gICAgdmFyIHRvZ2dsZUxheWVycyA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItdG9nZ2xlQWxsJylcbiAgICAgIC5odG1sKCc8bGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNoZWNrZWQ+VG9nZ2xlIGFsbCBsYXllcnM8L2xhYmVsPicpO1xuICAgIHRvZ2dsZUxheWVycy5vbignY2hhbmdlJywgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZCh0b2dnbGVMYXllcnMpO1xuXG4gICAgJChkYykub24oJ2xheWVyOmFkZGVkJywgZGMubGF5ZXJsaXN0LmFkZExheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgZGMubGF5ZXJsaXN0LnJlbW92ZUxheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWVkJywgZGMubGF5ZXJsaXN0LnJlbmFtZSk7XG4gIH07XG5cbiAgZGMubGF5ZXJsaXN0LnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCwgbmV3TmFtZSkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5maW5kKCcubGF5ZXItbmFtZScpLnRleHQobmV3TmFtZSk7XG4gIH07XG5cbiAgLy8gdHJpZ2dlcmVkIGluIGRyb3BjaG9wLmpzXG4gIGRjLmxheWVybGlzdC5hZGRMYXllckxpc3RJdGVtID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGxheWVybGlzdEl0ZW0gPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLWVsZW1lbnQnKS5hdHRyKCdkYXRhLXN0YW1wJywgbGF5ZXIuc3RhbXApO1xuICAgIHZhciBsYXllckRpdiA9ICQoJzxkaXY+JylcbiAgICAgIC5hZGRDbGFzcygnbGF5ZXItbmFtZSBsYXllci1uZXcnKVxuICAgICAgLnRleHQobGF5ZXIubmFtZSlcbiAgICAgIC5kZWxheSgzMDAwKVxuICAgICAgLnF1ZXVlKGZ1bmN0aW9uKG5leHQpIHtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnbGF5ZXItbmV3Jyk7XG4gICAgICB9KTtcblxuXG4gICAgdmFyIGxheWVyVHlwZSA9ICQoJzxzcGFuPicpLmFkZENsYXNzKCdsYXllci10eXBlLWltYWdlIHNwcml0ZSBzcHJpdGUtbGF5ZXItJytsYXllclR5cGVJY29uKGxheWVyLnR5cGUpKTtcbiAgICB2YXIgY2hlY2tib3ggPSAkKCc8aW5wdXQ+JykuYWRkQ2xhc3MoJ2xheWVyLXRvZ2dsZScpLnByb3Aoeyd0eXBlJzogJ2NoZWNrYm94JywgJ2NoZWNrZWQnOiB0cnVlfSk7XG4gICAgdmFyIHJlbW92ZSA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2xheWVyLWFjdGlvbiBsYXllci1yZW1vdmUnKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCI+PC9pPicpO1xuICAgIHZhciBkdXBsaWNhdGUgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdsYXllci1hY3Rpb24gbGF5ZXItZHVwbGljYXRlJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1maWxlcy1vXCI+PC9pPicpO1xuXG4gICAgZHVwbGljYXRlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6ZHVwbGljYXRlJywgWyQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICByZW1vdmUub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW1vdmUnLCBbJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgIGRjLnV0aWwudXBkYXRlU2VhcmNoKCk7XG4gICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIGNoZWNrYm94Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xuICAgICAgICAvLyB0cmlnZ2VyIGxheWVyOnNob3dcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6c2hvdycsIFtsYXllcl0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6aGlkZScsIFtsYXllcl0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGF5ZXJEaXYub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgLy8gY2hlY2sgZm9yIGtleXMgYmVpbmcgaGVsZCBmb3Igc3BlY2lhbCBzZWxlY3Rpb25cbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAvLyBzZWxlY3QgYWxsIGxheWVyZXMgaW4gYmV0d2VlbiBwcmV2aW91cyB0YXJnZXQgYW5kIHRhcmdldFxuICAgICAgICAvLyBub3RlOiBkb24ndCB1bnNlbGVjdCBsYXllcnMgYWxyZWFkeSBzZWxlY3RlZCwganVzdCBhZGQgdG8gc2VsZWN0aW9uXG4gICAgICAgIHZhciB0b1NlbGVjdCA9IFtdO1xuICAgICAgICB2YXIgdG8gPSAkKHRoaXMpO1xuICAgICAgICB2YXIgZnJvbSA9IGRjLmxheWVybGlzdC5fbGFzdFNlbGVjdGVkO1xuICAgICAgICB2YXIgdG9Db3VudCwgZnJvbUNvdW50O1xuXG4gICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgdmFyIGNoZWNrID0gJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgdmFyIHRvU3RhbXAgPSB0by5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgdmFyIGZyb21TdGFtcCA9IGZyb20ucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIGlmIChjaGVjayA9PT0gdG9TdGFtcCkgdG9Db3VudCA9IGU7XG4gICAgICAgICAgaWYgKGNoZWNrID09PSBmcm9tU3RhbXApIGZyb21Db3VudCA9IGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0b0NvdW50ID4gZnJvbUNvdW50KSB7XG4gICAgICAgICAgLy8gbG9vcCB1cFxuICAgICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICBpZiAobCA+PSBmcm9tQ291bnQgJiYgbCA8PSB0b0NvdW50ICkge1xuICAgICAgICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIoJCh0aGlzKS5maW5kKCcubGF5ZXItbmFtZScpLCBkYy5sYXllcnMubGlzdFskKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICBpZiAobCA8IGZyb21Db3VudCAmJiBsID49IHRvQ291bnQgKSB7XG4gICAgICAgICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RMYXllcigkKHRoaXMpLmZpbmQoJy5sYXllci1uYW1lJyksIGRjLmxheWVycy5saXN0WyQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQubWV0YUtleSkge1xuICAgICAgICAvLyBhZGQvcmVtb3ZlIHNlbGVjdGVkIGxheWVyIHRvIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUoJCh0aGlzKSwgbGF5ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY2xlYXIgc2VsZWN0aW9uIGFuZCBzZWxlY3QgdGFyZ2V0XG4gICAgICAgIGRjLmxheWVybGlzdC5jbGVhclNlbGVjdGlvbigkKHRoaXMpLCBsYXllcik7XG4gICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUoJCh0aGlzKSwgbGF5ZXIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQobGF5ZXJEaXYpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGNoZWNrYm94KTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChsYXllclR5cGUpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKHJlbW92ZSk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoZHVwbGljYXRlKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0uYXBwZW5kKGxheWVybGlzdEl0ZW0pO1xuXG4gICAgZGMubGF5ZXJsaXN0LmVsZW1zW2xheWVyLnN0YW1wXSA9IGxheWVybGlzdEl0ZW07XG5cbiAgICAvLyBoaWRlIGhlbHBlciB0ZXh0XG4gICAgJCgnLmxheWVyLWhlbHAnKS5oaWRlKCk7XG4gICAgJCgnLmxheWVyLXRvZ2dsZUFsbCcpLnNob3coKTtcbiAgfTtcblxuICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIgPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgaWYgKCEkaXRlbS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9XG4gIH07XG4gIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUgPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgaWYgKCRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAkaXRlbS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnVuc2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRpdGVtLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6c2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfVxuICAgIGRjLmxheWVybGlzdC5fbGFzdFNlbGVjdGVkID0gJGl0ZW07XG4gIH07XG4gIGRjLmxheWVybGlzdC5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBsYXllclR5cGVJY29uKHR5cGUpIHtcbiAgICB2YXIgaWNvbjtcbiAgICBzd2l0Y2godHlwZSkge1xuICAgICAgY2FzZSAnRmVhdHVyZUNvbGxlY3Rpb24nOlxuICAgICAgICBpY29uID0gJ2ZlYXR1cmVjb2xsZWN0aW9uJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPFBvaW50Pic6XG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpUG9pbnQ+JzpcbiAgICAgICAgaWNvbiA9ICdwb2ludCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxMaW5lU3RyaW5nPic6XG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpTGluZVN0cmluZz4nOlxuICAgICAgICBpY29uID0gJ2xpbmUnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8UG9seWdvbj4nOlxuICAgICAgY2FzZSAnRmVhdHVyZTxNdWx0aVBvbHlnb24+JzpcbiAgICAgICAgaWNvbiA9ICdwb2x5Z29uJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj4nOlxuICAgICAgICBpY29uID0gJ2dlb20nO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGljb24gPSAnZGVmYXVsdCc7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gaWNvbjtcbiAgfVxuXG4gIGRjLmxheWVybGlzdC50b2dnbGVBbGwgPSBmdW5jdGlvbihldmVudCkge1xuICAgIC8vIHR1cm4gdGhlbSBvblxuICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0JykucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICBmb3IgKHZhciBpIGluIGRjLmxheWVycy5saXN0KSB7XG4gICAgICAgIGVsZW1Ub2dnbGUoZGMubGF5ZXJzLmxpc3RbaV0uc3RhbXAsIHRydWUpO1xuICAgICAgfVxuICAgIC8vIHR1cm4gdGhlbSBvZmZcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgbyBpbiBkYy5sYXllcnMubGlzdCkge1xuICAgICAgICBlbGVtVG9nZ2xlKGRjLmxheWVycy5saXN0W29dLnN0YW1wLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWxlbVRvZ2dsZShzdGFtcCwgYm9vbCkge1xuICAgICAgJCgnLmxheWVyLWVsZW1lbnRbZGF0YS1zdGFtcD0nK3N0YW1wKyddJylcbiAgICAgICAgLmZpbmQoJy5sYXllci10b2dnbGUnKVxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIGJvb2wpXG4gICAgICAgIC50cmlnZ2VyKCdjaGFuZ2UnKTsgLy8gc2V0cyBvZmYgYSBjaGFpbiByZWFjdGlvblxuICAgIH1cbiAgfTtcblxuICBkYy5sYXllcmxpc3QucmVtb3ZlTGF5ZXJMaXN0SXRlbSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5mYWRlT3V0KDMwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIGRjLmxheWVybGlzdC5lbGVtc1tzdGFtcF07XG5cbiAgICAgIC8vIHNob3cgaGVscGVyIHRleHQgaWYgbm8gbGF5ZXJzIGV4aXN0XG4gICAgICAvLyB0aGlzIGhhcyB0byBjaGVjayBpbnNpZGUgc2luY2UgdGhlcmUgaXMgYSAzMDAgbXMgZGVsYXkgd2l0aCB0aGUgZmFkZVxuICAgICAgaWYgKCQoJy5sYXllci1lbGVtZW50JykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICQoJy5sYXllci1oZWxwJykuc2hvdygpO1xuICAgICAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuaGlkZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVycyA9IHt9O1xuICBkYy5sYXllcnMubGlzdCA9IHt9O1xuXG4gIGRjLmxheWVycy5wcmVwYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2ZpbGU6YWRkZWQnLCBkYy5sYXllcnMuYWRkKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlJywgZGMubGF5ZXJzLnJlbW92ZSk7XG4gICAgJChkYykub24oJ2xheWVyOmR1cGxpY2F0ZScsIGRjLmxheWVycy5kdXBsaWNhdGUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWUnLCBkYy5sYXllcnMucmVuYW1lKTtcbiAgfTtcblxuLyoqXG4gKiBBZGQgYSBsYXllciB0byB0aGUgbGF5ZXJzIGxpc3QgYW5kIHRyaWdnZXIgbGF5ZXI6YWRkZWQgZm9yIHN1YnNjcmliZXJzIHRvIHBpY2sgdXAuXG4gKiBAcGFyYW0ge29iamVjdH0gZXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSBmaWxlIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGUgYmxvYiB0byBiZSBjb252ZXJ0ZWQgd2l0aCBKU09OLnBhcnNlKClcbiAqL1xuICBkYy5sYXllcnMuYWRkID0gZnVuY3Rpb24oZXZlbnQsIG5hbWUsIGJsb2IsIGx0eXBlLCB1cmwpIHtcbiAgICB2YXIgbCA9IGRjLmxheWVycy5tYWtlTGF5ZXIobmFtZSwgYmxvYik7XG4gICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0gPSBsO1xuXG4gICAgaWYgKGx0eXBlICYmIHVybCkge1xuICAgICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0ubHR5cGUgPSBsdHlwZTtcbiAgICAgIGRjLmxheWVycy5saXN0W2wuc3RhbXBdLnVybCA9IHVybDtcbiAgICB9XG5cbiAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnPHN0cm9uZz4nK2wubmFtZSsnPC9zdHJvbmc+IGhhcyBiZWVuIGFkZGVkIScsIDM1MDApO1xuXG4gICAgLy8gdHJpZ2dlciBsYXllcjphZGRlZFxuICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmFkZGVkJywgW2xdKTtcblxuICAgIC8vIFVwZGF0ZSBVUkwsIGlmIGFwcGxpY2FibGVcbiAgICBpZiAobHR5cGUgJiYgdXJsKSB7XG4gICAgICBkYy51dGlsLnVwZGF0ZVNlYXJjaCgpO1xuICAgIH1cblxuICB9O1xuXG4vKipcbiAqIFJlbW92ZSBhIGxheWVyLCB3aGljaCB0cmlnZ2VycyBsYXllcjpyZW1vdmVkIGZvciB0aGUgcmVzdCBvZiB0aGUgYXBwXG4gKiBAcGFyYW0ge3N0cmluZ30gbGF5ZXIgc3RhbXBcbiAqL1xuICBkYy5sYXllcnMucmVtb3ZlID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgLy8gdHJpZ2dlciBsYXllcjpyZW1vdmVkXG4gICAgdHJ5IHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZWQnLCBbc3RhbXBdKTtcbiAgICAgIGRjLm5vdGlmeSgnaW5mbycsICc8c3Ryb25nPicgKyBkYy5sYXllcnMubGlzdFtzdGFtcF0ubmFtZSArICc8L3N0cm9uZz4gaGFzIGJlZW4gcmVtb3ZlZC4nKTtcbiAgICAgIGRlbGV0ZSBkYy5sYXllcnMubGlzdFtzdGFtcF07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gcmVtb3ZpbmcgdGhlIGxheWVyLicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICB9O1xuXG4gIGRjLmxheWVycy5kdXBsaWNhdGUgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICB2YXIgbHlyID0gZGMubGF5ZXJzLmxpc3Rbc3RhbXBdO1xuICAgIC8vIG5lZWQgdG8gY3JlYXRlIG5ldyBsYXllciBzbyB3ZSBjYW4gZ2V0IGEgdW5pcWUgTC5zdGFtcCgpXG4gICAgZGMubGF5ZXJzLmFkZCh7fSwgJ2NvcHlfJytseXIubmFtZSwgbHlyLnJhdyk7XG4gIH07XG5cbiAgZGMubGF5ZXJzLnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllciwgbmV3TmFtZSkge1xuICAgIC8vIHJlbmFtZSBpbiBsYXllciBvYmplY3RcbiAgICBkYy5sYXllcnMubGlzdFtsYXllci5zdGFtcF0ubmFtZSA9IG5ld05hbWU7XG5cbiAgICAvLyByZW5hbWUgaW4gbGF5ZXJsaXN0XG4gICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVuYW1lZCcsIFtsYXllci5zdGFtcCwgbmV3TmFtZV0pO1xuICB9O1xuXG4gIGRjLmxheWVycy5tYWtlTGF5ZXIgPSBmdW5jdGlvbihuYW1lLCBqc29uKSB7XG4gICAgdmFyIGdlb2pzb24gPSBqc29uO1xuICAgIC8vIGlmIChqc29uLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicgJiYganNvbi5mZWF0dXJlcy5sZW5ndGggPT09IDEpIHtcbiAgICAvLyAgIGdlb2pzb24gPSBkYy51dGlsLnVuY29sbGVjdChqc29uKTtcbiAgICAvLyB9XG5cbiAgICB2YXIgZmwgPSBMLm1hcGJveC5mZWF0dXJlTGF5ZXIoZ2VvanNvbik7XG4gICAgdmFyIGxheWVyID0ge1xuICAgICAgbmFtZTogZGMudXRpbC5yZW1vdmVGaWxlRXh0ZW5zaW9uKG5hbWUpLFxuICAgICAgc3RhbXA6IEwuc3RhbXAoZmwpLFxuICAgICAgcmF3OiBnZW9qc29uLFxuICAgICAgdHlwZTogZ2V0VHlwZShnZW9qc29uKSxcbiAgICAgIGZlYXR1cmVsYXllcjogZmwsXG4gICAgICBkYXRlQWRkZWQ6IG5ldyBEYXRlKClcbiAgICB9O1xuICAgIHJldHVybiBsYXllcjtcbiAgfTtcblxuICBmdW5jdGlvbiBnZXRUeXBlKGdqKSB7XG4gICAgaWYgKGdqLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgIHJldHVybiAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2oudHlwZSArICc8JyArIGdqLmdlb21ldHJ5LnR5cGUgKyAnPic7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubWFwID0ge307XG5cbiAgZGMubWFwLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBkYy5tYXAuJGVsZW0gPSAkKCc8ZGl2PicpLnByb3AoJ2lkJywgJ2Ryb3BjaG9wLW1hcCcpLmFkZENsYXNzKCdtYXAnKTtcbiAgICBkYy4kZWxlbS5hcHBlbmQoZGMubWFwLiRlbGVtKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgZGMubWFwLnJlbW92ZUxheWVyKTtcblxuICAgIF9tYWtlTWFwKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gX21ha2VNYXAoKSB7XG4gICAgZGMubWFwLnRva2VuID0gTC5tYXBib3guYWNjZXNzVG9rZW4gPSAncGsuZXlKMUlqb2ljM1p0WVhSMGFHVjNjeUlzSW1FaU9pSlZNVWxVUjB4ckluMC5Od2VTX0F0dGpzd3RONXdSdVdDU05BJztcbiAgICBkYy5tYXAubSA9IEwubWFwYm94Lm1hcCgnZHJvcGNob3AtbWFwJywgbnVsbCwge1xuICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLFxuICAgICAgd29ybGRDb3B5SnVtcDogdHJ1ZVxuICAgIH0pLnNldFZpZXcoWzAsMF0sIDMpO1xuXG4gICAgLy8gc2V0cyB0aGUgbG9jYXRpb24gb2YgdGhlIHpvb20gYnV0dG9ucyB0byB0aGUgdG9wIHJpZ2h0XG4gICAgTC5jb250cm9sLnpvb20oe1xuICAgICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIEwubWFwYm94Lmdlb2NvZGVyQ29udHJvbCgnbWFwYm94LnBsYWNlcycsIHtcbiAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICB2YXIgYmFzZUxheWVycyA9IHtcbiAgICAgIFwiTWFwYm94IFN0cmVldHNcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guc3RyZWV0cycpLFxuICAgICAgXCJNYXBib3ggT3V0ZG9vcnNcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3gub3V0ZG9vcnMnKSxcbiAgICAgIFwiTWFwYm94IExpZ2h0XCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LmxpZ2h0JyksXG4gICAgICBcIk1hcGJveCBEYXJrXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LmRhcmsnKSxcbiAgICAgIFwiTWFwYm94IFNhdGVsbGl0ZVwiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5zYXRlbGxpdGUnKVxuICAgIH07XG5cbiAgICBiYXNlTGF5ZXJzWydNYXBib3ggU3RyZWV0cyddLmFkZFRvKGRjLm1hcC5tKTtcbiAgICAvLyBzZXRzIGxvY2F0aW9uIG9mIGJhc2UgbGF5ZXIgY29udHJvbCB0byB0aGUgYm90dG9tIHJpZ2h0XG4gICAgTC5jb250cm9sLmxheWVycyhiYXNlTGF5ZXJzLCB7fSwge1xuICAgICAgcG9zaXRpb246ICdib3R0b21yaWdodCcsXG4gICAgICBjb2xsYXBzZWQ6IGZhbHNlXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgZGMubWFwLmxheWVyZ3JvdXAgPSBMLm1hcGJveC5mZWF0dXJlTGF5ZXIoKTtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6YWRkZWQnLCBkYy5tYXAuYWRkTGF5ZXIpO1xuICAgICQoZGMpLm9uKCdsYXllcjpoaWRlJywgZGMubWFwLmhpZGVMYXllcik7XG4gICAgJChkYykub24oJ2xheWVyOnNob3cnLCBkYy5tYXAuc2hvd0xheWVyKTtcblxuICAgIC8vIC8vIG15IGxvY2F0aW9uIGFzIGxheWVyXG4gICAgLy8gdmFyIGdlb2xvY2F0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZW9sb2NhdGUnKTtcblxuICAgICQoZGMubWFwLm0pLm9uKCdsb2NhdGlvbmZvdW5kJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGRhdGEgPSBlLm9yaWdpbmFsRXZlbnQ7XG4gICAgICBkYy5tYXAubS5maXRCb3VuZHMoZGF0YS5ib3VuZHMpO1xuXG4gICAgICB2YXIgbHlyID0ge1xuICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAgICAgICBjb29yZGluYXRlczogW2RhdGEubGF0bG5nLmxuZywgZGF0YS5sYXRsbmcubGF0XVxuICAgICAgICB9LFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgJ3RpdGxlJzogJ1RoZXJlIFlvdSBBcmUnLFxuICAgICAgICAgICdtYXJrZXItY29sb3InOiAnIzIwNzE3OCcsXG4gICAgICAgICAgJ21hcmtlci1zeW1ib2wnOiAnaGVhcnQnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbJ3lvdXIgbG9jYXRpb24nLCBseXJdKTtcbiAgICB9KTtcblxuICAgICQoZGMubWFwLm0pLm9uKCdsb2NhdGlvbmVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gZmluZGluZyB5b3VyIGxvY2F0aW9uLicsIDMwMDApO1xuICAgIH0pO1xuXG4gICAgLy8gLy8gT25jZSB3ZSd2ZSBnb3QgYSBwb3NpdGlvbiwgem9vbSBhbmQgY2VudGVyIHRoZSBtYXBcbiAgICAvLyAvLyBvbiBpdCwgYW5kIGFkZCBhIHNpbmdsZSBtYXJrZXIuXG4gICAgLy8gdGhpcy5fbWFwLm9uKCdsb2NhdGlvbmZvdW5kJywgZnVuY3Rpb24oZSkge1xuICAgIC8vICAgdGhpcy5fbWFwLmZpdEJvdW5kcyhlLmJvdW5kcyk7XG5cblxuICAgIC8vICAgbXlMYXllci5zZXRHZW9KU09OKHtcbiAgICAvLyAgICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgIC8vICAgICBnZW9tZXRyeToge1xuICAgIC8vICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgLy8gICAgICAgY29vcmRpbmF0ZXM6IFtlLmxhdGxuZy5sbmcsIGUubGF0bG5nLmxhdF1cbiAgICAvLyAgICAgfSxcbiAgICAvLyAgICAgcHJvcGVydGllczoge1xuICAgIC8vICAgICAgICd0aXRsZSc6ICdUaGVyZSBZb3UgQXJlJyxcbiAgICAvLyAgICAgICAnbWFya2VyLWNvbG9yJzogJyMyMDcxNzgnLFxuICAgIC8vICAgICAgICdtYXJrZXItc3ltYm9sJzogJ2hlYXJ0J1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9KTtcblxuICAgIC8vICAgLy8gQW5kIGhpZGUgdGhlIGdlb2xvY2F0aW9uIGJ1dHRvblxuICAgIC8vICAgLy9nZW9sb2NhdGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChnZW9sb2NhdGUpO1xuICAgIC8vIH0uYmluZCh0aGlzKSk7XG5cbiAgICAvLyAvLyBJZiB0aGUgdXNlciBjaG9vc2VzIG5vdCB0byBhbGxvdyB0aGVpciBsb2NhdGlvblxuICAgIC8vIC8vIHRvIGJlIHNoYXJlZCwgZGlzcGxheSBhbiBlcnJvciBtZXNzYWdlLlxuICAgIC8vIHRoaXMuX21hcC5vbignbG9jYXRpb25lcnJvcicsIGZ1bmN0aW9uKCkge1xuICAgIC8vICAgZ2VvbG9jYXRlLmlubmVySFRNTCA9ICdQb3NpdGlvbiBjb3VsZCBub3QgYmUgZm91bmQnO1xuICAgIC8vIH0pO1xuXG5cbiAgfVxuXG4gIGRjLm1hcC5jb3VudCA9IDA7XG5cbiAgZGMubWFwLmFkZExheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGZsID0gbGF5ZXIuZmVhdHVyZWxheWVyO1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZExheWVyKGZsKTtcblxuICAgIC8vIGNyZWF0ZSBwb3B1cCB0YWJsZSBmb3IgZWFjaCBmZWF0dXJlXG4gICAgZmwuZWFjaExheWVyKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICB2YXIgY29udGVudCA9ICc8dGFibGUgY2xhc3M9XCJkcm9wY2hvcC10YWJsZVwiPjx0cj48dGg+UHJvcGVydHk8L3RoPjx0aD5EYXRhPC90aD48L3RyPic7XG5cbiAgICAgIGlmIChsYXllci5mZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBsYXllci5mZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICBjb250ZW50ICs9ICc8dHI+PHRkPjxzdHJvbmc+JyArIHByb3AgKyAnPC9zdHJvbmc+PC90ZD48dGQ+JyArIGxheWVyLmZlYXR1cmUucHJvcGVydGllc1twcm9wXSArICc8L3RkPjwvdHI+JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudCArPSAnPHA+VGhlcmUgYXJlIG5vIHByb3BlcnRpZXMgc2V0IGZvciB0aGlzIGZlYXR1cmUuPC9wPic7XG4gICAgICB9XG4gICAgICBjb250ZW50ICs9ICc8L3RhYmxlPic7XG5cbiAgICAgIGxheWVyLmJpbmRQb3B1cChMLnBvcHVwKHtcbiAgICAgICAgbWF4V2lkdGg6IDQ1MCxcbiAgICAgICAgbWF4SGVpZ2h0OiAyMDAsXG4gICAgICAgIGF1dG9QYW5QYWRkaW5nOiBbNDUsIDQ1XSxcbiAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGNob3AtcG9wdXAnXG4gICAgICB9LCBsYXllcikuc2V0Q29udGVudChjb250ZW50KSk7XG4gICAgfSk7XG5cbiAgfTtcblxuICBkYy5tYXAuaGlkZUxheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAucmVtb3ZlTGF5ZXIobGF5ZXIuZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICBkYy5tYXAuc2hvd0xheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkTGF5ZXIobGF5ZXIuZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICBkYy5tYXAucmVtb3ZlTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5yZW1vdmVMYXllcihkYy5sYXllcnMubGlzdFtzdGFtcF0uZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm5vdGlmeSA9IGZ1bmN0aW9uKHR5cGUsIHRleHQsIHRpbWUpIHtcbiAgICB2YXIgbm90ZSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ25vdGlmaWNhdGlvbicpXG4gICAgICAuYWRkQ2xhc3ModHlwZSlcbiAgICAgIC5odG1sKHRleHQpO1xuXG4gICAgLy8gYHRpbWVgIGNhbiBlcXVhbCAnY2xvc2UnIGluIG9yZGVyIHRvIGNyZWF0ZSBhIGNsb3NlIGJ1dHRvblxuICAgIGlmICh0aW1lID09PSAnY2xvc2UnKSB7XG5cbiAgICAgIHZhciAkY2xvc2UgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdub3RpZmljYXRpb24tY2xvc2UnKVxuICAgICAgICAucHJvcCgndHlwZScsICdidXR0b24nKVxuICAgICAgICAuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiPjwvaT4nKTtcblxuICAgICAgJGNsb3NlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlKCk7XG4gICAgICB9KTtcblxuICAgICAgJChub3RlKS5hcHBlbmQoJGNsb3NlKTtcbiAgICAgICQoZGMuJGVsZW0pLmFwcGVuZChub3RlKTtcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgICQoZGMuJGVsZW0pLmFwcGVuZChub3RlKTtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgbm90ZS5yZW1vdmUoKTtcbiAgICAgIH0sIHRpbWUgfHwgMzAwMCk7XG5cbiAgICB9XG5cbiAgICBcblxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGJ1aWxkIG9wcy5nZW8gY29udGFpbmVyXG4gICAgdmFyIGdlb0NvbnRhaW5lciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ29wZXJhdGlvbnMtZ2VvJyk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGdlb0NvbnRhaW5lcik7XG5cbiAgICAvLyBjcmVhdGUgZ2VvIGJ1dHRvbnMgJiBmb3Jtc1xuICAgIGZvciAodmFyIGdlb09wIGluIGRjLm9wcy5nZW8pIHtcbiAgICAgIHZhciBnZW9CdG4gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdvcGVyYXRpb24gb3BlcmF0aW9uLWdlbyBvcGVyYXRpb24taW5hY3RpdmUnKVxuICAgICAgICAuaHRtbCgnPGg0PicgKyBnZW9PcCArICc8L2g0PjxwPicgKyBkYy5vcHMuZ2VvW2dlb09wXS5kZXNjcmlwdGlvbiArICc8L3A+JylcbiAgICAgICAgLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJywgZ2VvT3ApO1xuICAgICAgZ2VvQnRuLm9uKCdjbGljaycsIF9nZW9CdG5DbGljayk7XG5cbiAgICAgIGdlb0NvbnRhaW5lci5hcHBlbmQoZ2VvQnRuKTtcbiAgICB9XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6c2VsZWN0ZWQnLCBkYy5vcHMuZ2VvQ2hlY2spO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMub3BzLmdlb0NoZWNrKTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmdlbycsIGRjLm9wcy5nZW9FeGVjdXRlKTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC1naXN0JywgZGMub3BzLmZpbGVbJ2xvYWQtZ2lzdCddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtdXJsJywgZGMub3BzLmZpbGVbJ2xvYWQtdXJsJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC1vdmVycGFzcycsIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6cmVuYW1lJywgZGMub3BzLmZpbGUucmVuYW1lLmNhbGxiYWNrKTtcblxuICAgIGRjLm9wcy5zZXR1cCA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2ltcG9ydCcsXG4gICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+JyxcbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICd1cGxvYWQnLFxuICAgICAgICAgICdsb2FkLXVybCcsXG4gICAgICAgICAgJ2xvYWQtZ2lzdCcsXG4gICAgICAgICAgJ2xvYWQtb3ZlcnBhc3MnLFxuICAgICAgICAgICdsb2NhdGlvbidcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1NhdmUnLFxuICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1mbG9wcHktb1wiPjwvaT4nLFxuICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgJ3NhdmUtZ2VvanNvbicsXG4gICAgICAgICAgJ3NhdmUtc2hhcGVmaWxlJ1xuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnR2VvIEFjdGlvbnMnLFxuICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS13cmVuY2hcIj48L2k+JyxcbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICdleHRlbnQnLFxuICAgICAgICAgICdleHBhbmQnLFxuICAgICAgICAgICdjb21iaW5lJyxcbiAgICAgICAgICAncmVuYW1lJyxcbiAgICAgICAgICAncmVtb3ZlJyxcbiAgICAgICAgXVxuICAgICAgfSwgICAgICBcbiAgICAgICdpbmZvJ1xuICAgIF07XG5cbiAgICAvLyBzZXR1cCBvcHMgZmlsZVxuICAgIHZhciBsZWZ0TWVudSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLW1lbnUtbGVmdCcpO1xuICAgIHZhciBzZXR1cCA9IGRjLm9wcy5zZXR1cDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2V0dXAubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBhY3Rpb24gPSBzZXR1cFtpXTtcbiAgICAgIGlmICh0eXBlb2Ygc2V0dXBbaV0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmKGRjLm9wcy5maWxlW2FjdGlvbl0udHlwZSA9PT0gJ2JyZWFrJykge1xuICAgICAgICAgIHZhciAkYnJlYWtTcGFjZSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uLWJyZWFrJyk7XG4gICAgICAgICAgbGVmdE1lbnUuYXBwZW5kKCRicmVha1NwYWNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZWZ0TWVudS5hcHBlbmQoYnVpbGRNZW51QnV0dG9uKGFjdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGJ1aWxkIGEgY29sbGFwc2VhYmxlIG1lbnUgXCJidXR0b25cIlxuICAgICAgICB2YXIgY29sbGFwc2VCdG4gPSAkKCc8ZGl2PicpXG4gICAgICAgICAgLmFkZENsYXNzKCdtZW51LWFjdGlvbiBtZW51LWNvbGxhcHNlJylcbiAgICAgICAgICAuaHRtbChzZXR1cFtpXS5pY29uKTtcbiAgICAgICAgaWYgKHNldHVwW2ldLm5hbWUgPT09ICdpbXBvcnQnKSBjb2xsYXBzZUJ0bi5hZGRDbGFzcygnbWVudS1pbXBvcnQnKTtcblxuICAgICAgICB2YXIgY29sbGFwc2VJbm5lciA9ICQoJzxkaXY+JylcbiAgICAgICAgICAuYWRkQ2xhc3MoJ21lbnUtY29sbGFwc2UtaW5uZXInKTtcblxuICAgICAgICAvLyBsb29wIHRocm91Z2ggZWFjaCBhY3Rpb24gYW5kIGJ1aWxkIGEgYnV0dG9uIGZvciBpdCwganVzdCBsaWtlIGFib3ZlLFxuICAgICAgICAvLyBidXQgYXBwZW5kIGl0IHRvIHRoZSBtZW51LWNvbGxhcHNlLWlubmVyIGVsZW1lbnRcbiAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBzZXR1cFtpXS5hY3Rpb25zLmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgdmFyIGFjdG4gPSBkYy5vcHMuc2V0dXBbaV0uYWN0aW9uc1thXTtcbiAgICAgICAgICBjb2xsYXBzZUlubmVyLmFwcGVuZChidWlsZE1lbnVCdXR0b24oYWN0bikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbGxhcHNlQnRuLmFwcGVuZChjb2xsYXBzZUlubmVyKTtcblxuICAgICAgICAvLyBhcHBlbmQgdGhlIGVudGlyZSBjb2xsYXBzZUJ0biB0byB0aGUgbGVmdE1lbnVcbiAgICAgICAgbGVmdE1lbnUuYXBwZW5kKGNvbGxhcHNlQnRuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZGMuJGVsZW0uYXBwZW5kKGxlZnRNZW51KTtcblxuICAgIGZ1bmN0aW9uIGJ1aWxkTWVudUJ1dHRvbihhY3Rpb24pIHtcbiAgICAgIHZhciBidXR0b24gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdtZW51LWFjdGlvbicpXG4gICAgICAgIC5odG1sKGRjLm9wcy5maWxlW2FjdGlvbl0uaWNvbiB8fCAnIScpXG4gICAgICAgIC5hdHRyKCdkYXRhLW9wZXJhdGlvbicsIGFjdGlvbilcbiAgICAgICAgLmF0dHIoJ2RhdGEtdG9vbHRpcCcsIGRjLm9wcy5maWxlW2FjdGlvbl0uZGVzY3JpcHRpb24pO1xuICAgICAgICBpZiAoZGMub3BzLmZpbGVbYWN0aW9uXS50eXBlID09PSAnaW5mbycpIGJ1dHRvbi5hZGRDbGFzcygnZHJvcGNob3AtaW5mbycpO1xuICAgICAgYnV0dG9uLm9uKCdjbGljaycsIF9maWxlQnRuQ2xpY2spO1xuICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG4gIH07XG5cbiAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuXG4gIC8qIGlnbm9yaW5nIHRoZXNlIGZ1bmN0aW9ucyBpbiBqc2hpbnQgYmVjYXVzZSB3ZSBhcmUgZ2V0dGluZ1xuICBhbiB1bmVjZXNzYXJ5IHN0cmljdCB2aW9sYXRpb24gd2FybmluZywgYnV0IG91ciB1c2FnZSBvZiBgdGhpc2BcbiAgaXMgcHJvcGVyIGhlcmUuICovXG4gIGZ1bmN0aW9uIF9nZW9CdG5DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIG9wZXJhdGlvbiA9ICQodGhpcykuYXR0cignZGF0YS1vcGVyYXRpb24nKTtcbiAgICAvLyBpZiBvcGVyYXRpb24gcmVxdWlyZXMgbm8gcGFyYW1ldGVycywgZG9uJ3QgcmVuZGVyIGEgZm9ybVxuICAgIGlmICghZGMub3BzLmdlb1tvcGVyYXRpb25dLnBhcmFtZXRlcnMpIHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ29wZXJhdGlvbjpnZW8nLCBbb3BlcmF0aW9uLCBkYy5zZWxlY3Rpb24ubGlzdF0pO1xuICAgIC8vIG90aGVyd2lzZSByZW5kZXIgdGhlIGZvcm1cbiAgICB9IGVsc2Uge1xuICAgICAgJChkYykudHJpZ2dlcignZm9ybTpnZW8nLCBbb3BlcmF0aW9uXSk7XG4gICAgfVxuICB9XG5cblxuICBmdW5jdGlvbiBfZmlsZUJ0bkNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgdHJ5IHtcbiAgICAgIGRjLm9wcy5maWxlW29wZXJhdGlvbl0uZXhlY3V0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGlzIG9wZXJhdGlvbiBkb2VzblxcJ3QgZXhpc3QhJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG4gIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSB0dXJmIGZ1bmN0aW9uIGJhc2VkIG9uIGJ1dHRvbiBvcGVyYXRpb24gY2xpY2suXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcmlnaW5hbCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRpb24gdG8gYmUgZXhlY3V0ZWQgdmlhIHR1cmZcbiAgICogQHBhcmFtIHthcnJheX0gc2VyaWVzIG9mIHBhcmFtZXRlcnMgdG8gYmUgYXBwbGllZCB0byB0dXJmIG9wZXJhdGlvblxuICAgKi9cbiAgZGMub3BzLmdlb0V4ZWN1dGUgPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uLCBwYXJhbWV0ZXJzKSB7XG4gICAgdmFyIHByZXAgPSBkYy5vcHMucHJlcGFyZVR1cmZQYXJhbXMob3BlcmF0aW9uLCBwYXJhbWV0ZXJzKTtcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZGMub3BzLmdlb1tvcGVyYXRpb25dLmV4ZWN1dGUocHJlcC5vcHRpb25zKTtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgZGMubm90aWZ5KCdUaGF0IG9wZXJhdGlvbiBpc25cXCd0IHBvc3NpYmxlLiBUcnkgY2hhbmdpbmcgdGhlIG9yZGVyIG9mIHlvdXIgc2VsZWN0aW9uLicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbcHJlcC5uYW1lLCByZXN1bHRdKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJlcGFyZSBwYXJhbWV0ZXJzIGZvciBleGVjdXRpbmcgd2l0aGluIGEgdHVyZiBmdW5jdGlvbiB1c2luZyAuYXBwbHkoKSAtIHJldHVybnMgYW4gYXJyYXlcbiAgICogQHBhcmFtIHthcnJheX0gb3B0aW9ucyBmcm9tIHRoZSB1c2VyIHBhc3NlZCBmcm9tIHRoZSBvcmlnaW5hbCBldmVudCB0cmlnZ2VyXG4gICAqL1xuICBkYy5vcHMucHJlcGFyZVR1cmZQYXJhbXMgPSBmdW5jdGlvbihvcGVyYXRpb24sIHBhcmFtcykge1xuICAgIHZhciBkYXRhID0ge307XG4gICAgZGF0YS5vcHRpb25zID0gW107XG5cbiAgICB2YXIgZ2VvbXMgPSBbXTtcbiAgICB2YXIgbmFtZUFycmF5ID0gW107XG4gICAgLy8gZ2V0IGdlb21ldHJ5IGFycmF5IGZyb20gc2VsZWN0aW9uXG4gICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBpZiAoJC5pbkFycmF5KCdzd2l0Y2gtJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wLCBwYXJhbXMpID09PSAtMSkge1xuICAgICAgICBnZW9tcy5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZW9tcy51bnNoaWZ0KGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICB9XG4gICAgICBuYW1lQXJyYXkucHVzaChkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lKTtcbiAgICB9KTtcblxuICAgIC8vIG1lcmdlIHBhcmFtcyB3aXRoIG9wdGlvbnMgYXJyYXlcbiAgICBkYXRhLm9wdGlvbnMgPSAkLm1lcmdlKGdlb21zLCBwYXJhbXMpO1xuXG4gICAgLy8gY3JlYXRlIG5hbWUgYXJyYXlcbiAgICBkYXRhLm5hbWUgPSBkYy51dGlsLmNvbmNhdChuYW1lQXJyYXksICdfJywgb3BlcmF0aW9uKTtcbiAgICBcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICBkYy5vcHMuZ2VvQ2hlY2sgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcblxuICAgIC8vIGNoZWNrIHNlbGVjdGlvbiBjb3VudCB2cyBvcGVyYXRpb24gbWluL21heFxuICAgIGZvciAodmFyIG8gaW4gZGMub3BzLmdlbykge1xuICAgICAgdmFyIG9wID0gZGMub3BzLmdlb1tvXTtcbiAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPiBvcC5tYXhGZWF0dXJlcyB8fCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPCBvcC5taW5GZWF0dXJlcykge1xuICAgICAgICB0dXJuSXRPZmYobyk7XG4gICAgICAgIC8vIGRvbid0IGdvIGFueSBmdXJ0aGVyXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIC8vIGNoZWNrIG9wZXJhdGlvbiBhZ2FpbnN0IGVhY2ggc2VsZWN0aW9uIGRhdGEgdHlwZVxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aDsgeCsrKSB7XG4gICAgICAgICAgdmFyIHNlbCA9IGRjLnNlbGVjdGlvbi5saXN0W3hdO1xuXG4gICAgICAgICAgLy8gaWYgdGhlIHNlbGVjdGlvbiB0eXBlIGlzIGluIHRoZSBhcnJheSwgbWFyayBpdCBhcyBhY3RpdmUhXG4gICAgICAgICAgaWYgKCQuaW5BcnJheShzZWwudHlwZSwgb3AucmVxdWlyZW1lbnRzLnR5cGVzKSA+IC0xIHx8IG9wLnJlcXVpcmVtZW50cy5nZW5lcmFsRmVhdHVyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdHVybkl0T24obyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHR1cm5JdE9mZihvKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHR1cm5JdE9mZihvcCkge1xuICAgICAgdmFyIGJ0biA9ICQoJ1tkYXRhLW9wZXJhdGlvbj0nKyBvcCArJ10nKTtcbiAgICAgIGJ0bi5hZGRDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICBidG4ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0dXJuSXRPbihvcCkge1xuICAgICAgdmFyIGJ0biA9ICQoJ1tkYXRhLW9wZXJhdGlvbj0nKyBvcCArJ10nKTtcbiAgICAgIGJ0bi5yZW1vdmVDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICBidG4ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfVxuICAgIFxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5vcHMgPSBkYy5vcHMgfHwge307XG5cbiAgZGMub3BzLmZpbGUgPSB7XG4gICAgdXBsb2FkOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ1VwbG9hZCBmcm9tIHlvdXIgY29tcHV0ZXIgKC5nZW9qc29uKScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS11cGxvYWRcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBpbnNwaXJlZCBmcm9tIGdlb2pzb24uaW9cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9nZW9qc29uLmlvL2Jsb2IvZ2gtcGFnZXMvc3JjL3VpL2ZpbGVfYmFyLmpzI0wzOTBcbiAgICAgICAgdmFyICRibGluZElucHV0ID0gJCgnPGlucHV0PicpXG4gICAgICAgICAgLmF0dHIoJ3R5cGUnLCAnZmlsZScpXG4gICAgICAgICAgLmF0dHIoJ211bHRpcGxlJywgJ3RydWUnKVxuICAgICAgICAgIC5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJylcbiAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpXG4gICAgICAgICAgLmNzcygnaGVpZ2h0JywgJzAnKVxuICAgICAgICAgIC5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLmZpbGVzO1xuICAgICAgICAgICAgJChmaWxlcykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgIGRjLnV0aWwucmVhZEZpbGUoZmlsZXNbaV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkYmxpbmRJbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkYmxpbmRJbnB1dCk7XG4gICAgICAgICRibGluZElucHV0LmNsaWNrKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLXVybCc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0IGZpbGUgZnJvbSBhIFVSTCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saW5rXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndXJsJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1VSTCcsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdodHRwOi8vJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLXVybCddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciB1cmwgPSBwYXJhbWV0ZXJzWzBdO1xuICAgICAgICBkYy51dGlsLnhocih1cmwsIGRjLm9wcy5maWxlW25hbWVdLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgLy8gZ2V0IGZpbGVuYW1lIGJhc2VkIG9uIHRoZSBlbmQgb2YgdGhlIHVybCAtIG5vdCBzdXJlIGlmIHRoaXMgaXMgc3VzdGFpbmFibGVcbiAgICAgICAgICB2YXIgbmFtZSA9IHhoci5yZXNwb25zZVVSTC5zdWJzdHJpbmcoeGhyLnJlc3BvbnNlVVJMLmxhc3RJbmRleE9mKCcvJykrMSk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtuYW1lLCBkYXRhLCAndXJsJywgeGhyLnJlc3BvbnNlVVJMXSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCByZXRyaWV2ZSBHaXN0LiBQbGVhc2UgY2hlY2sgeW91ciBVUkwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnbG9hZC1naXN0Jzoge1xuICAgICAgZGVzY3JpcHRpb246ICdJbXBvcnQgZmlsZXMgZnJvbSBHaXN0JyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWdpdGh1YlwiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2dpc3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonR2lzdCBJRCBvciBVUkwnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vJ1xuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtZ2lzdCddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBnaXN0ID0gcGFyYW1ldGVyc1swXS5zcGxpdCgnLycpW3BhcmFtZXRlcnNbMF0uc3BsaXQoJy8nKS5sZW5ndGgtMV07XG4gICAgICAgIHZhciB1cmwgPSAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9naXN0cy8nICsgZ2lzdDtcbiAgICAgICAgZGMudXRpbC54aHIodXJsLCBkYy5vcHMuZmlsZVtuYW1lXS5jYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIGZvciAodmFyIGYgaW4gZGF0YS5maWxlcykge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBkYXRhLmZpbGVzW2ZdLmZpbGVuYW1lO1xuICAgICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtuYW1lLCBKU09OLnBhcnNlKGRhdGEuZmlsZXNbZl0uY29udGVudCksICdnaXN0JywgeGhyLnJlc3BvbnNlVVJMLnNwbGl0KCcvJylbeGhyLnJlc3BvbnNlVVJMLnNwbGl0KCcvJykubGVuZ3RoIC0gMV1dKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnU3VjY2VzZnVsbHkgcmV0cmlldmVkIGdpc3QnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHJldHJpZXZlIEdpc3QuIFBsZWFzZSBjaGVjayB5b3VyIFVSTCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLW92ZXJwYXNzJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRlcm1pbmFsXCI+PC9pPicsXG4gICAgICBfdGVtcDoge30sXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncXVlcnknLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonTGVhcm4gbW9yZSBhYm91dCA8YSBocmVmPVwiaHR0cDovL3dpa2kub3BlbnN0cmVldG1hcC5vcmcvd2lraS9PdmVycGFzc19BUEkvTGFuZ3VhZ2VfR3VpZGVcIiB0YXJnZXQ9XCJfYmxhbmtcIj50aGUgcXVlcnkgbGFuZ3VhZ2U8L2E+LicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdhbWVuaXR5PWJhcidcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdsYXllciBuYW1lJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J05hbWUgb2YgdGhlIGxheWVyIGFkZGVkIGlmIHJlc3VsdHMgYXJlIGZvdW5kLicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdvdmVycGFzc19sYXllcl9uYW1lJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1vdmVycGFzcyddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIC8vIHNldCBsYXllciBuYW1lIHRvIF90ZW1wIGZvciBsYXRlciB1c2FnZVxuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLl90ZW1wLmxheWVyTmFtZSA9IHBhcmFtZXRlcnNbMV07IC8vIHRoaXMgaXMgdWdseVxuXG4gICAgICAgIC8vIGJ1aWxkIHRoZSBxdWVyeSB3aXRoIGJvdW5kaW5nIGJveFxuICAgICAgICB2YXIgYmJveCA9IGRjLnV0aWwuZ2V0QkJveCgpO1xuICAgICAgICBkYy51dGlsLnhocignaHR0cDovL292ZXJwYXNzLWFwaS5kZS9hcGkvaW50ZXJwcmV0ZXI/W291dDpqc29uXTtub2RlWycrcGFyYW1ldGVyc1swXSsnXSgnK2Jib3grJyk7b3V0OycsIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB2YXIgZ2VvanNvbiA9IG9zbXRvZ2VvanNvbihkYXRhLCB7XG4gICAgICAgICAgICBmbGF0UHJvcGVydGllczogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghZGF0YS5lbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBlbGVtZW50cyBmb3VuZCBpbiB5b3VyIHF1ZXJ5LicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2RjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uX3RlbXAubGF5ZXJOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnRm91bmQgPHN0cm9uZz4nICsgZGF0YS5lbGVtZW50cy5sZW5ndGggKyAnIGVsZW1lbnRzPC9zdHJvbmc+IGZyb20gdGhlIE92ZXJwYXNzIEFQSScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCBxdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbG9jYXRpb246IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWRkIHlvdXIgbG9jYXRpb24gYXMgYSBsYXllcicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jcm9zc2hhaXJzXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0dlb2xvY2F0aW9uIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBicm93c2VyLicsIDQwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm1hcC5tLmxvY2F0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdzYXZlLWdlb2pzb24nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBHZW9KU09OJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGUtY29kZS1vXCI+PC9pPicsXG4gICAgICBjcmVhdGVzTGF5ZXI6IGZhbHNlLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICAgICAgdmFyIHRpdGxlID0gJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJy5nZW9qc29uJztcbiAgICAgICAgICBzYXZlQXMobmV3IEJsb2IoW2NvbnRlbnRdLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04J1xuICAgICAgICAgIH0pLCB0aXRsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ3NhdmUtc2hhcGVmaWxlJzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhdmUgYXMgU2hhcGVmaWxlJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGVcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgIGZvbGRlcjogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlczoge1xuICAgICAgICAgICAgICAgIHBvaW50OiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX3BvaW50JyxcbiAgICAgICAgICAgICAgICBwb2x5Z29uOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX3BvbHknLFxuICAgICAgICAgICAgICAgIGxpbmU6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfbGluZSdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNocHdyaXRlLmRvd25sb2FkKGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdywgb3B0aW9ucyk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ0Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gZG93bmxvYWRpbmcgdGhlIHNoYXBlZmlsZS4nICsgZXJyKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGNyZWF0ZXNMYXllcjogZmFsc2VcbiAgICB9LFxuXG4gICAgZXh0ZW50OiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVmlldyBleHRlbnQgb2YgbGF5ZXJzJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWdsb2JlXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoIWRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCkge1xuICAgICAgICAgIC8vIGV4dGVudCBvZiBlbnRpcmUgbGF5ZXIgbGlzdCBpZiBub3RoaW5nIHNlbGVjdGVkXG4gICAgICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGRjLm1hcC5sYXllcmdyb3VwLmdldEJvdW5kcygpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBvdGhlcndpc2UgYnVpbGQgdGhlIGJvdW5kcyBiYXNlZCBvbiBzZWxlY3RlZCBsYXllcnNcbiAgICAgICAgICB2YXIgYm91bmRzO1xuICAgICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgdmFyIGZsID0gZGMuc2VsZWN0aW9uLmxpc3RbbF0uZmVhdHVyZWxheWVyO1xuICAgICAgICAgICAgaWYoIWwpIGJvdW5kcyA9IGZsLmdldEJvdW5kcygpO1xuICAgICAgICAgICAgZWxzZSBib3VuZHMuZXh0ZW5kKGZsLmdldEJvdW5kcygpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBkYy5tYXAubS5maXRCb3VuZHMoYm91bmRzKTtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfSxcblxuICAgIGV4cGFuZDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbnZlcnQgRmVhdHVyZUNvbGxlY3Rpb24gaW50byBzZXBhcmF0ZSBmZWF0dXJlcycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1leHBhbmRcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgdmFyIGZjID0gZGMuc2VsZWN0aW9uLmxpc3RbMF07XG4gICAgICAgICAgaWYgKGZjLnJhdy50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAkKGZjLnJhdy5mZWF0dXJlcykuZWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZmMubmFtZSArIGNvdW50ICsgJ18nICsgZmMucmF3LmZlYXR1cmVzW2ZdLmdlb21ldHJ5LnR5cGUsIGZjLnJhdy5mZWF0dXJlc1tmXV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1RoYXQgbmVlZHMgdG8gYmUgYSBmZWF0dXJlIGNvbGxlY3Rpb24hJyk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0xheWVyIGlzIG5vdCBhIEZlYXR1cmVDb2xsZWN0aW9uLicpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnUGxlYXNlIHNlbGVjdCBhIHNpbmdsZSBsYXllciEnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb21iaW5lOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29tYmluZXMgc2VsZWN0ZWQgZmVhdHVyZXMgaW50byBhIHNpbmdsZSBGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jb21wcmVzc1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmYyA9IHtcbiAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgICAgIGZlYXR1cmVzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0W2ZdLnJhdy50eXBlICE9PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAgIGZjLmZlYXR1cmVzLnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbZl0ucmF3KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsIGRjLnNlbGVjdGlvbi5saXN0W2ZdLm5hbWUgKyAnIHdhcyBub3QgYWRkZWQgYmVjYXVzZSBpdCBpcyBhbHJlYWR5IGEgRmVhdHVyZUNvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgWyduZXdfRmVhdHVyZUNvbGxlY3Rpb24nLCBmY10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBsYXllcnMgc2VsZWN0ZWQhJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gJ3ZpZXctYXR0cmlidXRlcyc6IHtcbiAgICAvLyAgIG1pbkZlYXR1cmVzOiAxLFxuICAgIC8vICAgZGVzY3JpcHRpb246ICdTaG93IGF0dHJpYnV0ZSB0YWJsZScsXG4gICAgLy8gICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10aC1saXN0XCI+PC9pPicsXG4gICAgLy8gICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgZGMuYXR0ci5yZW5kZXIoZGMuc2VsZWN0aW9uLmxpc3RbMF0pO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG5cbiAgICByZW5hbWU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdSZW5hbWUgbGF5ZXInLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnTmFtZScsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ3JlbmFtZSddKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnUGxlYXNlIHNlbGVjdCA8c3Ryb25nPm9uZSBsYXllcjwvc3Ryb25nPi4nKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW5hbWUnLCBbZGMuc2VsZWN0aW9uLmxpc3RbMF0sIHBhcmFtZXRlcnNbMF1dKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVtb3ZlIHNlbGVjdGVkIGxheWVycycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaC1vXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlJywgW3RoaXMuc3RhbXBdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBpbmZvOiB7XG4gICAgICB0eXBlOiAnaW5mbycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0xlYXJuIG1vcmUgYWJvdXQgZHJvcGNob3AnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtaW5mb1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvYWJvdXQuaHRtbCc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMub3BzID0gZGMub3BzIHx8IHt9O1xuXG4gIGRjLm9wcy5nZW8gPSB7XG4gICAgYWxvbmc6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgbGluZSBhbmQgcmV0dXJucyBhIHBvaW50IGF0IGEgc3BlY2lmaWVkIGRpc3RhbmNlIGFsb25nIHRoZSBsaW5lLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZGlzdGFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonZGlzdGFuY2UgYWxvbmcgdGhlIGxpbmUnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdHMnLFxuICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ21pbGVzJywgJ2tpbG9tZXRlcnMnLCAncmFkaWFucycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnYWxvbmcnLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmFsb25nLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYmV6aWVyOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGxpbmUgYW5kIHJldHVybnMgYSBjdXJ2ZWQgdmVyc2lvbiBieSBhcHBseWluZyBhIEJlemllciBzcGxpbmUgYWxnb3JpdGhtLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVzb2x1dGlvbicsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidUaW1lIGluIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHBvaW50cycsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTAwMDBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdzaGFycG5lc3MnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonYSBtZWFzdXJlIG9mIGhvdyBjdXJ2eSB0aGUgcGF0aCBzaG91bGQgYmUgYmV0d2VlbiBzcGxpbmVzJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAgMC44NVxuXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdiZXppZXInLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmJlemllci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJ1ZmZlcjoge1xuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdDYWxjdWxhdGVzIGEgYnVmZmVyIGZvciBpbnB1dCBmZWF0dXJlcyBmb3IgYSBnaXZlbiByYWRpdXMuIFVuaXRzIHN1cHBvcnRlZCBhcmUgbWlsZXMsIGtpbG9tZXRlcnMsIGFuZCBkZWdyZWVzLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZGlzdGFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRGlzdGFuY2UgdG8gZHJhdyB0aGUgYnVmZmVyLicsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0JyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdmZWV0JywgJ2tpbG9tZXRlcnMnLCAnbWV0ZXJzJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuYnVmZmVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNlbnRlcjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGVzIGEgcG9pbnQgaW4gdGhlIGNlbnRlciBvZiB0aGUgZmVhdHVyZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3JlY3Vyc2l2ZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdSdW4gdGhlIG9wZXJhdGlvbiBvbiBlYWNoIGZlYXR1cmUgaW4gdGhlIGNvbGxlY3Rpb24gb3IgdGhlIGVudGlyZSBjb2xsZWN0aW9uLicsXG4gICAgICAgICAgdHlwZTogJ3JlY3Vyc2l2ZSdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIC8vIGlmIHJ1bm5pbmcgdGhlIG9wZXJhdGlvbiByZWN1cnNpdmVseSBcInRydWVcIlxuICAgICAgICBpZiAocGFyYW1zWzFdID09PSBcInRydWVcIikge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2NlbnRlcicsIHBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5jZW50ZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjZW50cm9pZDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGVzIGEgcG9pbnQgaW4gdGhlIGNlbnRyb2lkIG9mIHRoZSBmZWF0dXJlcy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3JlY3Vyc2l2ZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdSdW4gdGhlIG9wZXJhdGlvbiBvbiBlYWNoIGZlYXR1cmUgaW4gdGhlIGNvbGxlY3Rpb24gb3IgdGhlIGVudGlyZSBjb2xsZWN0aW9uLicsXG4gICAgICAgICAgdHlwZTogJ3JlY3Vyc2l2ZSdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIC8vIGlmIHJ1bm5pbmcgdGhlIG9wZXJhdGlvbiByZWN1cnNpdmVseSBcInRydWVcIlxuICAgICAgICBpZiAocGFyYW1zWzFdID09PSBcInRydWVcIikge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2NlbnRyb2lkJywgcGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmNlbnRyb2lkLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGVzdGluYXRpb246IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvaW50PicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIFBvaW50IGFuZCBjYWxjdWxhdGVzIHRoZSBsb2NhdGlvbiBvZiBhIGRlc3RpbmF0aW9uIHBvaW50IGdpdmVuIGEgZGlzdGFuY2UgaW4gZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnM7IGFuZCBiZWFyaW5nIGluIGRlZ3JlZXMuIFRoaXMgdXNlcyB0aGUgSGF2ZXJzaW5lIGZvcm11bGEgdG8gYWNjb3VudCBmb3IgZ2xvYmFsIGN1cnZhdHVyZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2Rpc3RhbmNlIGZyb20gdGhlIHN0YXJ0aW5nIHBvaW50JyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2JlYXJpbmcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDoncmFuZ2luZyBmcm9tIC0xODAgdG8gMTgwJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAgMFxuXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdHMnLFxuICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ21pbGVzJywgJ2tpbG9tZXRlcnMnLCAncmFkaWFucycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnZGVzdGluYXRpb24nLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmRlc3RpbmF0aW9uLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZW52ZWxvcGU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddIC8vIFRPRE86IG1ha2UgdGhpcyB0YWtlIGZlYXR1cmVzIGFuZCBydW4gYWNyb3NzIGZ1bGwgc2VsZWN0aW9uXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhbnkgbnVtYmVyIG9mIGZlYXR1cmVzIGFuZCByZXR1cm5zIGEgcmVjdGFuZ3VsYXIgUG9seWdvbiB0aGF0IGVuY29tcGFzc2VzIGFsbCB2ZXJ0aWNlcy4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmVudmVsb3BlLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGV4cGxvZGU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBmZWF0dXJlIG9yIHNldCBvZiBmZWF0dXJlcyBhbmQgcmV0dXJucyBhbGwgcG9zaXRpb25zIGFzIHBvaW50cy4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmV4cGxvZGUuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbWlkcG9pbnQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvaW50PiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyB0d28gcG9pbnRzIGFuZCByZXR1cm5zIGEgcG9pbnQgbWlkd2F5IGJldHdlZW4gdGhlbS4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLm1pZHBvaW50LmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHNpbXBsaWZ5OiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlPFBvbHlnb24+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgTGluZVN0cmluZyBvciBQb2x5Z29uIGFuZCByZXR1cm5zIGEgc2ltcGxpZmllZCB2ZXJzaW9uLiBJbnRlcm5hbGx5IHVzZXMgc2ltcGxpZnktanMgdG8gcGVyZm9ybSBzaW1wbGlmaWNhdGlvbi4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0b2xlcmFuY2UnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24gOidzaW1wbGlmaWNhdGlvbiB0b2xlcmFuY2UnLFxuICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgICBkZWZhdWx0OiAwLjFcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdoaWdoIHF1YWxpdHknLFxuICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnd2hldGhlciBvciBub3QgdG8gc3BlbmQgbW9yZSB0aW1lIHRvIGNyZWF0ZSBhIGhpZ2hlci1xdWFsaXR5IHNpbXBsaWZpY2F0aW9uIHdpdGggYSBkaWZmZXJlbnQgYWxnb3JpdGhtJyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ3NpbXBsaWZ5JywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5zaW1wbGlmeS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHRpbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1RyaWFuZ3VsYXRlZCBpcnJlZ3VsYXIgbmV0d29yaywgaW50ZXJwb2xhdGlvbiBtZXRob2QnLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLnRpbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1bmlvbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9seWdvbj4nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgdHdvIHBvbHlnb25zIGFuZCByZXR1cm5zIGEgY29tYmluZWQgcG9seWdvbi4gSWYgdGhlIGlucHV0IHBvbHlnb25zIGFyZSBub3QgY29udGlndW91cywgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGEgTXVsdGlQb2x5Z29uIGZlYXR1cmUuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi51bmlvbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB3aXRoaW46IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIHNldCBvZiBwb2ludHMgYW5kIGEgc2V0IG9mIHBvbHlnb25zIGFuZCByZXR1cm5zIHRoZSBwb2ludHMgdGhhdCBmYWxsIHdpdGhpbiB0aGUgcG9seWdvbnMuIEZpcnN0IGlucHV0IHNob3VsZCBiZSB0aGUgcG9pbnRzLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnUG9pbnRzIHRvIGNsaXAnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonU2VsZWN0IHRoZSBsYXllciB0aGF0IHJlcHJlc2VudHMgdGhlIHBvaW50cyB5b3Ugd2FudCB0byBjbGlwLiBUaGlzIGFzc3VtZXMgdGhlIG90aGVyIGxheWVyIGlzIHlvdXIgY2xpcHBpbmcgcG9seWdvbi4nLFxuICAgICAgICAgIHR5cGU6ICdzd2l0Y2gnXG4gICAgICAgICAgLy8gZGVmYXVsdDogZGMuc2VsZWN0aW9uLmxpc3RbMF1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi53aXRoaW4uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgXG4gIGRjLnNlbGVjdGlvbiA9IHt9O1xuICBkYy5zZWxlY3Rpb24ubGlzdCA9IFtdO1xuXG4gIGRjLnNlbGVjdGlvbi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2xheWVyOnNlbGVjdGVkJywgZGMuc2VsZWN0aW9uLmFkZCk7XG4gICAgJChkYykub24oJ2xheWVyOnVuc2VsZWN0ZWQnLCBkYy5zZWxlY3Rpb24ucmVtb3ZlKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlZCcsIF9sYXllclJlbW92ZWQpO1xuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5hZGQgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdC5wdXNoKGxheWVyKTtcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24ucmVtb3ZlID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGluZGV4ID0gbnVsbDtcbiAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcCA9PT0gbGF5ZXIuc3RhbXApIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGRjLnNlbGVjdGlvbi5saXN0LnNwbGljZShpbmRleCwgMSk7IC8vIHJlbW92ZSBvdXRzaWRlIG9mIHRoZSBsb29wIHNvIHdlIGRvbid0IGJyZWFrIG91ciBjb3VudFxuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICQoJy5sYXllci1uYW1lLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgJCgnLm9wZXJhdGlvbi1nZW8nKS5hZGRDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgJCgnLm9wZXJhdGlvbi1nZW8nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIGRjLnNlbGVjdGlvbi5saXN0ID0gW107XG4gIH07XG5cbiAgZnVuY3Rpb24gX2xheWVyUmVtb3ZlZChldmVudCwgc3RhbXApIHtcbiAgICBkYy5zZWxlY3Rpb24ucmVtb3ZlKHt9LCB7c3RhbXA6IHN0YW1wfSk7XG4gICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gIH1cblxuICByZXR1cm4gZGM7XG5cblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuXG4gIGRjLnV0aWwgPSB7fTtcblxuICBkYy51dGlsLnJlbW92ZUZpbGVFeHRlbnNpb24gPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXFwuW14vLl0rJC8sIFwiXCIpO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG5cbiAgZGMudXRpbC5yZW1vdmVXaGl0ZVNwYWNlID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbiAgICBjb25zb2xlLmxvZyhzdHJpbmcpO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG5cbiAgZGMudXRpbC5jb25jYXQgPSBmdW5jdGlvbihhcnJheSwgc2VwYXJhdG9yLCBwcmVmaXgpIHtcbiAgICB2YXIgc3RyaW5nID0gJyc7XG4gICAgJChhcnJheSkuZWFjaChmdW5jdGlvbihhKSB7XG4gICAgICBzdHJpbmcgKz0gc2VwYXJhdG9yICsgYXJyYXlbYV07XG4gICAgfSk7XG4gICAgc3RyaW5nID0gcHJlZml4ICsgc3RyaW5nO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG5cbiAgZGMudXRpbC54aHIgPSBmdW5jdGlvbih1cmwsIGNhbGxiYWNrKSB7XG4gICAgZHJvcGNob3AudXRpbC5sb2FkZXIodHJ1ZSk7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgIHhoci5vbmxvYWQgPSBjYWxsYmFjay5iaW5kKHRoaXMsIHhocik7XG4gICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiggeGhyICkge1xuICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgY29uc29sZS5lcnJvcih4aHIpO1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdVbmFibGUgdG8gYWNjZXNzICcgKyB1cmwsIDI1MDApO1xuICAgIH07XG4gICAgeGhyLnNlbmQoKTtcbiAgfTtcblxuICBkYy51dGlsLnJlYWRGaWxlID0gZnVuY3Rpb24oZmlsZSkge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIC8vIGlmIGEgemlwZmlsZSwgYXNzdW1lIHNoYXBlZmlsZSBmb3Igbm93XG4gICAgaWYgKGZpbGUubmFtZS5pbmRleE9mKCcuemlwJykgPiAtMSB8fCBmaWxlLm5hbWUuaW5kZXhPZignLnNocCcpID4gLTEpIHtcbiAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgIGRjLnV0aWwubG9hZGVyKHRydWUpO1xuICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHNocChyZWFkZXIucmVzdWx0KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJQcm9ibGVtYXRpYyBwcm9qZWN0aW9uIC0gXCIsIGVycm9yKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGdlb2pzb24pIHtcbiAgICAgICAgICAgIGRjLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICghZ2VvanNvbikge1xuICAgICAgICAgICAgICByZXR1cm4gZGMubm90aWZ5KCdlcnJvcicsICdJbnZhbGlkIHByb2plY3Rpb24gb3Igc2hhcGVmaWxlLicsIDI1MDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2dlb2pzb24uZmlsZU5hbWUsIGdlb2pzb25dKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUsICdVVEYtOCcpO1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2ZpbGUubmFtZSwgSlNPTi5wYXJzZShyZWFkZXIucmVzdWx0KV0pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb3J3YXJkVG9HZW9Kc29uSW8oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICB2YXIgdXJsID0gXCJodHRwOi8vZ2VvanNvbi5pby8jZGF0YT1kYXRhOmFwcGxpY2F0aW9uL2pzb24sXCIgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgd2luZG93LmxvY2F0aW9uID0gdXJsO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmpzb25Gcm9tVXJsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKVxuICAgICAgLnNwbGl0KC8oJj9naXN0PXwmP3VybD0pL2cpXG4gICAgICAuZmlsdGVyKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGQubGVuZ3RoID4gMDtcbiAgICAgIH0pO1xuXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gICAgcXVlcnkuZm9yRWFjaChmdW5jdGlvbihwYXJ0LCBpKSB7XG4gICAgICBpZiAoaSA9PT0gMCB8fCBpICUgMiA9PT0gMCkge1xuICAgICAgICB2YXIga2V5ID0gcGFydC5yZXBsYWNlKC8mfD0vZywgJycpO1xuXG4gICAgICAgIGlmICghcmVzdWx0W2tleV0pIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0W2tleV0ucHVzaChkZWNvZGVVUklDb21wb25lbnQocXVlcnlbaSArIDFdKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIGRjLnV0aWwudXBkYXRlU2VhcmNoID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxheWVycyA9IFtdO1xuXG4gICAgT2JqZWN0LmtleXMoZGMubGF5ZXJzLmxpc3QpLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgICAgLypcbiAgICAgICAgKiogSWYgYSBsYXllciBoYXMgYSB0eXBlIGFuZCBVUkwgKGEgZ2lzdCBvciBleHRlcm5hbCBHZW9KU09OIGxpbmspLFxuICAgICAgICAqKiBhbmQgd2UgaGF2ZW4ndCByZWNvcmVkIHRoaXMgdHlwZS11cmwgY29tYm8gYWxyZWFkeSwgYWRkIGl0IHRvIHRoZVxuICAgICAgICAqKiB1bmlxdWUgbGlzdC4gVGhlIGxhc3QgY2hlY2sgaXMgbmVlZGVkIHRvIGFjY291bnQgZm9yIGdpc3RzIHdpdGhcbiAgICAgICAgKiogbXVsdGlwbGUgbGF5ZXJzLlxuICAgICAgICAqL1xuICAgICAgICBpZiAoZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLmx0eXBlICYmIGRjLmxheWVycy5saXN0W2xheWVyXS51cmwgJiYgbGF5ZXJzLmluZGV4T2YoZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLmx0eXBlICsgJz0nICsgZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLnVybCkgPCAwKSB7XG4gICAgICAgICAgICBsYXllcnMucHVzaChkYy5sYXllcnMubGlzdFtsYXllcl0ubHR5cGUgKyAnPScgKyBkYy5sYXllcnMubGlzdFtsYXllcl0udXJsKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHNlYXJjaCA9IGxheWVycy5sZW5ndGggPyAgKCc/JyArIGxheWVycy5qb2luKCcmJykpIDogJy8nO1xuXG4gICAgLy8gT25seSB1cGRhdGUgdGhlIFVSSSBpZiBhbnl0aGluZyBoYXMgY2hhbmdlZFxuICAgIGlmIChzZWFyY2ggIT09IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpIHtcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBzZWFyY2gpO1xuICAgIH1cblxuICB9O1xuXG4gIGRjLnV0aWwuZXhlY3V0ZVVybFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkYXRhID0gZGMudXRpbC5qc29uRnJvbVVybCgpO1xuXG4gICAgLy8gbG9hZCBnaXN0XG4gICAgaWYgKGRhdGEuZ2lzdCAmJiBkYXRhLmdpc3QubGVuZ3RoKSB7XG4gICAgICAkKGRhdGEuZ2lzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLWdpc3QnXS5nZXQoe30sICdsb2FkLWdpc3QnLCBbZGF0YS5naXN0W2ldXSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBsb2FkXG4gICAgaWYgKGRhdGEudXJsICYmIGRhdGEudXJsLmxlbmd0aCkge1xuICAgICAgJChkYXRhLnVybCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLXVybCddLmdldCh7fSwgJ2xvYWQtdXJsJywgW2RhdGEudXJsW2ldXSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5nZXRGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgICByZXR1cm4gZmlsZW5hbWUuc3Vic3RyKGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykrMSk7XG4gIH07XG5cbiAgZGMudXRpbC5nZXRCQm94ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJvdW5kcyA9IGRjLm1hcC5tLmdldEJvdW5kcygpLFxuICAgICAgICAgICAgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCksXG4gICAgICAgICAgICBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTtcbiAgICAvLyB3ZSBzaG91bGQgcHJvYmFibHkgY2hlY2sgdGhlIHNpemUgaGVyZT9cbiAgICAvLyBub2RlKDU3LjcsMTEuOSw1Ny44LDEyLjApXG4gICAgcmV0dXJuIHN3LmxhdCsnLCcrc3cubG5nKycsJytuZS5sYXQrJywnK25lLmxuZztcbiAgfTtcblxuICBkYy51dGlsLnVuY29sbGVjdCA9IGZ1bmN0aW9uKGZjKSB7XG4gICAgcmV0dXJuIGZjLmZlYXR1cmVzWzBdO1xuICB9O1xuXG4gIGRjLnV0aWwuZXhlY3V0ZUZDID0gZnVuY3Rpb24oZmMsIG9wZXJhdGlvbiwgcGFyYW1zKSB7XG5cbiAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuICAgIHZhciBuZXdGQyA9IHt9O1xuICAgIG5ld0ZDLnR5cGUgPSAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIG5ld0ZDLmZlYXR1cmVzID0gW107XG5cbiAgICBmb3IgKHZhciBmID0gMDsgZiA8IGZjLmZlYXR1cmVzLmxlbmd0aDsgZisrKSB7XG4gICAgICBuZXdQYXJhbXNbMF0gPSBmYy5mZWF0dXJlc1tmXTtcbiAgICAgIHZhciBmZWF0dXJlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmVhdHVyZSA9IHR1cmZbb3BlcmF0aW9uXS5hcHBseShudWxsLCBuZXdQYXJhbXMpO1xuICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXMgPSBmYy5mZWF0dXJlc1tmXS5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCBlcnIpO1xuICAgICAgfVxuICAgICAgbmV3RkMuZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3RkM7XG5cbiAgfTtcblxuICBkYy51dGlsLmxvYWRlciA9IGZ1bmN0aW9uKHllcykge1xuICAgIHZhciBsb2FkZXIgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1sb2FkZXInKTtcblxuICAgIGlmICh5ZXMpIHtcbiAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZHJvcGNob3AtbG9hZGluZycpO1xuICAgICAgJCgnYm9keScpLmFwcGVuZChsb2FkZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRpbmcnKTtcbiAgICAgICQoJy5kcm9wY2hvcC1sb2FkZXInKS5hZGRDbGFzcygnbG9hZGVyLWNvbXBsZXRlJykuZmFkZU91dCgyMDAwLCBmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGRjLnV0aWwuZXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcbiAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoZXJyKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cblxufSkoZHJvcGNob3AgfHwge30pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
