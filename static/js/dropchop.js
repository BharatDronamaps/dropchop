var dropchop=function(e){return e=e||{},e.version="0.1.1",e.init=function(t){t||e.util.error("No options provided in dropchop.init()"),e.options=t,$(t.id).length||e.util.error("Element with options.id does not exist."),e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.ops.init(),e.form.init(),location.search.length&&e.util.executeUrlParams()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},radio:function(e){var t=$("<div>").attr("class","radioGroup"),a=e.name.replace(/\s/g,"");return $(e.options).each(function(r){var o=e.options[r],n=o.replace(/\s/g,""),i=$("<label>").addClass("sub-label").attr("for",n),s=$("<input>").attr("type","radio").attr("id",n).attr("name",a).addClass("radio").val(o);o===e["default"]&&s.prop("defaultChecked",!0),i.append(o),i.appendTo(t),s.appendTo(t)}),t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),s=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),l=$("<button>").addClass("layer-action layer-remove").html('<i class="fa fa-times"></i>'),p=$("<button>").addClass("layer-action layer-duplicate").html('<i class="fa fa-files-o"></i>');p.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:duplicate",[$(this).parent().attr("data-stamp")]),!1}),l.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:remove",[$(this).parent().attr("data-stamp")]),e.util.updateSearch(),e.selection.clear(),!1}),s.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),s=i.parent().attr("data-stamp");t===r&&(a=e),t===s&&(o=e)}),a>o?$(".layer-element").each(function(t){t>=o&&a>=t&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){o>t&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),n.on("dblclick",function(t){e.ops.file.extent.execute()}),o.append(n),o.append(s),o.append(i),o.append(l),o.append(p),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show()},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.toggleAll=function(t){function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}if($(this).find("input").prop("checked"))for(var r in e.layers.list)a(e.layers.list[r].stamp,!0);else for(var o in e.layers.list)a(e.layers.list[o].stamp,!1)},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r,o,n){"Topology"===r.type&&(r=topojson.client.feature(r,r.objects[Object.keys(r.objects)[0]]));var i=e.layers.makeLayer(a,r);e.layers.list[i.stamp]=i,o&&n&&(e.layers.list[i.stamp].ltype=o,e.layers.list[i.stamp].url=n),e.notify("success","<strong>"+i.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[i]),o&&n&&e.util.updateSearch()},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer),$(e.map.m).on("locationfound",function(t){var a=t.originalEvent;e.map.m.fitBounds(a.bounds);var r={type:"Feature",geometry:{type:"Point",coordinates:[a.latlng.lng,a.latlng.lat]},properties:{title:"There You Are","marker-color":"#207178","marker-symbol":"heart"}};$(e).trigger("file:added",["your location",r])}),$(e.map.m).on("locationerror",function(){e.notify("error","There was a problem finding your location.",3e3)})}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);if("close"===r){var n=$("<button>").addClass("notification-close").prop("type","button").html('<i class="fa fa-times"></i>');n.on("click",function(e){$(this).parent().remove()}),$(o).append(n),$(e.$elem).append(o)}else $(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}function r(){var e=$(".operation-geo").sort(function(e,t){return $(t).data("operation")<$(e).data("operation")?1:-1});e.filter(function(e,t){return $(t).prop("disabled")?void 0:t}).appendTo(".operations-geo"),e.filter(function(e,t){return $(t).prop("disabled")?t:void 0}).appendTo(".operations-geo"),$(".operations-geo").scrollTop(0)}return e=e||{},e.ops=e.ops||{},e.ops.init=function(){function r(t){var r=$("<button>").addClass("menu-action").html(e.ops.file[t].icon||"!").attr("data-operation",t).attr("data-tooltip",e.ops.file[t].description);return"info"===e.ops.file[t].type&&r.addClass("dropchop-info"),r.on("click",a),r}var o=$("<div>").addClass("operations-geo");e.$elem.append(o);for(var n in e.ops.geo){var i=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+n+"</h4><p>"+e.ops.geo[n].description+"</p>").prop("disabled",!0).attr("data-operation",n);i.on("click",t),o.append(i)}$(e).on("layer:selected",e.ops.geoCheck),$(e).on("layer:unselected",e.ops.geoCheck),$(e).on("operation:geo",e.ops.geoExecute),$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:load-arcgis",e.ops.file["load-arcgis"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback),e.ops.setup=[{name:"import",icon:'<i class="fa fa-plus"></i>',actions:["upload","load-url","load-gist","load-arcgis","load-overpass","location"]},{name:"Save",icon:'<i class="fa fa-floppy-o"></i>',actions:["save-geojson","save-topojson","save-shapefile"]},{name:"Geo Actions",icon:'<i class="fa fa-wrench"></i>',actions:["extent","expand","combine","rename","remove"]},"info"];for(var s=$("<div>").addClass("dropchop-menu-left"),l=e.ops.setup,p=0;p<l.length;p++){var c=l[p];if("object"!=typeof l[p])if("break"===e.ops.file[c].type){var u=$("<div>").addClass("menu-action-break");s.append(u)}else s.append(r(c));else{var d=$("<div>").addClass("menu-action menu-collapse").html(l[p].icon);"import"===l[p].name&&d.addClass("menu-import");for(var f=$("<div>").addClass("menu-collapse-inner"),m=0;m<l[p].actions.length;m++){var y=e.ops.setup[p].actions[m];f.append(r(y))}d.append(f),s.append(d)}}e.$elem.append(s)},e.ops.geoExecute=function(t,a,r){var o=e.ops.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.ops.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){-1===$.inArray("switch-"+e.selection.list[t].stamp,a)?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.ops.geoCheck=function(t,a){function o(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function n(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var i in e.ops.geo){var s=e.ops.geo[i];if(e.selection.list.length>s.maxFeatures||e.selection.list.length<s.minFeatures)o(i);else for(var l=0;l<e.selection.list.length;l++){var p=e.selection.list[l];$.inArray(p.type,s.requirements.types)>-1||s.requirements.generalFeature===!0?n(i):o(i)}}r()},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r,"url",t.responseURL])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content),"gist",t.responseURL.split("/")[t.responseURL.split("/").length-1]])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-arcgis":{description:"Query an ArcGIS Server Feature Service",icon:'<i class="fa fa-globe"></i>',_temp:{layerName:"arcjson"},parameters:[{name:"feature service",description:"Enter URL to ArcGIS Feature Service (ex. http://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/0)",type:"text","default":"http://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/0"},{name:"where",description:"A where clause for the query filter. Any legal SQL where clause operating on the fields in the layer is allowed.",type:"text","default":"1=1"},{name:"request type",description:"select JSONP if you receive cross-origin resource sharing errors",type:"radio","default":"CORS",options:["CORS","JSONP"]},{name:"limit to map",description:"only load features within current map view",type:"checkbox"}],execute:function(){$(e).trigger("form:file",["load-arcgis"])},checkJsonp:function(e){return"JSONP"===e[2]?!1:!0},get:function(t,a,r){e.ops.file["load-arcgis"]._temp.layerName=r[0];var o="-180,-90,180,90";r[3]&&(o=e.util.getEsriBBox());var n=r[0]+"/query/",i={f:"json",inSR:4326,outSR:4326,geometry:o,where:r[1],outfields:"*"},s=e.ops.file["load-arcgis"].checkJsonp(r);e.util.get(n,i,s).done(function(t){e.ops.file["load-arcgis"].callback(t)}).fail(function(t,a,r){dropchop.util.loader(!1),e.notify("Error",a,r)})},callback:function(t){dropchop.util.loader(!1);var a=e.util.esri2geo(t);t.features.length<1?e.notify("info","No features found in your query."):($(e).trigger("file:added",[e.ops.file["load-arcgis"]._temp.layerName,a]),e.notify("success","Found <strong>"+t.features.length+" features</strong> from the ArcGIS Service"))}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide" target="_blank">the query language</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox();e.util.xhr("http://overpass-api.de/api/interpreter?[out:json];node["+r[0]+"]("+o+");out;",e.ops.file["load-overpass"].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r,{flatProperties:!0});r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},location:{description:"Add your location as a layer",icon:'<i class="fa fa-crosshairs"></i>',execute:function(){navigator.geolocation?e.map.m.locate():e.notify("error","Geolocation is not available on this browser.",4e3)}},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-topojson":{minFeatures:1,description:"Save as TopoJSON",icon:'<i class="fa fa-object-ungroup"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(topojson.topology({collection:e.selection.list[t].raw},{"property-transform":function(e){return e.properties}})),r="dropchop_"+e.selection.list[t].name+".topojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},rename:{minFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.get=function(t,a,r){var o={data:a,
dataType:"json"};e.util.corsSupport&&r!==!1||(console.log("No CORS support, using JSONP"),o.dataType="jsonp"),dropchop.util.loader(!0);var n=$.ajax(t,o);return n},e.util.readFile=function(t){var a=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(a.readAsArrayBuffer(t),e.util.loader(!0),a.onloadend=function(t){shp(a.result)["catch"](function(e){console.log("Problematic projection - ",e)}).then(function(t){return e.util.loader(!1),t?void $(e).trigger("file:added",[t.fileName,t]):e.notify("error","Invalid projection or shapefile.",2500)})}):(a.readAsText(t,"UTF-8"),a.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(a.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1).split(/(&?gist=|&?url=)/g).filter(function(e){return e.length>0}),t={};return e.forEach(function(a,r){if(0===r||r%2===0){var o=a.replace(/&|=/g,"");t[o]||(t[o]=[]),t[o].push(decodeURIComponent(e[r+1]))}}),t},e.util.updateSearch=function(){var t=[];Object.keys(e.layers.list).forEach(function(a){e.layers.list[a].ltype&&e.layers.list[a].url&&t.indexOf(e.layers.list[a].ltype+"="+e.layers.list[a].url)<0&&t.push(e.layers.list[a].ltype+"="+e.layers.list[a].url)});var a=t.length?"?"+t.join("&"):"/";a!==window.location.search&&window.history.pushState(null,null,a)},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.getEsriBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lng+","+a.lat+","+r.lng+","+r.lat},e.util.uncollect=function(e){return e.features[0]},e.util.esri2geo=function(e){return toGeoJSON(e)},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var s;try{s=turf[a].apply(null,o),s.properties=t.features[i].properties||{}}catch(l){e.notify("error",l)}n.features.push(s)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.corsSupport=function(){return"XMLHttprequest"in window&&"withCredentials"in new window.XMLHttpRequest},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibm90aWZ5LmRyb3BjaG9wLmpzIiwib3BzLmRyb3BjaG9wLmpzIiwib3BzLmZpbGUuZHJvcGNob3AuanMiLCJvcHMuZ2VvLmRyb3BjaG9wLmpzIiwic2VsZWN0aW9uLmRyb3BjaG9wLmpzIiwidXRpbC5kcm9wY2hvcC5qcyJdLCJuYW1lcyI6WyJkcm9wY2hvcCIsImRjIiwidmVyc2lvbiIsImluaXQiLCJvcHRzIiwidXRpbCIsImVycm9yIiwib3B0aW9ucyIsIiQiLCJpZCIsImxlbmd0aCIsIiRlbGVtIiwibGF5ZXJzIiwicHJlcGFyZSIsIm1hcCIsInNlbGVjdGlvbiIsImxheWVybGlzdCIsImRyb3B6b25lIiwib3BzIiwiZm9ybSIsImxvY2F0aW9uIiwic2VhcmNoIiwiZXhlY3V0ZVVybFBhcmFtcyIsImJvb20iLCJjb25zb2xlIiwibG9nIiwiX2V2ZW50cyIsIiRjb250YWluZXIiLCJvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJ0aGlzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImZpbGVzIiwib3JpZ2luYWxFdmVudCIsImRhdGFUcmFuc2ZlciIsImVhY2giLCJpIiwicmVhZEZpbGUiLCJnZW8iLCJmaWxlIiwib3BlcmF0aW9uIiwiY3JlYXRlIiwibmFtZSIsImluZm8iLCJ0cmlnZ2VyIiwicmVtb3ZlIiwiJGh0bWwiLCJhdHRyIiwidGV4dCIsImFwcGVuZFRvIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwicCIsImNyZWF0ZVBhcmFtIiwiJHN1Ym1pdCIsIiRjYW5jZWwiLCJkYXRhIiwic2VyaWFsaXplQXJyYXkiLCJwdXNoIiwidmFsdWUiLCJhcHBlbmQiLCJwYXJhbSIsIiRpbnB1dCIsIiRsYWJlbCIsIiRmaWVsZCIsImlucHV0cyIsInR5cGUiLCJodG1sIiwibnVtYmVyIiwiJGkiLCJzZWxlY3QiLCIkb3B0IiwiY2hlY2tib3giLCJyYWRpbyIsImdyb3VwTmFtZSIsInJlcGxhY2UiLCJvcHQiLCJvcHRJZCIsIiRsYmwiLCJ2YWwiLCJwcm9wIiwic3dpdGNoIiwibGlzdCIsInN0YW1wIiwicmVjdXJzaXZlIiwiJGxibDEiLCIkb3B0MSIsIiRsYmwyIiwiJG9wdDIiLCJsYXllclR5cGVJY29uIiwiaWNvbiIsImVsZW1zIiwidGFyZ2V0IiwiaGFzQ2xhc3MiLCJjbGVhciIsImxpSGVscGVyIiwidG9nZ2xlTGF5ZXJzIiwidG9nZ2xlQWxsIiwiYWRkTGF5ZXJMaXN0SXRlbSIsInJlbW92ZUxheWVyTGlzdEl0ZW0iLCJyZW5hbWUiLCJuZXdOYW1lIiwiZmluZCIsImxheWVyIiwibGF5ZXJsaXN0SXRlbSIsImxheWVyRGl2IiwiZGVsYXkiLCJxdWV1ZSIsIm5leHQiLCJsYXllclR5cGUiLCJjaGVja2VkIiwiZHVwbGljYXRlIiwicGFyZW50IiwidXBkYXRlU2VhcmNoIiwic2hpZnRLZXkiLCJ0b0NvdW50IiwiZnJvbUNvdW50IiwidG8iLCJmcm9tIiwiX2xhc3RTZWxlY3RlZCIsImUiLCJjaGVjayIsInRvU3RhbXAiLCJmcm9tU3RhbXAiLCJsIiwic2VsZWN0TGF5ZXIiLCJtZXRhS2V5Iiwic2VsZWN0VG9nZ2xlIiwiY2xlYXJTZWxlY3Rpb24iLCJleHRlbnQiLCJleGVjdXRlIiwiaGlkZSIsInNob3ciLCIkaXRlbSIsImx5ciIsImVsZW1Ub2dnbGUiLCJib29sIiwibyIsImZhZGVPdXQiLCJnZXRUeXBlIiwiZ2oiLCJnZW9tZXRyeSIsImFkZCIsImJsb2IiLCJsdHlwZSIsInVybCIsInRvcG9qc29uIiwiY2xpZW50IiwiZmVhdHVyZSIsIm9iamVjdHMiLCJPYmplY3QiLCJrZXlzIiwibWFrZUxheWVyIiwibm90aWZ5IiwiZXJyIiwicmF3IiwianNvbiIsImdlb2pzb24iLCJmbCIsIkwiLCJtYXBib3giLCJmZWF0dXJlTGF5ZXIiLCJyZW1vdmVGaWxlRXh0ZW5zaW9uIiwiZmVhdHVyZWxheWVyIiwiZGF0ZUFkZGVkIiwiRGF0ZSIsIl9tYWtlTWFwIiwidG9rZW4iLCJhY2Nlc3NUb2tlbiIsIm0iLCJ6b29tQ29udHJvbCIsIndvcmxkQ29weUp1bXAiLCJzZXRWaWV3IiwiY29udHJvbCIsInpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiZ2VvY29kZXJDb250cm9sIiwiYmFzZUxheWVycyIsIk1hcGJveCBTdHJlZXRzIiwidGlsZUxheWVyIiwiTWFwYm94IE91dGRvb3JzIiwiTWFwYm94IExpZ2h0IiwiTWFwYm94IERhcmsiLCJNYXBib3ggU2F0ZWxsaXRlIiwiY29sbGFwc2VkIiwibGF5ZXJncm91cCIsImFkZExheWVyIiwiaGlkZUxheWVyIiwic2hvd0xheWVyIiwiZml0Qm91bmRzIiwiYm91bmRzIiwiY29vcmRpbmF0ZXMiLCJsYXRsbmciLCJsbmciLCJsYXQiLCJwcm9wZXJ0aWVzIiwidGl0bGUiLCJtYXJrZXItY29sb3IiLCJtYXJrZXItc3ltYm9sIiwicmVtb3ZlTGF5ZXIiLCJjb3VudCIsImVhY2hMYXllciIsImNvbnRlbnQiLCJiaW5kUG9wdXAiLCJwb3B1cCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiYXV0b1BhblBhZGRpbmciLCJjbGFzc05hbWUiLCJzZXRDb250ZW50IiwidGltZSIsIm5vdGUiLCIkY2xvc2UiLCJzZXRUaW1lb3V0IiwiX2dlb0J0bkNsaWNrIiwiX2ZpbGVCdG5DbGljayIsIl9zb3J0R2VvIiwiYWxwaGEiLCJzb3J0IiwiYSIsImIiLCJmaWx0ZXIiLCJkIiwic2Nyb2xsVG9wIiwiYnVpbGRNZW51QnV0dG9uIiwiYWN0aW9uIiwiYnV0dG9uIiwiZ2VvQ29udGFpbmVyIiwiZ2VvT3AiLCJnZW9CdG4iLCJnZW9DaGVjayIsImdlb0V4ZWN1dGUiLCJnZXQiLCJjYWxsYmFjayIsInNldHVwIiwiYWN0aW9ucyIsImxlZnRNZW51IiwiJGJyZWFrU3BhY2UiLCJjb2xsYXBzZUJ0biIsImNvbGxhcHNlSW5uZXIiLCJhY3RuIiwicHJlcCIsInByZXBhcmVUdXJmUGFyYW1zIiwicmVzdWx0IiwicGFyYW1zIiwiZ2VvbXMiLCJuYW1lQXJyYXkiLCJpbkFycmF5IiwidW5zaGlmdCIsIm1lcmdlIiwiY29uY2F0IiwidHVybkl0T2ZmIiwib3AiLCJidG4iLCJ0dXJuSXRPbiIsIm1heEZlYXR1cmVzIiwibWluRmVhdHVyZXMiLCJ4Iiwic2VsIiwicmVxdWlyZW1lbnRzIiwidHlwZXMiLCJnZW5lcmFsRmVhdHVyZSIsInVwbG9hZCIsIiRibGluZElucHV0IiwiY3NzIiwiY2xpY2siLCJsb2FkLXVybCIsImRlZmF1bHQiLCJ4aHIiLCJ4aHJFdmVudCIsImxvYWRlciIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlVVJMIiwic3Vic3RyaW5nIiwibGFzdEluZGV4T2YiLCJsb2FkLWdpc3QiLCJnaXN0Iiwic3BsaXQiLCJmIiwiZmlsZW5hbWUiLCJsb2FkLWFyY2dpcyIsIl90ZW1wIiwibGF5ZXJOYW1lIiwiY2hlY2tKc29ucCIsImJib3giLCJnZXRFc3JpQkJveCIsInVybFBhcmFtcyIsImluU1IiLCJvdXRTUiIsIndoZXJlIiwib3V0ZmllbGRzIiwiY29ycyIsImRvbmUiLCJmYWlsIiwianFYaHIiLCJ0ZXh0U3RhdHVzIiwiZXNyaTJnZW8iLCJmZWF0dXJlcyIsImxvYWQtb3ZlcnBhc3MiLCJnZXRCQm94Iiwib3NtdG9nZW9qc29uIiwiZmxhdFByb3BlcnRpZXMiLCJlbGVtZW50cyIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwibG9jYXRlIiwic2F2ZS1nZW9qc29uIiwiY3JlYXRlc0xheWVyIiwic3RyaW5naWZ5Iiwic2F2ZUFzIiwiQmxvYiIsInNhdmUtdG9wb2pzb24iLCJ0b3BvbG9neSIsImNvbGxlY3Rpb24iLCJwcm9wZXJ0eS10cmFuc2Zvcm0iLCJzYXZlLXNoYXBlZmlsZSIsImZvbGRlciIsInBvaW50IiwicG9seWdvbiIsImxpbmUiLCJzaHB3cml0ZSIsImRvd25sb2FkIiwiZXh0ZW5kIiwiZ2V0Qm91bmRzIiwiZXhwYW5kIiwiZmMiLCJFcnJvciIsImNvbWJpbmUiLCJ3aW5kb3ciLCJhbG9uZyIsImV4ZWN1dGVGQyIsInR1cmYiLCJhcHBseSIsImJlemllciIsImJ1ZmZlciIsImNlbnRlciIsImNlbnRyb2lkIiwiZGVzdGluYXRpb24iLCJlbnZlbG9wZSIsImV4cGxvZGUiLCJtaWRwb2ludCIsInNpbXBsaWZ5IiwidGluIiwidW5pb24iLCJ3aXRoaW4iLCJfbGF5ZXJSZW1vdmVkIiwiaW5kZXgiLCJzcGxpY2UiLCJzdHJpbmciLCJyZW1vdmVXaGl0ZVNwYWNlIiwiYXJyYXkiLCJzZXBhcmF0b3IiLCJwcmVmaXgiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJiaW5kIiwib25lcnJvciIsInNlbmQiLCJkYXRhVHlwZSIsImNvcnNTdXBwb3J0IiwiYWpheCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJpbmRleE9mIiwicmVhZEFzQXJyYXlCdWZmZXIiLCJvbmxvYWRlbmQiLCJzaHAiLCJ0aGVuIiwiZmlsZU5hbWUiLCJyZWFkQXNUZXh0IiwianNvbkZyb21VcmwiLCJxdWVyeSIsInN1YnN0ciIsImZvckVhY2giLCJwYXJ0Iiwia2V5IiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJnZXRGaWxlRXh0ZW5zaW9uIiwic3ciLCJnZXRTb3V0aFdlc3QiLCJuZSIsImdldE5vcnRoRWFzdCIsInVuY29sbGVjdCIsImFyY2pzb24iLCJ0b0dlb0pTT04iLCJuZXdQYXJhbXMiLCJuZXdGQyIsInllcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsVUFBQSxTQUFBQyxHQThDQSxNQTdDQUEsR0FBQUEsTUFDQUEsRUFBQUMsUUFBQSxRQUNBRCxFQUFBRSxLQUFBLFNBQUFDLEdBQ0FBLEdBQ0FILEVBQUFJLEtBQUFDLE1BQUEsMENBRUFMLEVBQUFNLFFBQUFILEVBRUFJLEVBQUFKLEVBQUFL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QUNBLE1BQUFBLEdBQUE1QixTQUFBLElBR0EvUyxFQUFBSSxLQUFBMFMsU0FBQSxTQUFBMkYsR0FDQSxNQUFBQyxXQUFBRCxJQUdBelksRUFBQUksS0FBQTRVLFVBQUEsU0FBQUwsRUFBQWpTLEVBQUE2TSxHQUVBLEdBQUFvSixHQUFBcEosRUFDQXFKLElBQ0FBLEdBQUF4VSxLQUFBLG9CQUNBd1UsRUFBQTdGLFdBRUEsS0FBQSxHQUFBbkIsR0FBQSxFQUFBQSxFQUFBK0MsRUFBQTVCLFNBQUF0UyxPQUFBbVIsSUFBQSxDQUNBK0csRUFBQSxHQUFBaEUsRUFBQTVCLFNBQUFuQixFQUNBLElBQUF0SSxFQUNBLEtBQ0FBLEVBQUEyTCxLQUFBdlMsR0FBQXdTLE1BQUEsS0FBQXlELEdBQ0FyUCxFQUFBZ0QsV0FBQXFJLEVBQUE1QixTQUFBbkIsR0FBQXRGLGVBQ0EsTUFBQTFDLEdBQ0E1SixFQUFBMkosT0FBQSxRQUFBQyxHQUVBZ1AsRUFBQTdGLFNBQUFuUCxLQUFBMEYsR0FHQSxNQUFBc1AsSUFJQTVZLEVBQUFJLEtBQUE2USxPQUFBLFNBQUE0SCxHQUNBLEdBQUE1SCxHQUFBMVEsRUFBQSxTQUFBeUIsU0FBQSxrQkFFQTZXLElBQ0F0WSxFQUFBLFFBQUF5QixTQUFBLG9CQUNBekIsRUFBQSxRQUFBdUQsT0FBQW1OLEtBRUExUSxFQUFBLFFBQUEwQixZQUFBLG9CQUNBMUIsRUFBQSxvQkFBQXlCLFNBQUEsbUJBQUE0RyxRQUFBLElBQUEsV0FDQXJJLEVBQUF3QixNQUFBZ0IsYUFLQS9DLEVBQUFJLEtBQUEwVyxZQUFBLFdBQ0EsTUFBQSxrQkFBQWhDLFNBQUEsbUJBQUEsSUFBQUEsUUFBQXlCLGdCQUdBdlcsR0FHQUQiLCJmaWxlIjoiZHJvcGNob3AuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMudmVyc2lvbiA9ICcwLjEuMSc7XG4gIGRjLmluaXQgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgaWYoIW9wdHMpIHtcbiAgICAgIGRjLnV0aWwuZXJyb3IoJ05vIG9wdGlvbnMgcHJvdmlkZWQgaW4gZHJvcGNob3AuaW5pdCgpJyk7XG4gICAgfVxuICAgIGRjLm9wdGlvbnMgPSBvcHRzO1xuXG4gICAgaWYoISQob3B0cy5pZCkubGVuZ3RoKSB7XG4gICAgICBkYy51dGlsLmVycm9yKCdFbGVtZW50IHdpdGggb3B0aW9ucy5pZCBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICB9XG4gICAgZGMuJGVsZW0gPSAkKG9wdHMuaWQpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJzXG4gICAgZGMubGF5ZXJzLnByZXBhcmUoKTtcblxuICAgIC8vIHNldHVwIG1hcFxuICAgIGRjLm1hcC5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBzZWxlY3Rpb25cbiAgICBkYy5zZWxlY3Rpb24uaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJsaXN0XG4gICAgZGMubGF5ZXJsaXN0LmluaXQoJ2xheWVybGlzdCcpO1xuXG4gICAgLy8gc2V0dXAgZHJvcHpvbmVcbiAgICBkYy5kcm9wem9uZSgkKCdib2R5JykpO1xuXG4gICAgLy8gc2V0dXAgb3BlcmF0aW9uc1xuICAgIGRjLm9wcy5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBmb3Jtc1xuICAgIGRjLmZvcm0uaW5pdCgpO1xuXG4gICAgLy8gZ2V0IFVSTCBpbmZvcm1hdGlvbiBpZiBpdCBleGlzdHNcbiAgICBpZihsb2NhdGlvbi5zZWFyY2gubGVuZ3RoKSB7XG4gICAgICBkYy51dGlsLmV4ZWN1dGVVcmxQYXJhbXMoKTtcbiAgICB9XG5cbiAgfTtcblxuICBkYy5ib29tID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3NoYWthbGFrYScpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZHJvcHpvbmUuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250YWluZXIgZWxlbWVudCAobGV0cyBkbyBkb2N1bWVudC5ib2R5KVxuICAgKi9cbiAgZGMuZHJvcHpvbmUgPSBmdW5jdGlvbigkY29udGFpbmVyKSB7XG4gICAgX2V2ZW50cygkY29udGFpbmVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBfZXZlbnRzKCRjb250YWluZXIpIHtcbiAgICAkY29udGFpbmVyLm9uKCdkcmFnb3ZlcicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdkcmFnZ2luZycpO1xuICAgIH0pO1xuXG4gICAgJGNvbnRhaW5lci5vbignZHJhZ2xlYXZlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgfSk7XG5cbiAgICAkY29udGFpbmVyLm9uKCdkcm9wJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgICB2YXIgZmlsZXMgPSBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICAgICQoZmlsZXMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy51dGlsLnJlYWRGaWxlKGZpbGVzW2ldKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmZvcm0gPSBkYy5mb3JtIHx8IHt9O1xuICBkYy5mb3JtLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignZm9ybTpnZW8nLCBkYy5mb3JtLmdlbyk7XG4gICAgJChkYykub24oJ2Zvcm06ZmlsZScsIGRjLmZvcm0uZmlsZSk7XG4gIH07XG5cbiAgZGMuZm9ybS5nZW8gPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uKSB7XG4gICAgZGMuZm9ybS5jcmVhdGUob3BlcmF0aW9uLCBkYy5vcHMuZ2VvW29wZXJhdGlvbl0sICdnZW8nKTtcbiAgfTtcblxuICBkYy5mb3JtLmZpbGUgPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uKSB7XG4gICAgZGMuZm9ybS5jcmVhdGUob3BlcmF0aW9uLCBkYy5vcHMuZmlsZVtvcGVyYXRpb25dLCAnZmlsZTonICsgb3BlcmF0aW9uKTtcbiAgfTtcblxuICBkYy5mb3JtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIGluZm8sIHRyaWdnZXIpIHtcbiAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgIHZhciAkaHRtbCA9ICQoJzxmb3JtPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtIGRyb3BjaG9wLWZvcm0tJyt0cmlnZ2VyKVxuICAgICAgICAgIC5hdHRyKCdpZCcsICdkcm9wY2hvcC1mb3JtJylcbiAgICAgICAgICAuYXR0cignZGF0YScsIG5hbWUpO1xuICAgIHZhciAkdGl0bGUgPSAkKCc8aDI+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tdGl0bGUnKS50ZXh0KG5hbWUpLmFwcGVuZFRvKCRodG1sKTtcbiAgICB2YXIgJGRlc2MgPSAkKCc8cD4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1kZXNjcmlwdGlvbicpLnRleHQoaW5mby5kZXNjcmlwdGlvbikuYXBwZW5kVG8oJGh0bWwpO1xuXG4gICAgLy8gY3JlYXRlIHBhcmFtc1xuICAgIGlmKGluZm8ucGFyYW1ldGVycykge1xuICAgICAgJChpbmZvLnBhcmFtZXRlcnMpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwID0gZGMuZm9ybS5jcmVhdGVQYXJhbSh0aGlzKTtcbiAgICAgICAgcC5hcHBlbmRUbygkaHRtbCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgc3VibWl0IGJ1dHRvblxuICAgIHZhciAkc3VibWl0ID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnZHJvcGNob3AtYnRuIGRyb3BjaG9wLWJ0bi1ncmVlbiBkcm9wY2hvcC1mb3JtLXN1Ym1pdCcpLnRleHQoJ0V4ZWN1dGUnKS5hdHRyKCdmb3InLCBuYW1lKTtcbiAgICB2YXIgJGNhbmNlbCA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWJ0biBkcm9wY2hvcC1idG4tY2FuY2VsIGRyb3BjaG9wLWZvcm0tY2FuY2VsJykudGV4dCgnQ2FuY2VsJykuYXR0cigndHlwZScsICdidXR0b24nKTtcbiAgICAkY2FuY2VsLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICAkaHRtbC5vbignc3VibWl0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyBnZXQgdGhlIHBhcmFtZXRlcnMgZnJvbSB0aGUgZm9ybVxuICAgICAgdmFyIHBhcmFtZXRlcnMgPSBbXTtcbiAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5zZXJpYWxpemVBcnJheSgpO1xuICAgICAgJChkYXRhKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgcGFyYW1ldGVycy5wdXNoKGRhdGFbaV0udmFsdWUpO1xuICAgICAgfSk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdvcGVyYXRpb246JyArIHRyaWdnZXIsIFtuYW1lLCBwYXJhbWV0ZXJzXSk7XG4gICAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgICRodG1sLmFwcGVuZCgkc3VibWl0KTtcbiAgICAkaHRtbC5hcHBlbmQoJGNhbmNlbCk7XG5cbiAgICBkYy4kZWxlbS5hcHBlbmQoJGh0bWwpO1xuICAgIC8vIHN1Ym1pdCBidXR0b24gbmVlZHMgdHJpZ2dlciBvcGVyYXRpb246Z2VvIHdpdGggb3AgYW5kIHBhcmFtZXRlciBhcnJheVxuICB9O1xuXG4gIGRjLmZvcm0ucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gICAgJCgnI2Ryb3BjaG9wLWZvcm0nKS5yZW1vdmUoKTtcbiAgfTtcblxuICBkYy5mb3JtLmNyZWF0ZVBhcmFtID0gZnVuY3Rpb24ocGFyYW0pIHtcbiAgICB2YXIgJGlucHV0ID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXInKTtcbiAgICB2YXIgJGxhYmVsID0gJCgnPGxhYmVsPicpLnRleHQocGFyYW0ubmFtZSkuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyLWxhYmVsJyk7XG4gICAgdmFyICRmaWVsZCA9IGRjLmZvcm0uaW5wdXRzW3BhcmFtLnR5cGVdKHBhcmFtKTtcbiAgICAkZmllbGQuYXBwZW5kVG8oJGxhYmVsKTtcbiAgICBpZihwYXJhbS5kZXNjcmlwdGlvbi5sZW5ndGgpIHtcbiAgICAgICQoJzxwPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlci1kZXNjcmlwdGlvbicpLmh0bWwocGFyYW0uZGVzY3JpcHRpb24pLmFwcGVuZFRvKCRsYWJlbCk7XG4gICAgfVxuICAgICRpbnB1dC5hcHBlbmQoJGxhYmVsKTtcbiAgICByZXR1cm4gJGlucHV0O1xuICB9O1xuXG4gIGRjLmZvcm0uaW5wdXRzID0ge1xuICAgIG51bWJlcjogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGlucHV0PicpLmF0dHIoJ3R5cGUnLCAnbnVtYmVyJylcbiAgICAgICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHNlbGVjdDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPHNlbGVjdD4nKS5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICQocC5vcHRpb25zKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdmFyICRvcHQgPSAkKCc8b3B0aW9uPicpLnRleHQocC5vcHRpb25zW2ldKVxuICAgICAgICAgICAgICAuYXR0cigndmFsdWUnLCBwLm9wdGlvbnNbaV0pO1xuICAgICAgICAkb3B0LmFwcGVuZFRvKCRpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgdGV4dDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGlucHV0PicpLmF0dHIoJ3R5cGUnLCAndGV4dCcpXG4gICAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgICAgIC5hdHRyKCd2YWx1ZScsIHAuZGVmYXVsdCk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICBjaGVja2JveDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGlucHV0PicpLmF0dHIoJ3R5cGUnLCAnY2hlY2tib3gnKVxuICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpXG4gICAgICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgcmFkaW86IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxkaXY+JykuYXR0cignY2xhc3MnLCAncmFkaW9Hcm91cCcpO1xuICAgICAgdmFyIGdyb3VwTmFtZSA9IHAubmFtZS5yZXBsYWNlKC9cXHMvZywgJycpO1xuICAgICAgJChwLm9wdGlvbnMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgb3B0ID0gcC5vcHRpb25zW2ldO1xuICAgICAgICB2YXIgb3B0SWQgPSBvcHQucmVwbGFjZSgvXFxzL2csICcnKTtcbiAgICAgICAgdmFyICRsYmwgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKVxuICAgICAgICAgICAgICAuYXR0cignZm9yJywgb3B0SWQpO1xuXG4gICAgICAgIHZhciAkb3B0ID0gJCgnPGlucHV0PicpXG4gICAgICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ3JhZGlvJylcbiAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgb3B0SWQpXG4gICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgZ3JvdXBOYW1lKVxuICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3JhZGlvJylcbiAgICAgICAgICAgICAgLnZhbChvcHQpO1xuICAgICAgICBpZiAob3B0ID09PSBwLmRlZmF1bHQpIHtcbiAgICAgICAgICAkb3B0LnByb3AoJ2RlZmF1bHRDaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgJGxibC5hcHBlbmQob3B0KTtcbiAgICAgICAgJGxibC5hcHBlbmRUbygkaSk7XG4gICAgICAgICRvcHQuYXBwZW5kVG8oJGkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICBzd2l0Y2g6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxkaXY+Jyk7XG4gICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdmFyICRsYmwgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgICAgdmFyICRvcHQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAgICAgICAudmFsKCdzd2l0Y2gtJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wKVxuICAgICAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAgICRvcHQuYXBwZW5kVG8oJGxibCk7XG4gICAgICAgICRsYmwuYXBwZW5kKGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUpO1xuICAgICAgICAkbGJsLmFwcGVuZFRvKCRpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgcmVjdXJzaXZlOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpO1xuXG4gICAgICB2YXIgJGxibDEgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICB2YXIgJG9wdDEgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ3JhZGlvJylcbiAgICAgICAgICAgIC52YWwoJ3RydWUnKVxuICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJG9wdDEuYXBwZW5kVG8oJGxibDEpO1xuICAgICAgJGxibDEuYXBwZW5kKCdJbmRpdmlkdWFsIGZlYXR1cmVzJyk7XG5cbiAgICAgIHZhciAkbGJsMiA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgIHZhciAkb3B0MiA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAgICAgLnZhbCgnZmFsc2UnKVxuICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJG9wdDIuYXBwZW5kVG8oJGxibDIpO1xuICAgICAgJGxibDIuYXBwZW5kKCdFbnRpcmUgY29sbGVjdGlvbicpO1xuXG4gICAgICAkbGJsMS5hcHBlbmRUbygkaSk7XG4gICAgICAkbGJsMi5hcHBlbmRUbygkaSk7XG5cbiAgICAgIHJldHVybiAkaTtcbiAgICB9XG4gIH07XG5cbiAgLy8gZGMuZm9ybS5nZXRWYWx1ZXMgPSBmdW5jdGlvbigkZm9ybSkge1xuICAvLyAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgLy8gICBjb25zb2xlLmxvZygkZm9ybSk7XG4gIC8vICAgcmV0dXJuIHZhbHVlcztcbiAgLy8gfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5sYXllcmxpc3QgPSB7fTtcbiAgZGMubGF5ZXJsaXN0LmVsZW1zID0ge307XG5cbiAgZGMubGF5ZXJsaXN0LmluaXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtID0gJCgnPG9sPicpLmFkZENsYXNzKG5hbWUpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChkYy5sYXllcmxpc3QuJGVsZW0pO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5oYXNDbGFzcyhuYW1lKSkge1xuICAgICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBsaUhlbHBlciA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItaGVscCcpXG4gICAgICAuaHRtbCgnV2VsY29tZSB0byA8c3Ryb25nPmRyb3BjaG9wPC9zdHJvbmc+ISBIZXJlIHlvdSBjYW4gZHJhZyBhbmQgZHJvcCBmaWxlcyBhbmQgdGhleSB3aWxsIHNob3cgdXAgaW4gdGhlIGxheWVyIGxpc3QgYmVsb3cuPGJyPjxicj5UbyB0aGUgbGVmdCB5b3UgY2FuIHVwbG9hZCBhbmQgc2F2ZSB5b3VyIGZpbGVzIG9yIDxhIGhyZWY9XCIvP2dpc3Q9MDkxMjljMjBlYzAyMGI4M2JmODVcIj5hZGQgZXhhbXBsZSBkYXRhPC9hPiBvciB0aGUgPGEgaHJlZj1cIi8/Z2lzdD1kMDY2YjU3MmU4YThhZDJiNmQxNlwiPlVTIFN0YXRlczwvYT4uPGJyPjxicj5UbyB0aGUgcmlnaHQgeW91XFwnbGwgbm90aWNlIHNvbWUgZ2Vvc3BhdGlhbCBvcGVyYXRpb25zIHRoYXQgYmVjb21lIGF2YWlsYWJsZSBiYXNlZCBvbiBzZWxlY3Rpbmcgc3BlY2lmaWMgbGF5ZXJzLicgKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0uYXBwZW5kKGxpSGVscGVyKTtcblxuICAgIHZhciB0b2dnbGVMYXllcnMgPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLXRvZ2dsZUFsbCcpXG4gICAgICAuaHRtbCgnPGxhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPlRvZ2dsZSBhbGwgbGF5ZXJzPC9sYWJlbD4nKTtcbiAgICB0b2dnbGVMYXllcnMub24oJ2NoYW5nZScsIGRjLmxheWVybGlzdC50b2dnbGVBbGwpO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQodG9nZ2xlTGF5ZXJzKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjphZGRlZCcsIGRjLmxheWVybGlzdC5hZGRMYXllckxpc3RJdGVtKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlZCcsIGRjLmxheWVybGlzdC5yZW1vdmVMYXllckxpc3RJdGVtKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVuYW1lZCcsIGRjLmxheWVybGlzdC5yZW5hbWUpO1xuICB9O1xuXG4gIGRjLmxheWVybGlzdC5yZW5hbWUgPSBmdW5jdGlvbihldmVudCwgc3RhbXAsIG5ld05hbWUpIHtcbiAgICAkKCdbZGF0YS1zdGFtcD0nK3N0YW1wKyddJykuZmluZCgnLmxheWVyLW5hbWUnKS50ZXh0KG5ld05hbWUpO1xuICB9O1xuXG4gIC8vIHRyaWdnZXJlZCBpbiBkcm9wY2hvcC5qc1xuICBkYy5sYXllcmxpc3QuYWRkTGF5ZXJMaXN0SXRlbSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIHZhciBsYXllcmxpc3RJdGVtID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci1lbGVtZW50JykuYXR0cignZGF0YS1zdGFtcCcsIGxheWVyLnN0YW1wKTtcbiAgICB2YXIgbGF5ZXJEaXYgPSAkKCc8ZGl2PicpXG4gICAgICAuYWRkQ2xhc3MoJ2xheWVyLW5hbWUgbGF5ZXItbmV3JylcbiAgICAgIC50ZXh0KGxheWVyLm5hbWUpXG4gICAgICAuZGVsYXkoMzAwMClcbiAgICAgIC5xdWV1ZShmdW5jdGlvbihuZXh0KSB7XG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2xheWVyLW5ldycpO1xuICAgICAgfSk7XG5cblxuICAgIHZhciBsYXllclR5cGUgPSAkKCc8c3Bhbj4nKS5hZGRDbGFzcygnbGF5ZXItdHlwZS1pbWFnZSBzcHJpdGUgc3ByaXRlLWxheWVyLScrbGF5ZXJUeXBlSWNvbihsYXllci50eXBlKSk7XG4gICAgdmFyIGNoZWNrYm94ID0gJCgnPGlucHV0PicpLmFkZENsYXNzKCdsYXllci10b2dnbGUnKS5wcm9wKHsndHlwZSc6ICdjaGVja2JveCcsICdjaGVja2VkJzogdHJ1ZX0pO1xuICAgIHZhciByZW1vdmUgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdsYXllci1hY3Rpb24gbGF5ZXItcmVtb3ZlJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiPjwvaT4nKTtcbiAgICB2YXIgZHVwbGljYXRlID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbGF5ZXItYWN0aW9uIGxheWVyLWR1cGxpY2F0ZScpLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtZmlsZXMtb1wiPjwvaT4nKTtcblxuICAgIGR1cGxpY2F0ZS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmR1cGxpY2F0ZScsIFskKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgcmVtb3ZlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlJywgWyQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICBkYy51dGlsLnVwZGF0ZVNlYXJjaCgpO1xuICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBjaGVja2JveC5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgLy8gdHJpZ2dlciBsYXllcjpzaG93XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNob3cnLCBbbGF5ZXJdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmhpZGUnLCBbbGF5ZXJdKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxheWVyRGl2Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgIC8vIGNoZWNrIGZvciBrZXlzIGJlaW5nIGhlbGQgZm9yIHNwZWNpYWwgc2VsZWN0aW9uXG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgLy8gc2VsZWN0IGFsbCBsYXllcmVzIGluIGJldHdlZW4gcHJldmlvdXMgdGFyZ2V0IGFuZCB0YXJnZXRcbiAgICAgICAgLy8gbm90ZTogZG9uJ3QgdW5zZWxlY3QgbGF5ZXJzIGFscmVhZHkgc2VsZWN0ZWQsIGp1c3QgYWRkIHRvIHNlbGVjdGlvblxuICAgICAgICB2YXIgdG9TZWxlY3QgPSBbXTtcbiAgICAgICAgdmFyIHRvID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIGZyb20gPSBkYy5sYXllcmxpc3QuX2xhc3RTZWxlY3RlZDtcbiAgICAgICAgdmFyIHRvQ291bnQsIGZyb21Db3VudDtcblxuICAgICAgICAkKCcubGF5ZXItZWxlbWVudCcpLmVhY2goZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHZhciBjaGVjayA9ICQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIHZhciB0b1N0YW1wID0gdG8ucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIHZhciBmcm9tU3RhbXAgPSBmcm9tLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICBpZiAoY2hlY2sgPT09IHRvU3RhbXApIHRvQ291bnQgPSBlO1xuICAgICAgICAgIGlmIChjaGVjayA9PT0gZnJvbVN0YW1wKSBmcm9tQ291bnQgPSBlO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodG9Db3VudCA+IGZyb21Db3VudCkge1xuICAgICAgICAgIC8vIGxvb3AgdXBcbiAgICAgICAgICAkKCcubGF5ZXItZWxlbWVudCcpLmVhY2goZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgaWYgKGwgPj0gZnJvbUNvdW50ICYmIGwgPD0gdG9Db3VudCApIHtcbiAgICAgICAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdExheWVyKCQodGhpcykuZmluZCgnLmxheWVyLW5hbWUnKSwgZGMubGF5ZXJzLmxpc3RbJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKCcubGF5ZXItZWxlbWVudCcpLmVhY2goZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgaWYgKGwgPCBmcm9tQ291bnQgJiYgbCA+PSB0b0NvdW50ICkge1xuICAgICAgICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIoJCh0aGlzKS5maW5kKCcubGF5ZXItbmFtZScpLCBkYy5sYXllcnMubGlzdFskKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgICAgLy8gYWRkL3JlbW92ZSBzZWxlY3RlZCBsYXllciB0byBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0VG9nZ2xlKCQodGhpcyksIGxheWVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNsZWFyIHNlbGVjdGlvbiBhbmQgc2VsZWN0IHRhcmdldFxuICAgICAgICBkYy5sYXllcmxpc3QuY2xlYXJTZWxlY3Rpb24oJCh0aGlzKSwgbGF5ZXIpO1xuICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0VG9nZ2xlKCQodGhpcyksIGxheWVyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxheWVyRGl2Lm9uKCdkYmxjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBkYy5vcHMuZmlsZS5leHRlbnQuZXhlY3V0ZSgpO1xuICAgIH0pO1xuXG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQobGF5ZXJEaXYpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGNoZWNrYm94KTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChsYXllclR5cGUpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKHJlbW92ZSk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoZHVwbGljYXRlKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0uYXBwZW5kKGxheWVybGlzdEl0ZW0pO1xuXG4gICAgZGMubGF5ZXJsaXN0LmVsZW1zW2xheWVyLnN0YW1wXSA9IGxheWVybGlzdEl0ZW07XG5cbiAgICAvLyBoaWRlIGhlbHBlciB0ZXh0XG4gICAgJCgnLmxheWVyLWhlbHAnKS5oaWRlKCk7XG4gICAgJCgnLmxheWVyLXRvZ2dsZUFsbCcpLnNob3coKTtcbiAgfTtcblxuICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIgPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgaWYgKCEkaXRlbS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9XG4gIH07XG4gIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUgPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgaWYgKCRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAkaXRlbS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnVuc2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRpdGVtLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6c2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfVxuICAgIGRjLmxheWVybGlzdC5fbGFzdFNlbGVjdGVkID0gJGl0ZW07XG4gIH07XG4gIGRjLmxheWVybGlzdC5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBsYXllclR5cGVJY29uKHR5cGUpIHtcbiAgICB2YXIgaWNvbjtcbiAgICBzd2l0Y2godHlwZSkge1xuICAgICAgY2FzZSAnRmVhdHVyZUNvbGxlY3Rpb24nOlxuICAgICAgICBpY29uID0gJ2ZlYXR1cmVjb2xsZWN0aW9uJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPFBvaW50Pic6XG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpUG9pbnQ+JzpcbiAgICAgICAgaWNvbiA9ICdwb2ludCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxMaW5lU3RyaW5nPic6XG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpTGluZVN0cmluZz4nOlxuICAgICAgICBpY29uID0gJ2xpbmUnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8UG9seWdvbj4nOlxuICAgICAgY2FzZSAnRmVhdHVyZTxNdWx0aVBvbHlnb24+JzpcbiAgICAgICAgaWNvbiA9ICdwb2x5Z29uJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj4nOlxuICAgICAgICBpY29uID0gJ2dlb20nO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGljb24gPSAnZGVmYXVsdCc7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gaWNvbjtcbiAgfVxuXG4gIGRjLmxheWVybGlzdC50b2dnbGVBbGwgPSBmdW5jdGlvbihldmVudCkge1xuICAgIC8vIHR1cm4gdGhlbSBvblxuICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0JykucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICBmb3IgKHZhciBpIGluIGRjLmxheWVycy5saXN0KSB7XG4gICAgICAgIGVsZW1Ub2dnbGUoZGMubGF5ZXJzLmxpc3RbaV0uc3RhbXAsIHRydWUpO1xuICAgICAgfVxuICAgIC8vIHR1cm4gdGhlbSBvZmZcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgbyBpbiBkYy5sYXllcnMubGlzdCkge1xuICAgICAgICBlbGVtVG9nZ2xlKGRjLmxheWVycy5saXN0W29dLnN0YW1wLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWxlbVRvZ2dsZShzdGFtcCwgYm9vbCkge1xuICAgICAgJCgnLmxheWVyLWVsZW1lbnRbZGF0YS1zdGFtcD0nK3N0YW1wKyddJylcbiAgICAgICAgLmZpbmQoJy5sYXllci10b2dnbGUnKVxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIGJvb2wpXG4gICAgICAgIC50cmlnZ2VyKCdjaGFuZ2UnKTsgLy8gc2V0cyBvZmYgYSBjaGFpbiByZWFjdGlvblxuICAgIH1cbiAgfTtcblxuICBkYy5sYXllcmxpc3QucmVtb3ZlTGF5ZXJMaXN0SXRlbSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5mYWRlT3V0KDMwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIGRjLmxheWVybGlzdC5lbGVtc1tzdGFtcF07XG5cbiAgICAgIC8vIHNob3cgaGVscGVyIHRleHQgaWYgbm8gbGF5ZXJzIGV4aXN0XG4gICAgICAvLyB0aGlzIGhhcyB0byBjaGVjayBpbnNpZGUgc2luY2UgdGhlcmUgaXMgYSAzMDAgbXMgZGVsYXkgd2l0aCB0aGUgZmFkZVxuICAgICAgaWYgKCQoJy5sYXllci1lbGVtZW50JykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICQoJy5sYXllci1oZWxwJykuc2hvdygpO1xuICAgICAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuaGlkZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVycyA9IHt9O1xuICBkYy5sYXllcnMubGlzdCA9IHt9O1xuXG4gIGRjLmxheWVycy5wcmVwYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2ZpbGU6YWRkZWQnLCBkYy5sYXllcnMuYWRkKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlJywgZGMubGF5ZXJzLnJlbW92ZSk7XG4gICAgJChkYykub24oJ2xheWVyOmR1cGxpY2F0ZScsIGRjLmxheWVycy5kdXBsaWNhdGUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWUnLCBkYy5sYXllcnMucmVuYW1lKTtcbiAgfTtcblxuLyoqXG4gKiBBZGQgYSBsYXllciB0byB0aGUgbGF5ZXJzIGxpc3QgYW5kIHRyaWdnZXIgbGF5ZXI6YWRkZWQgZm9yIHN1YnNjcmliZXJzIHRvIHBpY2sgdXAuXG4gKiBAcGFyYW0ge29iamVjdH0gZXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSBmaWxlIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGUgYmxvYiB0byBiZSBjb252ZXJ0ZWQgd2l0aCBKU09OLnBhcnNlKClcbiAqL1xuICBkYy5sYXllcnMuYWRkID0gZnVuY3Rpb24oZXZlbnQsIG5hbWUsIGJsb2IsIGx0eXBlLCB1cmwpIHtcbiAgICBpZiAoYmxvYi50eXBlID09PSBcIlRvcG9sb2d5XCIpIHtcbiAgICAgIGJsb2IgPSB0b3BvanNvbi5jbGllbnQuZmVhdHVyZShibG9iLCBibG9iLm9iamVjdHNbT2JqZWN0LmtleXMoYmxvYi5vYmplY3RzKVswXV0pO1xuICAgIH1cbiAgICBcbiAgICB2YXIgbCA9IGRjLmxheWVycy5tYWtlTGF5ZXIobmFtZSwgYmxvYik7XG4gICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0gPSBsO1xuXG4gICAgaWYgKGx0eXBlICYmIHVybCkge1xuICAgICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0ubHR5cGUgPSBsdHlwZTtcbiAgICAgIGRjLmxheWVycy5saXN0W2wuc3RhbXBdLnVybCA9IHVybDtcbiAgICB9XG5cbiAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnPHN0cm9uZz4nK2wubmFtZSsnPC9zdHJvbmc+IGhhcyBiZWVuIGFkZGVkIScsIDM1MDApO1xuXG4gICAgLy8gdHJpZ2dlciBsYXllcjphZGRlZFxuICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmFkZGVkJywgW2xdKTtcblxuICAgIC8vIFVwZGF0ZSBVUkwsIGlmIGFwcGxpY2FibGVcbiAgICBpZiAobHR5cGUgJiYgdXJsKSB7XG4gICAgICBkYy51dGlsLnVwZGF0ZVNlYXJjaCgpO1xuICAgIH1cblxuICB9O1xuXG4vKipcbiAqIFJlbW92ZSBhIGxheWVyLCB3aGljaCB0cmlnZ2VycyBsYXllcjpyZW1vdmVkIGZvciB0aGUgcmVzdCBvZiB0aGUgYXBwXG4gKiBAcGFyYW0ge3N0cmluZ30gbGF5ZXIgc3RhbXBcbiAqL1xuICBkYy5sYXllcnMucmVtb3ZlID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgLy8gdHJpZ2dlciBsYXllcjpyZW1vdmVkXG4gICAgdHJ5IHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZWQnLCBbc3RhbXBdKTtcbiAgICAgIGRjLm5vdGlmeSgnaW5mbycsICc8c3Ryb25nPicgKyBkYy5sYXllcnMubGlzdFtzdGFtcF0ubmFtZSArICc8L3N0cm9uZz4gaGFzIGJlZW4gcmVtb3ZlZC4nKTtcbiAgICAgIGRlbGV0ZSBkYy5sYXllcnMubGlzdFtzdGFtcF07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gcmVtb3ZpbmcgdGhlIGxheWVyLicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICB9O1xuXG4gIGRjLmxheWVycy5kdXBsaWNhdGUgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICB2YXIgbHlyID0gZGMubGF5ZXJzLmxpc3Rbc3RhbXBdO1xuICAgIC8vIG5lZWQgdG8gY3JlYXRlIG5ldyBsYXllciBzbyB3ZSBjYW4gZ2V0IGEgdW5pcWUgTC5zdGFtcCgpXG4gICAgZGMubGF5ZXJzLmFkZCh7fSwgJ2NvcHlfJytseXIubmFtZSwgbHlyLnJhdyk7XG4gIH07XG5cbiAgZGMubGF5ZXJzLnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllciwgbmV3TmFtZSkge1xuICAgIC8vIHJlbmFtZSBpbiBsYXllciBvYmplY3RcbiAgICBkYy5sYXllcnMubGlzdFtsYXllci5zdGFtcF0ubmFtZSA9IG5ld05hbWU7XG5cbiAgICAvLyByZW5hbWUgaW4gbGF5ZXJsaXN0XG4gICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVuYW1lZCcsIFtsYXllci5zdGFtcCwgbmV3TmFtZV0pO1xuICB9O1xuXG4gIGRjLmxheWVycy5tYWtlTGF5ZXIgPSBmdW5jdGlvbihuYW1lLCBqc29uKSB7XG4gICAgdmFyIGdlb2pzb24gPSBqc29uO1xuICAgIC8vIGlmIChqc29uLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicgJiYganNvbi5mZWF0dXJlcy5sZW5ndGggPT09IDEpIHtcbiAgICAvLyAgIGdlb2pzb24gPSBkYy51dGlsLnVuY29sbGVjdChqc29uKTtcbiAgICAvLyB9XG5cbiAgICB2YXIgZmwgPSBMLm1hcGJveC5mZWF0dXJlTGF5ZXIoZ2VvanNvbik7XG4gICAgdmFyIGxheWVyID0ge1xuICAgICAgbmFtZTogZGMudXRpbC5yZW1vdmVGaWxlRXh0ZW5zaW9uKG5hbWUpLFxuICAgICAgc3RhbXA6IEwuc3RhbXAoZmwpLFxuICAgICAgcmF3OiBnZW9qc29uLFxuICAgICAgdHlwZTogZ2V0VHlwZShnZW9qc29uKSxcbiAgICAgIGZlYXR1cmVsYXllcjogZmwsXG4gICAgICBkYXRlQWRkZWQ6IG5ldyBEYXRlKClcbiAgICB9O1xuICAgIHJldHVybiBsYXllcjtcbiAgfTtcblxuICBmdW5jdGlvbiBnZXRUeXBlKGdqKSB7XG4gICAgaWYgKGdqLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgIHJldHVybiAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2oudHlwZSArICc8JyArIGdqLmdlb21ldHJ5LnR5cGUgKyAnPic7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubWFwID0ge307XG5cbiAgZGMubWFwLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBkYy5tYXAuJGVsZW0gPSAkKCc8ZGl2PicpLnByb3AoJ2lkJywgJ2Ryb3BjaG9wLW1hcCcpLmFkZENsYXNzKCdtYXAnKTtcbiAgICBkYy4kZWxlbS5hcHBlbmQoZGMubWFwLiRlbGVtKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgZGMubWFwLnJlbW92ZUxheWVyKTtcblxuICAgIF9tYWtlTWFwKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gX21ha2VNYXAoKSB7XG4gICAgZGMubWFwLnRva2VuID0gTC5tYXBib3guYWNjZXNzVG9rZW4gPSAncGsuZXlKMUlqb2ljM1p0WVhSMGFHVjNjeUlzSW1FaU9pSlZNVWxVUjB4ckluMC5Od2VTX0F0dGpzd3RONXdSdVdDU05BJztcbiAgICBkYy5tYXAubSA9IEwubWFwYm94Lm1hcCgnZHJvcGNob3AtbWFwJywgbnVsbCwge1xuICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLFxuICAgICAgd29ybGRDb3B5SnVtcDogdHJ1ZVxuICAgIH0pLnNldFZpZXcoWzAsMF0sIDMpO1xuXG4gICAgLy8gc2V0cyB0aGUgbG9jYXRpb24gb2YgdGhlIHpvb20gYnV0dG9ucyB0byB0aGUgdG9wIHJpZ2h0XG4gICAgTC5jb250cm9sLnpvb20oe1xuICAgICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIEwubWFwYm94Lmdlb2NvZGVyQ29udHJvbCgnbWFwYm94LnBsYWNlcycsIHtcbiAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICB2YXIgYmFzZUxheWVycyA9IHtcbiAgICAgIFwiTWFwYm94IFN0cmVldHNcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guc3RyZWV0cycpLFxuICAgICAgXCJNYXBib3ggT3V0ZG9vcnNcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3gub3V0ZG9vcnMnKSxcbiAgICAgIFwiTWFwYm94IExpZ2h0XCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LmxpZ2h0JyksXG4gICAgICBcIk1hcGJveCBEYXJrXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LmRhcmsnKSxcbiAgICAgIFwiTWFwYm94IFNhdGVsbGl0ZVwiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5zYXRlbGxpdGUnKVxuICAgIH07XG5cbiAgICBiYXNlTGF5ZXJzWydNYXBib3ggU3RyZWV0cyddLmFkZFRvKGRjLm1hcC5tKTtcbiAgICAvLyBzZXRzIGxvY2F0aW9uIG9mIGJhc2UgbGF5ZXIgY29udHJvbCB0byB0aGUgYm90dG9tIHJpZ2h0XG4gICAgTC5jb250cm9sLmxheWVycyhiYXNlTGF5ZXJzLCB7fSwge1xuICAgICAgcG9zaXRpb246ICdib3R0b21yaWdodCcsXG4gICAgICBjb2xsYXBzZWQ6IGZhbHNlXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgZGMubWFwLmxheWVyZ3JvdXAgPSBMLm1hcGJveC5mZWF0dXJlTGF5ZXIoKTtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6YWRkZWQnLCBkYy5tYXAuYWRkTGF5ZXIpO1xuICAgICQoZGMpLm9uKCdsYXllcjpoaWRlJywgZGMubWFwLmhpZGVMYXllcik7XG4gICAgJChkYykub24oJ2xheWVyOnNob3cnLCBkYy5tYXAuc2hvd0xheWVyKTtcblxuICAgIC8vIC8vIG15IGxvY2F0aW9uIGFzIGxheWVyXG4gICAgLy8gdmFyIGdlb2xvY2F0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZW9sb2NhdGUnKTtcblxuICAgICQoZGMubWFwLm0pLm9uKCdsb2NhdGlvbmZvdW5kJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGRhdGEgPSBlLm9yaWdpbmFsRXZlbnQ7XG4gICAgICBkYy5tYXAubS5maXRCb3VuZHMoZGF0YS5ib3VuZHMpO1xuXG4gICAgICB2YXIgbHlyID0ge1xuICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAgICAgICBjb29yZGluYXRlczogW2RhdGEubGF0bG5nLmxuZywgZGF0YS5sYXRsbmcubGF0XVxuICAgICAgICB9LFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgJ3RpdGxlJzogJ1RoZXJlIFlvdSBBcmUnLFxuICAgICAgICAgICdtYXJrZXItY29sb3InOiAnIzIwNzE3OCcsXG4gICAgICAgICAgJ21hcmtlci1zeW1ib2wnOiAnaGVhcnQnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbJ3lvdXIgbG9jYXRpb24nLCBseXJdKTtcbiAgICB9KTtcblxuICAgICQoZGMubWFwLm0pLm9uKCdsb2NhdGlvbmVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gZmluZGluZyB5b3VyIGxvY2F0aW9uLicsIDMwMDApO1xuICAgIH0pO1xuXG4gICAgLy8gLy8gT25jZSB3ZSd2ZSBnb3QgYSBwb3NpdGlvbiwgem9vbSBhbmQgY2VudGVyIHRoZSBtYXBcbiAgICAvLyAvLyBvbiBpdCwgYW5kIGFkZCBhIHNpbmdsZSBtYXJrZXIuXG4gICAgLy8gdGhpcy5fbWFwLm9uKCdsb2NhdGlvbmZvdW5kJywgZnVuY3Rpb24oZSkge1xuICAgIC8vICAgdGhpcy5fbWFwLmZpdEJvdW5kcyhlLmJvdW5kcyk7XG5cblxuICAgIC8vICAgbXlMYXllci5zZXRHZW9KU09OKHtcbiAgICAvLyAgICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgIC8vICAgICBnZW9tZXRyeToge1xuICAgIC8vICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgLy8gICAgICAgY29vcmRpbmF0ZXM6IFtlLmxhdGxuZy5sbmcsIGUubGF0bG5nLmxhdF1cbiAgICAvLyAgICAgfSxcbiAgICAvLyAgICAgcHJvcGVydGllczoge1xuICAgIC8vICAgICAgICd0aXRsZSc6ICdUaGVyZSBZb3UgQXJlJyxcbiAgICAvLyAgICAgICAnbWFya2VyLWNvbG9yJzogJyMyMDcxNzgnLFxuICAgIC8vICAgICAgICdtYXJrZXItc3ltYm9sJzogJ2hlYXJ0J1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9KTtcblxuICAgIC8vICAgLy8gQW5kIGhpZGUgdGhlIGdlb2xvY2F0aW9uIGJ1dHRvblxuICAgIC8vICAgLy9nZW9sb2NhdGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChnZW9sb2NhdGUpO1xuICAgIC8vIH0uYmluZCh0aGlzKSk7XG5cbiAgICAvLyAvLyBJZiB0aGUgdXNlciBjaG9vc2VzIG5vdCB0byBhbGxvdyB0aGVpciBsb2NhdGlvblxuICAgIC8vIC8vIHRvIGJlIHNoYXJlZCwgZGlzcGxheSBhbiBlcnJvciBtZXNzYWdlLlxuICAgIC8vIHRoaXMuX21hcC5vbignbG9jYXRpb25lcnJvcicsIGZ1bmN0aW9uKCkge1xuICAgIC8vICAgZ2VvbG9jYXRlLmlubmVySFRNTCA9ICdQb3NpdGlvbiBjb3VsZCBub3QgYmUgZm91bmQnO1xuICAgIC8vIH0pO1xuXG5cbiAgfVxuXG4gIGRjLm1hcC5jb3VudCA9IDA7XG5cbiAgZGMubWFwLmFkZExheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGZsID0gbGF5ZXIuZmVhdHVyZWxheWVyO1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZExheWVyKGZsKTtcblxuICAgIC8vIGNyZWF0ZSBwb3B1cCB0YWJsZSBmb3IgZWFjaCBmZWF0dXJlXG4gICAgZmwuZWFjaExheWVyKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICB2YXIgY29udGVudCA9ICc8dGFibGUgY2xhc3M9XCJkcm9wY2hvcC10YWJsZVwiPjx0cj48dGg+UHJvcGVydHk8L3RoPjx0aD5EYXRhPC90aD48L3RyPic7XG5cbiAgICAgIGlmIChsYXllci5mZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBsYXllci5mZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICBjb250ZW50ICs9ICc8dHI+PHRkPjxzdHJvbmc+JyArIHByb3AgKyAnPC9zdHJvbmc+PC90ZD48dGQ+JyArIGxheWVyLmZlYXR1cmUucHJvcGVydGllc1twcm9wXSArICc8L3RkPjwvdHI+JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudCArPSAnPHA+VGhlcmUgYXJlIG5vIHByb3BlcnRpZXMgc2V0IGZvciB0aGlzIGZlYXR1cmUuPC9wPic7XG4gICAgICB9XG4gICAgICBjb250ZW50ICs9ICc8L3RhYmxlPic7XG5cbiAgICAgIGxheWVyLmJpbmRQb3B1cChMLnBvcHVwKHtcbiAgICAgICAgbWF4V2lkdGg6IDQ1MCxcbiAgICAgICAgbWF4SGVpZ2h0OiAyMDAsXG4gICAgICAgIGF1dG9QYW5QYWRkaW5nOiBbNDUsIDQ1XSxcbiAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGNob3AtcG9wdXAnXG4gICAgICB9LCBsYXllcikuc2V0Q29udGVudChjb250ZW50KSk7XG4gICAgfSk7XG5cbiAgfTtcblxuICBkYy5tYXAuaGlkZUxheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAucmVtb3ZlTGF5ZXIobGF5ZXIuZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICBkYy5tYXAuc2hvd0xheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkTGF5ZXIobGF5ZXIuZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICBkYy5tYXAucmVtb3ZlTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5yZW1vdmVMYXllcihkYy5sYXllcnMubGlzdFtzdGFtcF0uZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm5vdGlmeSA9IGZ1bmN0aW9uKHR5cGUsIHRleHQsIHRpbWUpIHtcbiAgICB2YXIgbm90ZSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ25vdGlmaWNhdGlvbicpXG4gICAgICAuYWRkQ2xhc3ModHlwZSlcbiAgICAgIC5odG1sKHRleHQpO1xuXG4gICAgLy8gYHRpbWVgIGNhbiBlcXVhbCAnY2xvc2UnIGluIG9yZGVyIHRvIGNyZWF0ZSBhIGNsb3NlIGJ1dHRvblxuICAgIGlmICh0aW1lID09PSAnY2xvc2UnKSB7XG5cbiAgICAgIHZhciAkY2xvc2UgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdub3RpZmljYXRpb24tY2xvc2UnKVxuICAgICAgICAucHJvcCgndHlwZScsICdidXR0b24nKVxuICAgICAgICAuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiPjwvaT4nKTtcblxuICAgICAgJGNsb3NlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlKCk7XG4gICAgICB9KTtcblxuICAgICAgJChub3RlKS5hcHBlbmQoJGNsb3NlKTtcbiAgICAgICQoZGMuJGVsZW0pLmFwcGVuZChub3RlKTtcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgICQoZGMuJGVsZW0pLmFwcGVuZChub3RlKTtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgbm90ZS5yZW1vdmUoKTtcbiAgICAgIH0sIHRpbWUgfHwgMzAwMCk7XG5cbiAgICB9XG5cbiAgICBcblxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5vcHMgPSBkYy5vcHMgfHwge307XG5cbiAgZGMub3BzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBidWlsZCBvcHMuZ2VvIGNvbnRhaW5lclxuICAgIHZhciBnZW9Db250YWluZXIgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdvcGVyYXRpb25zLWdlbycpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChnZW9Db250YWluZXIpO1xuXG4gICAgLy8gY3JlYXRlIGdlbyBidXR0b25zICYgZm9ybXNcbiAgICBmb3IgKHZhciBnZW9PcCBpbiBkYy5vcHMuZ2VvKSB7XG4gICAgICB2YXIgZ2VvQnRuID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnb3BlcmF0aW9uIG9wZXJhdGlvbi1nZW8gb3BlcmF0aW9uLWluYWN0aXZlJylcbiAgICAgICAgLmh0bWwoJzxoND4nICsgZ2VvT3AgKyAnPC9oND48cD4nICsgZGMub3BzLmdlb1tnZW9PcF0uZGVzY3JpcHRpb24gKyAnPC9wPicpXG4gICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIC5hdHRyKCdkYXRhLW9wZXJhdGlvbicsIGdlb09wKTtcbiAgICAgIGdlb0J0bi5vbignY2xpY2snLCBfZ2VvQnRuQ2xpY2spO1xuXG4gICAgICBnZW9Db250YWluZXIuYXBwZW5kKGdlb0J0bik7XG4gICAgfVxuXG4gICAgJChkYykub24oJ2xheWVyOnNlbGVjdGVkJywgZGMub3BzLmdlb0NoZWNrKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6dW5zZWxlY3RlZCcsIGRjLm9wcy5nZW9DaGVjayk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpnZW8nLCBkYy5vcHMuZ2VvRXhlY3V0ZSk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtZ2lzdCcsIGRjLm9wcy5maWxlWydsb2FkLWdpc3QnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLXVybCcsIGRjLm9wcy5maWxlWydsb2FkLXVybCddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtb3ZlcnBhc3MnLCBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtYXJjZ2lzJywgZGMub3BzLmZpbGVbJ2xvYWQtYXJjZ2lzJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6cmVuYW1lJywgZGMub3BzLmZpbGUucmVuYW1lLmNhbGxiYWNrKTtcblxuICAgIGRjLm9wcy5zZXR1cCA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2ltcG9ydCcsXG4gICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+JyxcbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICd1cGxvYWQnLFxuICAgICAgICAgICdsb2FkLXVybCcsXG4gICAgICAgICAgJ2xvYWQtZ2lzdCcsXG4gICAgICAgICAgJ2xvYWQtYXJjZ2lzJyxcbiAgICAgICAgICAnbG9hZC1vdmVycGFzcycsXG4gICAgICAgICAgJ2xvY2F0aW9uJ1xuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnU2F2ZScsXG4gICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZsb3BweS1vXCI+PC9pPicsXG4gICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAnc2F2ZS1nZW9qc29uJyxcbiAgICAgICAgICAnc2F2ZS10b3BvanNvbicsXG4gICAgICAgICAgJ3NhdmUtc2hhcGVmaWxlJ1xuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnR2VvIEFjdGlvbnMnLFxuICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS13cmVuY2hcIj48L2k+JyxcbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICdleHRlbnQnLFxuICAgICAgICAgICdleHBhbmQnLFxuICAgICAgICAgICdjb21iaW5lJyxcbiAgICAgICAgICAncmVuYW1lJyxcbiAgICAgICAgICAncmVtb3ZlJyxcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgICdpbmZvJ1xuICAgIF07XG5cbiAgICAvLyBzZXR1cCBvcHMgZmlsZVxuICAgIHZhciBsZWZ0TWVudSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLW1lbnUtbGVmdCcpO1xuICAgIHZhciBzZXR1cCA9IGRjLm9wcy5zZXR1cDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2V0dXAubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBhY3Rpb24gPSBzZXR1cFtpXTtcbiAgICAgIGlmICh0eXBlb2Ygc2V0dXBbaV0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmKGRjLm9wcy5maWxlW2FjdGlvbl0udHlwZSA9PT0gJ2JyZWFrJykge1xuICAgICAgICAgIHZhciAkYnJlYWtTcGFjZSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uLWJyZWFrJyk7XG4gICAgICAgICAgbGVmdE1lbnUuYXBwZW5kKCRicmVha1NwYWNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZWZ0TWVudS5hcHBlbmQoYnVpbGRNZW51QnV0dG9uKGFjdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGJ1aWxkIGEgY29sbGFwc2VhYmxlIG1lbnUgXCJidXR0b25cIlxuICAgICAgICB2YXIgY29sbGFwc2VCdG4gPSAkKCc8ZGl2PicpXG4gICAgICAgICAgLmFkZENsYXNzKCdtZW51LWFjdGlvbiBtZW51LWNvbGxhcHNlJylcbiAgICAgICAgICAuaHRtbChzZXR1cFtpXS5pY29uKTtcbiAgICAgICAgaWYgKHNldHVwW2ldLm5hbWUgPT09ICdpbXBvcnQnKSBjb2xsYXBzZUJ0bi5hZGRDbGFzcygnbWVudS1pbXBvcnQnKTtcblxuICAgICAgICB2YXIgY29sbGFwc2VJbm5lciA9ICQoJzxkaXY+JylcbiAgICAgICAgICAuYWRkQ2xhc3MoJ21lbnUtY29sbGFwc2UtaW5uZXInKTtcblxuICAgICAgICAvLyBsb29wIHRocm91Z2ggZWFjaCBhY3Rpb24gYW5kIGJ1aWxkIGEgYnV0dG9uIGZvciBpdCwganVzdCBsaWtlIGFib3ZlLFxuICAgICAgICAvLyBidXQgYXBwZW5kIGl0IHRvIHRoZSBtZW51LWNvbGxhcHNlLWlubmVyIGVsZW1lbnRcbiAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBzZXR1cFtpXS5hY3Rpb25zLmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgdmFyIGFjdG4gPSBkYy5vcHMuc2V0dXBbaV0uYWN0aW9uc1thXTtcbiAgICAgICAgICBjb2xsYXBzZUlubmVyLmFwcGVuZChidWlsZE1lbnVCdXR0b24oYWN0bikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbGxhcHNlQnRuLmFwcGVuZChjb2xsYXBzZUlubmVyKTtcblxuICAgICAgICAvLyBhcHBlbmQgdGhlIGVudGlyZSBjb2xsYXBzZUJ0biB0byB0aGUgbGVmdE1lbnVcbiAgICAgICAgbGVmdE1lbnUuYXBwZW5kKGNvbGxhcHNlQnRuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZGMuJGVsZW0uYXBwZW5kKGxlZnRNZW51KTtcblxuICAgIGZ1bmN0aW9uIGJ1aWxkTWVudUJ1dHRvbihhY3Rpb24pIHtcbiAgICAgIHZhciBidXR0b24gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdtZW51LWFjdGlvbicpXG4gICAgICAgIC5odG1sKGRjLm9wcy5maWxlW2FjdGlvbl0uaWNvbiB8fCAnIScpXG4gICAgICAgIC5hdHRyKCdkYXRhLW9wZXJhdGlvbicsIGFjdGlvbilcbiAgICAgICAgLmF0dHIoJ2RhdGEtdG9vbHRpcCcsIGRjLm9wcy5maWxlW2FjdGlvbl0uZGVzY3JpcHRpb24pO1xuICAgICAgICBpZiAoZGMub3BzLmZpbGVbYWN0aW9uXS50eXBlID09PSAnaW5mbycpIGJ1dHRvbi5hZGRDbGFzcygnZHJvcGNob3AtaW5mbycpO1xuICAgICAgYnV0dG9uLm9uKCdjbGljaycsIF9maWxlQnRuQ2xpY2spO1xuICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG4gIH07XG5cbiAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuXG4gIC8qIGlnbm9yaW5nIHRoZXNlIGZ1bmN0aW9ucyBpbiBqc2hpbnQgYmVjYXVzZSB3ZSBhcmUgZ2V0dGluZ1xuICBhbiB1bmVjZXNzYXJ5IHN0cmljdCB2aW9sYXRpb24gd2FybmluZywgYnV0IG91ciB1c2FnZSBvZiBgdGhpc2BcbiAgaXMgcHJvcGVyIGhlcmUuICovXG4gIGZ1bmN0aW9uIF9nZW9CdG5DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIG9wZXJhdGlvbiA9ICQodGhpcykuYXR0cignZGF0YS1vcGVyYXRpb24nKTtcbiAgICAvLyBpZiBvcGVyYXRpb24gcmVxdWlyZXMgbm8gcGFyYW1ldGVycywgZG9uJ3QgcmVuZGVyIGEgZm9ybVxuICAgIGlmICghZGMub3BzLmdlb1tvcGVyYXRpb25dLnBhcmFtZXRlcnMpIHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ29wZXJhdGlvbjpnZW8nLCBbb3BlcmF0aW9uLCBkYy5zZWxlY3Rpb24ubGlzdF0pO1xuICAgIC8vIG90aGVyd2lzZSByZW5kZXIgdGhlIGZvcm1cbiAgICB9IGVsc2Uge1xuICAgICAgJChkYykudHJpZ2dlcignZm9ybTpnZW8nLCBbb3BlcmF0aW9uXSk7XG4gICAgfVxuICB9XG5cblxuICBmdW5jdGlvbiBfZmlsZUJ0bkNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgdHJ5IHtcbiAgICAgIGRjLm9wcy5maWxlW29wZXJhdGlvbl0uZXhlY3V0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGlzIG9wZXJhdGlvbiBkb2VzblxcJ3QgZXhpc3QhJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoganNoaW50IGlnbm9yZTplbmQgKi9cblxuICAvLyBTb3J0IHR1cmYgb3BlcmF0aW9ucyBieSBhdmFpbGFibGlsaXR5IGFuZCBhbHBoYWJldGljYWxseVxuICBmdW5jdGlvbiBfc29ydEdlbygpIHtcblxuICAgIC8vIEdldCBhbGwgb2YgdGhlIHR1cmYgYnV0dG9ucyBhbmQgc29ydCB0aGVtIGFscGhhYmV0aWNhbGx5XG4gICAgdmFyIGFscGhhID0gJCgnLm9wZXJhdGlvbi1nZW8nKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiAoJChiKS5kYXRhKCdvcGVyYXRpb24nKSA8ICQoYSkuZGF0YSgnb3BlcmF0aW9uJykpID8gMSA6IC0xO1xuICAgIH0pO1xuXG4gICAgLy8gR3JhYiBhbGwgdGhlIGFjdGl2ZSBidXR0b25zIGFuZCByZWFwcGVuZCB0aGVtXG4gICAgYWxwaGEuZmlsdGVyKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgIGlmICghKCQoZCkucHJvcCgnZGlzYWJsZWQnKSkpIHsgcmV0dXJuIGQgfVxuICAgIH0pLmFwcGVuZFRvKCcub3BlcmF0aW9ucy1nZW8nKTtcblxuICAgIC8vIEdyYWIgYWxsIHRoZSBpbmFjdGl2ZSBidXR0b25zIGFuZCByZWFwcGVuZCB0aGVtXG4gICAgYWxwaGEuZmlsdGVyKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgIGlmICgkKGQpLnByb3AoJ2Rpc2FibGVkJykpIHsgcmV0dXJuIGQgfVxuICAgIH0pLmFwcGVuZFRvKCcub3BlcmF0aW9ucy1nZW8nKTtcblxuICAgIC8vIFNjcm9sbCB0byB0aGUgdG9wIHRvIGtlZXAgdGhpbmdzIG5pY2VcbiAgICAkKCcub3BlcmF0aW9ucy1nZW8nKS5zY3JvbGxUb3AoMCk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIHR1cmYgZnVuY3Rpb24gYmFzZWQgb24gYnV0dG9uIG9wZXJhdGlvbiBjbGljay5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9yaWdpbmFsIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wZXJhdGlvbiB0byBiZSBleGVjdXRlZCB2aWEgdHVyZlxuICAgKiBAcGFyYW0ge2FycmF5fSBzZXJpZXMgb2YgcGFyYW1ldGVycyB0byBiZSBhcHBsaWVkIHRvIHR1cmYgb3BlcmF0aW9uXG4gICAqL1xuICBkYy5vcHMuZ2VvRXhlY3V0ZSA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24sIHBhcmFtZXRlcnMpIHtcbiAgICB2YXIgcHJlcCA9IGRjLm9wcy5wcmVwYXJlVHVyZlBhcmFtcyhvcGVyYXRpb24sIHBhcmFtZXRlcnMpO1xuICAgIHZhciByZXN1bHQgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBkYy5vcHMuZ2VvW29wZXJhdGlvbl0uZXhlY3V0ZShwcmVwLm9wdGlvbnMpO1xuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ1RoYXQgb3BlcmF0aW9uIGlzblxcJ3QgcG9zc2libGUuIFRyeSBjaGFuZ2luZyB0aGUgb3JkZXIgb2YgeW91ciBzZWxlY3Rpb24uJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtwcmVwLm5hbWUsIHJlc3VsdF0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIHBhcmFtZXRlcnMgZm9yIGV4ZWN1dGluZyB3aXRoaW4gYSB0dXJmIGZ1bmN0aW9uIHVzaW5nIC5hcHBseSgpIC0gcmV0dXJucyBhbiBhcnJheVxuICAgKiBAcGFyYW0ge2FycmF5fSBvcHRpb25zIGZyb20gdGhlIHVzZXIgcGFzc2VkIGZyb20gdGhlIG9yaWdpbmFsIGV2ZW50IHRyaWdnZXJcbiAgICovXG4gIGRjLm9wcy5wcmVwYXJlVHVyZlBhcmFtcyA9IGZ1bmN0aW9uKG9wZXJhdGlvbiwgcGFyYW1zKSB7XG4gICAgdmFyIGRhdGEgPSB7fTtcbiAgICBkYXRhLm9wdGlvbnMgPSBbXTtcblxuICAgIHZhciBnZW9tcyA9IFtdO1xuICAgIHZhciBuYW1lQXJyYXkgPSBbXTtcbiAgICAvLyBnZXQgZ2VvbWV0cnkgYXJyYXkgZnJvbSBzZWxlY3Rpb25cbiAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgIGlmICgkLmluQXJyYXkoJ3N3aXRjaC0nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXAsIHBhcmFtcykgPT09IC0xKSB7XG4gICAgICAgIGdlb21zLnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdlb21zLnVuc2hpZnQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3KTtcbiAgICAgIH1cbiAgICAgIG5hbWVBcnJheS5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUpO1xuICAgIH0pO1xuXG4gICAgLy8gbWVyZ2UgcGFyYW1zIHdpdGggb3B0aW9ucyBhcnJheVxuICAgIGRhdGEub3B0aW9ucyA9ICQubWVyZ2UoZ2VvbXMsIHBhcmFtcyk7XG5cbiAgICAvLyBjcmVhdGUgbmFtZSBhcnJheVxuICAgIGRhdGEubmFtZSA9IGRjLnV0aWwuY29uY2F0KG5hbWVBcnJheSwgJ18nLCBvcGVyYXRpb24pO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgZGMub3BzLmdlb0NoZWNrID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG5cbiAgICAvLyBjaGVjayBzZWxlY3Rpb24gY291bnQgdnMgb3BlcmF0aW9uIG1pbi9tYXhcbiAgICBmb3IgKHZhciBvIGluIGRjLm9wcy5nZW8pIHtcbiAgICAgIHZhciBvcCA9IGRjLm9wcy5nZW9bb107XG4gICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID4gb3AubWF4RmVhdHVyZXMgfHwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoIDwgb3AubWluRmVhdHVyZXMpIHtcbiAgICAgICAgdHVybkl0T2ZmKG8pO1xuICAgICAgICAvLyBkb24ndCBnbyBhbnkgZnVydGhlclxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICAvLyBjaGVjayBvcGVyYXRpb24gYWdhaW5zdCBlYWNoIHNlbGVjdGlvbiBkYXRhIHR5cGVcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGg7IHgrKykge1xuICAgICAgICAgIHZhciBzZWwgPSBkYy5zZWxlY3Rpb24ubGlzdFt4XTtcblxuICAgICAgICAgIC8vIGlmIHRoZSBzZWxlY3Rpb24gdHlwZSBpcyBpbiB0aGUgYXJyYXksIG1hcmsgaXQgYXMgYWN0aXZlIVxuICAgICAgICAgIGlmICgkLmluQXJyYXkoc2VsLnR5cGUsIG9wLnJlcXVpcmVtZW50cy50eXBlcykgPiAtMSB8fCBvcC5yZXF1aXJlbWVudHMuZ2VuZXJhbEZlYXR1cmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHR1cm5JdE9uKG8pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0dXJuSXRPZmYobyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0dXJuSXRPZmYob3ApIHtcbiAgICAgIHZhciBidG4gPSAkKCdbZGF0YS1vcGVyYXRpb249Jysgb3AgKyddJyk7XG4gICAgICBidG4uYWRkQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICAgYnRuLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHVybkl0T24ob3ApIHtcbiAgICAgIHZhciBidG4gPSAkKCdbZGF0YS1vcGVyYXRpb249Jysgb3AgKyddJyk7XG4gICAgICBidG4ucmVtb3ZlQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICAgYnRuLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIH1cblxuICAgIC8vIFNvcnQgdGhlIGxpc3RcbiAgICBfc29ydEdlbygpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuZmlsZSA9IHtcbiAgICB1cGxvYWQ6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnVXBsb2FkIGZyb20geW91ciBjb21wdXRlciAoLmdlb2pzb24pJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXVwbG9hZFwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGluc3BpcmVkIGZyb20gZ2VvanNvbi5pb1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L2dlb2pzb24uaW8vYmxvYi9naC1wYWdlcy9zcmMvdWkvZmlsZV9iYXIuanMjTDM5MFxuICAgICAgICB2YXIgJGJsaW5kSW5wdXQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAgICAgLmF0dHIoJ3R5cGUnLCAnZmlsZScpXG4gICAgICAgICAgICAgIC5hdHRyKCdtdWx0aXBsZScsICd0cnVlJylcbiAgICAgICAgICAgICAgLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKVxuICAgICAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpXG4gICAgICAgICAgICAgIC5jc3MoJ2hlaWdodCcsICcwJylcbiAgICAgICAgICAgICAgLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLmZpbGVzO1xuICAgICAgICAgICAgICAgICQoZmlsZXMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgICAgICAgZGMudXRpbC5yZWFkRmlsZShmaWxlc1tpXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJGJsaW5kSW5wdXQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRibGluZElucHV0KTtcbiAgICAgICAgJGJsaW5kSW5wdXQuY2xpY2soKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtdXJsJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdJbXBvcnQgZmlsZSBmcm9tIGEgVVJMJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpbmtcIj48L2k+JyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1cmwnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonVVJMJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHA6Ly8nLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtdXJsJ10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIHVybCA9IHBhcmFtZXRlcnNbMF07XG4gICAgICAgIGRjLnV0aWwueGhyKHVybCwgZGMub3BzLmZpbGVbbmFtZV0uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAvLyBnZXQgZmlsZW5hbWUgYmFzZWQgb24gdGhlIGVuZCBvZiB0aGUgdXJsIC0gbm90IHN1cmUgaWYgdGhpcyBpcyBzdXN0YWluYWJsZVxuICAgICAgICAgIHZhciBuYW1lID0geGhyLnJlc3BvbnNlVVJMLnN1YnN0cmluZyh4aHIucmVzcG9uc2VVUkwubGFzdEluZGV4T2YoJy8nKSsxKTtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW25hbWUsIGRhdGEsICd1cmwnLCB4aHIucmVzcG9uc2VVUkxdKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHJldHJpZXZlIEdpc3QuIFBsZWFzZSBjaGVjayB5b3VyIFVSTCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLWdpc3QnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0ltcG9ydCBmaWxlcyBmcm9tIEdpc3QnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZ2l0aHViXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZ2lzdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidHaXN0IElEIG9yIFVSTCcsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdodHRwczovL2dpc3QuZ2l0aHViLmNvbS8nXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1naXN0J10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIGdpc3QgPSBwYXJhbWV0ZXJzWzBdLnNwbGl0KCcvJylbcGFyYW1ldGVyc1swXS5zcGxpdCgnLycpLmxlbmd0aC0xXTtcbiAgICAgICAgdmFyIHVybCA9ICdodHRwczovL2FwaS5naXRodWIuY29tL2dpc3RzLycgKyBnaXN0O1xuICAgICAgICBkYy51dGlsLnhocih1cmwsIGRjLm9wcy5maWxlW25hbWVdLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgZm9yICh2YXIgZiBpbiBkYXRhLmZpbGVzKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGRhdGEuZmlsZXNbZl0uZmlsZW5hbWU7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW25hbWUsIEpTT04ucGFyc2UoZGF0YS5maWxlc1tmXS5jb250ZW50KSwgJ2dpc3QnLCB4aHIucmVzcG9uc2VVUkwuc3BsaXQoJy8nKVt4aHIucmVzcG9uc2VVUkwuc3BsaXQoJy8nKS5sZW5ndGggLSAxXV0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGRjLm5vdGlmeSgnc3VjY2VzcycsICdTdWNjZXNmdWxseSByZXRyaWV2ZWQgZ2lzdCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcmV0cmlldmUgR2lzdC4gUGxlYXNlIGNoZWNrIHlvdXIgVVJMJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtYXJjZ2lzJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSBhbiBBcmNHSVMgU2VydmVyIEZlYXR1cmUgU2VydmljZScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1nbG9iZVwiPjwvaT4nLFxuICAgICAgX3RlbXA6IHsnbGF5ZXJOYW1lJzogJ2FyY2pzb24nfSxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdmZWF0dXJlIHNlcnZpY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRW50ZXIgVVJMIHRvIEFyY0dJUyBGZWF0dXJlIFNlcnZpY2UgKGV4LiBodHRwOi8vc2FtcGxlc2VydmVyNi5hcmNnaXNvbmxpbmUuY29tL2FyY2dpcy9yZXN0L3NlcnZpY2VzL0h1cnJpY2FuZXMvTWFwU2VydmVyLzApJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHA6Ly9zYW1wbGVzZXJ2ZXI2LmFyY2dpc29ubGluZS5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvSHVycmljYW5lcy9NYXBTZXJ2ZXIvMCdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd3aGVyZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBIHdoZXJlIGNsYXVzZSBmb3IgdGhlIHF1ZXJ5IGZpbHRlci4gQW55IGxlZ2FsIFNRTCB3aGVyZSBjbGF1c2Ugb3BlcmF0aW5nIG9uIHRoZSBmaWVsZHMgaW4gdGhlIGxheWVyIGlzIGFsbG93ZWQuJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJzE9MSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZXF1ZXN0IHR5cGUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnc2VsZWN0IEpTT05QIGlmIHlvdSByZWNlaXZlIGNyb3NzLW9yaWdpbiByZXNvdXJjZSBzaGFyaW5nIGVycm9ycycsXG4gICAgICAgICAgdHlwZTogJ3JhZGlvJyxcbiAgICAgICAgICBkZWZhdWx0OiAnQ09SUycsXG4gICAgICAgICAgb3B0aW9uczogWydDT1JTJywgJ0pTT05QJ11cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdsaW1pdCB0byBtYXAnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnb25seSBsb2FkIGZlYXR1cmVzIHdpdGhpbiBjdXJyZW50IG1hcCB2aWV3JyxcbiAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnXG5cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtYXJjZ2lzJ10pO1xuICAgICAgfSxcbiAgICAgIGNoZWNrSnNvbnA6IGZ1bmN0aW9uKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnNbMl0gPT09ICdKU09OUCcpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLWFyY2dpcyddLl90ZW1wLmxheWVyTmFtZSA9IHBhcmFtZXRlcnNbMF07XG4gICAgICAgIHZhciBiYm94ID0gJy0xODAsLTkwLDE4MCw5MCc7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzWzNdKSB7XG4gICAgICAgICAgYmJveCA9IGRjLnV0aWwuZ2V0RXNyaUJCb3goKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXJsID0gcGFyYW1ldGVyc1swXSsnL3F1ZXJ5Lyc7XG4gICAgICAgIHZhciB1cmxQYXJhbXMgPSB7XG4gICAgICAgICAgZjogJ2pzb24nLFxuICAgICAgICAgIGluU1I6IDQzMjYsXG4gICAgICAgICAgb3V0U1I6IDQzMjYsXG4gICAgICAgICAgZ2VvbWV0cnk6IGJib3gsXG4gICAgICAgICAgd2hlcmU6IHBhcmFtZXRlcnNbMV0sXG4gICAgICAgICAgb3V0ZmllbGRzOiAnKidcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNvcnMgPSBkYy5vcHMuZmlsZVsnbG9hZC1hcmNnaXMnXS5jaGVja0pzb25wKHBhcmFtZXRlcnMpO1xuICAgICAgICBkYy51dGlsLmdldCh1cmwsIHVybFBhcmFtcywgY29ycylcbiAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1hcmNnaXMnXS5jYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWGhyLCB0ZXh0U3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnRXJyb3InLCB0ZXh0U3RhdHVzLCBlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgdmFyIGdlb2pzb24gPSBkYy51dGlsLmVzcmkyZ2VvKGRhdGEpO1xuICAgICAgICBpZiAoZGF0YS5mZWF0dXJlcy5sZW5ndGg8MSkge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBmZWF0dXJlcyBmb3VuZCBpbiB5b3VyIHF1ZXJ5LicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZGMub3BzLmZpbGVbJ2xvYWQtYXJjZ2lzJ10uX3RlbXAubGF5ZXJOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgZGMubm90aWZ5KCdzdWNjZXNzJywgJ0ZvdW5kIDxzdHJvbmc+JyArIGRhdGEuZmVhdHVyZXMubGVuZ3RoICsgJyBmZWF0dXJlczwvc3Ryb25nPiBmcm9tIHRoZSBBcmNHSVMgU2VydmljZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLW92ZXJwYXNzJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRlcm1pbmFsXCI+PC9pPicsXG4gICAgICBfdGVtcDoge30sXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncXVlcnknLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonTGVhcm4gbW9yZSBhYm91dCA8YSBocmVmPVwiaHR0cDovL3dpa2kub3BlbnN0cmVldG1hcC5vcmcvd2lraS9PdmVycGFzc19BUEkvTGFuZ3VhZ2VfR3VpZGVcIiB0YXJnZXQ9XCJfYmxhbmtcIj50aGUgcXVlcnkgbGFuZ3VhZ2U8L2E+LicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdhbWVuaXR5PWJhcidcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdsYXllciBuYW1lJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J05hbWUgb2YgdGhlIGxheWVyIGFkZGVkIGlmIHJlc3VsdHMgYXJlIGZvdW5kLicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdvdmVycGFzc19sYXllcl9uYW1lJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1vdmVycGFzcyddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIC8vIHNldCBsYXllciBuYW1lIHRvIF90ZW1wIGZvciBsYXRlciB1c2FnZVxuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLl90ZW1wLmxheWVyTmFtZSA9IHBhcmFtZXRlcnNbMV07IC8vIHRoaXMgaXMgdWdseVxuXG4gICAgICAgIC8vIGJ1aWxkIHRoZSBxdWVyeSB3aXRoIGJvdW5kaW5nIGJveFxuICAgICAgICB2YXIgYmJveCA9IGRjLnV0aWwuZ2V0QkJveCgpO1xuICAgICAgICBkYy51dGlsLnhocignaHR0cDovL292ZXJwYXNzLWFwaS5kZS9hcGkvaW50ZXJwcmV0ZXI/W291dDpqc29uXTtub2RlWycrcGFyYW1ldGVyc1swXSsnXSgnK2Jib3grJyk7b3V0OycsIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB2YXIgZ2VvanNvbiA9IG9zbXRvZ2VvanNvbihkYXRhLCB7XG4gICAgICAgICAgICBmbGF0UHJvcGVydGllczogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghZGF0YS5lbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBlbGVtZW50cyBmb3VuZCBpbiB5b3VyIHF1ZXJ5LicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2RjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uX3RlbXAubGF5ZXJOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnRm91bmQgPHN0cm9uZz4nICsgZGF0YS5lbGVtZW50cy5sZW5ndGggKyAnIGVsZW1lbnRzPC9zdHJvbmc+IGZyb20gdGhlIE92ZXJwYXNzIEFQSScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCBxdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbG9jYXRpb246IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWRkIHlvdXIgbG9jYXRpb24gYXMgYSBsYXllcicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jcm9zc2hhaXJzXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0dlb2xvY2F0aW9uIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBicm93c2VyLicsIDQwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm1hcC5tLmxvY2F0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdzYXZlLWdlb2pzb24nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBHZW9KU09OJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGUtY29kZS1vXCI+PC9pPicsXG4gICAgICBjcmVhdGVzTGF5ZXI6IGZhbHNlLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICAgICAgdmFyIHRpdGxlID0gJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJy5nZW9qc29uJztcbiAgICAgICAgICBzYXZlQXMobmV3IEJsb2IoW2NvbnRlbnRdLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04J1xuICAgICAgICAgIH0pLCB0aXRsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ3NhdmUtdG9wb2pzb24nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBUb3BvSlNPTicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1vYmplY3QtdW5ncm91cFwiPjwvaT4nLFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgIHRvcG9qc29uLnRvcG9sb2d5KHtcbiAgICAgICAgICAgICAgY29sbGVjdGlvbjogZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICdwcm9wZXJ0eS10cmFuc2Zvcm0nOiBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmUucHJvcGVydGllcztcbiAgICAgICAgICAgIH19KVxuICAgICAgICAgICk7XG4gICAgICAgICAgdmFyIHRpdGxlID0gJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJy50b3BvanNvbic7XG4gICAgICAgICAgc2F2ZUFzKG5ldyBCbG9iKFtjb250ZW50XSwge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCdcbiAgICAgICAgICB9KSwgdGl0bGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdzYXZlLXNoYXBlZmlsZSc6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdTYXZlIGFzIFNoYXBlZmlsZScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1maWxlXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICBmb2xkZXI6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSxcbiAgICAgICAgICAgICAgdHlwZXM6IHtcbiAgICAgICAgICAgICAgICBwb2ludDogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19wb2ludCcsXG4gICAgICAgICAgICAgICAgcG9seWdvbjogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19wb2x5JyxcbiAgICAgICAgICAgICAgICBsaW5lOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX2xpbmUnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzaHB3cml0ZS5kb3dubG9hZChkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcsIG9wdGlvbnMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZGMubm90aWZ5KCdFcnJvcicsICdUaGVyZSB3YXMgYSBwcm9ibGVtIGRvd25sb2FkaW5nIHRoZSBzaGFwZWZpbGUuJyArIGVycik7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBjcmVhdGVzTGF5ZXI6IGZhbHNlXG4gICAgfSxcblxuICAgIGV4dGVudDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1ZpZXcgZXh0ZW50IG9mIGxheWVycycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1nbG9iZVwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKCFkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBleHRlbnQgb2YgZW50aXJlIGxheWVyIGxpc3QgaWYgbm90aGluZyBzZWxlY3RlZFxuICAgICAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhkYy5tYXAubGF5ZXJncm91cC5nZXRCb3VuZHMoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGJ1aWxkIHRoZSBib3VuZHMgYmFzZWQgb24gc2VsZWN0ZWQgbGF5ZXJzXG4gICAgICAgICAgdmFyIGJvdW5kcztcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIHZhciBmbCA9IGRjLnNlbGVjdGlvbi5saXN0W2xdLmZlYXR1cmVsYXllcjtcbiAgICAgICAgICAgIGlmKCFsKSBib3VuZHMgPSBmbC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIGVsc2UgYm91bmRzLmV4dGVuZChmbC5nZXRCb3VuZHMoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgIH1cblxuICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBhbmQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdDb252ZXJ0IEZlYXR1cmVDb2xsZWN0aW9uIGludG8gc2VwYXJhdGUgZmVhdHVyZXMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZXhwYW5kXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHZhciBmYyA9IGRjLnNlbGVjdGlvbi5saXN0WzBdO1xuICAgICAgICAgIGlmIChmYy5yYXcudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgICAgJChmYy5yYXcuZmVhdHVyZXMpLmVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2ZjLm5hbWUgKyBjb3VudCArICdfJyArIGZjLnJhdy5mZWF0dXJlc1tmXS5nZW9tZXRyeS50eXBlLCBmYy5yYXcuZmVhdHVyZXNbZl1dKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdUaGF0IG5lZWRzIHRvIGJlIGEgZmVhdHVyZSBjb2xsZWN0aW9uIScpO1xuICAgICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdMYXllciBpcyBub3QgYSBGZWF0dXJlQ29sbGVjdGlvbi4nKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ1BsZWFzZSBzZWxlY3QgYSBzaW5nbGUgbGF5ZXIhJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY29tYmluZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbWJpbmVzIHNlbGVjdGVkIGZlYXR1cmVzIGludG8gYSBzaW5nbGUgRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtY29tcHJlc3NcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZmMgPSB7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogW11cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdFtmXS5yYXcudHlwZSAhPT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgICAgICBmYy5mZWF0dXJlcy5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ZdLnJhdyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCBkYy5zZWxlY3Rpb24ubGlzdFtmXS5uYW1lICsgJyB3YXMgbm90IGFkZGVkIGJlY2F1c2UgaXQgaXMgYWxyZWFkeSBhIEZlYXR1cmVDb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFsnbmV3X0ZlYXR1cmVDb2xsZWN0aW9uJywgZmNdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnTm8gbGF5ZXJzIHNlbGVjdGVkIScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vICd2aWV3LWF0dHJpYnV0ZXMnOiB7XG4gICAgLy8gICBtaW5GZWF0dXJlczogMSxcbiAgICAvLyAgIGRlc2NyaXB0aW9uOiAnU2hvdyBhdHRyaWJ1dGUgdGFibGUnLFxuICAgIC8vICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdGgtbGlzdFwiPjwvaT4nLFxuICAgIC8vICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgIGRjLmF0dHIucmVuZGVyKGRjLnNlbGVjdGlvbi5saXN0WzBdKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9LFxuXG4gICAgcmVuYW1lOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVuYW1lIGxheWVyJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXBlbmNpbFwiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ05hbWUnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydyZW5hbWUnXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ1BsZWFzZSBzZWxlY3QgPHN0cm9uZz5vbmUgbGF5ZXI8L3N0cm9uZz4uJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVuYW1lJywgW2RjLnNlbGVjdGlvbi5saXN0WzBdLCBwYXJhbWV0ZXJzWzBdXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JlbW92ZSBzZWxlY3RlZCBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdHJhc2gtb1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZScsIFt0aGlzLnN0YW1wXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5mbzoge1xuICAgICAgdHlwZTogJ2luZm8nLFxuICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBtb3JlIGFib3V0IGRyb3BjaG9wJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWluZm9cIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2Fib3V0Lmh0bWwnO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuZ2VvID0ge1xuICAgIGFsb25nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGxpbmUgYW5kIHJldHVybnMgYSBwb2ludCBhdCBhIHNwZWNpZmllZCBkaXN0YW5jZSBhbG9uZyB0aGUgbGluZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2Rpc3RhbmNlIGFsb25nIHRoZSBsaW5lJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXRzJyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdraWxvbWV0ZXJzJywgJ3JhZGlhbnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2Fsb25nJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5hbG9uZy5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJlemllcjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBsaW5lIGFuZCByZXR1cm5zIGEgY3VydmVkIHZlcnNpb24gYnkgYXBwbHlpbmcgYSBCZXppZXIgc3BsaW5lIGFsZ29yaXRobS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Jlc29sdXRpb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonVGltZSBpbiBtaWxsaXNlY29uZHMgYmV0d2VlbiBwb2ludHMnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwMDAwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnc2hhcnBuZXNzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2EgbWVhc3VyZSBvZiBob3cgY3VydnkgdGhlIHBhdGggc2hvdWxkIGJlIGJldHdlZW4gc3BsaW5lcycsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogIDAuODVcblxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnYmV6aWVyJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5iZXppZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBidWZmZXI6IHtcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ2FsY3VsYXRlcyBhIGJ1ZmZlciBmb3IgaW5wdXQgZmVhdHVyZXMgZm9yIGEgZ2l2ZW4gcmFkaXVzLiBVbml0cyBzdXBwb3J0ZWQgYXJlIG1pbGVzLCBraWxvbWV0ZXJzLCBhbmQgZGVncmVlcy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Rpc3RhbmNlIHRvIGRyYXcgdGhlIGJ1ZmZlci4nLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdCcsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAnZmVldCcsICdraWxvbWV0ZXJzJywgJ21ldGVycycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmJ1ZmZlci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjZW50ZXI6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHBvaW50IGluIHRoZSBjZW50ZXIgb2YgdGhlIGZlYXR1cmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZWN1cnNpdmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRoZSBvcGVyYXRpb24gb24gZWFjaCBmZWF0dXJlIGluIHRoZSBjb2xsZWN0aW9uIG9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4nLFxuICAgICAgICAgIHR5cGU6ICdyZWN1cnNpdmUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAvLyBpZiBydW5uaW5nIHRoZSBvcGVyYXRpb24gcmVjdXJzaXZlbHkgXCJ0cnVlXCJcbiAgICAgICAgaWYgKHBhcmFtc1sxXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdjZW50ZXInLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuY2VudGVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2VudHJvaWQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHBvaW50IGluIHRoZSBjZW50cm9pZCBvZiB0aGUgZmVhdHVyZXMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZWN1cnNpdmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRoZSBvcGVyYXRpb24gb24gZWFjaCBmZWF0dXJlIGluIHRoZSBjb2xsZWN0aW9uIG9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4nLFxuICAgICAgICAgIHR5cGU6ICdyZWN1cnNpdmUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAvLyBpZiBydW5uaW5nIHRoZSBvcGVyYXRpb24gcmVjdXJzaXZlbHkgXCJ0cnVlXCJcbiAgICAgICAgaWYgKHBhcmFtc1sxXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdjZW50cm9pZCcsIHBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5jZW50cm9pZC5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGRlc3RpbmF0aW9uOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2ludD4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBQb2ludCBhbmQgY2FsY3VsYXRlcyB0aGUgbG9jYXRpb24gb2YgYSBkZXN0aW5hdGlvbiBwb2ludCBnaXZlbiBhIGRpc3RhbmNlIGluIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzOyBhbmQgYmVhcmluZyBpbiBkZWdyZWVzLiBUaGlzIHVzZXMgdGhlIEhhdmVyc2luZSBmb3JtdWxhIHRvIGFjY291bnQgZm9yIGdsb2JhbCBjdXJ2YXR1cmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidkaXN0YW5jZSBmcm9tIHRoZSBzdGFydGluZyBwb2ludCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdiZWFyaW5nJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J3JhbmdpbmcgZnJvbSAtMTgwIHRvIDE4MCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogIDBcblxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXRzJyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdraWxvbWV0ZXJzJywgJ3JhZGlhbnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2Rlc3RpbmF0aW9uJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5kZXN0aW5hdGlvbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVudmVsb3BlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXSAvLyBUT0RPOiBtYWtlIHRoaXMgdGFrZSBmZWF0dXJlcyBhbmQgcnVuIGFjcm9zcyBmdWxsIHNlbGVjdGlvblxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYW55IG51bWJlciBvZiBmZWF0dXJlcyBhbmQgcmV0dXJucyBhIHJlY3Rhbmd1bGFyIFBvbHlnb24gdGhhdCBlbmNvbXBhc3NlcyBhbGwgdmVydGljZXMuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5lbnZlbG9wZS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBsb2RlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgZmVhdHVyZSBvciBzZXQgb2YgZmVhdHVyZXMgYW5kIHJldHVybnMgYWxsIHBvc2l0aW9ucyBhcyBwb2ludHMuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5leHBsb2RlLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIG1pZHBvaW50OiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2ludD4nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgdHdvIHBvaW50cyBhbmQgcmV0dXJucyBhIHBvaW50IG1pZHdheSBiZXR3ZWVuIHRoZW0uJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5taWRwb2ludC5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBzaW1wbGlmeToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZTxQb2x5Z29uPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIExpbmVTdHJpbmcgb3IgUG9seWdvbiBhbmQgcmV0dXJucyBhIHNpbXBsaWZpZWQgdmVyc2lvbi4gSW50ZXJuYWxseSB1c2VzIHNpbXBsaWZ5LWpzIHRvIHBlcmZvcm0gc2ltcGxpZmljYXRpb24uJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndG9sZXJhbmNlJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uIDonc2ltcGxpZmljYXRpb24gdG9sZXJhbmNlJyxcbiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgZGVmYXVsdDogMC4xXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnaGlnaCBxdWFsaXR5JyxcbiAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ3doZXRoZXIgb3Igbm90IHRvIHNwZW5kIG1vcmUgdGltZSB0byBjcmVhdGUgYSBoaWdoZXItcXVhbGl0eSBzaW1wbGlmaWNhdGlvbiB3aXRoIGEgZGlmZmVyZW50IGFsZ29yaXRobScsXG4gICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdzaW1wbGlmeScsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuc2ltcGxpZnkuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0aW46IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUcmlhbmd1bGF0ZWQgaXJyZWd1bGFyIG5ldHdvcmssIGludGVycG9sYXRpb24gbWV0aG9kJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi50aW4uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdW5pb246IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvbHlnb24+J11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIHR3byBwb2x5Z29ucyBhbmQgcmV0dXJucyBhIGNvbWJpbmVkIHBvbHlnb24uIElmIHRoZSBpbnB1dCBwb2x5Z29ucyBhcmUgbm90IGNvbnRpZ3VvdXMsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIE11bHRpUG9seWdvbiBmZWF0dXJlLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYudW5pb24uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgd2l0aGluOiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBzZXQgb2YgcG9pbnRzIGFuZCBhIHNldCBvZiBwb2x5Z29ucyBhbmQgcmV0dXJucyB0aGUgcG9pbnRzIHRoYXQgZmFsbCB3aXRoaW4gdGhlIHBvbHlnb25zLiBGaXJzdCBpbnB1dCBzaG91bGQgYmUgdGhlIHBvaW50cy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ1BvaW50cyB0byBjbGlwJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1NlbGVjdCB0aGUgbGF5ZXIgdGhhdCByZXByZXNlbnRzIHRoZSBwb2ludHMgeW91IHdhbnQgdG8gY2xpcC4gVGhpcyBhc3N1bWVzIHRoZSBvdGhlciBsYXllciBpcyB5b3VyIGNsaXBwaW5nIHBvbHlnb24uJyxcbiAgICAgICAgICB0eXBlOiAnc3dpdGNoJ1xuICAgICAgICAgIC8vIGRlZmF1bHQ6IGRjLnNlbGVjdGlvbi5saXN0WzBdXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYud2l0aGluLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIFxuICBkYy5zZWxlY3Rpb24gPSB7fTtcbiAgZGMuc2VsZWN0aW9uLmxpc3QgPSBbXTtcblxuICBkYy5zZWxlY3Rpb24uaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdsYXllcjpzZWxlY3RlZCcsIGRjLnNlbGVjdGlvbi5hZGQpO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMuc2VsZWN0aW9uLnJlbW92ZSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBfbGF5ZXJSZW1vdmVkKTtcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uYWRkID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3QucHVzaChsYXllcik7XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLnJlbW92ZSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIHZhciBpbmRleCA9IG51bGw7XG4gICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXAgPT09IGxheWVyLnN0YW1wKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdC5zcGxpY2UoaW5kZXgsIDEpOyAvLyByZW1vdmUgb3V0c2lkZSBvZiB0aGUgbG9vcCBzbyB3ZSBkb24ndCBicmVhayBvdXIgY291bnRcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcubGF5ZXItbmFtZS5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICQoJy5vcGVyYXRpb24tZ2VvJykuYWRkQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICQoJy5vcGVyYXRpb24tZ2VvJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdCA9IFtdO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9sYXllclJlbW92ZWQoZXZlbnQsIHN0YW1wKSB7XG4gICAgZGMuc2VsZWN0aW9uLnJlbW92ZSh7fSwge3N0YW1wOiBzdGFtcH0pO1xuICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcblxuICBkYy51dGlsID0ge307XG5cbiAgZGMudXRpbC5yZW1vdmVGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL1xcLlteLy5dKyQvLCBcIlwiKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwucmVtb3ZlV2hpdGVTcGFjZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgY29uc29sZS5sb2coc3RyaW5nKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwuY29uY2F0ID0gZnVuY3Rpb24oYXJyYXksIHNlcGFyYXRvciwgcHJlZml4KSB7XG4gICAgdmFyIHN0cmluZyA9ICcnO1xuICAgICQoYXJyYXkpLmVhY2goZnVuY3Rpb24oYSkge1xuICAgICAgc3RyaW5nICs9IHNlcGFyYXRvciArIGFycmF5W2FdO1xuICAgIH0pO1xuICAgIHN0cmluZyA9IHByZWZpeCArIHN0cmluZztcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwueGhyID0gZnVuY3Rpb24odXJsLCBjYWxsYmFjaykge1xuICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKHRydWUpO1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICB4aHIub25sb2FkID0gY2FsbGJhY2suYmluZCh0aGlzLCB4aHIpO1xuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oIHhociApIHtcbiAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoeGhyKTtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVW5hYmxlIHRvIGFjY2VzcyAnICsgdXJsLCAyNTAwKTtcbiAgICB9O1xuICAgIHhoci5zZW5kKCk7XG4gIH07XG5cbiAgZGMudXRpbC5nZXQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGNvcnMpIHtcbiAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgZGF0YTogZGF0YSxcbiAgICAgIGRhdGFUeXBlOiAnanNvbidcbiAgICB9O1xuICAgIGlmKCFkYy51dGlsLmNvcnNTdXBwb3J0IHx8IGNvcnMgPT09IGZhbHNlKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gQ09SUyBzdXBwb3J0LCB1c2luZyBKU09OUCcpO1xuICAgICAgcGFyYW1zLmRhdGFUeXBlID0gJ2pzb25wJztcbiAgICB9XG4gICAgZHJvcGNob3AudXRpbC5sb2FkZXIodHJ1ZSk7XG4gICAgdmFyIHhociA9ICQuYWpheCh1cmwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHhocjtcbiAgfTtcblxuICBkYy51dGlsLnJlYWRGaWxlID0gZnVuY3Rpb24oZmlsZSkge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIC8vIGlmIGEgemlwZmlsZSwgYXNzdW1lIHNoYXBlZmlsZSBmb3Igbm93XG4gICAgaWYgKGZpbGUubmFtZS5pbmRleE9mKCcuemlwJykgPiAtMSB8fCBmaWxlLm5hbWUuaW5kZXhPZignLnNocCcpID4gLTEpIHtcbiAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgIGRjLnV0aWwubG9hZGVyKHRydWUpO1xuICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHNocChyZWFkZXIucmVzdWx0KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJQcm9ibGVtYXRpYyBwcm9qZWN0aW9uIC0gXCIsIGVycm9yKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGdlb2pzb24pIHtcbiAgICAgICAgICAgIGRjLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICghZ2VvanNvbikge1xuICAgICAgICAgICAgICByZXR1cm4gZGMubm90aWZ5KCdlcnJvcicsICdJbnZhbGlkIHByb2plY3Rpb24gb3Igc2hhcGVmaWxlLicsIDI1MDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2dlb2pzb24uZmlsZU5hbWUsIGdlb2pzb25dKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUsICdVVEYtOCcpO1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2ZpbGUubmFtZSwgSlNPTi5wYXJzZShyZWFkZXIucmVzdWx0KV0pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb3J3YXJkVG9HZW9Kc29uSW8oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICB2YXIgdXJsID0gXCJodHRwOi8vZ2VvanNvbi5pby8jZGF0YT1kYXRhOmFwcGxpY2F0aW9uL2pzb24sXCIgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgd2luZG93LmxvY2F0aW9uID0gdXJsO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmpzb25Gcm9tVXJsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKVxuICAgICAgICAgIC5zcGxpdCgvKCY/Z2lzdD18Jj91cmw9KS9nKVxuICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQubGVuZ3RoID4gMDtcbiAgICAgICAgICB9KTtcblxuICAgIHZhciByZXN1bHQgPSB7fTtcblxuICAgIHF1ZXJ5LmZvckVhY2goZnVuY3Rpb24ocGFydCwgaSkge1xuICAgICAgaWYgKGkgPT09IDAgfHwgaSAlIDIgPT09IDApIHtcbiAgICAgICAgdmFyIGtleSA9IHBhcnQucmVwbGFjZSgvJnw9L2csICcnKTtcblxuICAgICAgICBpZiAoIXJlc3VsdFtrZXldKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdFtrZXldLnB1c2goZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5W2kgKyAxXSkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBkYy51dGlsLnVwZGF0ZVNlYXJjaCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsYXllcnMgPSBbXTtcblxuICAgIE9iamVjdC5rZXlzKGRjLmxheWVycy5saXN0KS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICAvKlxuICAgICAgICoqIElmIGEgbGF5ZXIgaGFzIGEgdHlwZSBhbmQgVVJMIChhIGdpc3Qgb3IgZXh0ZXJuYWwgR2VvSlNPTiBsaW5rKSxcbiAgICAgICAqKiBhbmQgd2UgaGF2ZW4ndCByZWNvcmVkIHRoaXMgdHlwZS11cmwgY29tYm8gYWxyZWFkeSwgYWRkIGl0IHRvIHRoZVxuICAgICAgICoqIHVuaXF1ZSBsaXN0LiBUaGUgbGFzdCBjaGVjayBpcyBuZWVkZWQgdG8gYWNjb3VudCBmb3IgZ2lzdHMgd2l0aFxuICAgICAgICoqIG11bHRpcGxlIGxheWVycy5cbiAgICAgICAqL1xuICAgICAgaWYgKGRjLmxheWVycy5saXN0W2xheWVyXS5sdHlwZSAmJiBkYy5sYXllcnMubGlzdFtsYXllcl0udXJsICYmIGxheWVycy5pbmRleE9mKGRjLmxheWVycy5saXN0W2xheWVyXS5sdHlwZSArICc9JyArIGRjLmxheWVycy5saXN0W2xheWVyXS51cmwpIDwgMCkge1xuICAgICAgICBsYXllcnMucHVzaChkYy5sYXllcnMubGlzdFtsYXllcl0ubHR5cGUgKyAnPScgKyBkYy5sYXllcnMubGlzdFtsYXllcl0udXJsKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBzZWFyY2ggPSBsYXllcnMubGVuZ3RoID8gICgnPycgKyBsYXllcnMuam9pbignJicpKSA6ICcvJztcblxuICAgIC8vIE9ubHkgdXBkYXRlIHRoZSBVUkkgaWYgYW55dGhpbmcgaGFzIGNoYW5nZWRcbiAgICBpZiAoc2VhcmNoICE9PSB3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgc2VhcmNoKTtcbiAgICB9XG5cbiAgfTtcblxuICBkYy51dGlsLmV4ZWN1dGVVcmxQYXJhbXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGF0YSA9IGRjLnV0aWwuanNvbkZyb21VcmwoKTtcblxuICAgIC8vIGxvYWQgZ2lzdFxuICAgIGlmIChkYXRhLmdpc3QgJiYgZGF0YS5naXN0Lmxlbmd0aCkge1xuICAgICAgJChkYXRhLmdpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1naXN0J10uZ2V0KHt9LCAnbG9hZC1naXN0JywgW2RhdGEuZ2lzdFtpXV0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gbG9hZFxuICAgIGlmIChkYXRhLnVybCAmJiBkYXRhLnVybC5sZW5ndGgpIHtcbiAgICAgICQoZGF0YS51cmwpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC11cmwnXS5nZXQoe30sICdsb2FkLXVybCcsIFtkYXRhLnVybFtpXV0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGRjLnV0aWwuZ2V0RmlsZUV4dGVuc2lvbiA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gICAgcmV0dXJuIGZpbGVuYW1lLnN1YnN0cihmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpKzEpO1xuICB9O1xuXG4gIGRjLnV0aWwuZ2V0QkJveCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBib3VuZHMgPSBkYy5tYXAubS5nZXRCb3VuZHMoKSxcbiAgICAgICAgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCksXG4gICAgICAgIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpO1xuICAgIC8vIHdlIHNob3VsZCBwcm9iYWJseSBjaGVjayB0aGUgc2l6ZSBoZXJlP1xuICAgIC8vIG5vZGUoNTcuNywxMS45LDU3LjgsMTIuMClcbiAgICByZXR1cm4gc3cubGF0KycsJytzdy5sbmcrJywnK25lLmxhdCsnLCcrbmUubG5nO1xuICB9O1xuXG4gIGRjLnV0aWwuZ2V0RXNyaUJCb3ggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm91bmRzID0gZGMubWFwLm0uZ2V0Qm91bmRzKCksXG4gICAgICAgIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpLFxuICAgICAgICBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTtcbiAgICByZXR1cm4gc3cubG5nKycsJytzdy5sYXQrJywnK25lLmxuZysnLCcrbmUubGF0O1xuICB9O1xuXG4gIGRjLnV0aWwudW5jb2xsZWN0ID0gZnVuY3Rpb24oZmMpIHtcbiAgICByZXR1cm4gZmMuZmVhdHVyZXNbMF07XG4gIH07XG5cbiAgZGMudXRpbC5lc3JpMmdlbyA9IGZ1bmN0aW9uKGFyY2pzb24pIHtcbiAgICByZXR1cm4gdG9HZW9KU09OKGFyY2pzb24pO1xuICB9O1xuXG4gIGRjLnV0aWwuZXhlY3V0ZUZDID0gZnVuY3Rpb24oZmMsIG9wZXJhdGlvbiwgcGFyYW1zKSB7XG5cbiAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuICAgIHZhciBuZXdGQyA9IHt9O1xuICAgIG5ld0ZDLnR5cGUgPSAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIG5ld0ZDLmZlYXR1cmVzID0gW107XG5cbiAgICBmb3IgKHZhciBmID0gMDsgZiA8IGZjLmZlYXR1cmVzLmxlbmd0aDsgZisrKSB7XG4gICAgICBuZXdQYXJhbXNbMF0gPSBmYy5mZWF0dXJlc1tmXTtcbiAgICAgIHZhciBmZWF0dXJlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmVhdHVyZSA9IHR1cmZbb3BlcmF0aW9uXS5hcHBseShudWxsLCBuZXdQYXJhbXMpO1xuICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXMgPSBmYy5mZWF0dXJlc1tmXS5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCBlcnIpO1xuICAgICAgfVxuICAgICAgbmV3RkMuZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3RkM7XG5cbiAgfTtcblxuICBkYy51dGlsLmxvYWRlciA9IGZ1bmN0aW9uKHllcykge1xuICAgIHZhciBsb2FkZXIgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1sb2FkZXInKTtcblxuICAgIGlmICh5ZXMpIHtcbiAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZHJvcGNob3AtbG9hZGluZycpO1xuICAgICAgJCgnYm9keScpLmFwcGVuZChsb2FkZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRpbmcnKTtcbiAgICAgICQoJy5kcm9wY2hvcC1sb2FkZXInKS5hZGRDbGFzcygnbG9hZGVyLWNvbXBsZXRlJykuZmFkZU91dCgyMDAwLCBmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGRjLnV0aWwuY29yc1N1cHBvcnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJ1hNTEh0dHByZXF1ZXN0JyBpbiB3aW5kb3cgJiYgJ3dpdGhDcmVkZW50aWFscycgaW4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
