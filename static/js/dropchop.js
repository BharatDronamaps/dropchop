var dropchop=function(e){return e=e||{},e.version="0.1.1",e.init=function(t){t||e.util.error("No options provided in dropchop.init()"),e.options=t,$(t.id).length||e.util.error("Element with options.id does not exist."),e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.ops.init(),e.form.init(),location.search.length&&e.util.executeUrlParams()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),l=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),s=$("<button>").addClass("layer-action layer-remove").html('<i class="fa fa-times"></i>'),p=$("<button>").addClass("layer-action layer-duplicate").html('<i class="fa fa-files-o"></i>');p.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:duplicate",[$(this).parent().attr("data-stamp")]),!1}),s.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:remove",[$(this).parent().attr("data-stamp")]),e.util.updateSearch(),e.selection.clear(),!1}),l.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),l=i.parent().attr("data-stamp");t===r&&(a=e),t===l&&(o=e)}),a>o?$(".layer-element").each(function(t){t>=o&&a>=t&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){o>t&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),o.append(n),o.append(l),o.append(i),o.append(s),o.append(p),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show()},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.toggleAll=function(t){function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}if($(this).find("input").prop("checked"))for(var r in e.layers.list)a(e.layers.list[r].stamp,!0);else for(var o in e.layers.list)a(e.layers.list[o].stamp,!1)},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r,o,n){"Topology"===r.type&&(r=topojson.client.feature(r,r.objects[Object.keys(r.objects)[0]]));var i=e.layers.makeLayer(a,r);e.layers.list[i.stamp]=i,o&&n&&(e.layers.list[i.stamp].ltype=o,e.layers.list[i.stamp].url=n),e.notify("success","<strong>"+i.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[i]),o&&n&&e.util.updateSearch()},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer),$(e.map.m).on("locationfound",function(t){var a=t.originalEvent;e.map.m.fitBounds(a.bounds);var r={type:"Feature",geometry:{type:"Point",coordinates:[a.latlng.lng,a.latlng.lat]},properties:{title:"There You Are","marker-color":"#207178","marker-symbol":"heart"}};$(e).trigger("file:added",["your location",r])}),$(e.map.m).on("locationerror",function(){e.notify("error","There was a problem finding your location.",3e3)})}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);if("close"===r){var n=$("<button>").addClass("notification-close").prop("type","button").html('<i class="fa fa-times"></i>');n.on("click",function(e){$(this).parent().remove()}),$(o).append(n),$(e.$elem).append(o)}else $(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.ops=e.ops||{},e.ops.init=function(){function r(t){var r=$("<button>").addClass("menu-action").html(e.ops.file[t].icon||"!").attr("data-operation",t).attr("data-tooltip",e.ops.file[t].description);return"info"===e.ops.file[t].type&&r.addClass("dropchop-info"),r.on("click",a),r}var o=$("<div>").addClass("operations-geo");e.$elem.append(o);for(var n in e.ops.geo){var i=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+n+"</h4><p>"+e.ops.geo[n].description+"</p>").prop("disabled",!0).attr("data-operation",n);i.on("click",t),o.append(i)}$(e).on("layer:selected",e.ops.geoCheck),$(e).on("layer:unselected",e.ops.geoCheck),$(e).on("operation:geo",e.ops.geoExecute),$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback),e.ops.setup=[{name:"import",icon:'<i class="fa fa-plus"></i>',actions:["upload","load-url","load-gist","load-overpass","location"]},{name:"Save",icon:'<i class="fa fa-floppy-o"></i>',actions:["save-geojson","save-topojson","save-shapefile"]},{name:"Geo Actions",icon:'<i class="fa fa-wrench"></i>',actions:["extent","expand","combine","rename","remove"]},"info"];for(var l=$("<div>").addClass("dropchop-menu-left"),s=e.ops.setup,p=0;p<s.length;p++){var c=s[p];if("object"!=typeof s[p])if("break"===e.ops.file[c].type){var u=$("<div>").addClass("menu-action-break");l.append(u)}else l.append(r(c));else{var d=$("<div>").addClass("menu-action menu-collapse").html(s[p].icon);"import"===s[p].name&&d.addClass("menu-import");for(var f=$("<div>").addClass("menu-collapse-inner"),m=0;m<s[p].actions.length;m++){var y=e.ops.setup[p].actions[m];f.append(r(y))}d.append(f),l.append(d)}}e.$elem.append(l)},e.ops.geoExecute=function(t,a,r){var o=e.ops.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.ops.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){-1===$.inArray("switch-"+e.selection.list[t].stamp,a)?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.ops.geoCheck=function(t,a){function r(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function o(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var n in e.ops.geo){var i=e.ops.geo[n];if(e.selection.list.length>i.maxFeatures||e.selection.list.length<i.minFeatures)r(n);else for(var l=0;l<e.selection.list.length;l++){var s=e.selection.list[l];$.inArray(s.type,i.requirements.types)>-1||i.requirements.generalFeature===!0?o(n):r(n)}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r,"url",t.responseURL])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content),"gist",t.responseURL.split("/")[t.responseURL.split("/").length-1]])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide" target="_blank">the query language</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox();e.util.xhr("http://overpass-api.de/api/interpreter?[out:json];node["+r[0]+"]("+o+");out;",e.ops.file["load-overpass"].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r,{flatProperties:!0});r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},location:{description:"Add your location as a layer",icon:'<i class="fa fa-crosshairs"></i>',execute:function(){navigator.geolocation?e.map.m.locate():e.notify("error","Geolocation is not available on this browser.",4e3)}},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-topojson":{minFeatures:1,description:"Save as TopoJSON",icon:'<i class="fa fa-object-ungroup"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(topojson.topology({collection:e.selection.list[t].raw},{"property-transform":function(e){return e.properties}})),r="dropchop_"+e.selection.list[t].name+".topojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},rename:{minFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.readFile=function(t){var a=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(a.readAsArrayBuffer(t),e.util.loader(!0),a.onloadend=function(t){shp(a.result)["catch"](function(e){console.log("Problematic projection - ",e)}).then(function(t){return e.util.loader(!1),t?void $(e).trigger("file:added",[t.fileName,t]):e.notify("error","Invalid projection or shapefile.",2500)})}):(a.readAsText(t,"UTF-8"),a.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(a.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1).split(/(&?gist=|&?url=)/g).filter(function(e){return e.length>0}),t={};return e.forEach(function(a,r){if(0===r||r%2===0){var o=a.replace(/&|=/g,"");t[o]||(t[o]=[]),t[o].push(decodeURIComponent(e[r+1]))}}),t},e.util.updateSearch=function(){var t=[];Object.keys(e.layers.list).forEach(function(a){e.layers.list[a].ltype&&e.layers.list[a].url&&t.indexOf(e.layers.list[a].ltype+"="+e.layers.list[a].url)<0&&t.push(e.layers.list[a].ltype+"="+e.layers.list[a].url)});var a=t.length?"?"+t.join("&"):"/";a!==window.location.search&&window.history.pushState(null,null,a)},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.uncollect=function(e){return e.features[0]},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var l;try{l=turf[a].apply(null,o),l.properties=t.features[i].properties||{}}catch(s){e.notify("error",s)}n.features.push(l)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.error=function(e){var t=new Error(e);throw t},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibm90aWZ5LmRyb3BjaG9wLmpzIiwib3BzLmRyb3BjaG9wLmpzIiwib3BzLmZpbGUuZHJvcGNob3AuanMiLCJvcHMuZ2VvLmRyb3BjaG9wLmpzIiwic2VsZWN0aW9uLmRyb3BjaG9wLmpzIiwidXRpbC5kcm9wY2hvcC5qcyJdLCJuYW1lcyI6WyJkcm9wY2hvcCIsImRjIiwidmVyc2lvbiIsImluaXQiLCJvcHRzIiwidXRpbCIsImVycm9yIiwib3B0aW9ucyIsIiQiLCJpZCIsImxlbmd0aCIsIiRlbGVtIiwibGF5ZXJzIiwicHJlcGFyZSIsIm1hcCIsInNlbGVjdGlvbiIsImxheWVybGlzdCIsImRyb3B6b25lIiwib3BzIiwiZm9ybSIsImxvY2F0aW9uIiwic2VhcmNoIiwiZXhlY3V0ZVVybFBhcmFtcyIsImJvb20iLCJjb25zb2xlIiwibG9nIiwiX2V2ZW50cyIsIiRjb250YWluZXIiLCJvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJ0aGlzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImZpbGVzIiwib3JpZ2luYWxFdmVudCIsImRhdGFUcmFuc2ZlciIsImVhY2giLCJpIiwicmVhZEZpbGUiLCJnZW8iLCJmaWxlIiwib3BlcmF0aW9uIiwiY3JlYXRlIiwibmFtZSIsImluZm8iLCJ0cmlnZ2VyIiwicmVtb3ZlIiwiJGh0bWwiLCJhdHRyIiwidGV4dCIsImFwcGVuZFRvIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwicCIsImNyZWF0ZVBhcmFtIiwiJHN1Ym1pdCIsIiRjYW5jZWwiLCJkYXRhIiwic2VyaWFsaXplQXJyYXkiLCJwdXNoIiwidmFsdWUiLCJhcHBlbmQiLCJwYXJhbSIsIiRpbnB1dCIsIiRsYWJlbCIsIiRmaWVsZCIsImlucHV0cyIsInR5cGUiLCJodG1sIiwibnVtYmVyIiwiJGkiLCJzZWxlY3QiLCIkb3B0IiwiY2hlY2tib3giLCJzd2l0Y2giLCJsaXN0IiwiJGxibCIsInZhbCIsInN0YW1wIiwicmVjdXJzaXZlIiwiJGxibDEiLCIkb3B0MSIsIiRsYmwyIiwiJG9wdDIiLCJsYXllclR5cGVJY29uIiwiaWNvbiIsImVsZW1zIiwidGFyZ2V0IiwiaGFzQ2xhc3MiLCJjbGVhciIsImxpSGVscGVyIiwidG9nZ2xlTGF5ZXJzIiwidG9nZ2xlQWxsIiwiYWRkTGF5ZXJMaXN0SXRlbSIsInJlbW92ZUxheWVyTGlzdEl0ZW0iLCJyZW5hbWUiLCJuZXdOYW1lIiwiZmluZCIsImxheWVyIiwibGF5ZXJsaXN0SXRlbSIsImxheWVyRGl2IiwiZGVsYXkiLCJxdWV1ZSIsIm5leHQiLCJsYXllclR5cGUiLCJwcm9wIiwiY2hlY2tlZCIsImR1cGxpY2F0ZSIsInBhcmVudCIsInVwZGF0ZVNlYXJjaCIsInNoaWZ0S2V5IiwidG9Db3VudCIsImZyb21Db3VudCIsInRvIiwiZnJvbSIsIl9sYXN0U2VsZWN0ZWQiLCJlIiwiY2hlY2siLCJ0b1N0YW1wIiwiZnJvbVN0YW1wIiwibCIsInNlbGVjdExheWVyIiwibWV0YUtleSIsInNlbGVjdFRvZ2dsZSIsImNsZWFyU2VsZWN0aW9uIiwiaGlkZSIsInNob3ciLCIkaXRlbSIsImx5ciIsImVsZW1Ub2dnbGUiLCJib29sIiwibyIsImZhZGVPdXQiLCJnZXRUeXBlIiwiZ2oiLCJnZW9tZXRyeSIsImFkZCIsImJsb2IiLCJsdHlwZSIsInVybCIsInRvcG9qc29uIiwiY2xpZW50IiwiZmVhdHVyZSIsIm9iamVjdHMiLCJPYmplY3QiLCJrZXlzIiwibWFrZUxheWVyIiwibm90aWZ5IiwiZXJyIiwicmF3IiwianNvbiIsImdlb2pzb24iLCJmbCIsIkwiLCJtYXBib3giLCJmZWF0dXJlTGF5ZXIiLCJyZW1vdmVGaWxlRXh0ZW5zaW9uIiwiZmVhdHVyZWxheWVyIiwiZGF0ZUFkZGVkIiwiRGF0ZSIsIl9tYWtlTWFwIiwidG9rZW4iLCJhY2Nlc3NUb2tlbiIsIm0iLCJ6b29tQ29udHJvbCIsIndvcmxkQ29weUp1bXAiLCJzZXRWaWV3IiwiY29udHJvbCIsInpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiZ2VvY29kZXJDb250cm9sIiwiYmFzZUxheWVycyIsIk1hcGJveCBTdHJlZXRzIiwidGlsZUxheWVyIiwiTWFwYm94IE91dGRvb3JzIiwiTWFwYm94IExpZ2h0IiwiTWFwYm94IERhcmsiLCJNYXBib3ggU2F0ZWxsaXRlIiwiY29sbGFwc2VkIiwibGF5ZXJncm91cCIsImFkZExheWVyIiwiaGlkZUxheWVyIiwic2hvd0xheWVyIiwiZml0Qm91bmRzIiwiYm91bmRzIiwiY29vcmRpbmF0ZXMiLCJsYXRsbmciLCJsbmciLCJsYXQiLCJwcm9wZXJ0aWVzIiwidGl0bGUiLCJtYXJrZXItY29sb3IiLCJtYXJrZXItc3ltYm9sIiwicmVtb3ZlTGF5ZXIiLCJjb3VudCIsImVhY2hMYXllciIsImNvbnRlbnQiLCJiaW5kUG9wdXAiLCJwb3B1cCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiYXV0b1BhblBhZGRpbmciLCJjbGFzc05hbWUiLCJzZXRDb250ZW50IiwidGltZSIsIm5vdGUiLCIkY2xvc2UiLCJzZXRUaW1lb3V0IiwiX2dlb0J0bkNsaWNrIiwiX2ZpbGVCdG5DbGljayIsImV4ZWN1dGUiLCJidWlsZE1lbnVCdXR0b24iLCJhY3Rpb24iLCJidXR0b24iLCJnZW9Db250YWluZXIiLCJnZW9PcCIsImdlb0J0biIsImdlb0NoZWNrIiwiZ2VvRXhlY3V0ZSIsImdldCIsImNhbGxiYWNrIiwic2V0dXAiLCJhY3Rpb25zIiwibGVmdE1lbnUiLCIkYnJlYWtTcGFjZSIsImNvbGxhcHNlQnRuIiwiY29sbGFwc2VJbm5lciIsImEiLCJhY3RuIiwicHJlcCIsInByZXBhcmVUdXJmUGFyYW1zIiwicmVzdWx0IiwicGFyYW1zIiwiZ2VvbXMiLCJuYW1lQXJyYXkiLCJpbkFycmF5IiwidW5zaGlmdCIsIm1lcmdlIiwiY29uY2F0IiwidHVybkl0T2ZmIiwib3AiLCJidG4iLCJ0dXJuSXRPbiIsIm1heEZlYXR1cmVzIiwibWluRmVhdHVyZXMiLCJ4Iiwic2VsIiwicmVxdWlyZW1lbnRzIiwidHlwZXMiLCJnZW5lcmFsRmVhdHVyZSIsInVwbG9hZCIsIiRibGluZElucHV0IiwiY3NzIiwiY2xpY2siLCJsb2FkLXVybCIsImRlZmF1bHQiLCJ4aHIiLCJ4aHJFdmVudCIsImxvYWRlciIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlVVJMIiwic3Vic3RyaW5nIiwibGFzdEluZGV4T2YiLCJsb2FkLWdpc3QiLCJnaXN0Iiwic3BsaXQiLCJmIiwiZmlsZW5hbWUiLCJsb2FkLW92ZXJwYXNzIiwiX3RlbXAiLCJsYXllck5hbWUiLCJiYm94IiwiZ2V0QkJveCIsIm9zbXRvZ2VvanNvbiIsImZsYXRQcm9wZXJ0aWVzIiwiZWxlbWVudHMiLCJuYXZpZ2F0b3IiLCJnZW9sb2NhdGlvbiIsImxvY2F0ZSIsInNhdmUtZ2VvanNvbiIsImNyZWF0ZXNMYXllciIsInN0cmluZ2lmeSIsInNhdmVBcyIsIkJsb2IiLCJzYXZlLXRvcG9qc29uIiwidG9wb2xvZ3kiLCJjb2xsZWN0aW9uIiwicHJvcGVydHktdHJhbnNmb3JtIiwic2F2ZS1zaGFwZWZpbGUiLCJmb2xkZXIiLCJwb2ludCIsInBvbHlnb24iLCJsaW5lIiwic2hwd3JpdGUiLCJkb3dubG9hZCIsImV4dGVudCIsImV4dGVuZCIsImdldEJvdW5kcyIsImV4cGFuZCIsImZjIiwiRXJyb3IiLCJmZWF0dXJlcyIsImNvbWJpbmUiLCJ3aW5kb3ciLCJhbG9uZyIsImV4ZWN1dGVGQyIsInR1cmYiLCJhcHBseSIsImJlemllciIsImJ1ZmZlciIsImNlbnRlciIsImNlbnRyb2lkIiwiZGVzdGluYXRpb24iLCJlbnZlbG9wZSIsImV4cGxvZGUiLCJtaWRwb2ludCIsInNpbXBsaWZ5IiwidGluIiwidW5pb24iLCJ3aXRoaW4iLCJfbGF5ZXJSZW1vdmVkIiwiaW5kZXgiLCJzcGxpY2UiLCJzdHJpbmciLCJyZXBsYWNlIiwicmVtb3ZlV2hpdGVTcGFjZSIsImFycmF5Iiwic2VwYXJhdG9yIiwicHJlZml4IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwiYmluZCIsIm9uZXJyb3IiLCJzZW5kIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsImluZGV4T2YiLCJyZWFkQXNBcnJheUJ1ZmZlciIsIm9ubG9hZGVuZCIsInNocCIsInRoZW4iLCJmaWxlTmFtZSIsInJlYWRBc1RleHQiLCJqc29uRnJvbVVybCIsInF1ZXJ5Iiwic3Vic3RyIiwiZmlsdGVyIiwiZCIsImZvckVhY2giLCJwYXJ0Iiwia2V5IiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJnZXRGaWxlRXh0ZW5zaW9uIiwic3ciLCJnZXRTb3V0aFdlc3QiLCJuZSIsImdldE5vcnRoRWFzdCIsInVuY29sbGVjdCIsIm5ld1BhcmFtcyIsIm5ld0ZDIiwieWVzIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxVQUFBLFNBQUFDLEdBOENBLE1BN0NBQSxHQUFBQSxNQUNBQSxFQUFBQyxRQUFBLFFBQ0FELEVBQUFFLEtBQUEsU0FBQUMsR0FDQUEsR0FDQUgsRUFBQUksS0FBQUMsTUFBQSwwQ0FFQUwsRUFBQU0sUUFBQUgsRUFFQUksRUFBQUosRUFBQUssSUFBQUMsUUFDQVQsRUFBQUksS0FBQUMsTUFBQSwyQ0FFQUwsRUFBQVUsTUFBQUgsRUFBQUosRUFBQUssSUFHQVIsRUFBQVcsT0FBQUMsVUFHQVosRUFBQWEsSUFBQVgsT0FHQUYsRUFBQWMsVUFBQVosT0FHQUYsRUFBQWUsVUFBQWIsS0FBQSxhQUdBRixFQUFBZ0IsU0FBQVQsRUFBQSxTQUdBUCxFQUFBaUIsSUFBQWYsT0FHQUYsRUFBQWtCLEtBQUFoQixPQUdBaUIsU0FBQUMsT0FBQVgsUUFDQVQsRUFBQUksS0FBQWlCLG9CQUtBckIsRUFBQXNCLEtBQUEsV0FDQUMsUUFBQUMs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LE1BQUFBLEdBQUFFLFNBQUEsSUFHQWxULEVBQUFJLEtBQUFrVCxVQUFBLFNBQUFOLEVBQUF0USxFQUFBZ00sR0FFQSxHQUFBcUksR0FBQXJJLEVBQ0FzSSxJQUNBQSxHQUFBNVMsS0FBQSxvQkFDQTRTLEVBQUE5RCxXQUVBLEtBQUEsR0FBQW5DLEdBQUEsRUFBQUEsRUFBQWlDLEVBQUFFLFNBQUF6UyxPQUFBc1EsSUFBQSxDQUNBZ0csRUFBQSxHQUFBL0QsRUFBQUUsU0FBQW5DLEVBQ0EsSUFBQWhJLEVBQ0EsS0FDQUEsRUFBQXdLLEtBQUE3USxHQUFBOFEsTUFBQSxLQUFBdUQsR0FDQWhPLEVBQUFnRCxXQUFBaUgsRUFBQUUsU0FBQW5DLEdBQUFoRixlQUNBLE1BQUExQyxHQUNBckosRUFBQW9KLE9BQUEsUUFBQUMsR0FFQTJOLEVBQUE5RCxTQUFBdFAsS0FBQW1GLEdBR0EsTUFBQWlPLElBSUFoWCxFQUFBSSxLQUFBZ1EsT0FBQSxTQUFBNkcsR0FDQSxHQUFBN0csR0FBQTdQLEVBQUEsU0FBQXlCLFNBQUEsa0JBRUFpVixJQUNBMVcsRUFBQSxRQUFBeUIsU0FBQSxvQkFDQXpCLEVBQUEsUUFBQXVELE9BQUFzTSxLQUVBN1AsRUFBQSxRQUFBMEIsWUFBQSxvQkFDQTFCLEVBQUEsb0JBQUF5QixTQUFBLG1CQUFBcUcsUUFBQSxJQUFBLFdBQ0E5SCxFQUFBd0IsTUFBQWdCLGFBS0EvQyxFQUFBSSxLQUFBQyxNQUFBLFNBQUFnSixHQUNBLEdBQUFoSixHQUFBLEdBQUE0UyxPQUFBNUosRUFDQSxNQUFBaEosSUFHQUwsR0FHQUQiLCJmaWxlIjoiZHJvcGNob3AuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMudmVyc2lvbiA9ICcwLjEuMSc7XG4gIGRjLmluaXQgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgaWYoIW9wdHMpIHtcbiAgICAgIGRjLnV0aWwuZXJyb3IoJ05vIG9wdGlvbnMgcHJvdmlkZWQgaW4gZHJvcGNob3AuaW5pdCgpJyk7XG4gICAgfVxuICAgIGRjLm9wdGlvbnMgPSBvcHRzO1xuXG4gICAgaWYoISQob3B0cy5pZCkubGVuZ3RoKSB7XG4gICAgICBkYy51dGlsLmVycm9yKCdFbGVtZW50IHdpdGggb3B0aW9ucy5pZCBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICB9XG4gICAgZGMuJGVsZW0gPSAkKG9wdHMuaWQpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJzXG4gICAgZGMubGF5ZXJzLnByZXBhcmUoKTtcblxuICAgIC8vIHNldHVwIG1hcFxuICAgIGRjLm1hcC5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBzZWxlY3Rpb25cbiAgICBkYy5zZWxlY3Rpb24uaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJsaXN0XG4gICAgZGMubGF5ZXJsaXN0LmluaXQoJ2xheWVybGlzdCcpO1xuXG4gICAgLy8gc2V0dXAgZHJvcHpvbmVcbiAgICBkYy5kcm9wem9uZSgkKCdib2R5JykpO1xuXG4gICAgLy8gc2V0dXAgb3BlcmF0aW9uc1xuICAgIGRjLm9wcy5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBmb3Jtc1xuICAgIGRjLmZvcm0uaW5pdCgpO1xuXG4gICAgLy8gZ2V0IFVSTCBpbmZvcm1hdGlvbiBpZiBpdCBleGlzdHNcbiAgICBpZihsb2NhdGlvbi5zZWFyY2gubGVuZ3RoKSB7XG4gICAgICBkYy51dGlsLmV4ZWN1dGVVcmxQYXJhbXMoKTtcbiAgICB9XG5cbiAgfTtcblxuICBkYy5ib29tID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3NoYWthbGFrYScpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZHJvcHpvbmUuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250YWluZXIgZWxlbWVudCAobGV0cyBkbyBkb2N1bWVudC5ib2R5KVxuICAgKi9cbiAgZGMuZHJvcHpvbmUgPSBmdW5jdGlvbigkY29udGFpbmVyKSB7XG4gICAgX2V2ZW50cygkY29udGFpbmVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBfZXZlbnRzKCRjb250YWluZXIpIHtcbiAgICAkY29udGFpbmVyLm9uKCdkcmFnb3ZlcicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdkcmFnZ2luZycpO1xuICAgIH0pO1xuXG4gICAgJGNvbnRhaW5lci5vbignZHJhZ2xlYXZlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgfSk7XG5cbiAgICAkY29udGFpbmVyLm9uKCdkcm9wJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgICB2YXIgZmlsZXMgPSBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICAgICQoZmlsZXMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy51dGlsLnJlYWRGaWxlKGZpbGVzW2ldKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMuZm9ybSA9IGRjLmZvcm0gfHwge307XG4gIGRjLmZvcm0uaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdmb3JtOmdlbycsIGRjLmZvcm0uZ2VvKTtcbiAgICAkKGRjKS5vbignZm9ybTpmaWxlJywgZGMuZm9ybS5maWxlKTtcbiAgfTtcblxuICBkYy5mb3JtLmdlbyA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24pIHtcbiAgICBkYy5mb3JtLmNyZWF0ZShvcGVyYXRpb24sIGRjLm9wcy5nZW9bb3BlcmF0aW9uXSwgJ2dlbycpO1xuICB9O1xuXG4gIGRjLmZvcm0uZmlsZSA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24pIHtcbiAgICBkYy5mb3JtLmNyZWF0ZShvcGVyYXRpb24sIGRjLm9wcy5maWxlW29wZXJhdGlvbl0sICdmaWxlOicgKyBvcGVyYXRpb24pO1xuICB9O1xuXG4gIGRjLmZvcm0uY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgaW5mbywgdHJpZ2dlcikge1xuICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgdmFyICRodG1sID0gJCgnPGZvcm0+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0gZHJvcGNob3AtZm9ybS0nK3RyaWdnZXIpXG4gICAgICAuYXR0cignaWQnLCAnZHJvcGNob3AtZm9ybScpXG4gICAgICAuYXR0cignZGF0YScsIG5hbWUpO1xuICAgIHZhciAkdGl0bGUgPSAkKCc8aDI+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tdGl0bGUnKS50ZXh0KG5hbWUpLmFwcGVuZFRvKCRodG1sKTtcbiAgICB2YXIgJGRlc2MgPSAkKCc8cD4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1kZXNjcmlwdGlvbicpLnRleHQoaW5mby5kZXNjcmlwdGlvbikuYXBwZW5kVG8oJGh0bWwpO1xuXG4gICAgLy8gY3JlYXRlIHBhcmFtc1xuICAgIGlmKGluZm8ucGFyYW1ldGVycykge1xuICAgICAgJChpbmZvLnBhcmFtZXRlcnMpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwID0gZGMuZm9ybS5jcmVhdGVQYXJhbSh0aGlzKTtcbiAgICAgICAgcC5hcHBlbmRUbygkaHRtbCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgc3VibWl0IGJ1dHRvblxuICAgIHZhciAkc3VibWl0ID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnZHJvcGNob3AtYnRuIGRyb3BjaG9wLWJ0bi1ncmVlbiBkcm9wY2hvcC1mb3JtLXN1Ym1pdCcpLnRleHQoJ0V4ZWN1dGUnKS5hdHRyKCdmb3InLCBuYW1lKTtcbiAgICB2YXIgJGNhbmNlbCA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWJ0biBkcm9wY2hvcC1idG4tY2FuY2VsIGRyb3BjaG9wLWZvcm0tY2FuY2VsJykudGV4dCgnQ2FuY2VsJykuYXR0cigndHlwZScsICdidXR0b24nKTtcbiAgICAkY2FuY2VsLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICAkaHRtbC5vbignc3VibWl0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyBnZXQgdGhlIHBhcmFtZXRlcnMgZnJvbSB0aGUgZm9ybVxuICAgICAgdmFyIHBhcmFtZXRlcnMgPSBbXTtcbiAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5zZXJpYWxpemVBcnJheSgpO1xuICAgICAgJChkYXRhKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgcGFyYW1ldGVycy5wdXNoKGRhdGFbaV0udmFsdWUpO1xuICAgICAgfSk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdvcGVyYXRpb246JyArIHRyaWdnZXIsIFtuYW1lLCBwYXJhbWV0ZXJzXSk7XG4gICAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgICRodG1sLmFwcGVuZCgkc3VibWl0KTtcbiAgICAkaHRtbC5hcHBlbmQoJGNhbmNlbCk7XG5cbiAgICBkYy4kZWxlbS5hcHBlbmQoJGh0bWwpO1xuICAgIC8vIHN1Ym1pdCBidXR0b24gbmVlZHMgdHJpZ2dlciBvcGVyYXRpb246Z2VvIHdpdGggb3AgYW5kIHBhcmFtZXRlciBhcnJheVxuICB9O1xuXG4gIGRjLmZvcm0ucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gICAgJCgnI2Ryb3BjaG9wLWZvcm0nKS5yZW1vdmUoKTtcbiAgfTtcblxuICBkYy5mb3JtLmNyZWF0ZVBhcmFtID0gZnVuY3Rpb24ocGFyYW0pIHtcbiAgICB2YXIgJGlucHV0ID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXInKTtcbiAgICB2YXIgJGxhYmVsID0gJCgnPGxhYmVsPicpLnRleHQocGFyYW0ubmFtZSkuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyLWxhYmVsJyk7XG4gICAgdmFyICRmaWVsZCA9IGRjLmZvcm0uaW5wdXRzW3BhcmFtLnR5cGVdKHBhcmFtKTtcbiAgICAkZmllbGQuYXBwZW5kVG8oJGxhYmVsKTtcbiAgICBpZihwYXJhbS5kZXNjcmlwdGlvbi5sZW5ndGgpIHtcbiAgICAgICQoJzxwPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlci1kZXNjcmlwdGlvbicpLmh0bWwocGFyYW0uZGVzY3JpcHRpb24pLmFwcGVuZFRvKCRsYWJlbCk7XG4gICAgfVxuICAgICRpbnB1dC5hcHBlbmQoJGxhYmVsKTtcbiAgICByZXR1cm4gJGlucHV0O1xuICB9O1xuXG4gIGRjLmZvcm0uaW5wdXRzID0ge1xuICAgIG51bWJlcjogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGlucHV0PicpLmF0dHIoJ3R5cGUnLCAnbnVtYmVyJylcbiAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpXG4gICAgICAgIC5hdHRyKCd2YWx1ZScsIHAuZGVmYXVsdCk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICBzZWxlY3Q6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxzZWxlY3Q+JykuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkKHAub3B0aW9ucykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciAkb3B0ID0gJCgnPG9wdGlvbj4nKS50ZXh0KHAub3B0aW9uc1tpXSlcbiAgICAgICAgICAuYXR0cigndmFsdWUnLCBwLm9wdGlvbnNbaV0pO1xuICAgICAgICAkb3B0LmFwcGVuZFRvKCRpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgdGV4dDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGlucHV0PicpLmF0dHIoJ3R5cGUnLCAndGV4dCcpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgY2hlY2tib3g6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JylcbiAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpXG4gICAgICAgIC5hdHRyKCd2YWx1ZScsIHAuZGVmYXVsdCk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICBzd2l0Y2g6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxkaXY+Jyk7XG4gICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdmFyICRsYmwgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgICB2YXIgJG9wdCA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ3JhZGlvJylcbiAgICAgICAgICAudmFsKCdzd2l0Y2gtJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wKVxuICAgICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkbGJsKTtcbiAgICAgICAgJGxibC5hcHBlbmQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSk7XG4gICAgICAgICRsYmwuYXBwZW5kVG8oJGkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICByZWN1cnNpdmU6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxkaXY+Jyk7XG5cbiAgICAgIHZhciAkbGJsMSA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgdmFyICRvcHQxID0gJCgnPGlucHV0PicpXG4gICAgICAgIC5hdHRyKCd0eXBlJywgJ3JhZGlvJylcbiAgICAgICAgLnZhbCgndHJ1ZScpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICRvcHQxLmFwcGVuZFRvKCRsYmwxKTtcbiAgICAgICRsYmwxLmFwcGVuZCgnSW5kaXZpZHVhbCBmZWF0dXJlcycpO1xuXG4gICAgICB2YXIgJGxibDIgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgIHZhciAkb3B0MiA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgIC52YWwoJ2ZhbHNlJylcbiAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJG9wdDIuYXBwZW5kVG8oJGxibDIpO1xuICAgICAgJGxibDIuYXBwZW5kKCdFbnRpcmUgY29sbGVjdGlvbicpO1xuXG4gICAgICAkbGJsMS5hcHBlbmRUbygkaSk7XG4gICAgICAkbGJsMi5hcHBlbmRUbygkaSk7XG5cbiAgICAgIHJldHVybiAkaTtcbiAgICB9XG4gIH07XG5cbiAgLy8gZGMuZm9ybS5nZXRWYWx1ZXMgPSBmdW5jdGlvbigkZm9ybSkge1xuICAvLyAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgLy8gICBjb25zb2xlLmxvZygkZm9ybSk7XG4gIC8vICAgcmV0dXJuIHZhbHVlcztcbiAgLy8gfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubGF5ZXJsaXN0ID0ge307XG4gIGRjLmxheWVybGlzdC5lbGVtcyA9IHt9O1xuXG4gIGRjLmxheWVybGlzdC5pbml0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRjLmxheWVybGlzdC4kZWxlbSA9ICQoJzxvbD4nKS5hZGRDbGFzcyhuYW1lKTtcbiAgICBkYy4kZWxlbS5hcHBlbmQoZGMubGF5ZXJsaXN0LiRlbGVtKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0ub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICgkKGV2ZW50LnRhcmdldCkuaGFzQ2xhc3MobmFtZSkpIHtcbiAgICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgbGlIZWxwZXIgPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLWhlbHAnKVxuICAgICAgLmh0bWwoJ1dlbGNvbWUgdG8gPHN0cm9uZz5kcm9wY2hvcDwvc3Ryb25nPiEgSGVyZSB5b3UgY2FuIGRyYWcgYW5kIGRyb3AgZmlsZXMgYW5kIHRoZXkgd2lsbCBzaG93IHVwIGluIHRoZSBsYXllciBsaXN0IGJlbG93Ljxicj48YnI+VG8gdGhlIGxlZnQgeW91IGNhbiB1cGxvYWQgYW5kIHNhdmUgeW91ciBmaWxlcyBvciA8YSBocmVmPVwiLz9naXN0PTA5MTI5YzIwZWMwMjBiODNiZjg1XCI+YWRkIGV4YW1wbGUgZGF0YTwvYT4gb3IgdGhlIDxhIGhyZWY9XCIvP2dpc3Q9ZDA2NmI1NzJlOGE4YWQyYjZkMTZcIj5VUyBTdGF0ZXM8L2E+Ljxicj48YnI+VG8gdGhlIHJpZ2h0IHlvdVxcJ2xsIG5vdGljZSBzb21lIGdlb3NwYXRpYWwgb3BlcmF0aW9ucyB0aGF0IGJlY29tZSBhdmFpbGFibGUgYmFzZWQgb24gc2VsZWN0aW5nIHNwZWNpZmljIGxheWVycy4nICk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZChsaUhlbHBlcik7XG5cbiAgICB2YXIgdG9nZ2xlTGF5ZXJzID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci10b2dnbGVBbGwnKVxuICAgICAgLmh0bWwoJzxsYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD5Ub2dnbGUgYWxsIGxheWVyczwvbGFiZWw+Jyk7XG4gICAgdG9nZ2xlTGF5ZXJzLm9uKCdjaGFuZ2UnLCBkYy5sYXllcmxpc3QudG9nZ2xlQWxsKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0uYXBwZW5kKHRvZ2dsZUxheWVycyk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6YWRkZWQnLCBkYy5sYXllcmxpc3QuYWRkTGF5ZXJMaXN0SXRlbSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBkYy5sYXllcmxpc3QucmVtb3ZlTGF5ZXJMaXN0SXRlbSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbmFtZWQnLCBkYy5sYXllcmxpc3QucmVuYW1lKTtcbiAgfTtcblxuICBkYy5sYXllcmxpc3QucmVuYW1lID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wLCBuZXdOYW1lKSB7XG4gICAgJCgnW2RhdGEtc3RhbXA9JytzdGFtcCsnXScpLmZpbmQoJy5sYXllci1uYW1lJykudGV4dChuZXdOYW1lKTtcbiAgfTtcblxuICAvLyB0cmlnZ2VyZWQgaW4gZHJvcGNob3AuanNcbiAgZGMubGF5ZXJsaXN0LmFkZExheWVyTGlzdEl0ZW0gPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgbGF5ZXJsaXN0SXRlbSA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItZWxlbWVudCcpLmF0dHIoJ2RhdGEtc3RhbXAnLCBsYXllci5zdGFtcCk7XG4gICAgdmFyIGxheWVyRGl2ID0gJCgnPGRpdj4nKVxuICAgICAgLmFkZENsYXNzKCdsYXllci1uYW1lIGxheWVyLW5ldycpXG4gICAgICAudGV4dChsYXllci5uYW1lKVxuICAgICAgLmRlbGF5KDMwMDApXG4gICAgICAucXVldWUoZnVuY3Rpb24obmV4dCkge1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdsYXllci1uZXcnKTtcbiAgICAgIH0pO1xuXG5cbiAgICB2YXIgbGF5ZXJUeXBlID0gJCgnPHNwYW4+JykuYWRkQ2xhc3MoJ2xheWVyLXR5cGUtaW1hZ2Ugc3ByaXRlIHNwcml0ZS1sYXllci0nK2xheWVyVHlwZUljb24obGF5ZXIudHlwZSkpO1xuICAgIHZhciBjaGVja2JveCA9ICQoJzxpbnB1dD4nKS5hZGRDbGFzcygnbGF5ZXItdG9nZ2xlJykucHJvcCh7J3R5cGUnOiAnY2hlY2tib3gnLCAnY2hlY2tlZCc6IHRydWV9KTtcbiAgICB2YXIgcmVtb3ZlID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbGF5ZXItYWN0aW9uIGxheWVyLXJlbW92ZScpLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIj48L2k+Jyk7XG4gICAgdmFyIGR1cGxpY2F0ZSA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2xheWVyLWFjdGlvbiBsYXllci1kdXBsaWNhdGUnKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLWZpbGVzLW9cIj48L2k+Jyk7XG5cbiAgICBkdXBsaWNhdGUub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpkdXBsaWNhdGUnLCBbJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIHJlbW92ZS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZScsIFskKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgZGMudXRpbC51cGRhdGVTZWFyY2goKTtcbiAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgY2hlY2tib3gub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgIC8vIHRyaWdnZXIgbGF5ZXI6c2hvd1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzaG93JywgW2xheWVyXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpoaWRlJywgW2xheWVyXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsYXllckRpdi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAvLyBjaGVjayBmb3Iga2V5cyBiZWluZyBoZWxkIGZvciBzcGVjaWFsIHNlbGVjdGlvblxuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgIC8vIHNlbGVjdCBhbGwgbGF5ZXJlcyBpbiBiZXR3ZWVuIHByZXZpb3VzIHRhcmdldCBhbmQgdGFyZ2V0XG4gICAgICAgIC8vIG5vdGU6IGRvbid0IHVuc2VsZWN0IGxheWVycyBhbHJlYWR5IHNlbGVjdGVkLCBqdXN0IGFkZCB0byBzZWxlY3Rpb25cbiAgICAgICAgdmFyIHRvU2VsZWN0ID0gW107XG4gICAgICAgIHZhciB0byA9ICQodGhpcyk7XG4gICAgICAgIHZhciBmcm9tID0gZGMubGF5ZXJsaXN0Ll9sYXN0U2VsZWN0ZWQ7XG4gICAgICAgIHZhciB0b0NvdW50LCBmcm9tQ291bnQ7XG5cbiAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICB2YXIgY2hlY2sgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICB2YXIgdG9TdGFtcCA9IHRvLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICB2YXIgZnJvbVN0YW1wID0gZnJvbS5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgaWYgKGNoZWNrID09PSB0b1N0YW1wKSB0b0NvdW50ID0gZTtcbiAgICAgICAgICBpZiAoY2hlY2sgPT09IGZyb21TdGFtcCkgZnJvbUNvdW50ID0gZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRvQ291bnQgPiBmcm9tQ291bnQpIHtcbiAgICAgICAgICAvLyBsb29wIHVwXG4gICAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIGlmIChsID49IGZyb21Db3VudCAmJiBsIDw9IHRvQ291bnQgKSB7XG4gICAgICAgICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RMYXllcigkKHRoaXMpLmZpbmQoJy5sYXllci1uYW1lJyksIGRjLmxheWVycy5saXN0WyQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIGlmIChsIDwgZnJvbUNvdW50ICYmIGwgPj0gdG9Db3VudCApIHtcbiAgICAgICAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdExheWVyKCQodGhpcykuZmluZCgnLmxheWVyLW5hbWUnKSwgZGMubGF5ZXJzLmxpc3RbJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChldmVudC5tZXRhS2V5KSB7XG4gICAgICAgIC8vIGFkZC9yZW1vdmUgc2VsZWN0ZWQgbGF5ZXIgdG8gY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSgkKHRoaXMpLCBsYXllcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjbGVhciBzZWxlY3Rpb24gYW5kIHNlbGVjdCB0YXJnZXRcbiAgICAgICAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uKCQodGhpcyksIGxheWVyKTtcbiAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSgkKHRoaXMpLCBsYXllcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChsYXllckRpdik7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoY2hlY2tib3gpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGxheWVyVHlwZSk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQocmVtb3ZlKTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChkdXBsaWNhdGUpO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGF5ZXJsaXN0SXRlbSk7XG5cbiAgICBkYy5sYXllcmxpc3QuZWxlbXNbbGF5ZXIuc3RhbXBdID0gbGF5ZXJsaXN0SXRlbTtcblxuICAgIC8vIGhpZGUgaGVscGVyIHRleHRcbiAgICAkKCcubGF5ZXItaGVscCcpLmhpZGUoKTtcbiAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuc2hvdygpO1xuICB9O1xuXG4gIGRjLmxheWVybGlzdC5zZWxlY3RMYXllciA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBpZiAoISRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAkaXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNlbGVjdGVkJywgW2x5cl0pO1xuICAgIH1cbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBpZiAoJGl0ZW0uaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICRpdGVtLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6dW5zZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9XG4gICAgZGMubGF5ZXJsaXN0Ll9sYXN0U2VsZWN0ZWQgPSAkaXRlbTtcbiAgfTtcbiAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24oJGl0ZW0sIGx5cikge1xuICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGxheWVyVHlwZUljb24odHlwZSkge1xuICAgIHZhciBpY29uO1xuICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICBjYXNlICdGZWF0dXJlQ29sbGVjdGlvbic6XG4gICAgICAgIGljb24gPSAnZmVhdHVyZWNvbGxlY3Rpb24nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8UG9pbnQ+JzpcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlQb2ludD4nOlxuICAgICAgICBpY29uID0gJ3BvaW50JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPExpbmVTdHJpbmc+JzpcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPic6XG4gICAgICAgIGljb24gPSAnbGluZSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxQb2x5Z29uPic6XG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpUG9seWdvbj4nOlxuICAgICAgICBpY29uID0gJ3BvbHlnb24nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPic6XG4gICAgICAgIGljb24gPSAnZ2VvbSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWNvbiA9ICdkZWZhdWx0JztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBpY29uO1xuICB9XG5cbiAgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gdHVybiB0aGVtIG9uXG4gICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQnKS5wcm9wKCdjaGVja2VkJykpIHtcbiAgICAgIGZvciAodmFyIGkgaW4gZGMubGF5ZXJzLmxpc3QpIHtcbiAgICAgICAgZWxlbVRvZ2dsZShkYy5sYXllcnMubGlzdFtpXS5zdGFtcCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgLy8gdHVybiB0aGVtIG9mZlxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBvIGluIGRjLmxheWVycy5saXN0KSB7XG4gICAgICAgIGVsZW1Ub2dnbGUoZGMubGF5ZXJzLmxpc3Rbb10uc3RhbXAsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbGVtVG9nZ2xlKHN0YW1wLCBib29sKSB7XG4gICAgICAkKCcubGF5ZXItZWxlbWVudFtkYXRhLXN0YW1wPScrc3RhbXArJ10nKVxuICAgICAgICAuZmluZCgnLmxheWVyLXRvZ2dsZScpXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgYm9vbClcbiAgICAgICAgLnRyaWdnZXIoJ2NoYW5nZScpOyAvLyBzZXRzIG9mZiBhIGNoYWluIHJlYWN0aW9uXG4gICAgfVxuICB9O1xuXG4gIGRjLmxheWVybGlzdC5yZW1vdmVMYXllckxpc3RJdGVtID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgJCgnW2RhdGEtc3RhbXA9JytzdGFtcCsnXScpLmZhZGVPdXQoMzAwLCBmdW5jdGlvbigpIHtcbiAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICBkZWxldGUgZGMubGF5ZXJsaXN0LmVsZW1zW3N0YW1wXTtcblxuICAgICAgLy8gc2hvdyBoZWxwZXIgdGV4dCBpZiBubyBsYXllcnMgZXhpc3RcbiAgICAgIC8vIHRoaXMgaGFzIHRvIGNoZWNrIGluc2lkZSBzaW5jZSB0aGVyZSBpcyBhIDMwMCBtcyBkZWxheSB3aXRoIHRoZSBmYWRlXG4gICAgICBpZiAoJCgnLmxheWVyLWVsZW1lbnQnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgJCgnLmxheWVyLWhlbHAnKS5zaG93KCk7XG4gICAgICAgICQoJy5sYXllci10b2dnbGVBbGwnKS5oaWRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubGF5ZXJzID0ge307XG4gIGRjLmxheWVycy5saXN0ID0ge307XG5cbiAgZGMubGF5ZXJzLnByZXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignZmlsZTphZGRlZCcsIGRjLmxheWVycy5hZGQpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmUnLCBkYy5sYXllcnMucmVtb3ZlKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6ZHVwbGljYXRlJywgZGMubGF5ZXJzLmR1cGxpY2F0ZSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbmFtZScsIGRjLmxheWVycy5yZW5hbWUpO1xuICB9O1xuXG4vKipcbiAqIEFkZCBhIGxheWVyIHRvIHRoZSBsYXllcnMgbGlzdCBhbmQgdHJpZ2dlciBsYXllcjphZGRlZCBmb3Igc3Vic2NyaWJlcnMgdG8gcGljayB1cC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxuICogQHBhcmFtIHtvYmplY3R9IGZpbGUgb2JqZWN0XG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZSBibG9iIHRvIGJlIGNvbnZlcnRlZCB3aXRoIEpTT04ucGFyc2UoKVxuICovXG4gIGRjLmxheWVycy5hZGQgPSBmdW5jdGlvbihldmVudCwgbmFtZSwgYmxvYiwgbHR5cGUsIHVybCkge1xuICAgIGlmIChibG9iLnR5cGUgPT09IFwiVG9wb2xvZ3lcIikge1xuICAgICAgYmxvYiA9IHRvcG9qc29uLmNsaWVudC5mZWF0dXJlKGJsb2IsIGJsb2Iub2JqZWN0c1tPYmplY3Qua2V5cyhibG9iLm9iamVjdHMpWzBdXSk7XG4gICAgfVxuICAgIFxuICAgIHZhciBsID0gZGMubGF5ZXJzLm1ha2VMYXllcihuYW1lLCBibG9iKTtcbiAgICBkYy5sYXllcnMubGlzdFtsLnN0YW1wXSA9IGw7XG5cbiAgICBpZiAobHR5cGUgJiYgdXJsKSB7XG4gICAgICBkYy5sYXllcnMubGlzdFtsLnN0YW1wXS5sdHlwZSA9IGx0eXBlO1xuICAgICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0udXJsID0gdXJsO1xuICAgIH1cblxuICAgIGRjLm5vdGlmeSgnc3VjY2VzcycsICc8c3Ryb25nPicrbC5uYW1lKyc8L3N0cm9uZz4gaGFzIGJlZW4gYWRkZWQhJywgMzUwMCk7XG5cbiAgICAvLyB0cmlnZ2VyIGxheWVyOmFkZGVkXG4gICAgJChkYykudHJpZ2dlcignbGF5ZXI6YWRkZWQnLCBbbF0pO1xuXG4gICAgLy8gVXBkYXRlIFVSTCwgaWYgYXBwbGljYWJsZVxuICAgIGlmIChsdHlwZSAmJiB1cmwpIHtcbiAgICAgIGRjLnV0aWwudXBkYXRlU2VhcmNoKCk7XG4gICAgfVxuXG4gIH07XG5cbi8qKlxuICogUmVtb3ZlIGEgbGF5ZXIsIHdoaWNoIHRyaWdnZXJzIGxheWVyOnJlbW92ZWQgZm9yIHRoZSByZXN0IG9mIHRoZSBhcHBcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYXllciBzdGFtcFxuICovXG4gIGRjLmxheWVycy5yZW1vdmUgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICAvLyB0cmlnZ2VyIGxheWVyOnJlbW92ZWRcbiAgICB0cnkge1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlZCcsIFtzdGFtcF0pO1xuICAgICAgZGMubm90aWZ5KCdpbmZvJywgJzxzdHJvbmc+JyArIGRjLmxheWVycy5saXN0W3N0YW1wXS5uYW1lICsgJzwvc3Ryb25nPiBoYXMgYmVlbiByZW1vdmVkLicpO1xuICAgICAgZGVsZXRlIGRjLmxheWVycy5saXN0W3N0YW1wXTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSByZW1vdmluZyB0aGUgbGF5ZXIuJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gIH07XG5cbiAgZGMubGF5ZXJzLmR1cGxpY2F0ZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIHZhciBseXIgPSBkYy5sYXllcnMubGlzdFtzdGFtcF07XG4gICAgLy8gbmVlZCB0byBjcmVhdGUgbmV3IGxheWVyIHNvIHdlIGNhbiBnZXQgYSB1bmlxZSBMLnN0YW1wKClcbiAgICBkYy5sYXllcnMuYWRkKHt9LCAnY29weV8nK2x5ci5uYW1lLCBseXIucmF3KTtcbiAgfTtcblxuICBkYy5sYXllcnMucmVuYW1lID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyLCBuZXdOYW1lKSB7XG4gICAgLy8gcmVuYW1lIGluIGxheWVyIG9iamVjdFxuICAgIGRjLmxheWVycy5saXN0W2xheWVyLnN0YW1wXS5uYW1lID0gbmV3TmFtZTtcblxuICAgIC8vIHJlbmFtZSBpbiBsYXllcmxpc3RcbiAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW5hbWVkJywgW2xheWVyLnN0YW1wLCBuZXdOYW1lXSk7XG4gIH07XG5cbiAgZGMubGF5ZXJzLm1ha2VMYXllciA9IGZ1bmN0aW9uKG5hbWUsIGpzb24pIHtcbiAgICB2YXIgZ2VvanNvbiA9IGpzb247XG4gICAgLy8gaWYgKGpzb24udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJyAmJiBqc29uLmZlYXR1cmVzLmxlbmd0aCA9PT0gMSkge1xuICAgIC8vICAgZ2VvanNvbiA9IGRjLnV0aWwudW5jb2xsZWN0KGpzb24pO1xuICAgIC8vIH1cblxuICAgIHZhciBmbCA9IEwubWFwYm94LmZlYXR1cmVMYXllcihnZW9qc29uKTtcbiAgICB2YXIgbGF5ZXIgPSB7XG4gICAgICBuYW1lOiBkYy51dGlsLnJlbW92ZUZpbGVFeHRlbnNpb24obmFtZSksXG4gICAgICBzdGFtcDogTC5zdGFtcChmbCksXG4gICAgICByYXc6IGdlb2pzb24sXG4gICAgICB0eXBlOiBnZXRUeXBlKGdlb2pzb24pLFxuICAgICAgZmVhdHVyZWxheWVyOiBmbCxcbiAgICAgIGRhdGVBZGRlZDogbmV3IERhdGUoKVxuICAgIH07XG4gICAgcmV0dXJuIGxheWVyO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFR5cGUoZ2opIHtcbiAgICBpZiAoZ2oudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgcmV0dXJuICdGZWF0dXJlQ29sbGVjdGlvbic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnai50eXBlICsgJzwnICsgZ2ouZ2VvbWV0cnkudHlwZSArICc+JztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5tYXAgPSB7fTtcblxuICBkYy5tYXAuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGRjLm1hcC4kZWxlbSA9ICQoJzxkaXY+JykucHJvcCgnaWQnLCAnZHJvcGNob3AtbWFwJykuYWRkQ2xhc3MoJ21hcCcpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChkYy5tYXAuJGVsZW0pO1xuXG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBkYy5tYXAucmVtb3ZlTGF5ZXIpO1xuXG4gICAgX21ha2VNYXAoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBfbWFrZU1hcCgpIHtcbiAgICBkYy5tYXAudG9rZW4gPSBMLm1hcGJveC5hY2Nlc3NUb2tlbiA9ICdway5leUoxSWpvaWMzWnRZWFIwYUdWM2N5SXNJbUVpT2lKVk1VbFVSMHhySW4wLk53ZVNfQXR0anN3dE41d1J1V0NTTkEnO1xuICAgIGRjLm1hcC5tID0gTC5tYXBib3gubWFwKCdkcm9wY2hvcC1tYXAnLCBudWxsLCB7XG4gICAgICB6b29tQ29udHJvbDogZmFsc2UsXG4gICAgICB3b3JsZENvcHlKdW1wOiB0cnVlXG4gICAgfSkuc2V0VmlldyhbMCwwXSwgMyk7XG5cbiAgICAvLyBzZXRzIHRoZSBsb2NhdGlvbiBvZiB0aGUgem9vbSBidXR0b25zIHRvIHRoZSB0b3AgcmlnaHRcbiAgICBMLmNvbnRyb2wuem9vbSh7XG4gICAgICBwb3NpdGlvbjogJ3RvcGxlZnQnXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgTC5tYXBib3guZ2VvY29kZXJDb250cm9sKCdtYXBib3gucGxhY2VzJywge1xuICAgICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIHZhciBiYXNlTGF5ZXJzID0ge1xuICAgICAgXCJNYXBib3ggU3RyZWV0c1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5zdHJlZXRzJyksXG4gICAgICBcIk1hcGJveCBPdXRkb29yc1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5vdXRkb29ycycpLFxuICAgICAgXCJNYXBib3ggTGlnaHRcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3gubGlnaHQnKSxcbiAgICAgIFwiTWFwYm94IERhcmtcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guZGFyaycpLFxuICAgICAgXCJNYXBib3ggU2F0ZWxsaXRlXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LnNhdGVsbGl0ZScpXG4gICAgfTtcblxuICAgIGJhc2VMYXllcnNbJ01hcGJveCBTdHJlZXRzJ10uYWRkVG8oZGMubWFwLm0pO1xuICAgIC8vIHNldHMgbG9jYXRpb24gb2YgYmFzZSBsYXllciBjb250cm9sIHRvIHRoZSBib3R0b20gcmlnaHRcbiAgICBMLmNvbnRyb2wubGF5ZXJzKGJhc2VMYXllcnMsIHt9LCB7XG4gICAgICBwb3NpdGlvbjogJ2JvdHRvbXJpZ2h0JyxcbiAgICAgIGNvbGxhcHNlZDogZmFsc2VcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICBkYy5tYXAubGF5ZXJncm91cCA9IEwubWFwYm94LmZlYXR1cmVMYXllcigpO1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjphZGRlZCcsIGRjLm1hcC5hZGRMYXllcik7XG4gICAgJChkYykub24oJ2xheWVyOmhpZGUnLCBkYy5tYXAuaGlkZUxheWVyKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6c2hvdycsIGRjLm1hcC5zaG93TGF5ZXIpO1xuXG4gICAgLy8gLy8gbXkgbG9jYXRpb24gYXMgbGF5ZXJcbiAgICAvLyB2YXIgZ2VvbG9jYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlb2xvY2F0ZScpO1xuXG4gICAgJChkYy5tYXAubSkub24oJ2xvY2F0aW9uZm91bmQnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZGF0YSA9IGUub3JpZ2luYWxFdmVudDtcbiAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhkYXRhLmJvdW5kcyk7XG5cbiAgICAgIHZhciBseXIgPSB7XG4gICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBbZGF0YS5sYXRsbmcubG5nLCBkYXRhLmxhdGxuZy5sYXRdXG4gICAgICAgIH0sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAndGl0bGUnOiAnVGhlcmUgWW91IEFyZScsXG4gICAgICAgICAgJ21hcmtlci1jb2xvcic6ICcjMjA3MTc4JyxcbiAgICAgICAgICAnbWFya2VyLXN5bWJvbCc6ICdoZWFydCdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFsneW91ciBsb2NhdGlvbicsIGx5cl0pO1xuICAgIH0pO1xuXG4gICAgJChkYy5tYXAubSkub24oJ2xvY2F0aW9uZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBmaW5kaW5nIHlvdXIgbG9jYXRpb24uJywgMzAwMCk7XG4gICAgfSk7XG5cbiAgICAvLyAvLyBPbmNlIHdlJ3ZlIGdvdCBhIHBvc2l0aW9uLCB6b29tIGFuZCBjZW50ZXIgdGhlIG1hcFxuICAgIC8vIC8vIG9uIGl0LCBhbmQgYWRkIGEgc2luZ2xlIG1hcmtlci5cbiAgICAvLyB0aGlzLl9tYXAub24oJ2xvY2F0aW9uZm91bmQnLCBmdW5jdGlvbihlKSB7XG4gICAgLy8gICB0aGlzLl9tYXAuZml0Qm91bmRzKGUuYm91bmRzKTtcblxuXG4gICAgLy8gICBteUxheWVyLnNldEdlb0pTT04oe1xuICAgIC8vICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgLy8gICAgIGdlb21ldHJ5OiB7XG4gICAgLy8gICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAvLyAgICAgICBjb29yZGluYXRlczogW2UubGF0bG5nLmxuZywgZS5sYXRsbmcubGF0XVxuICAgIC8vICAgICB9LFxuICAgIC8vICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgLy8gICAgICAgJ3RpdGxlJzogJ1RoZXJlIFlvdSBBcmUnLFxuICAgIC8vICAgICAgICdtYXJrZXItY29sb3InOiAnIzIwNzE3OCcsXG4gICAgLy8gICAgICAgJ21hcmtlci1zeW1ib2wnOiAnaGVhcnQnXG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH0pO1xuXG4gICAgLy8gICAvLyBBbmQgaGlkZSB0aGUgZ2VvbG9jYXRpb24gYnV0dG9uXG4gICAgLy8gICAvL2dlb2xvY2F0ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGdlb2xvY2F0ZSk7XG4gICAgLy8gfS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIC8vIElmIHRoZSB1c2VyIGNob29zZXMgbm90IHRvIGFsbG93IHRoZWlyIGxvY2F0aW9uXG4gICAgLy8gLy8gdG8gYmUgc2hhcmVkLCBkaXNwbGF5IGFuIGVycm9yIG1lc3NhZ2UuXG4gICAgLy8gdGhpcy5fbWFwLm9uKCdsb2NhdGlvbmVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gICBnZW9sb2NhdGUuaW5uZXJIVE1MID0gJ1Bvc2l0aW9uIGNvdWxkIG5vdCBiZSBmb3VuZCc7XG4gICAgLy8gfSk7XG5cblxuICB9XG5cbiAgZGMubWFwLmNvdW50ID0gMDtcblxuICBkYy5tYXAuYWRkTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgZmwgPSBsYXllci5mZWF0dXJlbGF5ZXI7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkTGF5ZXIoZmwpO1xuXG4gICAgLy8gY3JlYXRlIHBvcHVwIHRhYmxlIGZvciBlYWNoIGZlYXR1cmVcbiAgICBmbC5lYWNoTGF5ZXIoZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgIHZhciBjb250ZW50ID0gJzx0YWJsZSBjbGFzcz1cImRyb3BjaG9wLXRhYmxlXCI+PHRyPjx0aD5Qcm9wZXJ0eTwvdGg+PHRoPkRhdGE8L3RoPjwvdHI+JztcblxuICAgICAgaWYgKGxheWVyLmZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGxheWVyLmZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICAgIGNvbnRlbnQgKz0gJzx0cj48dGQ+PHN0cm9uZz4nICsgcHJvcCArICc8L3N0cm9uZz48L3RkPjx0ZD4nICsgbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzW3Byb3BdICsgJzwvdGQ+PC90cj4nO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50ICs9ICc8cD5UaGVyZSBhcmUgbm8gcHJvcGVydGllcyBzZXQgZm9yIHRoaXMgZmVhdHVyZS48L3A+JztcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgKz0gJzwvdGFibGU+JztcblxuICAgICAgbGF5ZXIuYmluZFBvcHVwKEwucG9wdXAoe1xuICAgICAgICBtYXhXaWR0aDogNDUwLFxuICAgICAgICBtYXhIZWlnaHQ6IDIwMCxcbiAgICAgICAgYXV0b1BhblBhZGRpbmc6IFs0NSwgNDVdLFxuICAgICAgICBjbGFzc05hbWU6ICdkcm9wY2hvcC1wb3B1cCdcbiAgICAgIH0sIGxheWVyKS5zZXRDb250ZW50KGNvbnRlbnQpKTtcbiAgICB9KTtcblxuICB9O1xuXG4gIGRjLm1hcC5oaWRlTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5yZW1vdmVMYXllcihsYXllci5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIGRjLm1hcC5zaG93TGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRMYXllcihsYXllci5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIGRjLm1hcC5yZW1vdmVMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLnJlbW92ZUxheWVyKGRjLmxheWVycy5saXN0W3N0YW1wXS5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubm90aWZ5ID0gZnVuY3Rpb24odHlwZSwgdGV4dCwgdGltZSkge1xuICAgIHZhciBub3RlID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbm90aWZpY2F0aW9uJylcbiAgICAgIC5hZGRDbGFzcyh0eXBlKVxuICAgICAgLmh0bWwodGV4dCk7XG5cbiAgICAvLyBgdGltZWAgY2FuIGVxdWFsICdjbG9zZScgaW4gb3JkZXIgdG8gY3JlYXRlIGEgY2xvc2UgYnV0dG9uXG4gICAgaWYgKHRpbWUgPT09ICdjbG9zZScpIHtcblxuICAgICAgdmFyICRjbG9zZSA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ25vdGlmaWNhdGlvbi1jbG9zZScpXG4gICAgICAgIC5wcm9wKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgICAgIC5odG1sKCc8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCI+PC9pPicpO1xuXG4gICAgICAkY2xvc2Uub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkKG5vdGUpLmFwcGVuZCgkY2xvc2UpO1xuICAgICAgJChkYy4kZWxlbSkuYXBwZW5kKG5vdGUpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgJChkYy4kZWxlbSkuYXBwZW5kKG5vdGUpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBub3RlLnJlbW92ZSgpO1xuICAgICAgfSwgdGltZSB8fCAzMDAwKTtcblxuICAgIH1cblxuICAgIFxuXG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGJ1aWxkIG9wcy5nZW8gY29udGFpbmVyXG4gICAgdmFyIGdlb0NvbnRhaW5lciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ29wZXJhdGlvbnMtZ2VvJyk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGdlb0NvbnRhaW5lcik7XG5cbiAgICAvLyBjcmVhdGUgZ2VvIGJ1dHRvbnMgJiBmb3Jtc1xuICAgIGZvciAodmFyIGdlb09wIGluIGRjLm9wcy5nZW8pIHtcbiAgICAgIHZhciBnZW9CdG4gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdvcGVyYXRpb24gb3BlcmF0aW9uLWdlbyBvcGVyYXRpb24taW5hY3RpdmUnKVxuICAgICAgICAuaHRtbCgnPGg0PicgKyBnZW9PcCArICc8L2g0PjxwPicgKyBkYy5vcHMuZ2VvW2dlb09wXS5kZXNjcmlwdGlvbiArICc8L3A+JylcbiAgICAgICAgLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJywgZ2VvT3ApO1xuICAgICAgZ2VvQnRuLm9uKCdjbGljaycsIF9nZW9CdG5DbGljayk7XG5cbiAgICAgIGdlb0NvbnRhaW5lci5hcHBlbmQoZ2VvQnRuKTtcbiAgICB9XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6c2VsZWN0ZWQnLCBkYy5vcHMuZ2VvQ2hlY2spO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMub3BzLmdlb0NoZWNrKTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmdlbycsIGRjLm9wcy5nZW9FeGVjdXRlKTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC1naXN0JywgZGMub3BzLmZpbGVbJ2xvYWQtZ2lzdCddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtdXJsJywgZGMub3BzLmZpbGVbJ2xvYWQtdXJsJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC1vdmVycGFzcycsIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6cmVuYW1lJywgZGMub3BzLmZpbGUucmVuYW1lLmNhbGxiYWNrKTtcblxuICAgIGRjLm9wcy5zZXR1cCA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2ltcG9ydCcsXG4gICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+JyxcbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICd1cGxvYWQnLFxuICAgICAgICAgICdsb2FkLXVybCcsXG4gICAgICAgICAgJ2xvYWQtZ2lzdCcsXG4gICAgICAgICAgJ2xvYWQtb3ZlcnBhc3MnLFxuICAgICAgICAgICdsb2NhdGlvbidcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1NhdmUnLFxuICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1mbG9wcHktb1wiPjwvaT4nLFxuICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgJ3NhdmUtZ2VvanNvbicsXG4gICAgICAgICAgJ3NhdmUtdG9wb2pzb24nLFxuICAgICAgICAgICdzYXZlLXNoYXBlZmlsZSdcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0dlbyBBY3Rpb25zJyxcbiAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtd3JlbmNoXCI+PC9pPicsXG4gICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAnZXh0ZW50JyxcbiAgICAgICAgICAnZXhwYW5kJyxcbiAgICAgICAgICAnY29tYmluZScsXG4gICAgICAgICAgJ3JlbmFtZScsXG4gICAgICAgICAgJ3JlbW92ZScsXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICAnaW5mbydcbiAgICBdO1xuXG4gICAgLy8gc2V0dXAgb3BzIGZpbGVcbiAgICB2YXIgbGVmdE1lbnUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1tZW51LWxlZnQnKTtcbiAgICB2YXIgc2V0dXAgPSBkYy5vcHMuc2V0dXA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldHVwLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYWN0aW9uID0gc2V0dXBbaV07XG4gICAgICBpZiAodHlwZW9mIHNldHVwW2ldICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBpZihkYy5vcHMuZmlsZVthY3Rpb25dLnR5cGUgPT09ICdicmVhaycpIHtcbiAgICAgICAgICB2YXIgJGJyZWFrU3BhY2UgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdtZW51LWFjdGlvbi1icmVhaycpO1xuICAgICAgICAgIGxlZnRNZW51LmFwcGVuZCgkYnJlYWtTcGFjZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGVmdE1lbnUuYXBwZW5kKGJ1aWxkTWVudUJ1dHRvbihhY3Rpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBidWlsZCBhIGNvbGxhcHNlYWJsZSBtZW51IFwiYnV0dG9uXCJcbiAgICAgICAgdmFyIGNvbGxhcHNlQnRuID0gJCgnPGRpdj4nKVxuICAgICAgICAgIC5hZGRDbGFzcygnbWVudS1hY3Rpb24gbWVudS1jb2xsYXBzZScpXG4gICAgICAgICAgLmh0bWwoc2V0dXBbaV0uaWNvbik7XG4gICAgICAgIGlmIChzZXR1cFtpXS5uYW1lID09PSAnaW1wb3J0JykgY29sbGFwc2VCdG4uYWRkQ2xhc3MoJ21lbnUtaW1wb3J0Jyk7XG5cbiAgICAgICAgdmFyIGNvbGxhcHNlSW5uZXIgPSAkKCc8ZGl2PicpXG4gICAgICAgICAgLmFkZENsYXNzKCdtZW51LWNvbGxhcHNlLWlubmVyJyk7XG5cbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggYWN0aW9uIGFuZCBidWlsZCBhIGJ1dHRvbiBmb3IgaXQsIGp1c3QgbGlrZSBhYm92ZSxcbiAgICAgICAgLy8gYnV0IGFwcGVuZCBpdCB0byB0aGUgbWVudS1jb2xsYXBzZS1pbm5lciBlbGVtZW50XG4gICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgc2V0dXBbaV0uYWN0aW9ucy5sZW5ndGg7IGErKykge1xuICAgICAgICAgIHZhciBhY3RuID0gZGMub3BzLnNldHVwW2ldLmFjdGlvbnNbYV07XG4gICAgICAgICAgY29sbGFwc2VJbm5lci5hcHBlbmQoYnVpbGRNZW51QnV0dG9uKGFjdG4pKTtcbiAgICAgICAgfVxuICAgICAgICBjb2xsYXBzZUJ0bi5hcHBlbmQoY29sbGFwc2VJbm5lcik7XG5cbiAgICAgICAgLy8gYXBwZW5kIHRoZSBlbnRpcmUgY29sbGFwc2VCdG4gdG8gdGhlIGxlZnRNZW51XG4gICAgICAgIGxlZnRNZW51LmFwcGVuZChjb2xsYXBzZUJ0bik7XG4gICAgICB9XG4gICAgfVxuICAgIGRjLiRlbGVtLmFwcGVuZChsZWZ0TWVudSk7XG5cbiAgICBmdW5jdGlvbiBidWlsZE1lbnVCdXR0b24oYWN0aW9uKSB7XG4gICAgICB2YXIgYnV0dG9uID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbWVudS1hY3Rpb24nKVxuICAgICAgICAuaHRtbChkYy5vcHMuZmlsZVthY3Rpb25dLmljb24gfHwgJyEnKVxuICAgICAgICAuYXR0cignZGF0YS1vcGVyYXRpb24nLCBhY3Rpb24pXG4gICAgICAgIC5hdHRyKCdkYXRhLXRvb2x0aXAnLCBkYy5vcHMuZmlsZVthY3Rpb25dLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKGRjLm9wcy5maWxlW2FjdGlvbl0udHlwZSA9PT0gJ2luZm8nKSBidXR0b24uYWRkQ2xhc3MoJ2Ryb3BjaG9wLWluZm8nKTtcbiAgICAgIGJ1dHRvbi5vbignY2xpY2snLCBfZmlsZUJ0bkNsaWNrKTtcbiAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICB9O1xuXG4gIC8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cblxuICAvKiBpZ25vcmluZyB0aGVzZSBmdW5jdGlvbnMgaW4ganNoaW50IGJlY2F1c2Ugd2UgYXJlIGdldHRpbmdcbiAgYW4gdW5lY2Vzc2FyeSBzdHJpY3QgdmlvbGF0aW9uIHdhcm5pbmcsIGJ1dCBvdXIgdXNhZ2Ugb2YgYHRoaXNgXG4gIGlzIHByb3BlciBoZXJlLiAqL1xuICBmdW5jdGlvbiBfZ2VvQnRuQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgLy8gaWYgb3BlcmF0aW9uIHJlcXVpcmVzIG5vIHBhcmFtZXRlcnMsIGRvbid0IHJlbmRlciBhIGZvcm1cbiAgICBpZiAoIWRjLm9wcy5nZW9bb3BlcmF0aW9uXS5wYXJhbWV0ZXJzKSB7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdvcGVyYXRpb246Z2VvJywgW29wZXJhdGlvbiwgZGMuc2VsZWN0aW9uLmxpc3RdKTtcbiAgICAvLyBvdGhlcndpc2UgcmVuZGVyIHRoZSBmb3JtXG4gICAgfSBlbHNlIHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06Z2VvJywgW29wZXJhdGlvbl0pO1xuICAgIH1cbiAgfVxuXG5cbiAgZnVuY3Rpb24gX2ZpbGVCdG5DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgb3BlcmF0aW9uID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9wZXJhdGlvbicpO1xuICAgIHRyeSB7XG4gICAgICBkYy5vcHMuZmlsZVtvcGVyYXRpb25dLmV4ZWN1dGUoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhpcyBvcGVyYXRpb24gZG9lc25cXCd0IGV4aXN0IScpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuICAvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgdHVyZiBmdW5jdGlvbiBiYXNlZCBvbiBidXR0b24gb3BlcmF0aW9uIGNsaWNrLlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3JpZ2luYWwgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhpcyBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0aW9uIHRvIGJlIGV4ZWN1dGVkIHZpYSB0dXJmXG4gICAqIEBwYXJhbSB7YXJyYXl9IHNlcmllcyBvZiBwYXJhbWV0ZXJzIHRvIGJlIGFwcGxpZWQgdG8gdHVyZiBvcGVyYXRpb25cbiAgICovXG4gIGRjLm9wcy5nZW9FeGVjdXRlID0gZnVuY3Rpb24oZXZlbnQsIG9wZXJhdGlvbiwgcGFyYW1ldGVycykge1xuICAgIHZhciBwcmVwID0gZGMub3BzLnByZXBhcmVUdXJmUGFyYW1zKG9wZXJhdGlvbiwgcGFyYW1ldGVycyk7XG4gICAgdmFyIHJlc3VsdCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGRjLm9wcy5nZW9bb3BlcmF0aW9uXS5leGVjdXRlKHByZXAub3B0aW9ucyk7XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnVGhhdCBvcGVyYXRpb24gaXNuXFwndCBwb3NzaWJsZS4gVHJ5IGNoYW5naW5nIHRoZSBvcmRlciBvZiB5b3VyIHNlbGVjdGlvbi4nKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW3ByZXAubmFtZSwgcmVzdWx0XSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgcGFyYW1ldGVycyBmb3IgZXhlY3V0aW5nIHdpdGhpbiBhIHR1cmYgZnVuY3Rpb24gdXNpbmcgLmFwcGx5KCkgLSByZXR1cm5zIGFuIGFycmF5XG4gICAqIEBwYXJhbSB7YXJyYXl9IG9wdGlvbnMgZnJvbSB0aGUgdXNlciBwYXNzZWQgZnJvbSB0aGUgb3JpZ2luYWwgZXZlbnQgdHJpZ2dlclxuICAgKi9cbiAgZGMub3BzLnByZXBhcmVUdXJmUGFyYW1zID0gZnVuY3Rpb24ob3BlcmF0aW9uLCBwYXJhbXMpIHtcbiAgICB2YXIgZGF0YSA9IHt9O1xuICAgIGRhdGEub3B0aW9ucyA9IFtdO1xuXG4gICAgdmFyIGdlb21zID0gW107XG4gICAgdmFyIG5hbWVBcnJheSA9IFtdO1xuICAgIC8vIGdldCBnZW9tZXRyeSBhcnJheSBmcm9tIHNlbGVjdGlvblxuICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgaWYgKCQuaW5BcnJheSgnc3dpdGNoLScgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcCwgcGFyYW1zKSA9PT0gLTEpIHtcbiAgICAgICAgZ2VvbXMucHVzaChkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2VvbXMudW5zaGlmdChkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcpO1xuICAgICAgfVxuICAgICAgbmFtZUFycmF5LnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSk7XG4gICAgfSk7XG5cbiAgICAvLyBtZXJnZSBwYXJhbXMgd2l0aCBvcHRpb25zIGFycmF5XG4gICAgZGF0YS5vcHRpb25zID0gJC5tZXJnZShnZW9tcywgcGFyYW1zKTtcblxuICAgIC8vIGNyZWF0ZSBuYW1lIGFycmF5XG4gICAgZGF0YS5uYW1lID0gZGMudXRpbC5jb25jYXQobmFtZUFycmF5LCAnXycsIG9wZXJhdGlvbik7XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICBkYy5vcHMuZ2VvQ2hlY2sgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcblxuICAgIC8vIGNoZWNrIHNlbGVjdGlvbiBjb3VudCB2cyBvcGVyYXRpb24gbWluL21heFxuICAgIGZvciAodmFyIG8gaW4gZGMub3BzLmdlbykge1xuICAgICAgdmFyIG9wID0gZGMub3BzLmdlb1tvXTtcbiAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPiBvcC5tYXhGZWF0dXJlcyB8fCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPCBvcC5taW5GZWF0dXJlcykge1xuICAgICAgICB0dXJuSXRPZmYobyk7XG4gICAgICAgIC8vIGRvbid0IGdvIGFueSBmdXJ0aGVyXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIC8vIGNoZWNrIG9wZXJhdGlvbiBhZ2FpbnN0IGVhY2ggc2VsZWN0aW9uIGRhdGEgdHlwZVxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aDsgeCsrKSB7XG4gICAgICAgICAgdmFyIHNlbCA9IGRjLnNlbGVjdGlvbi5saXN0W3hdO1xuXG4gICAgICAgICAgLy8gaWYgdGhlIHNlbGVjdGlvbiB0eXBlIGlzIGluIHRoZSBhcnJheSwgbWFyayBpdCBhcyBhY3RpdmUhXG4gICAgICAgICAgaWYgKCQuaW5BcnJheShzZWwudHlwZSwgb3AucmVxdWlyZW1lbnRzLnR5cGVzKSA+IC0xIHx8IG9wLnJlcXVpcmVtZW50cy5nZW5lcmFsRmVhdHVyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdHVybkl0T24obyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHR1cm5JdE9mZihvKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHR1cm5JdE9mZihvcCkge1xuICAgICAgdmFyIGJ0biA9ICQoJ1tkYXRhLW9wZXJhdGlvbj0nKyBvcCArJ10nKTtcbiAgICAgIGJ0bi5hZGRDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICBidG4ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0dXJuSXRPbihvcCkge1xuICAgICAgdmFyIGJ0biA9ICQoJ1tkYXRhLW9wZXJhdGlvbj0nKyBvcCArJ10nKTtcbiAgICAgIGJ0bi5yZW1vdmVDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICBidG4ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfVxuXG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMub3BzID0gZGMub3BzIHx8IHt9O1xuXG4gIGRjLm9wcy5maWxlID0ge1xuICAgIHVwbG9hZDoge1xuICAgICAgZGVzY3JpcHRpb246ICdVcGxvYWQgZnJvbSB5b3VyIGNvbXB1dGVyICguZ2VvanNvbiknLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdXBsb2FkXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gaW5zcGlyZWQgZnJvbSBnZW9qc29uLmlvXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvZ2VvanNvbi5pby9ibG9iL2doLXBhZ2VzL3NyYy91aS9maWxlX2Jhci5qcyNMMzkwXG4gICAgICAgIHZhciAkYmxpbmRJbnB1dCA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ2ZpbGUnKVxuICAgICAgICAgIC5hdHRyKCdtdWx0aXBsZScsICd0cnVlJylcbiAgICAgICAgICAuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpXG4gICAgICAgICAgLmNzcygncG9zaXRpb24nLCAnYWJzb2x1dGUnKVxuICAgICAgICAgIC5jc3MoJ2hlaWdodCcsICcwJylcbiAgICAgICAgICAub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGZpbGVzID0gdGhpcy5maWxlcztcbiAgICAgICAgICAgICQoZmlsZXMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgICBkYy51dGlsLnJlYWRGaWxlKGZpbGVzW2ldKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJGJsaW5kSW5wdXQucmVtb3ZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGJsaW5kSW5wdXQpO1xuICAgICAgICAkYmxpbmRJbnB1dC5jbGljaygpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAnbG9hZC11cmwnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0ltcG9ydCBmaWxlIGZyb20gYSBVUkwnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtbGlua1wiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VybCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidVUkwnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnaHR0cDovLycsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC11cmwnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICB2YXIgdXJsID0gcGFyYW1ldGVyc1swXTtcbiAgICAgICAgZGMudXRpbC54aHIodXJsLCBkYy5vcHMuZmlsZVtuYW1lXS5jYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIC8vIGdldCBmaWxlbmFtZSBiYXNlZCBvbiB0aGUgZW5kIG9mIHRoZSB1cmwgLSBub3Qgc3VyZSBpZiB0aGlzIGlzIHN1c3RhaW5hYmxlXG4gICAgICAgICAgdmFyIG5hbWUgPSB4aHIucmVzcG9uc2VVUkwuc3Vic3RyaW5nKHhoci5yZXNwb25zZVVSTC5sYXN0SW5kZXhPZignLycpKzEpO1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbbmFtZSwgZGF0YSwgJ3VybCcsIHhoci5yZXNwb25zZVVSTF0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcmV0cmlldmUgR2lzdC4gUGxlYXNlIGNoZWNrIHlvdXIgVVJMJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtZ2lzdCc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0IGZpbGVzIGZyb20gR2lzdCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1naXRodWJcIj48L2k+JyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdnaXN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J0dpc3QgSUQgb3IgVVJMJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHBzOi8vZ2lzdC5naXRodWIuY29tLydcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLWdpc3QnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICB2YXIgZ2lzdCA9IHBhcmFtZXRlcnNbMF0uc3BsaXQoJy8nKVtwYXJhbWV0ZXJzWzBdLnNwbGl0KCcvJykubGVuZ3RoLTFdO1xuICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vZ2lzdHMvJyArIGdpc3Q7XG4gICAgICAgIGRjLnV0aWwueGhyKHVybCwgZGMub3BzLmZpbGVbbmFtZV0uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICBmb3IgKHZhciBmIGluIGRhdGEuZmlsZXMpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gZGF0YS5maWxlc1tmXS5maWxlbmFtZTtcbiAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbbmFtZSwgSlNPTi5wYXJzZShkYXRhLmZpbGVzW2ZdLmNvbnRlbnQpLCAnZ2lzdCcsIHhoci5yZXNwb25zZVVSTC5zcGxpdCgnLycpW3hoci5yZXNwb25zZVVSTC5zcGxpdCgnLycpLmxlbmd0aCAtIDFdXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZGMubm90aWZ5KCdzdWNjZXNzJywgJ1N1Y2Nlc2Z1bGx5IHJldHJpZXZlZCBnaXN0JylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCByZXRyaWV2ZSBHaXN0LiBQbGVhc2UgY2hlY2sgeW91ciBVUkwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnbG9hZC1vdmVycGFzcyc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnUXVlcnkgdGhlIE92ZXJwYXNzIEFQSScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10ZXJtaW5hbFwiPjwvaT4nLFxuICAgICAgX3RlbXA6IHt9LFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3F1ZXJ5JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J0xlYXJuIG1vcmUgYWJvdXQgPGEgaHJlZj1cImh0dHA6Ly93aWtpLm9wZW5zdHJlZXRtYXAub3JnL3dpa2kvT3ZlcnBhc3NfQVBJL0xhbmd1YWdlX0d1aWRlXCIgdGFyZ2V0PVwiX2JsYW5rXCI+dGhlIHF1ZXJ5IGxhbmd1YWdlPC9hPi4nLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnYW1lbml0eT1iYXInXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnbGF5ZXIgbmFtZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidOYW1lIG9mIHRoZSBsYXllciBhZGRlZCBpZiByZXN1bHRzIGFyZSBmb3VuZC4nLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnb3ZlcnBhc3NfbGF5ZXJfbmFtZSdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtb3ZlcnBhc3MnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICAvLyBzZXQgbGF5ZXIgbmFtZSB0byBfdGVtcCBmb3IgbGF0ZXIgdXNhZ2VcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5fdGVtcC5sYXllck5hbWUgPSBwYXJhbWV0ZXJzWzFdOyAvLyB0aGlzIGlzIHVnbHlcblxuICAgICAgICAvLyBidWlsZCB0aGUgcXVlcnkgd2l0aCBib3VuZGluZyBib3hcbiAgICAgICAgdmFyIGJib3ggPSBkYy51dGlsLmdldEJCb3goKTtcbiAgICAgICAgZGMudXRpbC54aHIoJ2h0dHA6Ly9vdmVycGFzcy1hcGkuZGUvYXBpL2ludGVycHJldGVyP1tvdXQ6anNvbl07bm9kZVsnK3BhcmFtZXRlcnNbMF0rJ10oJytiYm94KycpO291dDsnLCBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgdmFyIGdlb2pzb24gPSBvc210b2dlb2pzb24oZGF0YSwge1xuICAgICAgICAgICAgZmxhdFByb3BlcnRpZXM6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIWRhdGEuZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnTm8gZWxlbWVudHMgZm91bmQgaW4geW91ciBxdWVyeS4nKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLl90ZW1wLmxheWVyTmFtZSwgZ2VvanNvbl0pO1xuICAgICAgICAgICAgZGMubm90aWZ5KCdzdWNjZXNzJywgJ0ZvdW5kIDxzdHJvbmc+JyArIGRhdGEuZWxlbWVudHMubGVuZ3RoICsgJyBlbGVtZW50czwvc3Ryb25nPiBmcm9tIHRoZSBPdmVycGFzcyBBUEknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcXVlcnkgdGhlIE92ZXJwYXNzIEFQSScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGxvY2F0aW9uOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0FkZCB5b3VyIGxvY2F0aW9uIGFzIGEgbGF5ZXInLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtY3Jvc3NoYWlyc1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghbmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdHZW9sb2NhdGlvbiBpcyBub3QgYXZhaWxhYmxlIG9uIHRoaXMgYnJvd3Nlci4nLCA0MDAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5tYXAubS5sb2NhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnc2F2ZS1nZW9qc29uJzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhdmUgYXMgR2VvSlNPTicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1maWxlLWNvZGUtb1wiPjwvaT4nLFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcpO1xuICAgICAgICAgIHZhciB0aXRsZSA9ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICcuZ2VvanNvbic7XG4gICAgICAgICAgc2F2ZUFzKG5ldyBCbG9iKFtjb250ZW50XSwge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCdcbiAgICAgICAgICB9KSwgdGl0bGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdzYXZlLXRvcG9qc29uJzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhdmUgYXMgVG9wb0pTT04nLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtb2JqZWN0LXVuZ3JvdXBcIj48L2k+JyxcbiAgICAgIGNyZWF0ZXNMYXllcjogZmFsc2UsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICB0b3BvanNvbi50b3BvbG9neSh7XG4gICAgICAgICAgICAgIGNvbGxlY3Rpb246IGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhd1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAncHJvcGVydHktdHJhbnNmb3JtJzogZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmZWF0dXJlLnByb3BlcnRpZXM7XG4gICAgICAgICAgICB9fSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHZhciB0aXRsZSA9ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICcudG9wb2pzb24nO1xuICAgICAgICAgIHNhdmVBcyhuZXcgQmxvYihbY29udGVudF0sIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnXG4gICAgICAgICAgfSksIHRpdGxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnc2F2ZS1zaGFwZWZpbGUnOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBTaGFwZWZpbGUnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZmlsZVwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgZm9sZGVyOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVzOiB7XG4gICAgICAgICAgICAgICAgcG9pbnQ6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfcG9pbnQnLFxuICAgICAgICAgICAgICAgIHBvbHlnb246ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfcG9seScsXG4gICAgICAgICAgICAgICAgbGluZTogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19saW5lJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2hwd3JpdGUuZG93bmxvYWQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3LCBvcHRpb25zKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnRXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBkb3dubG9hZGluZyB0aGUgc2hhcGVmaWxlLicgKyBlcnIpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZVxuICAgIH0sXG5cbiAgICBleHRlbnQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdWaWV3IGV4dGVudCBvZiBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZ2xvYmVcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZighZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gZXh0ZW50IG9mIGVudGlyZSBsYXllciBsaXN0IGlmIG5vdGhpbmcgc2VsZWN0ZWRcbiAgICAgICAgICBkYy5tYXAubS5maXRCb3VuZHMoZGMubWFwLmxheWVyZ3JvdXAuZ2V0Qm91bmRzKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG90aGVyd2lzZSBidWlsZCB0aGUgYm91bmRzIGJhc2VkIG9uIHNlbGVjdGVkIGxheWVyc1xuICAgICAgICAgIHZhciBib3VuZHM7XG4gICAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICB2YXIgZmwgPSBkYy5zZWxlY3Rpb24ubGlzdFtsXS5mZWF0dXJlbGF5ZXI7XG4gICAgICAgICAgICBpZighbCkgYm91bmRzID0gZmwuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICBlbHNlIGJvdW5kcy5leHRlbmQoZmwuZ2V0Qm91bmRzKCkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZXhwYW5kOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29udmVydCBGZWF0dXJlQ29sbGVjdGlvbiBpbnRvIHNlcGFyYXRlIGZlYXR1cmVzJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWV4cGFuZFwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB2YXIgZmMgPSBkYy5zZWxlY3Rpb24ubGlzdFswXTtcbiAgICAgICAgICBpZiAoZmMucmF3LnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICAgICQoZmMucmF3LmZlYXR1cmVzKS5lYWNoKGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtmYy5uYW1lICsgY291bnQgKyAnXycgKyBmYy5yYXcuZmVhdHVyZXNbZl0uZ2VvbWV0cnkudHlwZSwgZmMucmF3LmZlYXR1cmVzW2ZdXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVGhhdCBuZWVkcyB0byBiZSBhIGZlYXR1cmUgY29sbGVjdGlvbiEnKTtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnTGF5ZXIgaXMgbm90IGEgRmVhdHVyZUNvbGxlY3Rpb24uJyk7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdQbGVhc2Ugc2VsZWN0IGEgc2luZ2xlIGxheWVyIScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNvbWJpbmU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdDb21iaW5lcyBzZWxlY3RlZCBmZWF0dXJlcyBpbnRvIGEgc2luZ2xlIEZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWNvbXByZXNzXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGZjID0ge1xuICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICAgICAgZmVhdHVyZXM6IFtdXG4gICAgICAgIH07XG4gICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3RbZl0ucmF3LnR5cGUgIT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICAgICAgZmMuZmVhdHVyZXMucHVzaChkYy5zZWxlY3Rpb24ubGlzdFtmXS5yYXcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgZGMuc2VsZWN0aW9uLmxpc3RbZl0ubmFtZSArICcgd2FzIG5vdCBhZGRlZCBiZWNhdXNlIGl0IGlzIGFscmVhZHkgYSBGZWF0dXJlQ29sbGVjdGlvbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbJ25ld19GZWF0dXJlQ29sbGVjdGlvbicsIGZjXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ05vIGxheWVycyBzZWxlY3RlZCEnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyAndmlldy1hdHRyaWJ1dGVzJzoge1xuICAgIC8vICAgbWluRmVhdHVyZXM6IDEsXG4gICAgLy8gICBkZXNjcmlwdGlvbjogJ1Nob3cgYXR0cmlidXRlIHRhYmxlJyxcbiAgICAvLyAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRoLWxpc3RcIj48L2k+JyxcbiAgICAvLyAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vICAgICBkYy5hdHRyLnJlbmRlcihkYy5zZWxlY3Rpb24ubGlzdFswXSk7XG4gICAgLy8gICB9XG4gICAgLy8gfSxcblxuICAgIHJlbmFtZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JlbmFtZSBsYXllcicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1wZW5jaWxcIj48L2k+JyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdOYW1lJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsncmVuYW1lJ10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdQbGVhc2Ugc2VsZWN0IDxzdHJvbmc+b25lIGxheWVyPC9zdHJvbmc+LicpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbmFtZScsIFtkYy5zZWxlY3Rpb24ubGlzdFswXSwgcGFyYW1ldGVyc1swXV0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdSZW1vdmUgc2VsZWN0ZWQgbGF5ZXJzJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoLW9cIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW1vdmUnLCBbdGhpcy5zdGFtcF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGluZm86IHtcbiAgICAgIHR5cGU6ICdpbmZvJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTGVhcm4gbW9yZSBhYm91dCBkcm9wY2hvcCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1pbmZvXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJy9hYm91dC5odG1sJztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5vcHMgPSBkYy5vcHMgfHwge307XG5cbiAgZGMub3BzLmdlbyA9IHtcbiAgICBhbG9uZzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBsaW5lIGFuZCByZXR1cm5zIGEgcG9pbnQgYXQgYSBzcGVjaWZpZWQgZGlzdGFuY2UgYWxvbmcgdGhlIGxpbmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidkaXN0YW5jZSBhbG9uZyB0aGUgbGluZScsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0cycsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAna2lsb21ldGVycycsICdyYWRpYW5zJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdhbG9uZycsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuYWxvbmcuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBiZXppZXI6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgbGluZSBhbmQgcmV0dXJucyBhIGN1cnZlZCB2ZXJzaW9uIGJ5IGFwcGx5aW5nIGEgQmV6aWVyIHNwbGluZSBhbGdvcml0aG0uJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZXNvbHV0aW9uJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1RpbWUgaW4gbWlsbGlzZWNvbmRzIGJldHdlZW4gcG9pbnRzJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMDAwMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3NoYXJwbmVzcycsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidhIG1lYXN1cmUgb2YgaG93IGN1cnZ5IHRoZSBwYXRoIHNob3VsZCBiZSBiZXR3ZWVuIHNwbGluZXMnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6ICAwLjg1XG5cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2JlemllcicsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuYmV6aWVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYnVmZmVyOiB7XG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NhbGN1bGF0ZXMgYSBidWZmZXIgZm9yIGlucHV0IGZlYXR1cmVzIGZvciBhIGdpdmVuIHJhZGl1cy4gVW5pdHMgc3VwcG9ydGVkIGFyZSBtaWxlcywga2lsb21ldGVycywgYW5kIGRlZ3JlZXMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdEaXN0YW5jZSB0byBkcmF3IHRoZSBidWZmZXIuJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXQnLFxuICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ21pbGVzJywgJ2ZlZXQnLCAna2lsb21ldGVycycsICdtZXRlcnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5idWZmZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2VudGVyOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZXMgYSBwb2ludCBpbiB0aGUgY2VudGVyIG9mIHRoZSBmZWF0dXJlLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVjdXJzaXZlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1J1biB0aGUgb3BlcmF0aW9uIG9uIGVhY2ggZmVhdHVyZSBpbiB0aGUgY29sbGVjdGlvbiBvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uJyxcbiAgICAgICAgICB0eXBlOiAncmVjdXJzaXZlJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgLy8gaWYgcnVubmluZyB0aGUgb3BlcmF0aW9uIHJlY3Vyc2l2ZWx5IFwidHJ1ZVwiXG4gICAgICAgIGlmIChwYXJhbXNbMV0gPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnY2VudGVyJywgcGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmNlbnRlci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNlbnRyb2lkOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZXMgYSBwb2ludCBpbiB0aGUgY2VudHJvaWQgb2YgdGhlIGZlYXR1cmVzLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVjdXJzaXZlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1J1biB0aGUgb3BlcmF0aW9uIG9uIGVhY2ggZmVhdHVyZSBpbiB0aGUgY29sbGVjdGlvbiBvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uJyxcbiAgICAgICAgICB0eXBlOiAncmVjdXJzaXZlJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgLy8gaWYgcnVubmluZyB0aGUgb3BlcmF0aW9uIHJlY3Vyc2l2ZWx5IFwidHJ1ZVwiXG4gICAgICAgIGlmIChwYXJhbXNbMV0gPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnY2VudHJvaWQnLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuY2VudHJvaWQuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBkZXN0aW5hdGlvbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9pbnQ+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgUG9pbnQgYW5kIGNhbGN1bGF0ZXMgdGhlIGxvY2F0aW9uIG9mIGEgZGVzdGluYXRpb24gcG9pbnQgZ2l2ZW4gYSBkaXN0YW5jZSBpbiBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVyczsgYW5kIGJlYXJpbmcgaW4gZGVncmVlcy4gVGhpcyB1c2VzIHRoZSBIYXZlcnNpbmUgZm9ybXVsYSB0byBhY2NvdW50IGZvciBnbG9iYWwgY3VydmF0dXJlLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZGlzdGFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnRpbmcgcG9pbnQnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnYmVhcmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidyYW5naW5nIGZyb20gLTE4MCB0byAxODAnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6ICAwXG5cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0cycsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAna2lsb21ldGVycycsICdyYWRpYW5zJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdkZXN0aW5hdGlvbicsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuZGVzdGluYXRpb24uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlbnZlbG9wZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ10gLy8gVE9ETzogbWFrZSB0aGlzIHRha2UgZmVhdHVyZXMgYW5kIHJ1biBhY3Jvc3MgZnVsbCBzZWxlY3Rpb25cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGFueSBudW1iZXIgb2YgZmVhdHVyZXMgYW5kIHJldHVybnMgYSByZWN0YW5ndWxhciBQb2x5Z29uIHRoYXQgZW5jb21wYXNzZXMgYWxsIHZlcnRpY2VzLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuZW52ZWxvcGUuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZXhwbG9kZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGZlYXR1cmUgb3Igc2V0IG9mIGZlYXR1cmVzIGFuZCByZXR1cm5zIGFsbCBwb3NpdGlvbnMgYXMgcG9pbnRzLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuZXhwbG9kZS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBtaWRwb2ludDoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9pbnQ+J11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIHR3byBwb2ludHMgYW5kIHJldHVybnMgYSBwb2ludCBtaWR3YXkgYmV0d2VlbiB0aGVtLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYubWlkcG9pbnQuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2ltcGxpZnk6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmU8UG9seWdvbj4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBMaW5lU3RyaW5nIG9yIFBvbHlnb24gYW5kIHJldHVybnMgYSBzaW1wbGlmaWVkIHZlcnNpb24uIEludGVybmFsbHkgdXNlcyBzaW1wbGlmeS1qcyB0byBwZXJmb3JtIHNpbXBsaWZpY2F0aW9uLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3RvbGVyYW5jZScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA6J3NpbXBsaWZpY2F0aW9uIHRvbGVyYW5jZScsXG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IDAuMVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2hpZ2ggcXVhbGl0eScsXG4gICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICd3aGV0aGVyIG9yIG5vdCB0byBzcGVuZCBtb3JlIHRpbWUgdG8gY3JlYXRlIGEgaGlnaGVyLXF1YWxpdHkgc2ltcGxpZmljYXRpb24gd2l0aCBhIGRpZmZlcmVudCBhbGdvcml0aG0nLFxuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnc2ltcGxpZnknLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLnNpbXBsaWZ5LmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdGluOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVHJpYW5ndWxhdGVkIGlycmVndWxhciBuZXR3b3JrLCBpbnRlcnBvbGF0aW9uIG1ldGhvZCcsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYudGluLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuaW9uOiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2x5Z29uPiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyB0d28gcG9seWdvbnMgYW5kIHJldHVybnMgYSBjb21iaW5lZCBwb2x5Z29uLiBJZiB0aGUgaW5wdXQgcG9seWdvbnMgYXJlIG5vdCBjb250aWd1b3VzLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYSBNdWx0aVBvbHlnb24gZmVhdHVyZS4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLnVuaW9uLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHdpdGhpbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgc2V0IG9mIHBvaW50cyBhbmQgYSBzZXQgb2YgcG9seWdvbnMgYW5kIHJldHVybnMgdGhlIHBvaW50cyB0aGF0IGZhbGwgd2l0aGluIHRoZSBwb2x5Z29ucy4gRmlyc3QgaW5wdXQgc2hvdWxkIGJlIHRoZSBwb2ludHMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdQb2ludHMgdG8gY2xpcCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidTZWxlY3QgdGhlIGxheWVyIHRoYXQgcmVwcmVzZW50cyB0aGUgcG9pbnRzIHlvdSB3YW50IHRvIGNsaXAuIFRoaXMgYXNzdW1lcyB0aGUgb3RoZXIgbGF5ZXIgaXMgeW91ciBjbGlwcGluZyBwb2x5Z29uLicsXG4gICAgICAgICAgdHlwZTogJ3N3aXRjaCdcbiAgICAgICAgICAvLyBkZWZhdWx0OiBkYy5zZWxlY3Rpb24ubGlzdFswXVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLndpdGhpbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBcbiAgZGMuc2VsZWN0aW9uID0ge307XG4gIGRjLnNlbGVjdGlvbi5saXN0ID0gW107XG5cbiAgZGMuc2VsZWN0aW9uLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignbGF5ZXI6c2VsZWN0ZWQnLCBkYy5zZWxlY3Rpb24uYWRkKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6dW5zZWxlY3RlZCcsIGRjLnNlbGVjdGlvbi5yZW1vdmUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgX2xheWVyUmVtb3ZlZCk7XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLmFkZCA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIGRjLnNlbGVjdGlvbi5saXN0LnB1c2gobGF5ZXIpO1xuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5yZW1vdmUgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgaW5kZXggPSBudWxsO1xuICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wID09PSBsYXllci5zdGFtcCkge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3Quc3BsaWNlKGluZGV4LCAxKTsgLy8gcmVtb3ZlIG91dHNpZGUgb2YgdGhlIGxvb3Agc28gd2UgZG9uJ3QgYnJlYWsgb3VyIGNvdW50XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgJCgnLmxheWVyLW5hbWUuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAkKCcub3BlcmF0aW9uLWdlbycpLmFkZENsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAkKCcub3BlcmF0aW9uLWdlbycpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3QgPSBbXTtcbiAgfTtcblxuICBmdW5jdGlvbiBfbGF5ZXJSZW1vdmVkKGV2ZW50LCBzdGFtcCkge1xuICAgIGRjLnNlbGVjdGlvbi5yZW1vdmUoe30sIHtzdGFtcDogc3RhbXB9KTtcbiAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgfVxuXG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG5cbiAgZGMudXRpbCA9IHt9O1xuXG4gIGRjLnV0aWwucmVtb3ZlRmlsZUV4dGVuc2lvbiA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cXC5bXi8uXSskLywgXCJcIik7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLnJlbW92ZVdoaXRlU3BhY2UgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xuICAgIGNvbnNvbGUubG9nKHN0cmluZyk7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLmNvbmNhdCA9IGZ1bmN0aW9uKGFycmF5LCBzZXBhcmF0b3IsIHByZWZpeCkge1xuICAgIHZhciBzdHJpbmcgPSAnJztcbiAgICAkKGFycmF5KS5lYWNoKGZ1bmN0aW9uKGEpIHtcbiAgICAgIHN0cmluZyArPSBzZXBhcmF0b3IgKyBhcnJheVthXTtcbiAgICB9KTtcbiAgICBzdHJpbmcgPSBwcmVmaXggKyBzdHJpbmc7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLnhociA9IGZ1bmN0aW9uKHVybCwgY2FsbGJhY2spIHtcbiAgICBkcm9wY2hvcC51dGlsLmxvYWRlcih0cnVlKTtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgeGhyLm9ubG9hZCA9IGNhbGxiYWNrLmJpbmQodGhpcywgeGhyKTtcbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCB4aHIgKSB7XG4gICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICBjb25zb2xlLmVycm9yKHhocik7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1VuYWJsZSB0byBhY2Nlc3MgJyArIHVybCwgMjUwMCk7XG4gICAgfTtcbiAgICB4aHIuc2VuZCgpO1xuICB9O1xuXG4gIGRjLnV0aWwucmVhZEZpbGUgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgLy8gaWYgYSB6aXBmaWxlLCBhc3N1bWUgc2hhcGVmaWxlIGZvciBub3dcbiAgICBpZiAoZmlsZS5uYW1lLmluZGV4T2YoJy56aXAnKSA+IC0xIHx8IGZpbGUubmFtZS5pbmRleE9mKCcuc2hwJykgPiAtMSkge1xuICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xuICAgICAgZGMudXRpbC5sb2FkZXIodHJ1ZSk7XG4gICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgc2hwKHJlYWRlci5yZXN1bHQpXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlByb2JsZW1hdGljIHByb2plY3Rpb24gLSBcIiwgZXJyb3IpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZ2VvanNvbikge1xuICAgICAgICAgICAgZGMudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICAgICAgaWYgKCFnZW9qc29uKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkYy5ub3RpZnkoJ2Vycm9yJywgJ0ludmFsaWQgcHJvamVjdGlvbiBvciBzaGFwZWZpbGUuJywgMjUwMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZ2VvanNvbi5maWxlTmFtZSwgZ2VvanNvbl0pO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSwgJ1VURi04Jyk7XG4gICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZmlsZS5uYW1lLCBKU09OLnBhcnNlKHJlYWRlci5yZXN1bHQpXSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcndhcmRUb0dlb0pzb25JbyhkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9nZW9qc29uLmlvLyNkYXRhPWRhdGE6YXBwbGljYXRpb24vanNvbixcIiArIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICB3aW5kb3cubG9jYXRpb24gPSB1cmw7XG4gICAgfVxuICB9O1xuXG4gIGRjLnV0aWwuanNvbkZyb21VcmwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcXVlcnkgPSBsb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpXG4gICAgICAuc3BsaXQoLygmP2dpc3Q9fCY/dXJsPSkvZylcbiAgICAgIC5maWx0ZXIoZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZC5sZW5ndGggPiAwO1xuICAgICAgfSk7XG5cbiAgICB2YXIgcmVzdWx0ID0ge307XG5cbiAgICBxdWVyeS5mb3JFYWNoKGZ1bmN0aW9uKHBhcnQsIGkpIHtcbiAgICAgIGlmIChpID09PSAwIHx8IGkgJSAyID09PSAwKSB7XG4gICAgICAgIHZhciBrZXkgPSBwYXJ0LnJlcGxhY2UoLyZ8PS9nLCAnJyk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHRba2V5XSkge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gW107XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHRba2V5XS5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChxdWVyeVtpICsgMV0pKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgZGMudXRpbC51cGRhdGVTZWFyY2ggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGF5ZXJzID0gW107XG5cbiAgICBPYmplY3Qua2V5cyhkYy5sYXllcnMubGlzdCkuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xuICAgICAgICAvKlxuICAgICAgICAqKiBJZiBhIGxheWVyIGhhcyBhIHR5cGUgYW5kIFVSTCAoYSBnaXN0IG9yIGV4dGVybmFsIEdlb0pTT04gbGluayksXG4gICAgICAgICoqIGFuZCB3ZSBoYXZlbid0IHJlY29yZWQgdGhpcyB0eXBlLXVybCBjb21ibyBhbHJlYWR5LCBhZGQgaXQgdG8gdGhlXG4gICAgICAgICoqIHVuaXF1ZSBsaXN0LiBUaGUgbGFzdCBjaGVjayBpcyBuZWVkZWQgdG8gYWNjb3VudCBmb3IgZ2lzdHMgd2l0aFxuICAgICAgICAqKiBtdWx0aXBsZSBsYXllcnMuXG4gICAgICAgICovXG4gICAgICAgIGlmIChkYy5sYXllcnMubGlzdFtsYXllcl0ubHR5cGUgJiYgZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLnVybCAmJiBsYXllcnMuaW5kZXhPZihkYy5sYXllcnMubGlzdFtsYXllcl0ubHR5cGUgKyAnPScgKyBkYy5sYXllcnMubGlzdFtsYXllcl0udXJsKSA8IDApIHtcbiAgICAgICAgICAgIGxheWVycy5wdXNoKGRjLmxheWVycy5saXN0W2xheWVyXS5sdHlwZSArICc9JyArIGRjLmxheWVycy5saXN0W2xheWVyXS51cmwpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgc2VhcmNoID0gbGF5ZXJzLmxlbmd0aCA/ICAoJz8nICsgbGF5ZXJzLmpvaW4oJyYnKSkgOiAnLyc7XG5cbiAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgVVJJIGlmIGFueXRoaW5nIGhhcyBjaGFuZ2VkXG4gICAgaWYgKHNlYXJjaCAhPT0gd2luZG93LmxvY2F0aW9uLnNlYXJjaCkge1xuICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHNlYXJjaCk7XG4gICAgfVxuXG4gIH07XG5cbiAgZGMudXRpbC5leGVjdXRlVXJsUGFyYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRhdGEgPSBkYy51dGlsLmpzb25Gcm9tVXJsKCk7XG5cbiAgICAvLyBsb2FkIGdpc3RcbiAgICBpZiAoZGF0YS5naXN0ICYmIGRhdGEuZ2lzdC5sZW5ndGgpIHtcbiAgICAgICQoZGF0YS5naXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtZ2lzdCddLmdldCh7fSwgJ2xvYWQtZ2lzdCcsIFtkYXRhLmdpc3RbaV1dKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGxvYWRcbiAgICBpZiAoZGF0YS51cmwgJiYgZGF0YS51cmwubGVuZ3RoKSB7XG4gICAgICAkKGRhdGEudXJsKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtdXJsJ10uZ2V0KHt9LCAnbG9hZC11cmwnLCBbZGF0YS51cmxbaV1dKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmdldEZpbGVFeHRlbnNpb24gPSBmdW5jdGlvbihmaWxlbmFtZSkge1xuICAgIHJldHVybiBmaWxlbmFtZS5zdWJzdHIoZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKSsxKTtcbiAgfTtcblxuICBkYy51dGlsLmdldEJCb3ggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm91bmRzID0gZGMubWFwLm0uZ2V0Qm91bmRzKCksXG4gICAgICAgICAgICBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKSxcbiAgICAgICAgICAgIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpO1xuICAgIC8vIHdlIHNob3VsZCBwcm9iYWJseSBjaGVjayB0aGUgc2l6ZSBoZXJlP1xuICAgIC8vIG5vZGUoNTcuNywxMS45LDU3LjgsMTIuMClcbiAgICByZXR1cm4gc3cubGF0KycsJytzdy5sbmcrJywnK25lLmxhdCsnLCcrbmUubG5nO1xuICB9O1xuXG4gIGRjLnV0aWwudW5jb2xsZWN0ID0gZnVuY3Rpb24oZmMpIHtcbiAgICByZXR1cm4gZmMuZmVhdHVyZXNbMF07XG4gIH07XG5cbiAgZGMudXRpbC5leGVjdXRlRkMgPSBmdW5jdGlvbihmYywgb3BlcmF0aW9uLCBwYXJhbXMpIHtcblxuICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG4gICAgdmFyIG5ld0ZDID0ge307XG4gICAgbmV3RkMudHlwZSA9ICdGZWF0dXJlQ29sbGVjdGlvbic7XG4gICAgbmV3RkMuZmVhdHVyZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGYgPSAwOyBmIDwgZmMuZmVhdHVyZXMubGVuZ3RoOyBmKyspIHtcbiAgICAgIG5ld1BhcmFtc1swXSA9IGZjLmZlYXR1cmVzW2ZdO1xuICAgICAgdmFyIGZlYXR1cmU7XG4gICAgICB0cnkge1xuICAgICAgICBmZWF0dXJlID0gdHVyZltvcGVyYXRpb25dLmFwcGx5KG51bGwsIG5ld1BhcmFtcyk7XG4gICAgICAgIGZlYXR1cmUucHJvcGVydGllcyA9IGZjLmZlYXR1cmVzW2ZdLnByb3BlcnRpZXMgfHwge307XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIGVycik7XG4gICAgICB9XG4gICAgICBuZXdGQy5mZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdGQztcblxuICB9O1xuXG4gIGRjLnV0aWwubG9hZGVyID0gZnVuY3Rpb24oeWVzKSB7XG4gICAgdmFyIGxvYWRlciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRlcicpO1xuXG4gICAgaWYgKHllcykge1xuICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdkcm9wY2hvcC1sb2FkaW5nJyk7XG4gICAgICAkKCdib2R5JykuYXBwZW5kKGxvYWRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZHJvcGNob3AtbG9hZGluZycpO1xuICAgICAgJCgnLmRyb3BjaG9wLWxvYWRlcicpLmFkZENsYXNzKCdsb2FkZXItY29tcGxldGUnKS5mYWRlT3V0KDIwMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5lcnJvciA9IGZ1bmN0aW9uKGVycikge1xuICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihlcnIpO1xuICAgIHRocm93IGVycm9yO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
