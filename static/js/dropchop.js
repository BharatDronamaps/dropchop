var dropchop=function(e){return e=e||{},e.version="0.1",e.init=function(t){if(!t){var a=new Error("No options provided in dropchop.init()");throw a}if(e.options=t,!$(t.id).length){var a=new Error("Element with options.id does not exist.");throw a}e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.ops.init(),e.form.init(),location.search.length&&e.util.executeUrlParams(),e.util.welcome()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),l=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),s=$("<button>").addClass("layer-action layer-remove").html('<i class="fa fa-times"></i>'),p=$("<button>").addClass("layer-action layer-duplicate").html('<i class="fa fa-files-o"></i>');p.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:duplicate",[$(this).parent().attr("data-stamp")]),!1}),s.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:remove",[$(this).parent().attr("data-stamp")]),e.selection.clear(),!1}),l.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),l=i.parent().attr("data-stamp");t===r&&(a=e),t===l&&(o=e)}),console.log(a,o),a>o?$(".layer-element").each(function(t){t>=o&&a>=t&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){o>t&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),o.append(n),o.append(l),o.append(i),o.append(s),o.append(p),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show()},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.toggleAll=function(t){function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}if($(this).find("input").prop("checked"))for(var r in e.layers.list)a(e.layers.list[r].stamp,!0);else for(var o in e.layers.list)a(e.layers.list[o].stamp,!1)},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r){var o=e.layers.makeLayer(a,r);e.layers.list[o.stamp]=o,e.notify("success","<strong>"+o.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[o])},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer),$(e.map.m).on("locationfound",function(t){var a=t.originalEvent;e.map.m.fitBounds(a.bounds);var r={type:"Feature",geometry:{type:"Point",coordinates:[a.latlng.lng,a.latlng.lat]},properties:{title:"There You Are","marker-color":"#207178","marker-symbol":"heart"}};$(e).trigger("file:added",["your location",r])}),$(e.map.m).on("locationerror",function(){e.notify("error","There was a problem finding your location.",3e3)})}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);$(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.ops=e.ops||{},e.ops.init=function(){var r=$("<div>").addClass("operations-geo");e.$elem.append(r);for(var o in e.ops.geo){var n=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+o+"</h4><p>"+e.ops.geo[o].description+"</p>").prop("disabled",!0).attr("data-operation",o);n.on("click",t),r.append(n)}$(e).on("layer:selected",e.ops.geoCheck),$(e).on("layer:unselected",e.ops.geoCheck),$(e).on("operation:geo",e.ops.geoExecute),$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback);var i=$("<div>").addClass("dropchop-menu-left");for(var l in e.ops.file)if("break"===e.ops.file[l].type){var s=$("<div>").addClass("menu-action-break");i.append(s)}else{var p=$("<button>").addClass("menu-action").html(e.ops.file[l].icon||"A").attr("data-operation",l).attr("data-tooltip",e.ops.file[l].description);"info"===e.ops.file[l].type&&p.addClass("dropchop-info"),p.on("click",a),i.append(p)}e.$elem.append(i)},e.ops.geoExecute=function(t,a,r){var o=e.ops.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.ops.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){-1===$.inArray("switch-"+e.selection.list[t].stamp,a)?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.ops.geoCheck=function(t,a){function r(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function o(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var n in e.ops.geo){var i=e.ops.geo[n];if(e.selection.list.length>i.maxFeatures||e.selection.list.length<i.minFeatures)r(n);else for(var l=0;l<e.selection.list.length;l++){var s=e.selection.list[l];$.inArray(s.type,i.requirements.types)>-1||i.requirements.generalFeature===!0?o(n):r(n)}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content)])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide" target="_blank">the query language</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox();e.util.xhr("http://overpass-api.de/api/interpreter?[out:json];node["+r[0]+"]("+o+");out;",e.ops.file["load-overpass"].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r);r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},location:{description:"Add your location as a layer",icon:'<i class="fa fa-crosshairs"></i>',execute:function(){navigator.geolocation?e.map.m.locate():e.notify("error","Geolocation is not available on this browser.",4e3)}},break1:{type:"break"},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++)!function(t){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}(t)}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},break2:{type:"break"},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},break3:{type:"break"},rename:{minFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){console.log(a,r),$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){console.log(this.stamp),$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){console.log(e);var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.readFile=function(t){function a(e){console.log(e);var t="http://geojson.io/#data=data:application/json,"+encodeURIComponent(JSON.stringify(e));window.location=t}var r=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(console.log(t),r.readAsArrayBuffer(t),r.onloadend=function(e){console.log(r),shp(r.result).then(a)}):(r.readAsText(t,"UTF-8"),r.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(r.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1),t={};return e.split("&").forEach(function(e){var a=e.split("=");t[a[0]]||(t[a[0]]=[]),t[a[0]].push(decodeURIComponent(a[1]))}),t},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.uncollect=function(e){return e.features[0]},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var l;try{l=turf[a].apply(null,o),l.properties=t.features[i].properties||{}}catch(s){e.notify("error",s)}n.features.push(l)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.welcome=function(){var e="\nWelcome to Dropchop!\n";e+="Once you drop, the chop don't stop.\n\n",e+="This project is brought to you by the great people of CUGOS, the Cascadian chapter of OSGeo. If you are ever in Seattle, hit us up\nhello@cugos.org\n\n",e+="You can learn more about this project at dropchop.io/about.",console.log(e)},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibm90aWZ5LmRyb3BjaG9wLmpzIiwib3BzLmRyb3BjaG9wLmpzIiwib3BzLmZpbGUuZHJvcGNob3AuanMiLCJvcHMuZ2VvLmRyb3BjaG9wLmpzIiwic2VsZWN0aW9uLmRyb3BjaG9wLmpzIiwidXRpbC5kcm9wY2hvcC5qcyJdLCJuYW1lcyI6WyJkcm9wY2hvcCIsImRjIiwidmVyc2lvbiIsImluaXQiLCJvcHRzIiwiZXJyIiwiRXJyb3IiLCJvcHRpb25zIiwiJCIsImlkIiwibGVuZ3RoIiwiJGVsZW0iLCJsYXllcnMiLCJwcmVwYXJlIiwibWFwIiwic2VsZWN0aW9uIiwibGF5ZXJsaXN0IiwiZHJvcHpvbmUiLCJvcHMiLCJmb3JtIiwibG9jYXRpb24iLCJzZWFyY2giLCJ1dGlsIiwiZXhlY3V0ZVVybFBhcmFtcyIsIndlbGNvbWUiLCJib29tIiwiY29uc29sZSIsImxvZyIsIl9ldmVudHMiLCIkY29udGFpbmVyIiwib24iLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwidGhpcyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJmaWxlcyIsIm9yaWdpbmFsRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJlYWNoIiwiaSIsInJlYWRGaWxlIiwiZ2VvIiwiZmlsZSIsIm9wZXJhdGlvbiIsImNyZWF0ZSIsIm5hbWUiLCJpbmZvIiwidHJpZ2dlciIsInJlbW92ZSIsIiRodG1sIiwiYXR0ciIsInRleHQiLCJhcHBlbmRUbyIsImRlc2NyaXB0aW9uIiwicGFyYW1ldGVycyIsInAiLCJjcmVhdGVQYXJhbSIsIiRzdWJtaXQiLCIkY2FuY2VsIiwiZGF0YSIsInNlcmlhbGl6ZUFycmF5IiwicHVzaCIsInZhbHVlIiwiYXBwZW5kIiwicGFyYW0iLCIkaW5wdXQiLCIkbGFiZWwiLCIkZmllbGQiLCJpbnB1dHMiLCJ0eXBlIiwiaHRtbCIsIm51bWJlciIsIiRpIiwic2VsZWN0IiwiJG9wdCIsImNoZWNrYm94Iiwic3dpdGNoIiwibGlzdCIsIiRsYmwiLCJ2YWwiLCJzdGFtcCIsInJlY3Vyc2l2ZSIsIiRsYmwxIiwiJG9wdDEiLCIkbGJsMiIsIiRvcHQyIiwibGF5ZXJUeXBlSWNvbiIsImljb24iLCJlbGVtcyIsInRhcmdldCIsImhhc0NsYXNzIiwiY2xlYXIiLCJsaUhlbHBlciIsInRvZ2dsZUxheWVycyIsInRvZ2dsZUFsbCIsImFkZExheWVyTGlzdEl0ZW0iLCJyZW1vdmVMYXllckxpc3RJdGVtIiwicmVuYW1lIiwibmV3TmFtZSIsImZpbmQiLCJsYXllciIsImxheWVybGlzdEl0ZW0iLCJsYXllckRpdiIsImRlbGF5IiwicXVldWUiLCJuZXh0IiwibGF5ZXJUeXBlIiwicHJvcCIsImNoZWNrZWQiLCJkdXBsaWNhdGUiLCJwYXJlbnQiLCJzaGlmdEtleSIsInRvQ291bnQiLCJmcm9tQ291bnQiLCJ0byIsImZyb20iLCJfbGFzdFNlbGVjdGVkIiwiZSIsImNoZWNrIiwidG9TdGFtcCIsImZyb21TdGFtcCIsImwiLCJzZWxlY3RMYXllciIsIm1ldGFLZXkiLCJzZWxlY3RUb2dnbGUiLCJjbGVhclNlbGVjdGlvbiIsImhpZGUiLCJzaG93IiwiJGl0ZW0iLCJseXIiLCJlbGVtVG9nZ2xlIiwiYm9vbCIsIm8iLCJmYWRlT3V0IiwiZ2V0VHlwZSIsImdqIiwiZ2VvbWV0cnkiLCJhZGQiLCJibG9iIiwibWFrZUxheWVyIiwibm90aWZ5IiwicmF3IiwianNvbiIsImdlb2pzb24iLCJmbCIsIkwiLCJtYXBib3giLCJmZWF0dXJlTGF5ZXIiLCJyZW1vdmVGaWxlRXh0ZW5zaW9uIiwiZmVhdHVyZWxheWVyIiwiZGF0ZUFkZGVkIiwiRGF0ZSIsIl9tYWtlTWFwIiwidG9rZW4iLCJhY2Nlc3NUb2tlbiIsIm0iLCJ6b29tQ29udHJvbCIsIndvcmxkQ29weUp1bXAiLCJzZXRWaWV3IiwiY29udHJvbCIsInpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiZ2VvY29kZXJDb250cm9sIiwiYmFzZUxheWVycyIsIk1hcGJveCBTdHJlZXRzIiwidGlsZUxheWVyIiwiTWFwYm94IE91dGRvb3JzIiwiTWFwYm94IExpZ2h0IiwiTWFwYm94IERhcmsiLCJNYXBib3ggU2F0ZWxsaXRlIiwiY29sbGFwc2VkIiwibGF5ZXJncm91cCIsImFkZExheWVyIiwiaGlkZUxheWVyIiwic2hvd0xheWVyIiwiZml0Qm91bmRzIiwiYm91bmRzIiwiY29vcmRpbmF0ZXMiLCJsYXRsbmciLCJsbmciLCJsYXQiLCJwcm9wZXJ0aWVzIiwidGl0bGUiLCJtYXJrZXItY29sb3IiLCJtYXJrZXItc3ltYm9sIiwicmVtb3ZlTGF5ZXIiLCJjb3VudCIsImVhY2hMYXllciIsImNvbnRlbnQiLCJmZWF0dXJlIiwiYmluZFBvcHVwIiwicG9wdXAiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImF1dG9QYW5QYWRkaW5nIiwiY2xhc3NOYW1lIiwic2V0Q29udGVudCIsInRpbWUiLCJub3RlIiwic2V0VGltZW91dCIsIl9nZW9CdG5DbGljayIsIl9maWxlQnRuQ2xpY2siLCJleGVjdXRlIiwiZ2VvQ29udGFpbmVyIiwiZ2VvT3AiLCJnZW9CdG4iLCJnZW9DaGVjayIsImdlb0V4ZWN1dGUiLCJnZXQiLCJjYWxsYmFjayIsImxlZnRNZW51IiwiZmlsZU9wIiwiJGJyZWFrU3BhY2UiLCJmaWxlQnRuIiwicHJlcCIsInByZXBhcmVUdXJmUGFyYW1zIiwicmVzdWx0IiwicGFyYW1zIiwiZ2VvbXMiLCJuYW1lQXJyYXkiLCJpbkFycmF5IiwidW5zaGlmdCIsIm1lcmdlIiwiY29uY2F0IiwidHVybkl0T2ZmIiwib3AiLCJidG4iLCJ0dXJuSXRPbiIsIm1heEZlYXR1cmVzIiwibWluRmVhdHVyZXMiLCJ4Iiwic2VsIiwicmVxdWlyZW1lbnRzIiwidHlwZXMiLCJnZW5lcmFsRmVhdHVyZSIsInVwbG9hZCIsIiRibGluZElucHV0IiwiY3NzIiwiY2xpY2siLCJsb2FkLXVybCIsImRlZmF1bHQiLCJ1cmwiLCJ4aHIiLCJ4aHJFdmVudCIsImxvYWRlciIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlVVJMIiwic3Vic3RyaW5nIiwibGFzdEluZGV4T2YiLCJsb2FkLWdpc3QiLCJnaXN0Iiwic3BsaXQiLCJmIiwiZmlsZW5hbWUiLCJsb2FkLW92ZXJwYXNzIiwiX3RlbXAiLCJsYXllck5hbWUiLCJiYm94IiwiZ2V0QkJveCIsIm9zbXRvZ2VvanNvbiIsImVsZW1lbnRzIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJsb2NhdGUiLCJicmVhazEiLCJzYXZlLWdlb2pzb24iLCJjcmVhdGVzTGF5ZXIiLCJzdHJpbmdpZnkiLCJzYXZlQXMiLCJCbG9iIiwic2F2ZS1zaGFwZWZpbGUiLCJmb2xkZXIiLCJwb2ludCIsInBvbHlnb24iLCJsaW5lIiwic2hwd3JpdGUiLCJkb3dubG9hZCIsImJyZWFrMiIsImV4dGVudCIsImV4dGVuZCIsImdldEJvdW5kcyIsImV4cGFuZCIsImZjIiwiZmVhdHVyZXMiLCJjb21iaW5lIiwiYnJlYWszIiwid2luZG93IiwiYWxvbmciLCJleGVjdXRlRkMiLCJ0dXJmIiwiYXBwbHkiLCJiZXppZXIiLCJidWZmZXIiLCJjZW50ZXIiLCJjZW50cm9pZCIsImRlc3RpbmF0aW9uIiwiZW52ZWxvcGUiLCJleHBsb2RlIiwibWlkcG9pbnQiLCJzaW1wbGlmeSIsInRpbiIsInVuaW9uIiwid2l0aGluIiwiX2xheWVyUmVtb3ZlZCIsImluZGV4Iiwic3BsaWNlIiwic3RyaW5nIiwicmVwbGFjZSIsInJlbW92ZVdoaXRlU3BhY2UiLCJhcnJheSIsInNlcGFyYXRvciIsInByZWZpeCIsImEiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJiaW5kIiwib25lcnJvciIsImVycm9yIiwic2VuZCIsImZvcndhcmRUb0dlb0pzb25JbyIsImVuY29kZVVSSUNvbXBvbmVudCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJpbmRleE9mIiwicmVhZEFzQXJyYXlCdWZmZXIiLCJvbmxvYWRlbmQiLCJzaHAiLCJ0aGVuIiwicmVhZEFzVGV4dCIsImpzb25Gcm9tVXJsIiwicXVlcnkiLCJzdWJzdHIiLCJmb3JFYWNoIiwicGFydCIsIml0ZW0iLCJkZWNvZGVVUklDb21wb25lbnQiLCJnZXRGaWxlRXh0ZW5zaW9uIiwic3ciLCJnZXRTb3V0aFdlc3QiLCJuZSIsImdldE5vcnRoRWFzdCIsInVuY29sbGVjdCIsIm5ld1BhcmFtcyIsIm5ld0ZDIiwieWVzIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxVQUFBLFNBQUFDLEdBa0RBLE1BakRBQSxHQUFBQSxNQUNBQSxFQUFBQyxRQUFBLE1BQ0FELEVBQUFFLEtBQUEsU0FBQUMsR0FDQSxJQUFBQSxFQUFBLENBQ0EsR0FBQUMsR0FBQSxHQUFBQyxPQUFBLHlDQUNBLE1BQUFELEdBSUEsR0FGQUosRUFBQU0sUUFBQUgsR0FFQUksRUFBQUosRUFBQUssSUFBQUMsT0FBQSxDQUNBLEdBQUFMLEdBQUEsR0FBQUMsT0FBQSwwQ0FDQSxNQUFBRCxHQUVBSixFQUFBVSxNQUFBSCxFQUFBSixFQUFBSyxJQUdBUixFQUFBVyxPQUFBQyxVQUdBWixFQUFBYSxJQUFBWCxPQUdBRixFQUFBYyxVQUFBWixPQUdBRixFQUFBZSxVQUFBYixLQUFBLGFBR0FGLEVBQUFnQixTQUFBVCxFQUFBLFNBR0FQLEVBQUFpQixJQUFBZixPQUdBRixFQUFBa0IsS0FBQWhCLE9BR0FpQixTQUFBQyxPQUFBWCxRQUNBVCxFQUFBcUIsS0FBQUMsbUJBR0F0QixFQUFBcUIsS0FBQUUsV0FJQXZCLEVBQUF3QixLQUFBLFdBQ0FDLFFBQUFDLElBQUEsY0FHQTFCLEdBRUFELGNDcERBQSxTQUFBLFNBQUFDLEdBRUEsWUFZQSxTQUFBMkIsR0FBQUMsR0FDQUEsRUFBQUMsR0FBQSxXQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLGlCQUNBRCxFQUFBRSxrQkFDQXpCLEVBQUEwQixNQUFB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L0IsR0FBQTFFLGVBQ0EsTUFBQW5MLEdBQ0FKLEVBQUE2SSxPQUFBLFFBQUF6SSxHQUVBeVYsRUFBQTdELFNBQUFsTyxLQUFBaUksR0FHQSxNQUFBOEosSUFJQTdWLEVBQUFxQixLQUFBaU8sT0FBQSxTQUFBd0csR0FDQSxHQUFBeEcsR0FBQS9PLEVBQUEsU0FBQTJCLFNBQUEsa0JBRUE0VCxJQUNBdlYsRUFBQSxRQUFBMkIsU0FBQSxvQkFDQTNCLEVBQUEsUUFBQXlELE9BQUFzTCxLQUVBL08sRUFBQSxRQUFBNEIsWUFBQSxvQkFDQTVCLEVBQUEsb0JBQUEyQixTQUFBLG1CQUFBb0csUUFBQSxJQUFBLFdBQ0EvSCxFQUFBMEIsTUFBQWdCLGFBS0FqRCxFQUFBcUIsS0FBQUUsUUFBQSxXQUNBLEdBQUFBLEdBQUEsMEJBQ0FBLElBQUEsMENBQ0FBLEdBQUEsMEpBQ0FBLEdBQUEsOERBQ0FFLFFBQUFDLElBQUFILElBR0F2QixHQUdBRCIsImZpbGUiOiJkcm9wY2hvcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBkYyA9IGRjIHx8IHt9O1xuICBkYy52ZXJzaW9uID0gJzAuMSc7XG4gIGRjLmluaXQgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgaWYoIW9wdHMpIHtcbiAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ05vIG9wdGlvbnMgcHJvdmlkZWQgaW4gZHJvcGNob3AuaW5pdCgpJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIGRjLm9wdGlvbnMgPSBvcHRzO1xuXG4gICAgaWYoISQob3B0cy5pZCkubGVuZ3RoKSB7XG4gICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdFbGVtZW50IHdpdGggb3B0aW9ucy5pZCBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgZGMuJGVsZW0gPSAkKG9wdHMuaWQpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJzXG4gICAgZGMubGF5ZXJzLnByZXBhcmUoKTtcblxuICAgIC8vIHNldHVwIG1hcFxuICAgIGRjLm1hcC5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBzZWxlY3Rpb25cbiAgICBkYy5zZWxlY3Rpb24uaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJsaXN0XG4gICAgZGMubGF5ZXJsaXN0LmluaXQoJ2xheWVybGlzdCcpO1xuXG4gICAgLy8gc2V0dXAgZHJvcHpvbmVcbiAgICBkYy5kcm9wem9uZSgkKCdib2R5JykpO1xuXG4gICAgLy8gc2V0dXAgb3BlcmF0aW9uc1xuICAgIGRjLm9wcy5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBmb3Jtc1xuICAgIGRjLmZvcm0uaW5pdCgpO1xuXG4gICAgLy8gZ2V0IFVSTCBpbmZvcm1hdGlvbiBpZiBpdCBleGlzdHNcbiAgICBpZihsb2NhdGlvbi5zZWFyY2gubGVuZ3RoKSB7XG4gICAgICBkYy51dGlsLmV4ZWN1dGVVcmxQYXJhbXMoKTtcbiAgICB9XG5cbiAgICBkYy51dGlsLndlbGNvbWUoKTtcblxuICB9O1xuXG4gIGRjLmJvb20gPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnc2hha2FsYWthJyk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBkcm9wem9uZS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRhaW5lciBlbGVtZW50IChsZXRzIGRvIGRvY3VtZW50LmJvZHkpXG4gICAqL1xuICBkYy5kcm9wem9uZSA9IGZ1bmN0aW9uKCRjb250YWluZXIpIHtcbiAgICBfZXZlbnRzKCRjb250YWluZXIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9ldmVudHMoJGNvbnRhaW5lcikge1xuICAgICRjb250YWluZXIub24oJ2RyYWdvdmVyJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgfSk7XG5cbiAgICAkY29udGFpbmVyLm9uKCdkcmFnbGVhdmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICB9KTtcblxuICAgICRjb250YWluZXIub24oJ2Ryb3AnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICAgIHZhciBmaWxlcyA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgICAgJChmaWxlcykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLnV0aWwucmVhZEZpbGUoZmlsZXNbaV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5mb3JtID0gZGMuZm9ybSB8fCB7fTtcbiAgZGMuZm9ybS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2Zvcm06Z2VvJywgZGMuZm9ybS5nZW8pO1xuICAgICQoZGMpLm9uKCdmb3JtOmZpbGUnLCBkYy5mb3JtLmZpbGUpO1xuICB9O1xuXG4gIGRjLmZvcm0uZ2VvID0gZnVuY3Rpb24oZXZlbnQsIG9wZXJhdGlvbikge1xuICAgIGRjLmZvcm0uY3JlYXRlKG9wZXJhdGlvbiwgZGMub3BzLmdlb1tvcGVyYXRpb25dLCAnZ2VvJyk7XG4gIH07XG5cbiAgZGMuZm9ybS5maWxlID0gZnVuY3Rpb24oZXZlbnQsIG9wZXJhdGlvbikge1xuICAgIGRjLmZvcm0uY3JlYXRlKG9wZXJhdGlvbiwgZGMub3BzLmZpbGVbb3BlcmF0aW9uXSwgJ2ZpbGU6JyArIG9wZXJhdGlvbik7XG4gIH07XG5cbiAgZGMuZm9ybS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCBpbmZvLCB0cmlnZ2VyKSB7XG4gICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICB2YXIgJGh0bWwgPSAkKCc8Zm9ybT4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybSBkcm9wY2hvcC1mb3JtLScrdHJpZ2dlcilcbiAgICAgIC5hdHRyKCdpZCcsICdkcm9wY2hvcC1mb3JtJylcbiAgICAgIC5hdHRyKCdkYXRhJywgbmFtZSk7XG4gICAgdmFyICR0aXRsZSA9ICQoJzxoMj4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS10aXRsZScpLnRleHQobmFtZSkuYXBwZW5kVG8oJGh0bWwpO1xuICAgIHZhciAkZGVzYyA9ICQoJzxwPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLWRlc2NyaXB0aW9uJykudGV4dChpbmZvLmRlc2NyaXB0aW9uKS5hcHBlbmRUbygkaHRtbCk7XG5cbiAgICAvLyBjcmVhdGUgcGFyYW1zXG4gICAgaWYoaW5mby5wYXJhbWV0ZXJzKSB7XG4gICAgICAkKGluZm8ucGFyYW1ldGVycykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHAgPSBkYy5mb3JtLmNyZWF0ZVBhcmFtKHRoaXMpO1xuICAgICAgICBwLmFwcGVuZFRvKCRodG1sKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSBzdWJtaXQgYnV0dG9uXG4gICAgdmFyICRzdWJtaXQgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdkcm9wY2hvcC1idG4gZHJvcGNob3AtYnRuLWdyZWVuIGRyb3BjaG9wLWZvcm0tc3VibWl0JykudGV4dCgnRXhlY3V0ZScpLmF0dHIoJ2ZvcicsIG5hbWUpO1xuICAgIHZhciAkY2FuY2VsID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnZHJvcGNob3AtYnRuIGRyb3BjaG9wLWJ0bi1jYW5jZWwgZHJvcGNob3AtZm9ybS1jYW5jZWwnKS50ZXh0KCdDYW5jZWwnKS5hdHRyKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICRjYW5jZWwub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgICRodG1sLm9uKCdzdWJtaXQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vIGdldCB0aGUgcGFyYW1ldGVycyBmcm9tIHRoZSBmb3JtXG4gICAgICB2YXIgcGFyYW1ldGVycyA9IFtdO1xuICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLnNlcmlhbGl6ZUFycmF5KCk7XG4gICAgICAkKGRhdGEpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnB1c2goZGF0YVtpXS52YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ29wZXJhdGlvbjonICsgdHJpZ2dlciwgW25hbWUsIHBhcmFtZXRlcnNdKTtcbiAgICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgJGh0bWwuYXBwZW5kKCRzdWJtaXQpO1xuICAgICRodG1sLmFwcGVuZCgkY2FuY2VsKTtcblxuICAgIGRjLiRlbGVtLmFwcGVuZCgkaHRtbCk7XG4gICAgLy8gc3VibWl0IGJ1dHRvbiBuZWVkcyB0cmlnZ2VyIG9wZXJhdGlvbjpnZW8gd2l0aCBvcCBhbmQgcGFyYW1ldGVyIGFycmF5XG4gIH07XG5cbiAgZGMuZm9ybS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcjZHJvcGNob3AtZm9ybScpLnJlbW92ZSgpO1xuICB9O1xuXG4gIGRjLmZvcm0uY3JlYXRlUGFyYW0gPSBmdW5jdGlvbihwYXJhbSkge1xuICAgIHZhciAkaW5wdXQgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlcicpO1xuICAgIHZhciAkbGFiZWwgPSAkKCc8bGFiZWw+JykudGV4dChwYXJhbS5uYW1lKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXItbGFiZWwnKTtcbiAgICB2YXIgJGZpZWxkID0gZGMuZm9ybS5pbnB1dHNbcGFyYW0udHlwZV0ocGFyYW0pO1xuICAgICRmaWVsZC5hcHBlbmRUbygkbGFiZWwpO1xuICAgIGlmKHBhcmFtLmRlc2NyaXB0aW9uLmxlbmd0aCkge1xuICAgICAgJCgnPHA+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyLWRlc2NyaXB0aW9uJykuaHRtbChwYXJhbS5kZXNjcmlwdGlvbikuYXBwZW5kVG8oJGxhYmVsKTtcbiAgICB9XG4gICAgJGlucHV0LmFwcGVuZCgkbGFiZWwpO1xuICAgIHJldHVybiAkaW5wdXQ7XG4gIH07XG5cbiAgZGMuZm9ybS5pbnB1dHMgPSB7XG4gICAgbnVtYmVyOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICdudW1iZXInKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHNlbGVjdDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPHNlbGVjdD4nKS5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICQocC5vcHRpb25zKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdmFyICRvcHQgPSAkKCc8b3B0aW9uPicpLnRleHQocC5vcHRpb25zW2ldKVxuICAgICAgICAgIC5hdHRyKCd2YWx1ZScsIHAub3B0aW9uc1tpXSk7XG4gICAgICAgICRvcHQuYXBwZW5kVG8oJGkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICB0ZXh0OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICd0ZXh0JylcbiAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpXG4gICAgICAgIC5hdHRyKCd2YWx1ZScsIHAuZGVmYXVsdCk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICBjaGVja2JveDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGlucHV0PicpLmF0dHIoJ3R5cGUnLCAnY2hlY2tib3gnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHN3aXRjaDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGRpdj4nKTtcbiAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgJGxibCA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICAgIHZhciAkb3B0ID0gJCgnPGlucHV0PicpXG4gICAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAgIC52YWwoJ3N3aXRjaC0nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXApXG4gICAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgICAkb3B0LmFwcGVuZFRvKCRsYmwpO1xuICAgICAgICAkbGJsLmFwcGVuZChkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lKTtcbiAgICAgICAgJGxibC5hcHBlbmRUbygkaSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHJlY3Vyc2l2ZTogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGRpdj4nKTtcblxuICAgICAgdmFyICRsYmwxID0gJCgnPGxhYmVsPicpXG4gICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICB2YXIgJG9wdDEgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAudmFsKCd0cnVlJylcbiAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJG9wdDEuYXBwZW5kVG8oJGxibDEpO1xuICAgICAgJGxibDEuYXBwZW5kKCdJbmRpdmlkdWFsIGZlYXR1cmVzJyk7XG5cbiAgICAgIHZhciAkbGJsMiA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgdmFyICRvcHQyID0gJCgnPGlucHV0PicpXG4gICAgICAgIC5hdHRyKCd0eXBlJywgJ3JhZGlvJylcbiAgICAgICAgLnZhbCgnZmFsc2UnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkb3B0Mi5hcHBlbmRUbygkbGJsMik7XG4gICAgICAkbGJsMi5hcHBlbmQoJ0VudGlyZSBjb2xsZWN0aW9uJyk7XG5cbiAgICAgICRsYmwxLmFwcGVuZFRvKCRpKTtcbiAgICAgICRsYmwyLmFwcGVuZFRvKCRpKTtcblxuICAgICAgcmV0dXJuICRpO1xuICAgIH1cbiAgfTtcblxuICAvLyBkYy5mb3JtLmdldFZhbHVlcyA9IGZ1bmN0aW9uKCRmb3JtKSB7XG4gIC8vICAgdmFyIHZhbHVlcyA9IFtdO1xuICAvLyAgIGNvbnNvbGUubG9nKCRmb3JtKTtcbiAgLy8gICByZXR1cm4gdmFsdWVzO1xuICAvLyB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVybGlzdCA9IHt9O1xuICBkYy5sYXllcmxpc3QuZWxlbXMgPSB7fTtcblxuICBkYy5sYXllcmxpc3QuaW5pdCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0gPSAkKCc8b2w+JykuYWRkQ2xhc3MobmFtZSk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGRjLmxheWVybGlzdC4kZWxlbSk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAoJChldmVudC50YXJnZXQpLmhhc0NsYXNzKG5hbWUpKSB7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGxpSGVscGVyID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci1oZWxwJylcbiAgICAgIC5odG1sKCdXZWxjb21lIHRvIDxzdHJvbmc+ZHJvcGNob3A8L3N0cm9uZz4hIEhlcmUgeW91IGNhbiBkcmFnIGFuZCBkcm9wIGZpbGVzIGFuZCB0aGV5IHdpbGwgc2hvdyB1cCBpbiB0aGUgbGF5ZXIgbGlzdCBiZWxvdy48YnI+PGJyPlRvIHRoZSBsZWZ0IHlvdSBjYW4gdXBsb2FkIGFuZCBzYXZlIHlvdXIgZmlsZXMgb3IgPGEgaHJlZj1cIi8/Z2lzdD0wOTEyOWMyMGVjMDIwYjgzYmY4NVwiPmFkZCBleGFtcGxlIGRhdGE8L2E+IG9yIHRoZSA8YSBocmVmPVwiLz9naXN0PWQwNjZiNTcyZThhOGFkMmI2ZDE2XCI+VVMgU3RhdGVzPC9hPi48YnI+PGJyPlRvIHRoZSByaWdodCB5b3VcXCdsbCBub3RpY2Ugc29tZSBnZW9zcGF0aWFsIG9wZXJhdGlvbnMgdGhhdCBiZWNvbWUgYXZhaWxhYmxlIGJhc2VkIG9uIHNlbGVjdGluZyBzcGVjaWZpYyBsYXllcnMuJyApO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGlIZWxwZXIpO1xuXG4gICAgdmFyIHRvZ2dsZUxheWVycyA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItdG9nZ2xlQWxsJylcbiAgICAgIC5odG1sKCc8bGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNoZWNrZWQ+VG9nZ2xlIGFsbCBsYXllcnM8L2xhYmVsPicpO1xuICAgIHRvZ2dsZUxheWVycy5vbignY2hhbmdlJywgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZCh0b2dnbGVMYXllcnMpO1xuXG4gICAgJChkYykub24oJ2xheWVyOmFkZGVkJywgZGMubGF5ZXJsaXN0LmFkZExheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgZGMubGF5ZXJsaXN0LnJlbW92ZUxheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWVkJywgZGMubGF5ZXJsaXN0LnJlbmFtZSk7XG4gIH07XG5cbiAgZGMubGF5ZXJsaXN0LnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCwgbmV3TmFtZSkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5maW5kKCcubGF5ZXItbmFtZScpLnRleHQobmV3TmFtZSk7XG4gIH07XG5cbiAgLy8gdHJpZ2dlcmVkIGluIGRyb3BjaG9wLmpzXG4gIGRjLmxheWVybGlzdC5hZGRMYXllckxpc3RJdGVtID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGxheWVybGlzdEl0ZW0gPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLWVsZW1lbnQnKS5hdHRyKCdkYXRhLXN0YW1wJywgbGF5ZXIuc3RhbXApO1xuICAgIHZhciBsYXllckRpdiA9ICQoJzxkaXY+JylcbiAgICAgIC5hZGRDbGFzcygnbGF5ZXItbmFtZSBsYXllci1uZXcnKVxuICAgICAgLnRleHQobGF5ZXIubmFtZSlcbiAgICAgIC5kZWxheSgzMDAwKVxuICAgICAgLnF1ZXVlKGZ1bmN0aW9uKG5leHQpIHtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnbGF5ZXItbmV3Jyk7XG4gICAgICB9KTtcblxuICAgIFxuICAgIHZhciBsYXllclR5cGUgPSAkKCc8c3Bhbj4nKS5hZGRDbGFzcygnbGF5ZXItdHlwZS1pbWFnZSBzcHJpdGUgc3ByaXRlLWxheWVyLScrbGF5ZXJUeXBlSWNvbihsYXllci50eXBlKSk7XG4gICAgdmFyIGNoZWNrYm94ID0gJCgnPGlucHV0PicpLmFkZENsYXNzKCdsYXllci10b2dnbGUnKS5wcm9wKHsndHlwZSc6ICdjaGVja2JveCcsICdjaGVja2VkJzogdHJ1ZX0pO1xuICAgIHZhciByZW1vdmUgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdsYXllci1hY3Rpb24gbGF5ZXItcmVtb3ZlJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiPjwvaT4nKTtcbiAgICB2YXIgZHVwbGljYXRlID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbGF5ZXItYWN0aW9uIGxheWVyLWR1cGxpY2F0ZScpLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtZmlsZXMtb1wiPjwvaT4nKTtcblxuICAgIGR1cGxpY2F0ZS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmR1cGxpY2F0ZScsIFskKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgIFxuICAgIHJlbW92ZS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZScsIFskKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgXG4gICAgY2hlY2tib3gub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgIC8vIHRyaWdnZXIgbGF5ZXI6c2hvd1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzaG93JywgW2xheWVyXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpoaWRlJywgW2xheWVyXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsYXllckRpdi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAvLyBjaGVjayBmb3Iga2V5cyBiZWluZyBoZWxkIGZvciBzcGVjaWFsIHNlbGVjdGlvblxuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgIC8vIHNlbGVjdCBhbGwgbGF5ZXJlcyBpbiBiZXR3ZWVuIHByZXZpb3VzIHRhcmdldCBhbmQgdGFyZ2V0XG4gICAgICAgIC8vIG5vdGU6IGRvbid0IHVuc2VsZWN0IGxheWVycyBhbHJlYWR5IHNlbGVjdGVkLCBqdXN0IGFkZCB0byBzZWxlY3Rpb25cbiAgICAgICAgdmFyIHRvU2VsZWN0ID0gW107XG4gICAgICAgIHZhciB0byA9ICQodGhpcyk7XG4gICAgICAgIHZhciBmcm9tID0gZGMubGF5ZXJsaXN0Ll9sYXN0U2VsZWN0ZWQ7XG4gICAgICAgIHZhciB0b0NvdW50LCBmcm9tQ291bnQ7XG5cbiAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICB2YXIgY2hlY2sgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICB2YXIgdG9TdGFtcCA9IHRvLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICB2YXIgZnJvbVN0YW1wID0gZnJvbS5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgaWYgKGNoZWNrID09PSB0b1N0YW1wKSB0b0NvdW50ID0gZTtcbiAgICAgICAgICBpZiAoY2hlY2sgPT09IGZyb21TdGFtcCkgZnJvbUNvdW50ID0gZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2codG9Db3VudCwgZnJvbUNvdW50KTtcbiAgICAgICAgaWYgKHRvQ291bnQgPiBmcm9tQ291bnQpIHtcbiAgICAgICAgICAvLyBsb29wIHVwXG4gICAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIGlmIChsID49IGZyb21Db3VudCAmJiBsIDw9IHRvQ291bnQgKSB7XG4gICAgICAgICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RMYXllcigkKHRoaXMpLmZpbmQoJy5sYXllci1uYW1lJyksIGRjLmxheWVycy5saXN0WyQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCgnLmxheWVyLWVsZW1lbnQnKS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIGlmIChsIDwgZnJvbUNvdW50ICYmIGwgPj0gdG9Db3VudCApIHtcbiAgICAgICAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdExheWVyKCQodGhpcykuZmluZCgnLmxheWVyLW5hbWUnKSwgZGMubGF5ZXJzLmxpc3RbJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChldmVudC5tZXRhS2V5KSB7XG4gICAgICAgIC8vIGFkZC9yZW1vdmUgc2VsZWN0ZWQgbGF5ZXIgdG8gY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSgkKHRoaXMpLCBsYXllcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjbGVhciBzZWxlY3Rpb24gYW5kIHNlbGVjdCB0YXJnZXRcbiAgICAgICAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uKCQodGhpcyksIGxheWVyKTtcbiAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSgkKHRoaXMpLCBsYXllcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChsYXllckRpdik7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoY2hlY2tib3gpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGxheWVyVHlwZSk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQocmVtb3ZlKTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChkdXBsaWNhdGUpO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGF5ZXJsaXN0SXRlbSk7XG5cbiAgICBkYy5sYXllcmxpc3QuZWxlbXNbbGF5ZXIuc3RhbXBdID0gbGF5ZXJsaXN0SXRlbTtcblxuICAgIC8vIGhpZGUgaGVscGVyIHRleHRcbiAgICAkKCcubGF5ZXItaGVscCcpLmhpZGUoKTtcbiAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuc2hvdygpO1xuICB9O1xuXG4gIGRjLmxheWVybGlzdC5zZWxlY3RMYXllciA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBpZiAoISRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAkaXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNlbGVjdGVkJywgW2x5cl0pO1xuICAgIH1cbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBpZiAoJGl0ZW0uaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICRpdGVtLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6dW5zZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9XG4gICAgZGMubGF5ZXJsaXN0Ll9sYXN0U2VsZWN0ZWQgPSAkaXRlbTtcbiAgfTtcbiAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24oJGl0ZW0sIGx5cikge1xuICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGxheWVyVHlwZUljb24odHlwZSkge1xuICAgIHZhciBpY29uO1xuICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICBjYXNlICdGZWF0dXJlQ29sbGVjdGlvbic6XG4gICAgICAgIGljb24gPSAnZmVhdHVyZWNvbGxlY3Rpb24nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8UG9pbnQ+JzogXG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpUG9pbnQ+JzogXG4gICAgICAgIGljb24gPSAncG9pbnQnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TGluZVN0cmluZz4nOiBcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPic6IFxuICAgICAgICBpY29uID0gJ2xpbmUnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8UG9seWdvbj4nOiBcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlQb2x5Z29uPic6IFxuICAgICAgICBpY29uID0gJ3BvbHlnb24nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPic6IFxuICAgICAgICBpY29uID0gJ2dlb20nO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGljb24gPSAnZGVmYXVsdCc7XG4gICAgICAgIGJyZWFrOyBcbiAgICB9XG4gICAgcmV0dXJuIGljb247XG4gIH1cblxuICBkYy5sYXllcmxpc3QudG9nZ2xlQWxsID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAvLyB0dXJuIHRoZW0gb25cbiAgICBpZiAoJCh0aGlzKS5maW5kKCdpbnB1dCcpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgZm9yICh2YXIgaSBpbiBkYy5sYXllcnMubGlzdCkge1xuICAgICAgICBlbGVtVG9nZ2xlKGRjLmxheWVycy5saXN0W2ldLnN0YW1wLCB0cnVlKTtcbiAgICAgIH1cbiAgICAvLyB0dXJuIHRoZW0gb2ZmXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIG8gaW4gZGMubGF5ZXJzLmxpc3QpIHtcbiAgICAgICAgZWxlbVRvZ2dsZShkYy5sYXllcnMubGlzdFtvXS5zdGFtcCwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVsZW1Ub2dnbGUoc3RhbXAsIGJvb2wpIHtcbiAgICAgICQoJy5sYXllci1lbGVtZW50W2RhdGEtc3RhbXA9JytzdGFtcCsnXScpXG4gICAgICAgIC5maW5kKCcubGF5ZXItdG9nZ2xlJylcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCBib29sKVxuICAgICAgICAudHJpZ2dlcignY2hhbmdlJyk7IC8vIHNldHMgb2ZmIGEgY2hhaW4gcmVhY3Rpb25cbiAgICB9XG4gIH07XG5cbiAgZGMubGF5ZXJsaXN0LnJlbW92ZUxheWVyTGlzdEl0ZW0gPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICAkKCdbZGF0YS1zdGFtcD0nK3N0YW1wKyddJykuZmFkZU91dCgzMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSBkYy5sYXllcmxpc3QuZWxlbXNbc3RhbXBdO1xuXG4gICAgICAvLyBzaG93IGhlbHBlciB0ZXh0IGlmIG5vIGxheWVycyBleGlzdFxuICAgICAgLy8gdGhpcyBoYXMgdG8gY2hlY2sgaW5zaWRlIHNpbmNlIHRoZXJlIGlzIGEgMzAwIG1zIGRlbGF5IHdpdGggdGhlIGZhZGVcbiAgICAgIGlmICgkKCcubGF5ZXItZWxlbWVudCcpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAkKCcubGF5ZXItaGVscCcpLnNob3coKTtcbiAgICAgICAgJCgnLmxheWVyLXRvZ2dsZUFsbCcpLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5sYXllcnMgPSB7fTtcbiAgZGMubGF5ZXJzLmxpc3QgPSB7fTtcblxuICBkYy5sYXllcnMucHJlcGFyZSA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdmaWxlOmFkZGVkJywgZGMubGF5ZXJzLmFkZCk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZScsIGRjLmxheWVycy5yZW1vdmUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpkdXBsaWNhdGUnLCBkYy5sYXllcnMuZHVwbGljYXRlKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVuYW1lJywgZGMubGF5ZXJzLnJlbmFtZSk7XG4gIH07XG5cbi8qKlxuICogQWRkIGEgbGF5ZXIgdG8gdGhlIGxheWVycyBsaXN0IGFuZCB0cmlnZ2VyIGxheWVyOmFkZGVkIGZvciBzdWJzY3JpYmVycyB0byBwaWNrIHVwLlxuICogQHBhcmFtIHtvYmplY3R9IGV2ZW50XG4gKiBAcGFyYW0ge29iamVjdH0gZmlsZSBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlIGJsb2IgdG8gYmUgY29udmVydGVkIHdpdGggSlNPTi5wYXJzZSgpXG4gKi9cbiAgZGMubGF5ZXJzLmFkZCA9IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBibG9iKSB7XG4gICAgdmFyIGwgPSBkYy5sYXllcnMubWFrZUxheWVyKG5hbWUsIGJsb2IpO1xuICAgIGRjLmxheWVycy5saXN0W2wuc3RhbXBdID0gbDtcblxuICAgIGRjLm5vdGlmeSgnc3VjY2VzcycsICc8c3Ryb25nPicrbC5uYW1lKyc8L3N0cm9uZz4gaGFzIGJlZW4gYWRkZWQhJywgMzUwMCk7XG5cbiAgICAvLyB0cmlnZ2VyIGxheWVyOmFkZGVkXG4gICAgJChkYykudHJpZ2dlcignbGF5ZXI6YWRkZWQnLCBbbF0pO1xuICB9O1xuXG4vKipcbiAqIFJlbW92ZSBhIGxheWVyLCB3aGljaCB0cmlnZ2VycyBsYXllcjpyZW1vdmVkIGZvciB0aGUgcmVzdCBvZiB0aGUgYXBwXG4gKiBAcGFyYW0ge3N0cmluZ30gbGF5ZXIgc3RhbXBcbiAqL1xuICBkYy5sYXllcnMucmVtb3ZlID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgLy8gdHJpZ2dlciBsYXllcjpyZW1vdmVkXG4gICAgdHJ5IHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZWQnLCBbc3RhbXBdKTtcbiAgICAgIGRjLm5vdGlmeSgnaW5mbycsICc8c3Ryb25nPicgKyBkYy5sYXllcnMubGlzdFtzdGFtcF0ubmFtZSArICc8L3N0cm9uZz4gaGFzIGJlZW4gcmVtb3ZlZC4nKTtcbiAgICAgIGRlbGV0ZSBkYy5sYXllcnMubGlzdFtzdGFtcF07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gcmVtb3ZpbmcgdGhlIGxheWVyLicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICBcbiAgfTtcblxuICBkYy5sYXllcnMuZHVwbGljYXRlID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgdmFyIGx5ciA9IGRjLmxheWVycy5saXN0W3N0YW1wXTtcbiAgICAvLyBuZWVkIHRvIGNyZWF0ZSBuZXcgbGF5ZXIgc28gd2UgY2FuIGdldCBhIHVuaXFlIEwuc3RhbXAoKVxuICAgIGRjLmxheWVycy5hZGQoe30sICdjb3B5XycrbHlyLm5hbWUsIGx5ci5yYXcpO1xuICB9O1xuXG4gIGRjLmxheWVycy5yZW5hbWUgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIsIG5ld05hbWUpIHtcbiAgICAvLyByZW5hbWUgaW4gbGF5ZXIgb2JqZWN0XG4gICAgZGMubGF5ZXJzLmxpc3RbbGF5ZXIuc3RhbXBdLm5hbWUgPSBuZXdOYW1lO1xuXG4gICAgLy8gcmVuYW1lIGluIGxheWVybGlzdFxuICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbmFtZWQnLCBbbGF5ZXIuc3RhbXAsIG5ld05hbWVdKTtcbiAgfTtcblxuICBkYy5sYXllcnMubWFrZUxheWVyID0gZnVuY3Rpb24obmFtZSwganNvbikge1xuICAgIHZhciBnZW9qc29uID0ganNvbjtcbiAgICAvLyBpZiAoanNvbi50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nICYmIGpzb24uZmVhdHVyZXMubGVuZ3RoID09PSAxKSB7XG4gICAgLy8gICBnZW9qc29uID0gZGMudXRpbC51bmNvbGxlY3QoanNvbik7XG4gICAgLy8gfVxuXG4gICAgdmFyIGZsID0gTC5tYXBib3guZmVhdHVyZUxheWVyKGdlb2pzb24pO1xuICAgIHZhciBsYXllciA9IHtcbiAgICAgIG5hbWU6IGRjLnV0aWwucmVtb3ZlRmlsZUV4dGVuc2lvbihuYW1lKSxcbiAgICAgIHN0YW1wOiBMLnN0YW1wKGZsKSxcbiAgICAgIHJhdzogZ2VvanNvbixcbiAgICAgIHR5cGU6IGdldFR5cGUoZ2VvanNvbiksXG4gICAgICBmZWF0dXJlbGF5ZXI6IGZsLFxuICAgICAgZGF0ZUFkZGVkOiBuZXcgRGF0ZSgpXG4gICAgfTtcbiAgICByZXR1cm4gbGF5ZXI7XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0VHlwZShnaikge1xuICAgIGlmIChnai50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICByZXR1cm4gJ0ZlYXR1cmVDb2xsZWN0aW9uJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdqLnR5cGUgKyAnPCcgKyBnai5nZW9tZXRyeS50eXBlICsgJz4nO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm1hcCA9IHt9O1xuXG4gIGRjLm1hcC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgZGMubWFwLiRlbGVtID0gJCgnPGRpdj4nKS5wcm9wKCdpZCcsICdkcm9wY2hvcC1tYXAnKS5hZGRDbGFzcygnbWFwJyk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGRjLm1hcC4kZWxlbSk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlZCcsIGRjLm1hcC5yZW1vdmVMYXllcik7XG5cbiAgICBfbWFrZU1hcCgpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9tYWtlTWFwKCkge1xuICAgIGRjLm1hcC50b2tlbiA9IEwubWFwYm94LmFjY2Vzc1Rva2VuID0gJ3BrLmV5SjFJam9pYzNadFlYUjBhR1YzY3lJc0ltRWlPaUpWTVVsVVIweHJJbjAuTndlU19BdHRqc3d0TjV3UnVXQ1NOQSc7XG4gICAgZGMubWFwLm0gPSBMLm1hcGJveC5tYXAoJ2Ryb3BjaG9wLW1hcCcsIG51bGwsIHtcbiAgICAgIHpvb21Db250cm9sOiBmYWxzZSxcbiAgICAgIHdvcmxkQ29weUp1bXA6IHRydWVcbiAgICB9KS5zZXRWaWV3KFswLDBdLCAzKTtcblxuICAgIC8vIHNldHMgdGhlIGxvY2F0aW9uIG9mIHRoZSB6b29tIGJ1dHRvbnMgdG8gdGhlIHRvcCByaWdodFxuICAgIEwuY29udHJvbC56b29tKHtcbiAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICBMLm1hcGJveC5nZW9jb2RlckNvbnRyb2woJ21hcGJveC5wbGFjZXMnLCB7XG4gICAgICBwb3NpdGlvbjogJ3RvcGxlZnQnXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgdmFyIGJhc2VMYXllcnMgPSB7XG4gICAgICBcIk1hcGJveCBTdHJlZXRzXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LnN0cmVldHMnKSxcbiAgICAgIFwiTWFwYm94IE91dGRvb3JzXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94Lm91dGRvb3JzJyksXG4gICAgICBcIk1hcGJveCBMaWdodFwiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5saWdodCcpLFxuICAgICAgXCJNYXBib3ggRGFya1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5kYXJrJyksXG4gICAgICBcIk1hcGJveCBTYXRlbGxpdGVcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guc2F0ZWxsaXRlJylcbiAgICB9O1xuXG4gICAgYmFzZUxheWVyc1snTWFwYm94IFN0cmVldHMnXS5hZGRUbyhkYy5tYXAubSk7XG4gICAgLy8gc2V0cyBsb2NhdGlvbiBvZiBiYXNlIGxheWVyIGNvbnRyb2wgdG8gdGhlIGJvdHRvbSByaWdodFxuICAgIEwuY29udHJvbC5sYXllcnMoYmFzZUxheWVycywge30sIHtcbiAgICAgIHBvc2l0aW9uOiAnYm90dG9tcmlnaHQnLFxuICAgICAgY29sbGFwc2VkOiBmYWxzZVxuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIGRjLm1hcC5sYXllcmdyb3VwID0gTC5tYXBib3guZmVhdHVyZUxheWVyKCk7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgJChkYykub24oJ2xheWVyOmFkZGVkJywgZGMubWFwLmFkZExheWVyKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6aGlkZScsIGRjLm1hcC5oaWRlTGF5ZXIpO1xuICAgICQoZGMpLm9uKCdsYXllcjpzaG93JywgZGMubWFwLnNob3dMYXllcik7XG5cbiAgICAvLyAvLyBteSBsb2NhdGlvbiBhcyBsYXllclxuICAgIC8vIHZhciBnZW9sb2NhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VvbG9jYXRlJyk7XG5cbiAgICAkKGRjLm1hcC5tKS5vbignbG9jYXRpb25mb3VuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBkYXRhID0gZS5vcmlnaW5hbEV2ZW50O1xuICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGRhdGEuYm91bmRzKTtcblxuICAgICAgdmFyIGx5ciA9IHtcbiAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgICAgICBnZW9tZXRyeToge1xuICAgICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgICAgY29vcmRpbmF0ZXM6IFtkYXRhLmxhdGxuZy5sbmcsIGRhdGEubGF0bG5nLmxhdF1cbiAgICAgICAgfSxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICd0aXRsZSc6ICdUaGVyZSBZb3UgQXJlJyxcbiAgICAgICAgICAnbWFya2VyLWNvbG9yJzogJyMyMDcxNzgnLFxuICAgICAgICAgICdtYXJrZXItc3ltYm9sJzogJ2hlYXJ0J1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgWyd5b3VyIGxvY2F0aW9uJywgbHlyXSk7XG4gICAgfSk7XG5cbiAgICAkKGRjLm1hcC5tKS5vbignbG9jYXRpb25lcnJvcicsIGZ1bmN0aW9uKCkge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGVyZSB3YXMgYSBwcm9ibGVtIGZpbmRpbmcgeW91ciBsb2NhdGlvbi4nLCAzMDAwKTtcbiAgICB9KTtcblxuICAgIC8vIC8vIE9uY2Ugd2UndmUgZ290IGEgcG9zaXRpb24sIHpvb20gYW5kIGNlbnRlciB0aGUgbWFwXG4gICAgLy8gLy8gb24gaXQsIGFuZCBhZGQgYSBzaW5nbGUgbWFya2VyLlxuICAgIC8vIHRoaXMuX21hcC5vbignbG9jYXRpb25mb3VuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAvLyAgIHRoaXMuX21hcC5maXRCb3VuZHMoZS5ib3VuZHMpO1xuXG5cbiAgICAvLyAgIG15TGF5ZXIuc2V0R2VvSlNPTih7XG4gICAgLy8gICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAvLyAgICAgZ2VvbWV0cnk6IHtcbiAgICAvLyAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgIC8vICAgICAgIGNvb3JkaW5hdGVzOiBbZS5sYXRsbmcubG5nLCBlLmxhdGxuZy5sYXRdXG4gICAgLy8gICAgIH0sXG4gICAgLy8gICAgIHByb3BlcnRpZXM6IHtcbiAgICAvLyAgICAgICAndGl0bGUnOiAnVGhlcmUgWW91IEFyZScsXG4gICAgLy8gICAgICAgJ21hcmtlci1jb2xvcic6ICcjMjA3MTc4JyxcbiAgICAvLyAgICAgICAnbWFya2VyLXN5bWJvbCc6ICdoZWFydCdcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSk7XG5cbiAgICAvLyAgIC8vIEFuZCBoaWRlIHRoZSBnZW9sb2NhdGlvbiBidXR0b25cbiAgICAvLyAgIC8vZ2VvbG9jYXRlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZ2VvbG9jYXRlKTtcbiAgICAvLyB9LmJpbmQodGhpcykpO1xuXG4gICAgLy8gLy8gSWYgdGhlIHVzZXIgY2hvb3NlcyBub3QgdG8gYWxsb3cgdGhlaXIgbG9jYXRpb25cbiAgICAvLyAvLyB0byBiZSBzaGFyZWQsIGRpc3BsYXkgYW4gZXJyb3IgbWVzc2FnZS5cbiAgICAvLyB0aGlzLl9tYXAub24oJ2xvY2F0aW9uZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAvLyAgIGdlb2xvY2F0ZS5pbm5lckhUTUwgPSAnUG9zaXRpb24gY291bGQgbm90IGJlIGZvdW5kJztcbiAgICAvLyB9KTtcblxuXG4gIH1cblxuICBkYy5tYXAuY291bnQgPSAwO1xuXG4gIGRjLm1hcC5hZGRMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIHZhciBmbCA9IGxheWVyLmZlYXR1cmVsYXllcjtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRMYXllcihmbCk7XG5cbiAgICAvLyBjcmVhdGUgcG9wdXAgdGFibGUgZm9yIGVhY2ggZmVhdHVyZVxuICAgIGZsLmVhY2hMYXllcihmdW5jdGlvbihsYXllcikgeyAgICAgIFxuICAgICAgdmFyIGNvbnRlbnQgPSAnPHRhYmxlIGNsYXNzPVwiZHJvcGNob3AtdGFibGVcIj48dHI+PHRoPlByb3BlcnR5PC90aD48dGg+RGF0YTwvdGg+PC90cj4nO1xuXG4gICAgICBpZiAobGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgY29udGVudCArPSAnPHRyPjx0ZD48c3Ryb25nPicgKyBwcm9wICsgJzwvc3Ryb25nPjwvdGQ+PHRkPicgKyBsYXllci5mZWF0dXJlLnByb3BlcnRpZXNbcHJvcF0gKyAnPC90ZD48L3RyPic7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQgKz0gJzxwPlRoZXJlIGFyZSBubyBwcm9wZXJ0aWVzIHNldCBmb3IgdGhpcyBmZWF0dXJlLjwvcD4nO1xuICAgICAgfVxuICAgICAgY29udGVudCArPSAnPC90YWJsZT4nO1xuXG4gICAgICBsYXllci5iaW5kUG9wdXAoTC5wb3B1cCh7XG4gICAgICAgIG1heFdpZHRoOiA0NTAsXG4gICAgICAgIG1heEhlaWdodDogMjAwLFxuICAgICAgICBhdXRvUGFuUGFkZGluZzogWzQ1LCA0NV0sXG4gICAgICAgIGNsYXNzTmFtZTogJ2Ryb3BjaG9wLXBvcHVwJ1xuICAgICAgfSwgbGF5ZXIpLnNldENvbnRlbnQoY29udGVudCkpO1xuICAgIH0pO1xuXG4gIH07XG5cbiAgZGMubWFwLmhpZGVMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLnJlbW92ZUxheWVyKGxheWVyLmZlYXR1cmVsYXllcik7XG4gIH07XG5cbiAgZGMubWFwLnNob3dMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZExheWVyKGxheWVyLmZlYXR1cmVsYXllcik7XG4gIH07XG4gIFxuICBkYy5tYXAucmVtb3ZlTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5yZW1vdmVMYXllcihkYy5sYXllcnMubGlzdFtzdGFtcF0uZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5ub3RpZnkgPSBmdW5jdGlvbih0eXBlLCB0ZXh0LCB0aW1lKSB7XG4gICAgdmFyIG5vdGUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdub3RpZmljYXRpb24nKVxuICAgICAgLmFkZENsYXNzKHR5cGUpXG4gICAgICAuaHRtbCh0ZXh0KTtcblxuICAgICQoZGMuJGVsZW0pLmFwcGVuZChub3RlKTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBub3RlLnJlbW92ZSgpO1xuICAgIH0sIHRpbWUgfHwgMzAwMCk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMub3BzID0gZGMub3BzIHx8IHt9O1xuXG4gIGRjLm9wcy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gYnVpbGQgb3BzLmdlbyBjb250YWluZXJcbiAgICB2YXIgZ2VvQ29udGFpbmVyID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnb3BlcmF0aW9ucy1nZW8nKTtcbiAgICBkYy4kZWxlbS5hcHBlbmQoZ2VvQ29udGFpbmVyKTtcblxuICAgIC8vIGNyZWF0ZSBnZW8gYnV0dG9ucyAmIGZvcm1zXG4gICAgZm9yICh2YXIgZ2VvT3AgaW4gZGMub3BzLmdlbykge1xuICAgICAgdmFyIGdlb0J0biA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ29wZXJhdGlvbiBvcGVyYXRpb24tZ2VvIG9wZXJhdGlvbi1pbmFjdGl2ZScpXG4gICAgICAgIC5odG1sKCc8aDQ+JyArIGdlb09wICsgJzwvaDQ+PHA+JyArIGRjLm9wcy5nZW9bZ2VvT3BdLmRlc2NyaXB0aW9uICsgJzwvcD4nKVxuICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICAuYXR0cignZGF0YS1vcGVyYXRpb24nLCBnZW9PcCk7XG4gICAgICBnZW9CdG4ub24oJ2NsaWNrJywgX2dlb0J0bkNsaWNrKTtcblxuICAgICAgZ2VvQ29udGFpbmVyLmFwcGVuZChnZW9CdG4pO1xuICAgIH1cblxuICAgICQoZGMpLm9uKCdsYXllcjpzZWxlY3RlZCcsIGRjLm9wcy5nZW9DaGVjayk7XG4gICAgJChkYykub24oJ2xheWVyOnVuc2VsZWN0ZWQnLCBkYy5vcHMuZ2VvQ2hlY2spO1xuICAgIC8vICQoJy5vcGVyYXRpb24tZ2VvJykucmVtb3ZlQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgIC8vICQoJy5vcGVyYXRpb24tZ2VvJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpnZW8nLCBkYy5vcHMuZ2VvRXhlY3V0ZSk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtZ2lzdCcsIGRjLm9wcy5maWxlWydsb2FkLWdpc3QnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLXVybCcsIGRjLm9wcy5maWxlWydsb2FkLXVybCddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtb3ZlcnBhc3MnLCBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOnJlbmFtZScsIGRjLm9wcy5maWxlLnJlbmFtZS5jYWxsYmFjayk7XG5cbiAgICAvLyBzZXR1cCBvcHMgZmlsZVxuICAgIHZhciBsZWZ0TWVudSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLW1lbnUtbGVmdCcpO1xuICAgIGZvciAodmFyIGZpbGVPcCBpbiBkYy5vcHMuZmlsZSkge1xuICAgICAgaWYoZGMub3BzLmZpbGVbZmlsZU9wXS50eXBlID09PSAnYnJlYWsnKSB7XG4gICAgICAgIHZhciAkYnJlYWtTcGFjZSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uLWJyZWFrJyk7XG4gICAgICAgIGxlZnRNZW51LmFwcGVuZCgkYnJlYWtTcGFjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZmlsZUJ0biA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uJylcbiAgICAgICAgICAuaHRtbChkYy5vcHMuZmlsZVtmaWxlT3BdLmljb24gfHwgJ0EnKVxuICAgICAgICAgIC5hdHRyKCdkYXRhLW9wZXJhdGlvbicsIGZpbGVPcClcbiAgICAgICAgICAuYXR0cignZGF0YS10b29sdGlwJywgZGMub3BzLmZpbGVbZmlsZU9wXS5kZXNjcmlwdGlvbik7XG4gICAgICAgICAgaWYgKGRjLm9wcy5maWxlW2ZpbGVPcF0udHlwZSA9PT0gJ2luZm8nKSBmaWxlQnRuLmFkZENsYXNzKCdkcm9wY2hvcC1pbmZvJyk7XG4gICAgICAgIGZpbGVCdG4ub24oJ2NsaWNrJywgX2ZpbGVCdG5DbGljayk7XG4gICAgICAgIGxlZnRNZW51LmFwcGVuZChmaWxlQnRuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZGMuJGVsZW0uYXBwZW5kKGxlZnRNZW51KTtcbiAgfTtcblxuICBmdW5jdGlvbiBfZ2VvQnRuQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgLy8gaWYgb3BlcmF0aW9uIHJlcXVpcmVzIG5vIHBhcmFtZXRlcnMsIGRvbid0IHJlbmRlciBhIGZvcm1cbiAgICBpZiAoIWRjLm9wcy5nZW9bb3BlcmF0aW9uXS5wYXJhbWV0ZXJzKSB7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdvcGVyYXRpb246Z2VvJywgW29wZXJhdGlvbiwgZGMuc2VsZWN0aW9uLmxpc3RdKTtcbiAgICAvLyBvdGhlcndpc2UgcmVuZGVyIHRoZSBmb3JtXG4gICAgfSBlbHNlIHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06Z2VvJywgW29wZXJhdGlvbl0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9maWxlQnRuQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIG9wZXJhdGlvbiA9ICQodGhpcykuYXR0cignZGF0YS1vcGVyYXRpb24nKTtcbiAgICB0cnkge1xuICAgICAgZGMub3BzLmZpbGVbb3BlcmF0aW9uXS5leGVjdXRlKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoaXMgb3BlcmF0aW9uIGRvZXNuXFwndCBleGlzdCEnKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIHR1cmYgZnVuY3Rpb24gYmFzZWQgb24gYnV0dG9uIG9wZXJhdGlvbiBjbGljay5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9yaWdpbmFsIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wZXJhdGlvbiB0byBiZSBleGVjdXRlZCB2aWEgdHVyZlxuICAgKiBAcGFyYW0ge2FycmF5fSBzZXJpZXMgb2YgcGFyYW1ldGVycyB0byBiZSBhcHBsaWVkIHRvIHR1cmYgb3BlcmF0aW9uXG4gICAqL1xuICBkYy5vcHMuZ2VvRXhlY3V0ZSA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24sIHBhcmFtZXRlcnMpIHtcbiAgICB2YXIgcHJlcCA9IGRjLm9wcy5wcmVwYXJlVHVyZlBhcmFtcyhvcGVyYXRpb24sIHBhcmFtZXRlcnMpO1xuICAgIHZhciByZXN1bHQgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBkYy5vcHMuZ2VvW29wZXJhdGlvbl0uZXhlY3V0ZShwcmVwLm9wdGlvbnMpO1xuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ1RoYXQgb3BlcmF0aW9uIGlzblxcJ3QgcG9zc2libGUuIFRyeSBjaGFuZ2luZyB0aGUgb3JkZXIgb2YgeW91ciBzZWxlY3Rpb24uJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtwcmVwLm5hbWUsIHJlc3VsdF0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIHBhcmFtZXRlcnMgZm9yIGV4ZWN1dGluZyB3aXRoaW4gYSB0dXJmIGZ1bmN0aW9uIHVzaW5nIC5hcHBseSgpIC0gcmV0dXJucyBhbiBhcnJheVxuICAgKiBAcGFyYW0ge2FycmF5fSBvcHRpb25zIGZyb20gdGhlIHVzZXIgcGFzc2VkIGZyb20gdGhlIG9yaWdpbmFsIGV2ZW50IHRyaWdnZXJcbiAgICovXG4gIGRjLm9wcy5wcmVwYXJlVHVyZlBhcmFtcyA9IGZ1bmN0aW9uKG9wZXJhdGlvbiwgcGFyYW1zKSB7XG4gICAgdmFyIGRhdGEgPSB7fTtcbiAgICBkYXRhLm9wdGlvbnMgPSBbXTtcblxuICAgIHZhciBnZW9tcyA9IFtdO1xuICAgIHZhciBuYW1lQXJyYXkgPSBbXTtcbiAgICAvLyBnZXQgZ2VvbWV0cnkgYXJyYXkgZnJvbSBzZWxlY3Rpb25cbiAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgIGlmICgkLmluQXJyYXkoJ3N3aXRjaC0nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXAsIHBhcmFtcykgPT09IC0xKSB7XG4gICAgICAgIGdlb21zLnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdlb21zLnVuc2hpZnQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3KTtcbiAgICAgIH1cbiAgICAgIG5hbWVBcnJheS5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUpO1xuICAgIH0pO1xuXG4gICAgLy8gbWVyZ2UgcGFyYW1zIHdpdGggb3B0aW9ucyBhcnJheVxuICAgIGRhdGEub3B0aW9ucyA9ICQubWVyZ2UoZ2VvbXMsIHBhcmFtcyk7XG5cbiAgICAvLyBjcmVhdGUgbmFtZSBhcnJheVxuICAgIGRhdGEubmFtZSA9IGRjLnV0aWwuY29uY2F0KG5hbWVBcnJheSwgJ18nLCBvcGVyYXRpb24pO1xuICAgIFxuICAgIHJldHVybiBkYXRhO1xuICB9O1xuXG4gIGRjLm9wcy5nZW9DaGVjayA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuXG4gICAgLy8gY2hlY2sgc2VsZWN0aW9uIGNvdW50IHZzIG9wZXJhdGlvbiBtaW4vbWF4XG4gICAgZm9yICh2YXIgbyBpbiBkYy5vcHMuZ2VvKSB7XG4gICAgICB2YXIgb3AgPSBkYy5vcHMuZ2VvW29dO1xuICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA+IG9wLm1heEZlYXR1cmVzIHx8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA8IG9wLm1pbkZlYXR1cmVzKSB7XG4gICAgICAgIHR1cm5JdE9mZihvKTtcbiAgICAgICAgLy8gZG9uJ3QgZ28gYW55IGZ1cnRoZXJcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy8gY2hlY2sgb3BlcmF0aW9uIGFnYWluc3QgZWFjaCBzZWxlY3Rpb24gZGF0YSB0eXBlXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICB2YXIgc2VsID0gZGMuc2VsZWN0aW9uLmxpc3RbeF07XG5cbiAgICAgICAgICAvLyBpZiB0aGUgc2VsZWN0aW9uIHR5cGUgaXMgaW4gdGhlIGFycmF5LCBtYXJrIGl0IGFzIGFjdGl2ZSFcbiAgICAgICAgICBpZiAoJC5pbkFycmF5KHNlbC50eXBlLCBvcC5yZXF1aXJlbWVudHMudHlwZXMpID4gLTEgfHwgb3AucmVxdWlyZW1lbnRzLmdlbmVyYWxGZWF0dXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0dXJuSXRPbihvKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHVybkl0T2ZmKG8pO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHVybkl0T2ZmKG9wKSB7XG4gICAgICB2YXIgYnRuID0gJCgnW2RhdGEtb3BlcmF0aW9uPScrIG9wICsnXScpO1xuICAgICAgYnRuLmFkZENsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHR1cm5JdE9uKG9wKSB7XG4gICAgICB2YXIgYnRuID0gJCgnW2RhdGEtb3BlcmF0aW9uPScrIG9wICsnXScpO1xuICAgICAgYnRuLnJlbW92ZUNsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG4gICAgXG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMub3BzID0gZGMub3BzIHx8IHt9O1xuXG4gIGRjLm9wcy5maWxlID0ge1xuICAgIHVwbG9hZDoge1xuICAgICAgZGVzY3JpcHRpb246ICdVcGxvYWQgZnJvbSB5b3VyIGNvbXB1dGVyICguZ2VvanNvbiknLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdXBsb2FkXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gaW5zcGlyZWQgZnJvbSBnZW9qc29uLmlvXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvZ2VvanNvbi5pby9ibG9iL2doLXBhZ2VzL3NyYy91aS9maWxlX2Jhci5qcyNMMzkwXG4gICAgICAgIHZhciAkYmxpbmRJbnB1dCA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ2ZpbGUnKVxuICAgICAgICAgIC5hdHRyKCdtdWx0aXBsZScsICd0cnVlJylcbiAgICAgICAgICAuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpXG4gICAgICAgICAgLmNzcygncG9zaXRpb24nLCAnYWJzb2x1dGUnKVxuICAgICAgICAgIC5jc3MoJ2hlaWdodCcsICcwJylcbiAgICAgICAgICAub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGZpbGVzID0gdGhpcy5maWxlcztcbiAgICAgICAgICAgICQoZmlsZXMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgICAvLyB2YXIgZXh0ID0gZGMudXRpbC5nZXRGaWxlRXh0ZW5zaW9uKGZpbGVzW2ldLm5hbWUpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gLy8gaWYgaXQgaXMgYSBzaGFwZWZpbGUgb3IgemlwIGZpbGVcbiAgICAgICAgICAgICAgLy8gaWYgKGV4dCA9PT0gJ3NocCcgfHwgZXh0ID09PSAnemlwJykge1xuICAgICAgICAgICAgICAvLyAgIC8vIHVwbG9hZCBhIHNoYXBlZmlsZSBhbmQgYWRkIHRoZSBsYXllclxuICAgICAgICAgICAgICAvLyAgIGRjLnV0aWwucmVhZFNocEZpbGVcbiAgICAgICAgICAgICAgLy8gICBzaHAoXCJmaWxlcy9wYW5kclwiKS50aGVuKGZ1bmN0aW9uKGdlb2pzb24pe1xuICAgICAgICAgICAgICAvLyAgICAgLy9kbyBzb21ldGhpbmcgd2l0aCB5b3VyIGdlb2pzb24gXG4gICAgICAgICAgICAgIC8vICAgfSk7XG4gICAgICAgICAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGMudXRpbC5yZWFkRmlsZShmaWxlc1tpXSk7XG4gICAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkYmxpbmRJbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkYmxpbmRJbnB1dCk7XG4gICAgICAgICRibGluZElucHV0LmNsaWNrKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLXVybCc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0IGZpbGUgZnJvbSBhIFVSTCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saW5rXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndXJsJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1VSTCcsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdodHRwOi8vJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLXVybCddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciB1cmwgPSBwYXJhbWV0ZXJzWzBdO1xuICAgICAgICBkYy51dGlsLnhocih1cmwsIGRjLm9wcy5maWxlW25hbWVdLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgLy8gZ2V0IGZpbGVuYW1lIGJhc2VkIG9uIHRoZSBlbmQgb2YgdGhlIHVybCAtIG5vdCBzdXJlIGlmIHRoaXMgaXMgc3VzdGFpbmFibGVcbiAgICAgICAgICB2YXIgbmFtZSA9IHhoci5yZXNwb25zZVVSTC5zdWJzdHJpbmcoeGhyLnJlc3BvbnNlVVJMLmxhc3RJbmRleE9mKCcvJykrMSk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtuYW1lLCBkYXRhXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcmV0cmlldmUgR2lzdC4gUGxlYXNlIGNoZWNrIHlvdXIgVVJMJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtZ2lzdCc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0IGZpbGVzIGZyb20gR2lzdCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1naXRodWJcIj48L2k+JyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdnaXN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J0dpc3QgSUQgb3IgVVJMJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHBzOi8vZ2lzdC5naXRodWIuY29tLydcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLWdpc3QnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICB2YXIgZ2lzdCA9IHBhcmFtZXRlcnNbMF0uc3BsaXQoJy8nKVtwYXJhbWV0ZXJzWzBdLnNwbGl0KCcvJykubGVuZ3RoLTFdO1xuICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vZ2lzdHMvJyArIGdpc3Q7XG4gICAgICAgIGRjLnV0aWwueGhyKHVybCwgZGMub3BzLmZpbGVbbmFtZV0uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICBmb3IgKHZhciBmIGluIGRhdGEuZmlsZXMpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gZGF0YS5maWxlc1tmXS5maWxlbmFtZTtcbiAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbbmFtZSwgSlNPTi5wYXJzZShkYXRhLmZpbGVzW2ZdLmNvbnRlbnQpXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGRjLm5vdGlmeSgnc3VjY2VzcycsICdTdWNjZXNmdWxseSByZXRyaWV2ZWQgZ2lzdCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcmV0cmlldmUgR2lzdC4gUGxlYXNlIGNoZWNrIHlvdXIgVVJMJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtb3ZlcnBhc3MnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ1F1ZXJ5IHRoZSBPdmVycGFzcyBBUEknLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdGVybWluYWxcIj48L2k+JyxcbiAgICAgIF90ZW1wOiB7fSxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdxdWVyeScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidMZWFybiBtb3JlIGFib3V0IDxhIGhyZWY9XCJodHRwOi8vd2lraS5vcGVuc3RyZWV0bWFwLm9yZy93aWtpL092ZXJwYXNzX0FQSS9MYW5ndWFnZV9HdWlkZVwiIHRhcmdldD1cIl9ibGFua1wiPnRoZSBxdWVyeSBsYW5ndWFnZTwvYT4uJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2FtZW5pdHk9YmFyJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2xheWVyIG5hbWUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonTmFtZSBvZiB0aGUgbGF5ZXIgYWRkZWQgaWYgcmVzdWx0cyBhcmUgZm91bmQuJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ292ZXJwYXNzX2xheWVyX25hbWUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLW92ZXJwYXNzJ10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgLy8gc2V0IGxheWVyIG5hbWUgdG8gX3RlbXAgZm9yIGxhdGVyIHVzYWdlXG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uX3RlbXAubGF5ZXJOYW1lID0gcGFyYW1ldGVyc1sxXTsgLy8gdGhpcyBpcyB1Z2x5XG5cbiAgICAgICAgLy8gYnVpbGQgdGhlIHF1ZXJ5IHdpdGggYm91bmRpbmcgYm94XG4gICAgICAgIHZhciBiYm94ID0gZGMudXRpbC5nZXRCQm94KCk7XG4gICAgICAgIGRjLnV0aWwueGhyKCdodHRwOi8vb3ZlcnBhc3MtYXBpLmRlL2FwaS9pbnRlcnByZXRlcj9bb3V0Ompzb25dO25vZGVbJytwYXJhbWV0ZXJzWzBdKyddKCcrYmJveCsnKTtvdXQ7JywgZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5jYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIHZhciBnZW9qc29uID0gb3NtdG9nZW9qc29uKGRhdGEpO1xuICAgICAgICAgIGlmICghZGF0YS5lbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBlbGVtZW50cyBmb3VuZCBpbiB5b3VyIHF1ZXJ5LicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2RjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uX3RlbXAubGF5ZXJOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnRm91bmQgPHN0cm9uZz4nICsgZGF0YS5lbGVtZW50cy5sZW5ndGggKyAnIGVsZW1lbnRzPC9zdHJvbmc+IGZyb20gdGhlIE92ZXJwYXNzIEFQSScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCBxdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbG9jYXRpb246IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWRkIHlvdXIgbG9jYXRpb24gYXMgYSBsYXllcicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jcm9zc2hhaXJzXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0dlb2xvY2F0aW9uIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBicm93c2VyLicsIDQwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm1hcC5tLmxvY2F0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdicmVhazEnOiB7IHR5cGU6ICdicmVhaycgfSxcblxuICAgICdzYXZlLWdlb2pzb24nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBHZW9KU09OJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGUtY29kZS1vXCI+PC9pPicsXG4gICAgICBjcmVhdGVzTGF5ZXI6IGZhbHNlLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIChmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRjLnNlbGVjdGlvbi5saXN0W2ZpbGVdLnJhdyk7XG4gICAgICAgICAgICB2YXIgdGl0bGUgPSAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ZpbGVdLm5hbWUgKyAnLmdlb2pzb24nO1xuICAgICAgICAgICAgc2F2ZUFzKG5ldyBCbG9iKFtjb250ZW50XSwge1xuICAgICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04J1xuICAgICAgICAgICAgfSksIHRpdGxlKTtcbiAgICAgICAgICB9KShpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnc2F2ZS1zaGFwZWZpbGUnOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBTaGFwZWZpbGUnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZmlsZVwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgZm9sZGVyOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVzOiB7XG4gICAgICAgICAgICAgICAgcG9pbnQ6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfcG9pbnQnLFxuICAgICAgICAgICAgICAgIHBvbHlnb246ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfcG9seScsXG4gICAgICAgICAgICAgICAgbGluZTogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19saW5lJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2hwd3JpdGUuZG93bmxvYWQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3LCBvcHRpb25zKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnRXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBkb3dubG9hZGluZyB0aGUgc2hhcGVmaWxlLicgKyBlcnIpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZVxuICAgIH0sXG5cbiAgICAnYnJlYWsyJzogeyB0eXBlOiAnYnJlYWsnIH0sXG5cbiAgICBleHRlbnQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdWaWV3IGV4dGVudCBvZiBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZ2xvYmVcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZighZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gZXh0ZW50IG9mIGVudGlyZSBsYXllciBsaXN0IGlmIG5vdGhpbmcgc2VsZWN0ZWRcbiAgICAgICAgICBkYy5tYXAubS5maXRCb3VuZHMoZGMubWFwLmxheWVyZ3JvdXAuZ2V0Qm91bmRzKCkpOyAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGJ1aWxkIHRoZSBib3VuZHMgYmFzZWQgb24gc2VsZWN0ZWQgbGF5ZXJzXG4gICAgICAgICAgdmFyIGJvdW5kcztcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIHZhciBmbCA9IGRjLnNlbGVjdGlvbi5saXN0W2xdLmZlYXR1cmVsYXllcjtcbiAgICAgICAgICAgIGlmKCFsKSBib3VuZHMgPSBmbC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIGVsc2UgYm91bmRzLmV4dGVuZChmbC5nZXRCb3VuZHMoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICB9XG4gICAgfSxcblxuICAgIGV4cGFuZDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbnZlcnQgRmVhdHVyZUNvbGxlY3Rpb24gaW50byBzZXBhcmF0ZSBmZWF0dXJlcycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1leHBhbmRcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgdmFyIGZjID0gZGMuc2VsZWN0aW9uLmxpc3RbMF07XG4gICAgICAgICAgaWYgKGZjLnJhdy50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAkKGZjLnJhdy5mZWF0dXJlcykuZWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZmMubmFtZSArIGNvdW50ICsgJ18nICsgZmMucmF3LmZlYXR1cmVzW2ZdLmdlb21ldHJ5LnR5cGUsIGZjLnJhdy5mZWF0dXJlc1tmXV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1RoYXQgbmVlZHMgdG8gYmUgYSBmZWF0dXJlIGNvbGxlY3Rpb24hJyk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0xheWVyIGlzIG5vdCBhIEZlYXR1cmVDb2xsZWN0aW9uLicpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnUGxlYXNlIHNlbGVjdCBhIHNpbmdsZSBsYXllciEnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb21iaW5lOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29tYmluZXMgc2VsZWN0ZWQgZmVhdHVyZXMgaW50byBhIHNpbmdsZSBGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jb21wcmVzc1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmYyA9IHtcbiAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgICAgIGZlYXR1cmVzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0W2ZdLnJhdy50eXBlICE9PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAgIGZjLmZlYXR1cmVzLnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbZl0ucmF3KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsIGRjLnNlbGVjdGlvbi5saXN0W2ZdLm5hbWUgKyAnIHdhcyBub3QgYWRkZWQgYmVjYXVzZSBpdCBpcyBhbHJlYWR5IGEgRmVhdHVyZUNvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgWyduZXdfRmVhdHVyZUNvbGxlY3Rpb24nLCBmY10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBsYXllcnMgc2VsZWN0ZWQhJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gJ3ZpZXctYXR0cmlidXRlcyc6IHtcbiAgICAvLyAgIG1pbkZlYXR1cmVzOiAxLFxuICAgIC8vICAgZGVzY3JpcHRpb246ICdTaG93IGF0dHJpYnV0ZSB0YWJsZScsXG4gICAgLy8gICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10aC1saXN0XCI+PC9pPicsXG4gICAgLy8gICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgZGMuYXR0ci5yZW5kZXIoZGMuc2VsZWN0aW9uLmxpc3RbMF0pO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG5cbiAgICAnYnJlYWszJzogeyB0eXBlOiAnYnJlYWsnIH0sXG5cbiAgICByZW5hbWU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdSZW5hbWUgbGF5ZXInLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnTmFtZScsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ3JlbmFtZSddKTsgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdQbGVhc2Ugc2VsZWN0IDxzdHJvbmc+b25lIGxheWVyPC9zdHJvbmc+LicpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG5hbWUsIHBhcmFtZXRlcnMpO1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW5hbWUnLCBbZGMuc2VsZWN0aW9uLmxpc3RbMF0sIHBhcmFtZXRlcnNbMF1dKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVtb3ZlIHNlbGVjdGVkIGxheWVycycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaC1vXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2codGhpcy5zdGFtcCk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlJywgW3RoaXMuc3RhbXBdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBpbmZvOiB7XG4gICAgICB0eXBlOiAnaW5mbycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0xlYXJuIG1vcmUgYWJvdXQgZHJvcGNob3AnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtaW5mb1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvYWJvdXQuaHRtbCc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuZ2VvID0ge1xuICAgIGFsb25nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGxpbmUgYW5kIHJldHVybnMgYSBwb2ludCBhdCBhIHNwZWNpZmllZCBkaXN0YW5jZSBhbG9uZyB0aGUgbGluZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2Rpc3RhbmNlIGFsb25nIHRoZSBsaW5lJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXRzJyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdraWxvbWV0ZXJzJywgJ3JhZGlhbnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2Fsb25nJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5hbG9uZy5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJlemllcjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBsaW5lIGFuZCByZXR1cm5zIGEgY3VydmVkIHZlcnNpb24gYnkgYXBwbHlpbmcgYSBCZXppZXIgc3BsaW5lIGFsZ29yaXRobS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Jlc29sdXRpb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonVGltZSBpbiBtaWxsaXNlY29uZHMgYmV0d2VlbiBwb2ludHMnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwMDAwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnc2hhcnBuZXNzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2EgbWVhc3VyZSBvZiBob3cgY3VydnkgdGhlIHBhdGggc2hvdWxkIGJlIGJldHdlZW4gc3BsaW5lcycsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogIDAuODVcblxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnYmV6aWVyJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5iZXppZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBidWZmZXI6IHtcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ2FsY3VsYXRlcyBhIGJ1ZmZlciBmb3IgaW5wdXQgZmVhdHVyZXMgZm9yIGEgZ2l2ZW4gcmFkaXVzLiBVbml0cyBzdXBwb3J0ZWQgYXJlIG1pbGVzLCBraWxvbWV0ZXJzLCBhbmQgZGVncmVlcy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Rpc3RhbmNlIHRvIGRyYXcgdGhlIGJ1ZmZlci4nLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdCcsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAnZmVldCcsICdraWxvbWV0ZXJzJywgJ21ldGVycycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmJ1ZmZlci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjZW50ZXI6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHBvaW50IGluIHRoZSBjZW50ZXIgb2YgdGhlIGZlYXR1cmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZWN1cnNpdmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRoZSBvcGVyYXRpb24gb24gZWFjaCBmZWF0dXJlIGluIHRoZSBjb2xsZWN0aW9uIG9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4nLFxuICAgICAgICAgIHR5cGU6ICdyZWN1cnNpdmUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAvLyBpZiBydW5uaW5nIHRoZSBvcGVyYXRpb24gcmVjdXJzaXZlbHkgXCJ0cnVlXCJcbiAgICAgICAgaWYgKHBhcmFtc1sxXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdjZW50ZXInLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuY2VudGVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2VudHJvaWQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHBvaW50IGluIHRoZSBjZW50cm9pZCBvZiB0aGUgZmVhdHVyZXMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZWN1cnNpdmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRoZSBvcGVyYXRpb24gb24gZWFjaCBmZWF0dXJlIGluIHRoZSBjb2xsZWN0aW9uIG9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4nLFxuICAgICAgICAgIHR5cGU6ICdyZWN1cnNpdmUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAvLyBpZiBydW5uaW5nIHRoZSBvcGVyYXRpb24gcmVjdXJzaXZlbHkgXCJ0cnVlXCJcbiAgICAgICAgaWYgKHBhcmFtc1sxXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdjZW50cm9pZCcsIHBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5jZW50cm9pZC5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGRlc3RpbmF0aW9uOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2ludD4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBQb2ludCBhbmQgY2FsY3VsYXRlcyB0aGUgbG9jYXRpb24gb2YgYSBkZXN0aW5hdGlvbiBwb2ludCBnaXZlbiBhIGRpc3RhbmNlIGluIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzOyBhbmQgYmVhcmluZyBpbiBkZWdyZWVzLiBUaGlzIHVzZXMgdGhlIEhhdmVyc2luZSBmb3JtdWxhIHRvIGFjY291bnQgZm9yIGdsb2JhbCBjdXJ2YXR1cmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidkaXN0YW5jZSBmcm9tIHRoZSBzdGFydGluZyBwb2ludCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdiZWFyaW5nJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J3JhbmdpbmcgZnJvbSAtMTgwIHRvIDE4MCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogIDBcblxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXRzJyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdraWxvbWV0ZXJzJywgJ3JhZGlhbnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2Rlc3RpbmF0aW9uJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5kZXN0aW5hdGlvbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVudmVsb3BlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXSAvLyBUT0RPOiBtYWtlIHRoaXMgdGFrZSBmZWF0dXJlcyBhbmQgcnVuIGFjcm9zcyBmdWxsIHNlbGVjdGlvblxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYW55IG51bWJlciBvZiBmZWF0dXJlcyBhbmQgcmV0dXJucyBhIHJlY3Rhbmd1bGFyIFBvbHlnb24gdGhhdCBlbmNvbXBhc3NlcyBhbGwgdmVydGljZXMuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5lbnZlbG9wZS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBsb2RlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgZmVhdHVyZSBvciBzZXQgb2YgZmVhdHVyZXMgYW5kIHJldHVybnMgYWxsIHBvc2l0aW9ucyBhcyBwb2ludHMuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5leHBsb2RlLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIG1pZHBvaW50OiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2ludD4nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgdHdvIHBvaW50cyBhbmQgcmV0dXJucyBhIHBvaW50IG1pZHdheSBiZXR3ZWVuIHRoZW0uJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5taWRwb2ludC5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBzaW1wbGlmeToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZTxQb2x5Z29uPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIExpbmVTdHJpbmcgb3IgUG9seWdvbiBhbmQgcmV0dXJucyBhIHNpbXBsaWZpZWQgdmVyc2lvbi4gSW50ZXJuYWxseSB1c2VzIHNpbXBsaWZ5LWpzIHRvIHBlcmZvcm0gc2ltcGxpZmljYXRpb24uJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndG9sZXJhbmNlJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uIDonc2ltcGxpZmljYXRpb24gdG9sZXJhbmNlJyxcbiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgZGVmYXVsdDogMC4xXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnaGlnaCBxdWFsaXR5JyxcbiAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ3doZXRoZXIgb3Igbm90IHRvIHNwZW5kIG1vcmUgdGltZSB0byBjcmVhdGUgYSBoaWdoZXItcXVhbGl0eSBzaW1wbGlmaWNhdGlvbiB3aXRoIGEgZGlmZmVyZW50IGFsZ29yaXRobScsXG4gICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdzaW1wbGlmeScsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuc2ltcGxpZnkuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0aW46IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUcmlhbmd1bGF0ZWQgaXJyZWd1bGFyIG5ldHdvcmssIGludGVycG9sYXRpb24gbWV0aG9kJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi50aW4uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdW5pb246IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvbHlnb24+J11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIHR3byBwb2x5Z29ucyBhbmQgcmV0dXJucyBhIGNvbWJpbmVkIHBvbHlnb24uIElmIHRoZSBpbnB1dCBwb2x5Z29ucyBhcmUgbm90IGNvbnRpZ3VvdXMsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIE11bHRpUG9seWdvbiBmZWF0dXJlLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYudW5pb24uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgd2l0aGluOiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBzZXQgb2YgcG9pbnRzIGFuZCBhIHNldCBvZiBwb2x5Z29ucyBhbmQgcmV0dXJucyB0aGUgcG9pbnRzIHRoYXQgZmFsbCB3aXRoaW4gdGhlIHBvbHlnb25zLiBGaXJzdCBpbnB1dCBzaG91bGQgYmUgdGhlIHBvaW50cy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ1BvaW50cyB0byBjbGlwJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1NlbGVjdCB0aGUgbGF5ZXIgdGhhdCByZXByZXNlbnRzIHRoZSBwb2ludHMgeW91IHdhbnQgdG8gY2xpcC4gVGhpcyBhc3N1bWVzIHRoZSBvdGhlciBsYXllciBpcyB5b3VyIGNsaXBwaW5nIHBvbHlnb24uJyxcbiAgICAgICAgICB0eXBlOiAnc3dpdGNoJ1xuICAgICAgICAgIC8vIGRlZmF1bHQ6IGRjLnNlbGVjdGlvbi5saXN0WzBdXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocGFyYW1zKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYud2l0aGluLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIFxuICBkYy5zZWxlY3Rpb24gPSB7fTtcbiAgZGMuc2VsZWN0aW9uLmxpc3QgPSBbXTtcblxuICBkYy5zZWxlY3Rpb24uaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdsYXllcjpzZWxlY3RlZCcsIGRjLnNlbGVjdGlvbi5hZGQpO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMuc2VsZWN0aW9uLnJlbW92ZSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBfbGF5ZXJSZW1vdmVkKTtcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uYWRkID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3QucHVzaChsYXllcik7XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLnJlbW92ZSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIHZhciBpbmRleCA9IG51bGw7XG4gICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXAgPT09IGxheWVyLnN0YW1wKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdC5zcGxpY2UoaW5kZXgsIDEpOyAvLyByZW1vdmUgb3V0c2lkZSBvZiB0aGUgbG9vcCBzbyB3ZSBkb24ndCBicmVhayBvdXIgY291bnRcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcubGF5ZXItbmFtZS5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICQoJy5vcGVyYXRpb24tZ2VvJykuYWRkQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICQoJy5vcGVyYXRpb24tZ2VvJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdCA9IFtdO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9sYXllclJlbW92ZWQoZXZlbnQsIHN0YW1wKSB7XG4gICAgZGMuc2VsZWN0aW9uLnJlbW92ZSh7fSwge3N0YW1wOiBzdGFtcH0pO1xuICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBcbiAgZGMudXRpbCA9IHt9O1xuICBcbiAgZGMudXRpbC5yZW1vdmVGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL1xcLlteLy5dKyQvLCBcIlwiKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwucmVtb3ZlV2hpdGVTcGFjZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgY29uc29sZS5sb2coc3RyaW5nKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwuY29uY2F0ID0gZnVuY3Rpb24oYXJyYXksIHNlcGFyYXRvciwgcHJlZml4KSB7XG4gICAgdmFyIHN0cmluZyA9ICcnO1xuICAgICQoYXJyYXkpLmVhY2goZnVuY3Rpb24oYSkge1xuICAgICAgc3RyaW5nICs9IHNlcGFyYXRvciArIGFycmF5W2FdO1xuICAgIH0pO1xuICAgIHN0cmluZyA9IHByZWZpeCArIHN0cmluZztcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwueGhyID0gZnVuY3Rpb24odXJsLCBjYWxsYmFjaykge1xuICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKHRydWUpO1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICB4aHIub25sb2FkID0gY2FsbGJhY2suYmluZCh0aGlzLCB4aHIpO1xuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oIHhociApIHtcbiAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoeGhyKTtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVW5hYmxlIHRvIGFjY2VzcyAnICsgdXJsLCAyNTAwKTtcbiAgICB9O1xuICAgIHhoci5zZW5kKCk7XG4gIH07XG5cbiAgZGMudXRpbC5yZWFkRmlsZSA9IGZ1bmN0aW9uKGZpbGUpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAvLyBpZiBhIHppcGZpbGUsIGFzc3VtZSBzaGFwZWZpbGUgZm9yIG5vd1xuICAgIGlmIChmaWxlLm5hbWUuaW5kZXhPZignLnppcCcpID4gLTEgfHwgZmlsZS5uYW1lLmluZGV4T2YoJy5zaHAnKSA+IC0xKSB7XG4gICAgICBjb25zb2xlLmxvZyhmaWxlKTtcbiAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZyhyZWFkZXIpO1xuICAgICAgICBzaHAocmVhZGVyLnJlc3VsdCkudGhlbihmb3J3YXJkVG9HZW9Kc29uSW8pO1xuICAgICAgfTtcbiAgICB9IGVsc2UgeyBcbiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUsICdVVEYtOCcpO1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2ZpbGUubmFtZSwgSlNPTi5wYXJzZShyZWFkZXIucmVzdWx0KV0pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb3J3YXJkVG9HZW9Kc29uSW8oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICB2YXIgdXJsID0gXCJodHRwOi8vZ2VvanNvbi5pby8jZGF0YT1kYXRhOmFwcGxpY2F0aW9uL2pzb24sXCIgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgd2luZG93LmxvY2F0aW9uID0gdXJsO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmpzb25Gcm9tVXJsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKTtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgcXVlcnkuc3BsaXQoXCImXCIpLmZvckVhY2goZnVuY3Rpb24ocGFydCkge1xuICAgICAgdmFyIGl0ZW0gPSBwYXJ0LnNwbGl0KFwiPVwiKTtcbiAgICAgIGlmICghcmVzdWx0W2l0ZW1bMF1dKSB7XG4gICAgICAgIHJlc3VsdFtpdGVtWzBdXSA9IFtdO1xuICAgICAgfVxuICAgICAgcmVzdWx0W2l0ZW1bMF1dLnB1c2goZGVjb2RlVVJJQ29tcG9uZW50KGl0ZW1bMV0pKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIGRjLnV0aWwuZXhlY3V0ZVVybFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkYXRhID0gZGMudXRpbC5qc29uRnJvbVVybCgpO1xuXG4gICAgLy8gbG9hZCBnaXN0XG4gICAgaWYgKGRhdGEuZ2lzdCAmJiBkYXRhLmdpc3QubGVuZ3RoKSB7XG4gICAgICAkKGRhdGEuZ2lzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLWdpc3QnXS5nZXQoe30sICdsb2FkLWdpc3QnLCBbZGF0YS5naXN0W2ldXSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBsb2FkXG4gICAgaWYgKGRhdGEudXJsICYmIGRhdGEudXJsLmxlbmd0aCkge1xuICAgICAgJChkYXRhLnVybCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLXVybCddLmdldCh7fSwgJ2xvYWQtdXJsJywgW2RhdGEudXJsW2ldXSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5nZXRGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgICByZXR1cm4gZmlsZW5hbWUuc3Vic3RyKGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykrMSk7XG4gIH07XG5cbiAgZGMudXRpbC5nZXRCQm94ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJvdW5kcyA9IGRjLm1hcC5tLmdldEJvdW5kcygpLFxuICAgICAgICAgICAgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCksXG4gICAgICAgICAgICBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTtcbiAgICAvLyB3ZSBzaG91bGQgcHJvYmFibHkgY2hlY2sgdGhlIHNpemUgaGVyZT9cbiAgICAvLyBub2RlKDU3LjcsMTEuOSw1Ny44LDEyLjApXG4gICAgcmV0dXJuIHN3LmxhdCsnLCcrc3cubG5nKycsJytuZS5sYXQrJywnK25lLmxuZztcbiAgfTtcblxuICBkYy51dGlsLnVuY29sbGVjdCA9IGZ1bmN0aW9uKGZjKSB7XG4gICAgcmV0dXJuIGZjLmZlYXR1cmVzWzBdO1xuICB9O1xuXG4gIGRjLnV0aWwuZXhlY3V0ZUZDID0gZnVuY3Rpb24oZmMsIG9wZXJhdGlvbiwgcGFyYW1zKSB7XG5cbiAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuICAgIHZhciBuZXdGQyA9IHt9O1xuICAgIG5ld0ZDLnR5cGUgPSAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIG5ld0ZDLmZlYXR1cmVzID0gW107XG5cbiAgICBmb3IgKHZhciBmID0gMDsgZiA8IGZjLmZlYXR1cmVzLmxlbmd0aDsgZisrKSB7XG4gICAgICBuZXdQYXJhbXNbMF0gPSBmYy5mZWF0dXJlc1tmXTtcbiAgICAgIHZhciBmZWF0dXJlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmVhdHVyZSA9IHR1cmZbb3BlcmF0aW9uXS5hcHBseShudWxsLCBuZXdQYXJhbXMpO1xuICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXMgPSBmYy5mZWF0dXJlc1tmXS5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCBlcnIpO1xuICAgICAgfVxuICAgICAgbmV3RkMuZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3RkM7XG4gICAgXG4gIH07XG5cbiAgZGMudXRpbC5sb2FkZXIgPSBmdW5jdGlvbih5ZXMpIHtcbiAgICB2YXIgbG9hZGVyID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnZHJvcGNob3AtbG9hZGVyJyk7XG5cbiAgICBpZiAoeWVzKSB7XG4gICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRpbmcnKTtcbiAgICAgICQoJ2JvZHknKS5hcHBlbmQobG9hZGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdkcm9wY2hvcC1sb2FkaW5nJyk7XG4gICAgICAkKCcuZHJvcGNob3AtbG9hZGVyJykuYWRkQ2xhc3MoJ2xvYWRlci1jb21wbGV0ZScpLmZhZGVPdXQoMjAwMCwgZnVuY3Rpb24oKXtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLndlbGNvbWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgd2VsY29tZSA9ICdcXG5XZWxjb21lIHRvIERyb3BjaG9wIVxcbic7XG4gICAgICAgIHdlbGNvbWUgKz0gJ09uY2UgeW91IGRyb3AsIHRoZSBjaG9wIGRvblxcJ3Qgc3RvcC5cXG5cXG4nO1xuICAgICAgICB3ZWxjb21lICs9ICdUaGlzIHByb2plY3QgaXMgYnJvdWdodCB0byB5b3UgYnkgdGhlIGdyZWF0IHBlb3BsZSBvZiBDVUdPUywgdGhlIENhc2NhZGlhbiBjaGFwdGVyIG9mIE9TR2VvLiBJZiB5b3UgYXJlIGV2ZXIgaW4gU2VhdHRsZSwgaGl0IHVzIHVwXFxuaGVsbG9AY3Vnb3Mub3JnXFxuXFxuJztcbiAgICAgICAgd2VsY29tZSArPSAnWW91IGNhbiBsZWFybiBtb3JlIGFib3V0IHRoaXMgcHJvamVjdCBhdCBkcm9wY2hvcC5pby9hYm91dC4nXG4gICAgY29uc29sZS5sb2cod2VsY29tZSk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
