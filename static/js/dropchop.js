var dropchop=function(e){return e=e||{},e.version="0.1.1",e.init=function(t){t||e.util.error("No options provided in dropchop.init()"),e.options=t,$(t.id).length||e.util.error("Element with options.id does not exist."),e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.ops.init(),e.form.init(),location.search.length&&e.util.executeUrlParams()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),l=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),s=$("<button>").addClass("layer-action layer-remove").html('<i class="fa fa-times"></i>'),p=$("<button>").addClass("layer-action layer-duplicate").html('<i class="fa fa-files-o"></i>');p.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:duplicate",[$(this).parent().attr("data-stamp")]),!1}),s.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:remove",[$(this).parent().attr("data-stamp")]),e.util.updateSearch(),e.selection.clear(),!1}),l.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),l=i.parent().attr("data-stamp");t===r&&(a=e),t===l&&(o=e)}),a>o?$(".layer-element").each(function(t){t>=o&&a>=t&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){o>t&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),n.on("dblclick",function(t){e.ops.file.extent.execute()}),o.append(n),o.append(l),o.append(i),o.append(s),o.append(p),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show()},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.toggleAll=function(t){function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}if($(this).find("input").prop("checked"))for(var r in e.layers.list)a(e.layers.list[r].stamp,!0);else for(var o in e.layers.list)a(e.layers.list[o].stamp,!1)},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r,o,n){"Topology"===r.type&&(r=topojson.client.feature(r,r.objects[Object.keys(r.objects)[0]]));var i=e.layers.makeLayer(a,r);e.layers.list[i.stamp]=i,o&&n&&(e.layers.list[i.stamp].ltype=o,e.layers.list[i.stamp].url=n),e.notify("success","<strong>"+i.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[i]),o&&n&&e.util.updateSearch()},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer),$(e.map.m).on("locationfound",function(t){var a=t.originalEvent;e.map.m.fitBounds(a.bounds);var r={type:"Feature",geometry:{type:"Point",coordinates:[a.latlng.lng,a.latlng.lat]},properties:{title:"There You Are","marker-color":"#207178","marker-symbol":"heart"}};$(e).trigger("file:added",["your location",r])}),$(e.map.m).on("locationerror",function(){e.notify("error","There was a problem finding your location.",3e3)})}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);if("close"===r){var n=$("<button>").addClass("notification-close").prop("type","button").html('<i class="fa fa-times"></i>');n.on("click",function(e){$(this).parent().remove()}),$(o).append(n),$(e.$elem).append(o)}else $(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}function r(){var e=$(".operation-geo").sort(function(e,t){return $(t).data("operation")<$(e).data("operation")?1:-1});e.filter(function(e,t){return $(t).prop("disabled")?void 0:t}).appendTo(".operations-geo"),e.filter(function(e,t){return $(t).prop("disabled")?t:void 0}).appendTo(".operations-geo"),$(".operations-geo").scrollTop(0)}return e=e||{},e.ops=e.ops||{},e.ops.init=function(){function r(t){var r=$("<button>").addClass("menu-action").html(e.ops.file[t].icon||"!").attr("data-operation",t).attr("data-tooltip",e.ops.file[t].description);return"info"===e.ops.file[t].type&&r.addClass("dropchop-info"),r.on("click",a),r}var o=$("<div>").addClass("operations-geo");e.$elem.append(o);for(var n in e.ops.geo){var i=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+n+"</h4><p>"+e.ops.geo[n].description+"</p>").prop("disabled",!0).attr("data-operation",n);i.on("click",t),o.append(i)}$(e).on("layer:selected",e.ops.geoCheck),$(e).on("layer:unselected",e.ops.geoCheck),$(e).on("operation:geo",e.ops.geoExecute),$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback),e.ops.setup=[{name:"import",icon:'<i class="fa fa-plus"></i>',actions:["upload","load-url","load-gist","load-overpass","location"]},{name:"Save",icon:'<i class="fa fa-floppy-o"></i>',actions:["save-geojson","save-topojson","save-shapefile"]},{name:"Geo Actions",icon:'<i class="fa fa-wrench"></i>',actions:["extent","expand","combine","rename","remove"]},"info"];for(var l=$("<div>").addClass("dropchop-menu-left"),s=e.ops.setup,p=0;p<s.length;p++){var c=s[p];if("object"!=typeof s[p])if("break"===e.ops.file[c].type){var u=$("<div>").addClass("menu-action-break");l.append(u)}else l.append(r(c));else{var d=$("<div>").addClass("menu-action menu-collapse").html(s[p].icon);"import"===s[p].name&&d.addClass("menu-import");for(var f=$("<div>").addClass("menu-collapse-inner"),m=0;m<s[p].actions.length;m++){var y=e.ops.setup[p].actions[m];f.append(r(y))}d.append(f),l.append(d)}}e.$elem.append(l)},e.ops.geoExecute=function(t,a,r){var o=e.ops.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.ops.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){-1===$.inArray("switch-"+e.selection.list[t].stamp,a)?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.ops.geoCheck=function(t,a){function o(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function n(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var i in e.ops.geo){var l=e.ops.geo[i];if(e.selection.list.length>l.maxFeatures||e.selection.list.length<l.minFeatures)o(i);else for(var s=0;s<e.selection.list.length;s++){var p=e.selection.list[s];$.inArray(p.type,l.requirements.types)>-1||l.requirements.generalFeature===!0?n(i):o(i)}}r()},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r,"url",t.responseURL])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content),"gist",t.responseURL.split("/")[t.responseURL.split("/").length-1]])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide" target="_blank">the query language</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox();e.util.xhr("http://overpass-api.de/api/interpreter?[out:json];node["+r[0]+"]("+o+");out;",e.ops.file["load-overpass"].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r,{flatProperties:!0});r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},location:{description:"Add your location as a layer",icon:'<i class="fa fa-crosshairs"></i>',execute:function(){navigator.geolocation?e.map.m.locate():e.notify("error","Geolocation is not available on this browser.",4e3)}},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-topojson":{minFeatures:1,description:"Save as TopoJSON",icon:'<i class="fa fa-object-ungroup"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(topojson.topology({collection:e.selection.list[t].raw},{"property-transform":function(e){return e.properties}})),r="dropchop_"+e.selection.list[t].name+".topojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},rename:{minFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.readFile=function(t){var a=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(a.readAsArrayBuffer(t),e.util.loader(!0),a.onloadend=function(t){shp(a.result)["catch"](function(e){console.log("Problematic projection - ",e)}).then(function(t){return e.util.loader(!1),t?void $(e).trigger("file:added",[t.fileName,t]):e.notify("error","Invalid projection or shapefile.",2500)})}):(a.readAsText(t,"UTF-8"),a.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(a.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1).split(/(&?gist=|&?url=)/g).filter(function(e){return e.length>0}),t={};return e.forEach(function(a,r){if(0===r||r%2===0){var o=a.replace(/&|=/g,"");t[o]||(t[o]=[]),t[o].push(decodeURIComponent(e[r+1]))}}),t},e.util.updateSearch=function(){var t=[];Object.keys(e.layers.list).forEach(function(a){e.layers.list[a].ltype&&e.layers.list[a].url&&t.indexOf(e.layers.list[a].ltype+"="+e.layers.list[a].url)<0&&t.push(e.layers.list[a].ltype+"="+e.layers.list[a].url)});var a=t.length?"?"+t.join("&"):"/";a!==window.location.search&&window.history.pushState(null,null,a)},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.uncollect=function(e){return e.features[0]},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var l;try{l=turf[a].apply(null,o),l.properties=t.features[i].properties||{}}catch(s){e.notify("error",s)}n.features.push(l)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){
$(this).remove()}))},e.util.error=function(e){var t=new Error(e);throw t},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibm90aWZ5LmRyb3BjaG9wLmpzIiwib3BzLmRyb3BjaG9wLmpzIiwib3BzLmZpbGUuZHJvcGNob3AuanMiLCJvcHMuZ2VvLmRyb3BjaG9wLmpzIiwic2VsZWN0aW9uLmRyb3BjaG9wLmpzIiwidXRpbC5kcm9wY2hvcC5qcyJdLCJuYW1lcyI6WyJkcm9wY2hvcCIsImRjIiwidmVyc2lvbiIsImluaXQiLCJvcHRzIiwidXRpbCIsImVycm9yIiwib3B0aW9ucyIsIiQiLCJpZCIsImxlbmd0aCIsIiRlbGVtIiwibGF5ZXJzIiwicHJlcGFyZSIsIm1hcCIsInNlbGVjdGlvbiIsImxheWVybGlzdCIsImRyb3B6b25lIiwib3BzIiwiZm9ybSIsImxvY2F0aW9uIiwic2VhcmNoIiwiZXhlY3V0ZVVybFBhcmFtcyIsImJvb20iLCJjb25zb2xlIiwibG9nIiwiX2V2ZW50cyIsIiRjb250YWluZXIiLCJvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJ0aGlzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImZpbGVzIiwib3JpZ2luYWxFdmVudCIsImRhdGFUcmFuc2ZlciIsImVhY2giLCJpIiwicmVhZEZpbGUiLCJnZW8iLCJmaWxlIiwib3BlcmF0aW9uIiwiY3JlYXRlIiwibmFtZSIsImluZm8iLCJ0cmlnZ2VyIiwicmVtb3ZlIiwiJGh0bWwiLCJhdHRyIiwidGV4dCIsImFwcGVuZFRvIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwicCIsImNyZWF0ZVBhcmFtIiwiJHN1Ym1pdCIsIiRjYW5jZWwiLCJkYXRhIiwic2VyaWFsaXplQXJyYXkiLCJwdXNoIiwidmFsdWUiLCJhcHBlbmQiLCJwYXJhbSIsIiRpbnB1dCIsIiRsYWJlbCIsIiRmaWVsZCIsImlucHV0cyIsInR5cGUiLCJodG1sIiwibnVtYmVyIiwiJGkiLCJzZWxlY3QiLCIkb3B0IiwiY2hlY2tib3giLCJzd2l0Y2giLCJsaXN0IiwiJGxibCIsInZhbCIsInN0YW1wIiwicmVjdXJzaXZlIiwiJGxibDEiLCIkb3B0MSIsIiRsYmwyIiwiJG9wdDIiLCJsYXllclR5cGVJY29uIiwiaWNvbiIsImVsZW1zIiwidGFyZ2V0IiwiaGFzQ2xhc3MiLCJjbGVhciIsImxpSGVscGVyIiwidG9nZ2xlTGF5ZXJzIiwidG9nZ2xlQWxsIiwiYWRkTGF5ZXJMaXN0SXRlbSIsInJlbW92ZUxheWVyTGlzdEl0ZW0iLCJyZW5hbWUiLCJuZXdOYW1lIiwiZmluZCIsImxheWVyIiwibGF5ZXJsaXN0SXRlbSIsImxheWVyRGl2IiwiZGVsYXkiLCJxdWV1ZSIsIm5leHQiLCJsYXllclR5cGUiLCJwcm9wIiwiY2hlY2tlZCIsImR1cGxpY2F0ZSIsInBhcmVudCIsInVwZGF0ZVNlYXJjaCIsInNoaWZ0S2V5IiwidG9Db3VudCIsImZyb21Db3VudCIsInRvIiwiZnJvbSIsIl9sYXN0U2VsZWN0ZWQiLCJlIiwiY2hlY2siLCJ0b1N0YW1wIiwiZnJvbVN0YW1wIiwibCIsInNlbGVjdExheWVyIiwibWV0YUtleSIsInNlbGVjdFRvZ2dsZSIsImNsZWFyU2VsZWN0aW9uIiwiZXh0ZW50IiwiZXhlY3V0ZSIsImhpZGUiLCJzaG93IiwiJGl0ZW0iLCJseXIiLCJlbGVtVG9nZ2xlIiwiYm9vbCIsIm8iLCJmYWRlT3V0IiwiZ2V0VHlwZSIsImdqIiwiZ2VvbWV0cnkiLCJhZGQiLCJibG9iIiwibHR5cGUiLCJ1cmwiLCJ0b3BvanNvbiIsImNsaWVudCIsImZlYXR1cmUiLCJvYmplY3RzIiwiT2JqZWN0Iiwia2V5cyIsIm1ha2VMYXllciIsIm5vdGlmeSIsImVyciIsInJhdyIsImpzb24iLCJnZW9qc29uIiwiZmwiLCJMIiwibWFwYm94IiwiZmVhdHVyZUxheWVyIiwicmVtb3ZlRmlsZUV4dGVuc2lvbiIsImZlYXR1cmVsYXllciIsImRhdGVBZGRlZCIsIkRhdGUiLCJfbWFrZU1hcCIsInRva2VuIiwiYWNjZXNzVG9rZW4iLCJtIiwiem9vbUNvbnRyb2wiLCJ3b3JsZENvcHlKdW1wIiwic2V0VmlldyIsImNvbnRyb2wiLCJ6b29tIiwicG9zaXRpb24iLCJhZGRUbyIsImdlb2NvZGVyQ29udHJvbCIsImJhc2VMYXllcnMiLCJNYXBib3ggU3RyZWV0cyIsInRpbGVMYXllciIsIk1hcGJveCBPdXRkb29ycyIsIk1hcGJveCBMaWdodCIsIk1hcGJveCBEYXJrIiwiTWFwYm94IFNhdGVsbGl0ZSIsImNvbGxhcHNlZCIsImxheWVyZ3JvdXAiLCJhZGRMYXllciIsImhpZGVMYXllciIsInNob3dMYXllciIsImZpdEJvdW5kcyIsImJvdW5kcyIsImNvb3JkaW5hdGVzIiwibGF0bG5nIiwibG5nIiwibGF0IiwicHJvcGVydGllcyIsInRpdGxlIiwibWFya2VyLWNvbG9yIiwibWFya2VyLXN5bWJvbCIsInJlbW92ZUxheWVyIiwiY291bnQiLCJlYWNoTGF5ZXIiLCJjb250ZW50IiwiYmluZFBvcHVwIiwicG9wdXAiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImF1dG9QYW5QYWRkaW5nIiwiY2xhc3NOYW1lIiwic2V0Q29udGVudCIsInRpbWUiLCJub3RlIiwiJGNsb3NlIiwic2V0VGltZW91dCIsIl9nZW9CdG5DbGljayIsIl9maWxlQnRuQ2xpY2siLCJfc29ydEdlbyIsImFscGhhIiwic29ydCIsImEiLCJiIiwiZmlsdGVyIiwiZCIsInNjcm9sbFRvcCIsImJ1aWxkTWVudUJ1dHRvbiIsImFjdGlvbiIsImJ1dHRvbiIsImdlb0NvbnRhaW5lciIsImdlb09wIiwiZ2VvQnRuIiwiZ2VvQ2hlY2siLCJnZW9FeGVjdXRlIiwiZ2V0IiwiY2FsbGJhY2siLCJzZXR1cCIsImFjdGlvbnMiLCJsZWZ0TWVudSIsIiRicmVha1NwYWNlIiwiY29sbGFwc2VCdG4iLCJjb2xsYXBzZUlubmVyIiwiYWN0biIsInByZXAiLCJwcmVwYXJlVHVyZlBhcmFtcyIsInJlc3VsdCIsInBhcmFtcyIsImdlb21zIiwibmFtZUFycmF5IiwiaW5BcnJheSIsInVuc2hpZnQiLCJtZXJnZSIsImNvbmNhdCIsInR1cm5JdE9mZiIsIm9wIiwiYnRuIiwidHVybkl0T24iLCJtYXhGZWF0dXJlcyIsIm1pbkZlYXR1cmVzIiwieCIsInNlbCIsInJlcXVpcmVtZW50cyIsInR5cGVzIiwiZ2VuZXJhbEZlYXR1cmUiLCJ1cGxvYWQiLCIkYmxpbmRJbnB1dCIsImNzcyIsImNsaWNrIiwibG9hZC11cmwiLCJkZWZhdWx0IiwieGhyIiwieGhyRXZlbnQiLCJsb2FkZXIiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZVVSTCIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwibG9hZC1naXN0IiwiZ2lzdCIsInNwbGl0IiwiZiIsImZpbGVuYW1lIiwibG9hZC1vdmVycGFzcyIsIl90ZW1wIiwibGF5ZXJOYW1lIiwiYmJveCIsImdldEJCb3giLCJvc210b2dlb2pzb24iLCJmbGF0UHJvcGVydGllcyIsImVsZW1lbnRzIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJsb2NhdGUiLCJzYXZlLWdlb2pzb24iLCJjcmVhdGVzTGF5ZXIiLCJzdHJpbmdpZnkiLCJzYXZlQXMiLCJCbG9iIiwic2F2ZS10b3BvanNvbiIsInRvcG9sb2d5IiwiY29sbGVjdGlvbiIsInByb3BlcnR5LXRyYW5zZm9ybSIsInNhdmUtc2hhcGVmaWxlIiwiZm9sZGVyIiwicG9pbnQiLCJwb2x5Z29uIiwibGluZSIsInNocHdyaXRlIiwiZG93bmxvYWQiLCJleHRlbmQiLCJnZXRCb3VuZHMiLCJleHBhbmQiLCJmYyIsIkVycm9yIiwiZmVhdHVyZXMiLCJjb21iaW5lIiwid2luZG93IiwiYWxvbmciLCJleGVjdXRlRkMiLCJ0dXJmIiwiYXBwbHkiLCJiZXppZXIiLCJidWZmZXIiLCJjZW50ZXIiLCJjZW50cm9pZCIsImRlc3RpbmF0aW9uIiwiZW52ZWxvcGUiLCJleHBsb2RlIiwibWlkcG9pbnQiLCJzaW1wbGlmeSIsInRpbiIsInVuaW9uIiwid2l0aGluIiwiX2xheWVyUmVtb3ZlZCIsImluZGV4Iiwic3BsaWNlIiwic3RyaW5nIiwicmVwbGFjZSIsInJlbW92ZVdoaXRlU3BhY2UiLCJhcnJheSIsInNlcGFyYXRvciIsInByZWZpeCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ubG9hZCIsImJpbmQiLCJvbmVycm9yIiwic2VuZCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJpbmRleE9mIiwicmVhZEFzQXJyYXlCdWZmZXIiLCJvbmxvYWRlbmQiLCJzaHAiLCJ0aGVuIiwiZmlsZU5hbWUiLCJyZWFkQXNUZXh0IiwianNvbkZyb21VcmwiLCJxdWVyeSIsInN1YnN0ciIsImZvckVhY2giLCJwYXJ0Iiwia2V5IiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJnZXRGaWxlRXh0ZW5zaW9uIiwic3ciLCJnZXRTb3V0aFdlc3QiLCJuZSIsImdldE5vcnRoRWFzdCIsInVuY29sbGVjdCIsIm5ld1BhcmFtcyIsIm5ld0ZDIiwieWVzIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxVQUFBLFNBQUFDLEdBOENBLE1BN0NBQSxHQUFBQSxNQUNBQSxFQUFBQyxRQUFBLFFBQ0FELEVBQUFFLEtBQUEsU0FBQUMsR0FDQUEsR0FDQUgsRUFBQUksS0FBQUMsTUFBQSwwQ0FFQUwsRUFBQU0sUUFBQUgsRUFFQUksRUFBQUosRUFBQUssSUFBQUMsUUFDQVQsRUFBQUksS0FBQUMsTUFBQSwyQ0FFQUwsRUFBQVUsTUFBQUgsRUFBQUosRUFBQUssSUFHQVIsRUFBQVcsT0FBQUMsVUFHQVosRUFBQWEsSUFBQVgsT0FHQUYsRUFBQWMsVUFBQVosT0FHQUYsRUFBQWUsVUFBQWIsS0FBQSxhQUdBRixFQUFBZ0IsU0FBQVQsRUFBQSxTQUdBUCxFQUFBaUIsSUFBQWYsT0FHQUYsRUFBQWtCLEtBQUFoQixPQUdBaUIsU0FBQUMsT0FBQVgsUUFDQVQsRUFB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LGtCQUVBc1YsSUFDQS9XLEVBQUEsUUFBQXlCLFNBQUEsb0JBQ0F6QixFQUFBLFFBQUF1RCxPQUFBOE0sS0FFQXJRLEVBQUEsUUFBQTBCLFlBQUEsb0JBQ0ExQixFQUFBLG9CQUFBeUIsU0FBQSxtQkFBQXVHLFFBQUEsSUFBQTtBQUNBaEksRUFBQXdCLE1BQUFnQixhQUtBL0MsRUFBQUksS0FBQUMsTUFBQSxTQUFBa0osR0FDQSxHQUFBbEosR0FBQSxHQUFBbVQsT0FBQWpLLEVBQ0EsTUFBQWxKLElBR0FMLEdBR0FEIiwiZmlsZSI6ImRyb3BjaG9wLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIGRjID0gZGMgfHwge307XG4gIGRjLnZlcnNpb24gPSAnMC4xLjEnO1xuICBkYy5pbml0ID0gZnVuY3Rpb24ob3B0cykge1xuICAgIGlmKCFvcHRzKSB7XG4gICAgICBkYy51dGlsLmVycm9yKCdObyBvcHRpb25zIHByb3ZpZGVkIGluIGRyb3BjaG9wLmluaXQoKScpO1xuICAgIH1cbiAgICBkYy5vcHRpb25zID0gb3B0cztcblxuICAgIGlmKCEkKG9wdHMuaWQpLmxlbmd0aCkge1xuICAgICAgZGMudXRpbC5lcnJvcignRWxlbWVudCB3aXRoIG9wdGlvbnMuaWQgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgfVxuICAgIGRjLiRlbGVtID0gJChvcHRzLmlkKTtcblxuICAgIC8vIHNldHVwIGxheWVyc1xuICAgIGRjLmxheWVycy5wcmVwYXJlKCk7XG5cbiAgICAvLyBzZXR1cCBtYXBcbiAgICBkYy5tYXAuaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgc2VsZWN0aW9uXG4gICAgZGMuc2VsZWN0aW9uLmluaXQoKTtcblxuICAgIC8vIHNldHVwIGxheWVybGlzdFxuICAgIGRjLmxheWVybGlzdC5pbml0KCdsYXllcmxpc3QnKTtcblxuICAgIC8vIHNldHVwIGRyb3B6b25lXG4gICAgZGMuZHJvcHpvbmUoJCgnYm9keScpKTtcblxuICAgIC8vIHNldHVwIG9wZXJhdGlvbnNcbiAgICBkYy5vcHMuaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgZm9ybXNcbiAgICBkYy5mb3JtLmluaXQoKTtcblxuICAgIC8vIGdldCBVUkwgaW5mb3JtYXRpb24gaWYgaXQgZXhpc3RzXG4gICAgaWYobG9jYXRpb24uc2VhcmNoLmxlbmd0aCkge1xuICAgICAgZGMudXRpbC5leGVjdXRlVXJsUGFyYW1zKCk7XG4gICAgfVxuXG4gIH07XG5cbiAgZGMuYm9vbSA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdzaGFrYWxha2EnKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGRyb3B6b25lLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGFpbmVyIGVsZW1lbnQgKGxldHMgZG8gZG9jdW1lbnQuYm9keSlcbiAgICovXG4gIGRjLmRyb3B6b25lID0gZnVuY3Rpb24oJGNvbnRhaW5lcikge1xuICAgIF9ldmVudHMoJGNvbnRhaW5lcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gX2V2ZW50cygkY29udGFpbmVyKSB7XG4gICAgJGNvbnRhaW5lci5vbignZHJhZ292ZXInLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICB9KTtcblxuICAgICRjb250YWluZXIub24oJ2RyYWdsZWF2ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgIH0pO1xuXG4gICAgJGNvbnRhaW5lci5vbignZHJvcCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgICAgdmFyIGZpbGVzID0gZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgICAkKGZpbGVzKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMudXRpbC5yZWFkRmlsZShmaWxlc1tpXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmZvcm0gPSBkYy5mb3JtIHx8IHt9O1xuICBkYy5mb3JtLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignZm9ybTpnZW8nLCBkYy5mb3JtLmdlbyk7XG4gICAgJChkYykub24oJ2Zvcm06ZmlsZScsIGRjLmZvcm0uZmlsZSk7XG4gIH07XG5cbiAgZGMuZm9ybS5nZW8gPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uKSB7XG4gICAgZGMuZm9ybS5jcmVhdGUob3BlcmF0aW9uLCBkYy5vcHMuZ2VvW29wZXJhdGlvbl0sICdnZW8nKTtcbiAgfTtcblxuICBkYy5mb3JtLmZpbGUgPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uKSB7XG4gICAgZGMuZm9ybS5jcmVhdGUob3BlcmF0aW9uLCBkYy5vcHMuZmlsZVtvcGVyYXRpb25dLCAnZmlsZTonICsgb3BlcmF0aW9uKTtcbiAgfTtcblxuICBkYy5mb3JtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIGluZm8sIHRyaWdnZXIpIHtcbiAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgIHZhciAkaHRtbCA9ICQoJzxmb3JtPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtIGRyb3BjaG9wLWZvcm0tJyt0cmlnZ2VyKVxuICAgICAgLmF0dHIoJ2lkJywgJ2Ryb3BjaG9wLWZvcm0nKVxuICAgICAgLmF0dHIoJ2RhdGEnLCBuYW1lKTtcbiAgICB2YXIgJHRpdGxlID0gJCgnPGgyPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXRpdGxlJykudGV4dChuYW1lKS5hcHBlbmRUbygkaHRtbCk7XG4gICAgdmFyICRkZXNjID0gJCgnPHA+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tZGVzY3JpcHRpb24nKS50ZXh0KGluZm8uZGVzY3JpcHRpb24pLmFwcGVuZFRvKCRodG1sKTtcblxuICAgIC8vIGNyZWF0ZSBwYXJhbXNcbiAgICBpZihpbmZvLnBhcmFtZXRlcnMpIHtcbiAgICAgICQoaW5mby5wYXJhbWV0ZXJzKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcCA9IGRjLmZvcm0uY3JlYXRlUGFyYW0odGhpcyk7XG4gICAgICAgIHAuYXBwZW5kVG8oJGh0bWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIHN1Ym1pdCBidXR0b25cbiAgICB2YXIgJHN1Ym1pdCA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWJ0biBkcm9wY2hvcC1idG4tZ3JlZW4gZHJvcGNob3AtZm9ybS1zdWJtaXQnKS50ZXh0KCdFeGVjdXRlJykuYXR0cignZm9yJywgbmFtZSk7XG4gICAgdmFyICRjYW5jZWwgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdkcm9wY2hvcC1idG4gZHJvcGNob3AtYnRuLWNhbmNlbCBkcm9wY2hvcC1mb3JtLWNhbmNlbCcpLnRleHQoJ0NhbmNlbCcpLmF0dHIoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgJGNhbmNlbC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgJGh0bWwub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gZ2V0IHRoZSBwYXJhbWV0ZXJzIGZyb20gdGhlIGZvcm1cbiAgICAgIHZhciBwYXJhbWV0ZXJzID0gW107XG4gICAgICB2YXIgZGF0YSA9ICQodGhpcykuc2VyaWFsaXplQXJyYXkoKTtcbiAgICAgICQoZGF0YSkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHBhcmFtZXRlcnMucHVzaChkYXRhW2ldLnZhbHVlKTtcbiAgICAgIH0pO1xuICAgICAgJChkYykudHJpZ2dlcignb3BlcmF0aW9uOicgKyB0cmlnZ2VyLCBbbmFtZSwgcGFyYW1ldGVyc10pO1xuICAgICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICAkaHRtbC5hcHBlbmQoJHN1Ym1pdCk7XG4gICAgJGh0bWwuYXBwZW5kKCRjYW5jZWwpO1xuXG4gICAgZGMuJGVsZW0uYXBwZW5kKCRodG1sKTtcbiAgICAvLyBzdWJtaXQgYnV0dG9uIG5lZWRzIHRyaWdnZXIgb3BlcmF0aW9uOmdlbyB3aXRoIG9wIGFuZCBwYXJhbWV0ZXIgYXJyYXlcbiAgfTtcblxuICBkYy5mb3JtLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgICQoJyNkcm9wY2hvcC1mb3JtJykucmVtb3ZlKCk7XG4gIH07XG5cbiAgZGMuZm9ybS5jcmVhdGVQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgdmFyICRpbnB1dCA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyJyk7XG4gICAgdmFyICRsYWJlbCA9ICQoJzxsYWJlbD4nKS50ZXh0KHBhcmFtLm5hbWUpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlci1sYWJlbCcpO1xuICAgIHZhciAkZmllbGQgPSBkYy5mb3JtLmlucHV0c1twYXJhbS50eXBlXShwYXJhbSk7XG4gICAgJGZpZWxkLmFwcGVuZFRvKCRsYWJlbCk7XG4gICAgaWYocGFyYW0uZGVzY3JpcHRpb24ubGVuZ3RoKSB7XG4gICAgICAkKCc8cD4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXItZGVzY3JpcHRpb24nKS5odG1sKHBhcmFtLmRlc2NyaXB0aW9uKS5hcHBlbmRUbygkbGFiZWwpO1xuICAgIH1cbiAgICAkaW5wdXQuYXBwZW5kKCRsYWJlbCk7XG4gICAgcmV0dXJuICRpbnB1dDtcbiAgfTtcblxuICBkYy5mb3JtLmlucHV0cyA9IHtcbiAgICBudW1iZXI6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ251bWJlcicpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc2VsZWN0OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8c2VsZWN0PicpLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJChwLm9wdGlvbnMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgJG9wdCA9ICQoJzxvcHRpb24+JykudGV4dChwLm9wdGlvbnNbaV0pXG4gICAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5vcHRpb25zW2ldKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkaSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHRleHQ6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ3RleHQnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIGNoZWNrYm94OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICdjaGVja2JveCcpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc3dpdGNoOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpO1xuICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciAkbGJsID0gJCgnPGxhYmVsPicpXG4gICAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgICAgdmFyICRvcHQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgICAgLnZhbCgnc3dpdGNoLScgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcClcbiAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAgICRvcHQuYXBwZW5kVG8oJGxibCk7XG4gICAgICAgICRsYmwuYXBwZW5kKGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUpO1xuICAgICAgICAkbGJsLmFwcGVuZFRvKCRpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgcmVjdXJzaXZlOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpO1xuXG4gICAgICB2YXIgJGxibDEgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgIHZhciAkb3B0MSA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgIC52YWwoJ3RydWUnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkb3B0MS5hcHBlbmRUbygkbGJsMSk7XG4gICAgICAkbGJsMS5hcHBlbmQoJ0luZGl2aWR1YWwgZmVhdHVyZXMnKTtcblxuICAgICAgdmFyICRsYmwyID0gJCgnPGxhYmVsPicpXG4gICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICB2YXIgJG9wdDIgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAudmFsKCdmYWxzZScpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICRvcHQyLmFwcGVuZFRvKCRsYmwyKTtcbiAgICAgICRsYmwyLmFwcGVuZCgnRW50aXJlIGNvbGxlY3Rpb24nKTtcblxuICAgICAgJGxibDEuYXBwZW5kVG8oJGkpO1xuICAgICAgJGxibDIuYXBwZW5kVG8oJGkpO1xuXG4gICAgICByZXR1cm4gJGk7XG4gICAgfVxuICB9O1xuXG4gIC8vIGRjLmZvcm0uZ2V0VmFsdWVzID0gZnVuY3Rpb24oJGZvcm0pIHtcbiAgLy8gICB2YXIgdmFsdWVzID0gW107XG4gIC8vICAgY29uc29sZS5sb2coJGZvcm0pO1xuICAvLyAgIHJldHVybiB2YWx1ZXM7XG4gIC8vIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVybGlzdCA9IHt9O1xuICBkYy5sYXllcmxpc3QuZWxlbXMgPSB7fTtcblxuICBkYy5sYXllcmxpc3QuaW5pdCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0gPSAkKCc8b2w+JykuYWRkQ2xhc3MobmFtZSk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGRjLmxheWVybGlzdC4kZWxlbSk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAoJChldmVudC50YXJnZXQpLmhhc0NsYXNzKG5hbWUpKSB7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGxpSGVscGVyID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci1oZWxwJylcbiAgICAgIC5odG1sKCdXZWxjb21lIHRvIDxzdHJvbmc+ZHJvcGNob3A8L3N0cm9uZz4hIEhlcmUgeW91IGNhbiBkcmFnIGFuZCBkcm9wIGZpbGVzIGFuZCB0aGV5IHdpbGwgc2hvdyB1cCBpbiB0aGUgbGF5ZXIgbGlzdCBiZWxvdy48YnI+PGJyPlRvIHRoZSBsZWZ0IHlvdSBjYW4gdXBsb2FkIGFuZCBzYXZlIHlvdXIgZmlsZXMgb3IgPGEgaHJlZj1cIi8/Z2lzdD0wOTEyOWMyMGVjMDIwYjgzYmY4NVwiPmFkZCBleGFtcGxlIGRhdGE8L2E+IG9yIHRoZSA8YSBocmVmPVwiLz9naXN0PWQwNjZiNTcyZThhOGFkMmI2ZDE2XCI+VVMgU3RhdGVzPC9hPi48YnI+PGJyPlRvIHRoZSByaWdodCB5b3VcXCdsbCBub3RpY2Ugc29tZSBnZW9zcGF0aWFsIG9wZXJhdGlvbnMgdGhhdCBiZWNvbWUgYXZhaWxhYmxlIGJhc2VkIG9uIHNlbGVjdGluZyBzcGVjaWZpYyBsYXllcnMuJyApO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGlIZWxwZXIpO1xuXG4gICAgdmFyIHRvZ2dsZUxheWVycyA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItdG9nZ2xlQWxsJylcbiAgICAgIC5odG1sKCc8bGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNoZWNrZWQ+VG9nZ2xlIGFsbCBsYXllcnM8L2xhYmVsPicpO1xuICAgIHRvZ2dsZUxheWVycy5vbignY2hhbmdlJywgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZCh0b2dnbGVMYXllcnMpO1xuXG4gICAgJChkYykub24oJ2xheWVyOmFkZGVkJywgZGMubGF5ZXJsaXN0LmFkZExheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgZGMubGF5ZXJsaXN0LnJlbW92ZUxheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWVkJywgZGMubGF5ZXJsaXN0LnJlbmFtZSk7XG4gIH07XG5cbiAgZGMubGF5ZXJsaXN0LnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCwgbmV3TmFtZSkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5maW5kKCcubGF5ZXItbmFtZScpLnRleHQobmV3TmFtZSk7XG4gIH07XG5cbiAgLy8gdHJpZ2dlcmVkIGluIGRyb3BjaG9wLmpzXG4gIGRjLmxheWVybGlzdC5hZGRMYXllckxpc3RJdGVtID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGxheWVybGlzdEl0ZW0gPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLWVsZW1lbnQnKS5hdHRyKCdkYXRhLXN0YW1wJywgbGF5ZXIuc3RhbXApO1xuICAgIHZhciBsYXllckRpdiA9ICQoJzxkaXY+JylcbiAgICAgIC5hZGRDbGFzcygnbGF5ZXItbmFtZSBsYXllci1uZXcnKVxuICAgICAgLnRleHQobGF5ZXIubmFtZSlcbiAgICAgIC5kZWxheSgzMDAwKVxuICAgICAgLnF1ZXVlKGZ1bmN0aW9uKG5leHQpIHtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnbGF5ZXItbmV3Jyk7XG4gICAgICB9KTtcblxuXG4gICAgdmFyIGxheWVyVHlwZSA9ICQoJzxzcGFuPicpLmFkZENsYXNzKCdsYXllci10eXBlLWltYWdlIHNwcml0ZSBzcHJpdGUtbGF5ZXItJytsYXllclR5cGVJY29uKGxheWVyLnR5cGUpKTtcbiAgICB2YXIgY2hlY2tib3ggPSAkKCc8aW5wdXQ+JykuYWRkQ2xhc3MoJ2xheWVyLXRvZ2dsZScpLnByb3Aoeyd0eXBlJzogJ2NoZWNrYm94JywgJ2NoZWNrZWQnOiB0cnVlfSk7XG4gICAgdmFyIHJlbW92ZSA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2xheWVyLWFjdGlvbiBsYXllci1yZW1vdmUnKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCI+PC9pPicpO1xuICAgIHZhciBkdXBsaWNhdGUgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdsYXllci1hY3Rpb24gbGF5ZXItZHVwbGljYXRlJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1maWxlcy1vXCI+PC9pPicpO1xuXG4gICAgZHVwbGljYXRlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6ZHVwbGljYXRlJywgWyQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICByZW1vdmUub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW1vdmUnLCBbJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgIGRjLnV0aWwudXBkYXRlU2VhcmNoKCk7XG4gICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIGNoZWNrYm94Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xuICAgICAgICAvLyB0cmlnZ2VyIGxheWVyOnNob3dcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6c2hvdycsIFtsYXllcl0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6aGlkZScsIFtsYXllcl0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGF5ZXJEaXYub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgLy8gY2hlY2sgZm9yIGtleXMgYmVpbmcgaGVsZCBmb3Igc3BlY2lhbCBzZWxlY3Rpb25cbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAvLyBzZWxlY3QgYWxsIGxheWVyZXMgaW4gYmV0d2VlbiBwcmV2aW91cyB0YXJnZXQgYW5kIHRhcmdldFxuICAgICAgICAvLyBub3RlOiBkb24ndCB1bnNlbGVjdCBsYXllcnMgYWxyZWFkeSBzZWxlY3RlZCwganVzdCBhZGQgdG8gc2VsZWN0aW9uXG4gICAgICAgIHZhciB0b1NlbGVjdCA9IFtdO1xuICAgICAgICB2YXIgdG8gPSAkKHRoaXMpO1xuICAgICAgICB2YXIgZnJvbSA9IGRjLmxheWVybGlzdC5fbGFzdFNlbGVjdGVkO1xuICAgICAgICB2YXIgdG9Db3VudCwgZnJvbUNvdW50O1xuXG4gICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgdmFyIGNoZWNrID0gJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgdmFyIHRvU3RhbXAgPSB0by5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgdmFyIGZyb21TdGFtcCA9IGZyb20ucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIGlmIChjaGVjayA9PT0gdG9TdGFtcCkgdG9Db3VudCA9IGU7XG4gICAgICAgICAgaWYgKGNoZWNrID09PSBmcm9tU3RhbXApIGZyb21Db3VudCA9IGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0b0NvdW50ID4gZnJvbUNvdW50KSB7XG4gICAgICAgICAgLy8gbG9vcCB1cFxuICAgICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICBpZiAobCA+PSBmcm9tQ291bnQgJiYgbCA8PSB0b0NvdW50ICkge1xuICAgICAgICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIoJCh0aGlzKS5maW5kKCcubGF5ZXItbmFtZScpLCBkYy5sYXllcnMubGlzdFskKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICBpZiAobCA8IGZyb21Db3VudCAmJiBsID49IHRvQ291bnQgKSB7XG4gICAgICAgICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RMYXllcigkKHRoaXMpLmZpbmQoJy5sYXllci1uYW1lJyksIGRjLmxheWVycy5saXN0WyQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQubWV0YUtleSkge1xuICAgICAgICAvLyBhZGQvcmVtb3ZlIHNlbGVjdGVkIGxheWVyIHRvIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUoJCh0aGlzKSwgbGF5ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY2xlYXIgc2VsZWN0aW9uIGFuZCBzZWxlY3QgdGFyZ2V0XG4gICAgICAgIGRjLmxheWVybGlzdC5jbGVhclNlbGVjdGlvbigkKHRoaXMpLCBsYXllcik7XG4gICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUoJCh0aGlzKSwgbGF5ZXIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGF5ZXJEaXYub24oJ2RibGNsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGRjLm9wcy5maWxlLmV4dGVudC5leGVjdXRlKCk7XG4gICAgfSk7XG5cbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChsYXllckRpdik7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoY2hlY2tib3gpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGxheWVyVHlwZSk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQocmVtb3ZlKTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChkdXBsaWNhdGUpO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGF5ZXJsaXN0SXRlbSk7XG5cbiAgICBkYy5sYXllcmxpc3QuZWxlbXNbbGF5ZXIuc3RhbXBdID0gbGF5ZXJsaXN0SXRlbTtcblxuICAgIC8vIGhpZGUgaGVscGVyIHRleHRcbiAgICAkKCcubGF5ZXItaGVscCcpLmhpZGUoKTtcbiAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuc2hvdygpO1xuICB9O1xuXG4gIGRjLmxheWVybGlzdC5zZWxlY3RMYXllciA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBpZiAoISRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAkaXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNlbGVjdGVkJywgW2x5cl0pO1xuICAgIH1cbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBpZiAoJGl0ZW0uaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICRpdGVtLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6dW5zZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9XG4gICAgZGMubGF5ZXJsaXN0Ll9sYXN0U2VsZWN0ZWQgPSAkaXRlbTtcbiAgfTtcbiAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24oJGl0ZW0sIGx5cikge1xuICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGxheWVyVHlwZUljb24odHlwZSkge1xuICAgIHZhciBpY29uO1xuICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICBjYXNlICdGZWF0dXJlQ29sbGVjdGlvbic6XG4gICAgICAgIGljb24gPSAnZmVhdHVyZWNvbGxlY3Rpb24nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8UG9pbnQ+JzpcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlQb2ludD4nOlxuICAgICAgICBpY29uID0gJ3BvaW50JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPExpbmVTdHJpbmc+JzpcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPic6XG4gICAgICAgIGljb24gPSAnbGluZSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxQb2x5Z29uPic6XG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpUG9seWdvbj4nOlxuICAgICAgICBpY29uID0gJ3BvbHlnb24nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPic6XG4gICAgICAgIGljb24gPSAnZ2VvbSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWNvbiA9ICdkZWZhdWx0JztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBpY29uO1xuICB9XG5cbiAgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gdHVybiB0aGVtIG9uXG4gICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQnKS5wcm9wKCdjaGVja2VkJykpIHtcbiAgICAgIGZvciAodmFyIGkgaW4gZGMubGF5ZXJzLmxpc3QpIHtcbiAgICAgICAgZWxlbVRvZ2dsZShkYy5sYXllcnMubGlzdFtpXS5zdGFtcCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgLy8gdHVybiB0aGVtIG9mZlxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBvIGluIGRjLmxheWVycy5saXN0KSB7XG4gICAgICAgIGVsZW1Ub2dnbGUoZGMubGF5ZXJzLmxpc3Rbb10uc3RhbXAsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbGVtVG9nZ2xlKHN0YW1wLCBib29sKSB7XG4gICAgICAkKCcubGF5ZXItZWxlbWVudFtkYXRhLXN0YW1wPScrc3RhbXArJ10nKVxuICAgICAgICAuZmluZCgnLmxheWVyLXRvZ2dsZScpXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgYm9vbClcbiAgICAgICAgLnRyaWdnZXIoJ2NoYW5nZScpOyAvLyBzZXRzIG9mZiBhIGNoYWluIHJlYWN0aW9uXG4gICAgfVxuICB9O1xuXG4gIGRjLmxheWVybGlzdC5yZW1vdmVMYXllckxpc3RJdGVtID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgJCgnW2RhdGEtc3RhbXA9JytzdGFtcCsnXScpLmZhZGVPdXQoMzAwLCBmdW5jdGlvbigpIHtcbiAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICBkZWxldGUgZGMubGF5ZXJsaXN0LmVsZW1zW3N0YW1wXTtcblxuICAgICAgLy8gc2hvdyBoZWxwZXIgdGV4dCBpZiBubyBsYXllcnMgZXhpc3RcbiAgICAgIC8vIHRoaXMgaGFzIHRvIGNoZWNrIGluc2lkZSBzaW5jZSB0aGVyZSBpcyBhIDMwMCBtcyBkZWxheSB3aXRoIHRoZSBmYWRlXG4gICAgICBpZiAoJCgnLmxheWVyLWVsZW1lbnQnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgJCgnLmxheWVyLWhlbHAnKS5zaG93KCk7XG4gICAgICAgICQoJy5sYXllci10b2dnbGVBbGwnKS5oaWRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubGF5ZXJzID0ge307XG4gIGRjLmxheWVycy5saXN0ID0ge307XG5cbiAgZGMubGF5ZXJzLnByZXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignZmlsZTphZGRlZCcsIGRjLmxheWVycy5hZGQpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmUnLCBkYy5sYXllcnMucmVtb3ZlKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6ZHVwbGljYXRlJywgZGMubGF5ZXJzLmR1cGxpY2F0ZSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbmFtZScsIGRjLmxheWVycy5yZW5hbWUpO1xuICB9O1xuXG4vKipcbiAqIEFkZCBhIGxheWVyIHRvIHRoZSBsYXllcnMgbGlzdCBhbmQgdHJpZ2dlciBsYXllcjphZGRlZCBmb3Igc3Vic2NyaWJlcnMgdG8gcGljayB1cC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxuICogQHBhcmFtIHtvYmplY3R9IGZpbGUgb2JqZWN0XG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZSBibG9iIHRvIGJlIGNvbnZlcnRlZCB3aXRoIEpTT04ucGFyc2UoKVxuICovXG4gIGRjLmxheWVycy5hZGQgPSBmdW5jdGlvbihldmVudCwgbmFtZSwgYmxvYiwgbHR5cGUsIHVybCkge1xuICAgIGlmIChibG9iLnR5cGUgPT09IFwiVG9wb2xvZ3lcIikge1xuICAgICAgYmxvYiA9IHRvcG9qc29uLmNsaWVudC5mZWF0dXJlKGJsb2IsIGJsb2Iub2JqZWN0c1tPYmplY3Qua2V5cyhibG9iLm9iamVjdHMpWzBdXSk7XG4gICAgfVxuICAgIFxuICAgIHZhciBsID0gZGMubGF5ZXJzLm1ha2VMYXllcihuYW1lLCBibG9iKTtcbiAgICBkYy5sYXllcnMubGlzdFtsLnN0YW1wXSA9IGw7XG5cbiAgICBpZiAobHR5cGUgJiYgdXJsKSB7XG4gICAgICBkYy5sYXllcnMubGlzdFtsLnN0YW1wXS5sdHlwZSA9IGx0eXBlO1xuICAgICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0udXJsID0gdXJsO1xuICAgIH1cblxuICAgIGRjLm5vdGlmeSgnc3VjY2VzcycsICc8c3Ryb25nPicrbC5uYW1lKyc8L3N0cm9uZz4gaGFzIGJlZW4gYWRkZWQhJywgMzUwMCk7XG5cbiAgICAvLyB0cmlnZ2VyIGxheWVyOmFkZGVkXG4gICAgJChkYykudHJpZ2dlcignbGF5ZXI6YWRkZWQnLCBbbF0pO1xuXG4gICAgLy8gVXBkYXRlIFVSTCwgaWYgYXBwbGljYWJsZVxuICAgIGlmIChsdHlwZSAmJiB1cmwpIHtcbiAgICAgIGRjLnV0aWwudXBkYXRlU2VhcmNoKCk7XG4gICAgfVxuXG4gIH07XG5cbi8qKlxuICogUmVtb3ZlIGEgbGF5ZXIsIHdoaWNoIHRyaWdnZXJzIGxheWVyOnJlbW92ZWQgZm9yIHRoZSByZXN0IG9mIHRoZSBhcHBcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYXllciBzdGFtcFxuICovXG4gIGRjLmxheWVycy5yZW1vdmUgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICAvLyB0cmlnZ2VyIGxheWVyOnJlbW92ZWRcbiAgICB0cnkge1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlZCcsIFtzdGFtcF0pO1xuICAgICAgZGMubm90aWZ5KCdpbmZvJywgJzxzdHJvbmc+JyArIGRjLmxheWVycy5saXN0W3N0YW1wXS5uYW1lICsgJzwvc3Ryb25nPiBoYXMgYmVlbiByZW1vdmVkLicpO1xuICAgICAgZGVsZXRlIGRjLmxheWVycy5saXN0W3N0YW1wXTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSByZW1vdmluZyB0aGUgbGF5ZXIuJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gIH07XG5cbiAgZGMubGF5ZXJzLmR1cGxpY2F0ZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIHZhciBseXIgPSBkYy5sYXllcnMubGlzdFtzdGFtcF07XG4gICAgLy8gbmVlZCB0byBjcmVhdGUgbmV3IGxheWVyIHNvIHdlIGNhbiBnZXQgYSB1bmlxZSBMLnN0YW1wKClcbiAgICBkYy5sYXllcnMuYWRkKHt9LCAnY29weV8nK2x5ci5uYW1lLCBseXIucmF3KTtcbiAgfTtcblxuICBkYy5sYXllcnMucmVuYW1lID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyLCBuZXdOYW1lKSB7XG4gICAgLy8gcmVuYW1lIGluIGxheWVyIG9iamVjdFxuICAgIGRjLmxheWVycy5saXN0W2xheWVyLnN0YW1wXS5uYW1lID0gbmV3TmFtZTtcblxuICAgIC8vIHJlbmFtZSBpbiBsYXllcmxpc3RcbiAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW5hbWVkJywgW2xheWVyLnN0YW1wLCBuZXdOYW1lXSk7XG4gIH07XG5cbiAgZGMubGF5ZXJzLm1ha2VMYXllciA9IGZ1bmN0aW9uKG5hbWUsIGpzb24pIHtcbiAgICB2YXIgZ2VvanNvbiA9IGpzb247XG4gICAgLy8gaWYgKGpzb24udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJyAmJiBqc29uLmZlYXR1cmVzLmxlbmd0aCA9PT0gMSkge1xuICAgIC8vICAgZ2VvanNvbiA9IGRjLnV0aWwudW5jb2xsZWN0KGpzb24pO1xuICAgIC8vIH1cblxuICAgIHZhciBmbCA9IEwubWFwYm94LmZlYXR1cmVMYXllcihnZW9qc29uKTtcbiAgICB2YXIgbGF5ZXIgPSB7XG4gICAgICBuYW1lOiBkYy51dGlsLnJlbW92ZUZpbGVFeHRlbnNpb24obmFtZSksXG4gICAgICBzdGFtcDogTC5zdGFtcChmbCksXG4gICAgICByYXc6IGdlb2pzb24sXG4gICAgICB0eXBlOiBnZXRUeXBlKGdlb2pzb24pLFxuICAgICAgZmVhdHVyZWxheWVyOiBmbCxcbiAgICAgIGRhdGVBZGRlZDogbmV3IERhdGUoKVxuICAgIH07XG4gICAgcmV0dXJuIGxheWVyO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFR5cGUoZ2opIHtcbiAgICBpZiAoZ2oudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgcmV0dXJuICdGZWF0dXJlQ29sbGVjdGlvbic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnai50eXBlICsgJzwnICsgZ2ouZ2VvbWV0cnkudHlwZSArICc+JztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5tYXAgPSB7fTtcblxuICBkYy5tYXAuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGRjLm1hcC4kZWxlbSA9ICQoJzxkaXY+JykucHJvcCgnaWQnLCAnZHJvcGNob3AtbWFwJykuYWRkQ2xhc3MoJ21hcCcpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChkYy5tYXAuJGVsZW0pO1xuXG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBkYy5tYXAucmVtb3ZlTGF5ZXIpO1xuXG4gICAgX21ha2VNYXAoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBfbWFrZU1hcCgpIHtcbiAgICBkYy5tYXAudG9rZW4gPSBMLm1hcGJveC5hY2Nlc3NUb2tlbiA9ICdway5leUoxSWpvaWMzWnRZWFIwYUdWM2N5SXNJbUVpT2lKVk1VbFVSMHhySW4wLk53ZVNfQXR0anN3dE41d1J1V0NTTkEnO1xuICAgIGRjLm1hcC5tID0gTC5tYXBib3gubWFwKCdkcm9wY2hvcC1tYXAnLCBudWxsLCB7XG4gICAgICB6b29tQ29udHJvbDogZmFsc2UsXG4gICAgICB3b3JsZENvcHlKdW1wOiB0cnVlXG4gICAgfSkuc2V0VmlldyhbMCwwXSwgMyk7XG5cbiAgICAvLyBzZXRzIHRoZSBsb2NhdGlvbiBvZiB0aGUgem9vbSBidXR0b25zIHRvIHRoZSB0b3AgcmlnaHRcbiAgICBMLmNvbnRyb2wuem9vbSh7XG4gICAgICBwb3NpdGlvbjogJ3RvcGxlZnQnXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgTC5tYXBib3guZ2VvY29kZXJDb250cm9sKCdtYXBib3gucGxhY2VzJywge1xuICAgICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIHZhciBiYXNlTGF5ZXJzID0ge1xuICAgICAgXCJNYXBib3ggU3RyZWV0c1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5zdHJlZXRzJyksXG4gICAgICBcIk1hcGJveCBPdXRkb29yc1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5vdXRkb29ycycpLFxuICAgICAgXCJNYXBib3ggTGlnaHRcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3gubGlnaHQnKSxcbiAgICAgIFwiTWFwYm94IERhcmtcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guZGFyaycpLFxuICAgICAgXCJNYXBib3ggU2F0ZWxsaXRlXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LnNhdGVsbGl0ZScpXG4gICAgfTtcblxuICAgIGJhc2VMYXllcnNbJ01hcGJveCBTdHJlZXRzJ10uYWRkVG8oZGMubWFwLm0pO1xuICAgIC8vIHNldHMgbG9jYXRpb24gb2YgYmFzZSBsYXllciBjb250cm9sIHRvIHRoZSBib3R0b20gcmlnaHRcbiAgICBMLmNvbnRyb2wubGF5ZXJzKGJhc2VMYXllcnMsIHt9LCB7XG4gICAgICBwb3NpdGlvbjogJ2JvdHRvbXJpZ2h0JyxcbiAgICAgIGNvbGxhcHNlZDogZmFsc2VcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICBkYy5tYXAubGF5ZXJncm91cCA9IEwubWFwYm94LmZlYXR1cmVMYXllcigpO1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjphZGRlZCcsIGRjLm1hcC5hZGRMYXllcik7XG4gICAgJChkYykub24oJ2xheWVyOmhpZGUnLCBkYy5tYXAuaGlkZUxheWVyKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6c2hvdycsIGRjLm1hcC5zaG93TGF5ZXIpO1xuXG4gICAgLy8gLy8gbXkgbG9jYXRpb24gYXMgbGF5ZXJcbiAgICAvLyB2YXIgZ2VvbG9jYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlb2xvY2F0ZScpO1xuXG4gICAgJChkYy5tYXAubSkub24oJ2xvY2F0aW9uZm91bmQnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZGF0YSA9IGUub3JpZ2luYWxFdmVudDtcbiAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhkYXRhLmJvdW5kcyk7XG5cbiAgICAgIHZhciBseXIgPSB7XG4gICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBbZGF0YS5sYXRsbmcubG5nLCBkYXRhLmxhdGxuZy5sYXRdXG4gICAgICAgIH0sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAndGl0bGUnOiAnVGhlcmUgWW91IEFyZScsXG4gICAgICAgICAgJ21hcmtlci1jb2xvcic6ICcjMjA3MTc4JyxcbiAgICAgICAgICAnbWFya2VyLXN5bWJvbCc6ICdoZWFydCdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFsneW91ciBsb2NhdGlvbicsIGx5cl0pO1xuICAgIH0pO1xuXG4gICAgJChkYy5tYXAubSkub24oJ2xvY2F0aW9uZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBmaW5kaW5nIHlvdXIgbG9jYXRpb24uJywgMzAwMCk7XG4gICAgfSk7XG5cbiAgICAvLyAvLyBPbmNlIHdlJ3ZlIGdvdCBhIHBvc2l0aW9uLCB6b29tIGFuZCBjZW50ZXIgdGhlIG1hcFxuICAgIC8vIC8vIG9uIGl0LCBhbmQgYWRkIGEgc2luZ2xlIG1hcmtlci5cbiAgICAvLyB0aGlzLl9tYXAub24oJ2xvY2F0aW9uZm91bmQnLCBmdW5jdGlvbihlKSB7XG4gICAgLy8gICB0aGlzLl9tYXAuZml0Qm91bmRzKGUuYm91bmRzKTtcblxuXG4gICAgLy8gICBteUxheWVyLnNldEdlb0pTT04oe1xuICAgIC8vICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgLy8gICAgIGdlb21ldHJ5OiB7XG4gICAgLy8gICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAvLyAgICAgICBjb29yZGluYXRlczogW2UubGF0bG5nLmxuZywgZS5sYXRsbmcubGF0XVxuICAgIC8vICAgICB9LFxuICAgIC8vICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgLy8gICAgICAgJ3RpdGxlJzogJ1RoZXJlIFlvdSBBcmUnLFxuICAgIC8vICAgICAgICdtYXJrZXItY29sb3InOiAnIzIwNzE3OCcsXG4gICAgLy8gICAgICAgJ21hcmtlci1zeW1ib2wnOiAnaGVhcnQnXG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH0pO1xuXG4gICAgLy8gICAvLyBBbmQgaGlkZSB0aGUgZ2VvbG9jYXRpb24gYnV0dG9uXG4gICAgLy8gICAvL2dlb2xvY2F0ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGdlb2xvY2F0ZSk7XG4gICAgLy8gfS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIC8vIElmIHRoZSB1c2VyIGNob29zZXMgbm90IHRvIGFsbG93IHRoZWlyIGxvY2F0aW9uXG4gICAgLy8gLy8gdG8gYmUgc2hhcmVkLCBkaXNwbGF5IGFuIGVycm9yIG1lc3NhZ2UuXG4gICAgLy8gdGhpcy5fbWFwLm9uKCdsb2NhdGlvbmVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gICBnZW9sb2NhdGUuaW5uZXJIVE1MID0gJ1Bvc2l0aW9uIGNvdWxkIG5vdCBiZSBmb3VuZCc7XG4gICAgLy8gfSk7XG5cblxuICB9XG5cbiAgZGMubWFwLmNvdW50ID0gMDtcblxuICBkYy5tYXAuYWRkTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgZmwgPSBsYXllci5mZWF0dXJlbGF5ZXI7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkTGF5ZXIoZmwpO1xuXG4gICAgLy8gY3JlYXRlIHBvcHVwIHRhYmxlIGZvciBlYWNoIGZlYXR1cmVcbiAgICBmbC5lYWNoTGF5ZXIoZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgIHZhciBjb250ZW50ID0gJzx0YWJsZSBjbGFzcz1cImRyb3BjaG9wLXRhYmxlXCI+PHRyPjx0aD5Qcm9wZXJ0eTwvdGg+PHRoPkRhdGE8L3RoPjwvdHI+JztcblxuICAgICAgaWYgKGxheWVyLmZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGxheWVyLmZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICAgIGNvbnRlbnQgKz0gJzx0cj48dGQ+PHN0cm9uZz4nICsgcHJvcCArICc8L3N0cm9uZz48L3RkPjx0ZD4nICsgbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzW3Byb3BdICsgJzwvdGQ+PC90cj4nO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50ICs9ICc8cD5UaGVyZSBhcmUgbm8gcHJvcGVydGllcyBzZXQgZm9yIHRoaXMgZmVhdHVyZS48L3A+JztcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgKz0gJzwvdGFibGU+JztcblxuICAgICAgbGF5ZXIuYmluZFBvcHVwKEwucG9wdXAoe1xuICAgICAgICBtYXhXaWR0aDogNDUwLFxuICAgICAgICBtYXhIZWlnaHQ6IDIwMCxcbiAgICAgICAgYXV0b1BhblBhZGRpbmc6IFs0NSwgNDVdLFxuICAgICAgICBjbGFzc05hbWU6ICdkcm9wY2hvcC1wb3B1cCdcbiAgICAgIH0sIGxheWVyKS5zZXRDb250ZW50KGNvbnRlbnQpKTtcbiAgICB9KTtcblxuICB9O1xuXG4gIGRjLm1hcC5oaWRlTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5yZW1vdmVMYXllcihsYXllci5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIGRjLm1hcC5zaG93TGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRMYXllcihsYXllci5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIGRjLm1hcC5yZW1vdmVMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLnJlbW92ZUxheWVyKGRjLmxheWVycy5saXN0W3N0YW1wXS5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubm90aWZ5ID0gZnVuY3Rpb24odHlwZSwgdGV4dCwgdGltZSkge1xuICAgIHZhciBub3RlID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbm90aWZpY2F0aW9uJylcbiAgICAgIC5hZGRDbGFzcyh0eXBlKVxuICAgICAgLmh0bWwodGV4dCk7XG5cbiAgICAvLyBgdGltZWAgY2FuIGVxdWFsICdjbG9zZScgaW4gb3JkZXIgdG8gY3JlYXRlIGEgY2xvc2UgYnV0dG9uXG4gICAgaWYgKHRpbWUgPT09ICdjbG9zZScpIHtcblxuICAgICAgdmFyICRjbG9zZSA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ25vdGlmaWNhdGlvbi1jbG9zZScpXG4gICAgICAgIC5wcm9wKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgICAgIC5odG1sKCc8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCI+PC9pPicpO1xuXG4gICAgICAkY2xvc2Uub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkKG5vdGUpLmFwcGVuZCgkY2xvc2UpO1xuICAgICAgJChkYy4kZWxlbSkuYXBwZW5kKG5vdGUpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgJChkYy4kZWxlbSkuYXBwZW5kKG5vdGUpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBub3RlLnJlbW92ZSgpO1xuICAgICAgfSwgdGltZSB8fCAzMDAwKTtcblxuICAgIH1cblxuICAgIFxuXG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGJ1aWxkIG9wcy5nZW8gY29udGFpbmVyXG4gICAgdmFyIGdlb0NvbnRhaW5lciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ29wZXJhdGlvbnMtZ2VvJyk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGdlb0NvbnRhaW5lcik7XG5cbiAgICAvLyBjcmVhdGUgZ2VvIGJ1dHRvbnMgJiBmb3Jtc1xuICAgIGZvciAodmFyIGdlb09wIGluIGRjLm9wcy5nZW8pIHtcbiAgICAgIHZhciBnZW9CdG4gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdvcGVyYXRpb24gb3BlcmF0aW9uLWdlbyBvcGVyYXRpb24taW5hY3RpdmUnKVxuICAgICAgICAuaHRtbCgnPGg0PicgKyBnZW9PcCArICc8L2g0PjxwPicgKyBkYy5vcHMuZ2VvW2dlb09wXS5kZXNjcmlwdGlvbiArICc8L3A+JylcbiAgICAgICAgLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJywgZ2VvT3ApO1xuICAgICAgZ2VvQnRuLm9uKCdjbGljaycsIF9nZW9CdG5DbGljayk7XG5cbiAgICAgIGdlb0NvbnRhaW5lci5hcHBlbmQoZ2VvQnRuKTtcbiAgICB9XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6c2VsZWN0ZWQnLCBkYy5vcHMuZ2VvQ2hlY2spO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMub3BzLmdlb0NoZWNrKTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmdlbycsIGRjLm9wcy5nZW9FeGVjdXRlKTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC1naXN0JywgZGMub3BzLmZpbGVbJ2xvYWQtZ2lzdCddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtdXJsJywgZGMub3BzLmZpbGVbJ2xvYWQtdXJsJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC1vdmVycGFzcycsIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6cmVuYW1lJywgZGMub3BzLmZpbGUucmVuYW1lLmNhbGxiYWNrKTtcblxuICAgIGRjLm9wcy5zZXR1cCA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2ltcG9ydCcsXG4gICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+JyxcbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICd1cGxvYWQnLFxuICAgICAgICAgICdsb2FkLXVybCcsXG4gICAgICAgICAgJ2xvYWQtZ2lzdCcsXG4gICAgICAgICAgJ2xvYWQtb3ZlcnBhc3MnLFxuICAgICAgICAgICdsb2NhdGlvbidcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1NhdmUnLFxuICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1mbG9wcHktb1wiPjwvaT4nLFxuICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgJ3NhdmUtZ2VvanNvbicsXG4gICAgICAgICAgJ3NhdmUtdG9wb2pzb24nLFxuICAgICAgICAgICdzYXZlLXNoYXBlZmlsZSdcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0dlbyBBY3Rpb25zJyxcbiAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtd3JlbmNoXCI+PC9pPicsXG4gICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAnZXh0ZW50JyxcbiAgICAgICAgICAnZXhwYW5kJyxcbiAgICAgICAgICAnY29tYmluZScsXG4gICAgICAgICAgJ3JlbmFtZScsXG4gICAgICAgICAgJ3JlbW92ZScsXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICAnaW5mbydcbiAgICBdO1xuXG4gICAgLy8gc2V0dXAgb3BzIGZpbGVcbiAgICB2YXIgbGVmdE1lbnUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1tZW51LWxlZnQnKTtcbiAgICB2YXIgc2V0dXAgPSBkYy5vcHMuc2V0dXA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldHVwLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYWN0aW9uID0gc2V0dXBbaV07XG4gICAgICBpZiAodHlwZW9mIHNldHVwW2ldICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBpZihkYy5vcHMuZmlsZVthY3Rpb25dLnR5cGUgPT09ICdicmVhaycpIHtcbiAgICAgICAgICB2YXIgJGJyZWFrU3BhY2UgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdtZW51LWFjdGlvbi1icmVhaycpO1xuICAgICAgICAgIGxlZnRNZW51LmFwcGVuZCgkYnJlYWtTcGFjZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGVmdE1lbnUuYXBwZW5kKGJ1aWxkTWVudUJ1dHRvbihhY3Rpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBidWlsZCBhIGNvbGxhcHNlYWJsZSBtZW51IFwiYnV0dG9uXCJcbiAgICAgICAgdmFyIGNvbGxhcHNlQnRuID0gJCgnPGRpdj4nKVxuICAgICAgICAgIC5hZGRDbGFzcygnbWVudS1hY3Rpb24gbWVudS1jb2xsYXBzZScpXG4gICAgICAgICAgLmh0bWwoc2V0dXBbaV0uaWNvbik7XG4gICAgICAgIGlmIChzZXR1cFtpXS5uYW1lID09PSAnaW1wb3J0JykgY29sbGFwc2VCdG4uYWRkQ2xhc3MoJ21lbnUtaW1wb3J0Jyk7XG5cbiAgICAgICAgdmFyIGNvbGxhcHNlSW5uZXIgPSAkKCc8ZGl2PicpXG4gICAgICAgICAgLmFkZENsYXNzKCdtZW51LWNvbGxhcHNlLWlubmVyJyk7XG5cbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggYWN0aW9uIGFuZCBidWlsZCBhIGJ1dHRvbiBmb3IgaXQsIGp1c3QgbGlrZSBhYm92ZSxcbiAgICAgICAgLy8gYnV0IGFwcGVuZCBpdCB0byB0aGUgbWVudS1jb2xsYXBzZS1pbm5lciBlbGVtZW50XG4gICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgc2V0dXBbaV0uYWN0aW9ucy5sZW5ndGg7IGErKykge1xuICAgICAgICAgIHZhciBhY3RuID0gZGMub3BzLnNldHVwW2ldLmFjdGlvbnNbYV07XG4gICAgICAgICAgY29sbGFwc2VJbm5lci5hcHBlbmQoYnVpbGRNZW51QnV0dG9uKGFjdG4pKTtcbiAgICAgICAgfVxuICAgICAgICBjb2xsYXBzZUJ0bi5hcHBlbmQoY29sbGFwc2VJbm5lcik7XG5cbiAgICAgICAgLy8gYXBwZW5kIHRoZSBlbnRpcmUgY29sbGFwc2VCdG4gdG8gdGhlIGxlZnRNZW51XG4gICAgICAgIGxlZnRNZW51LmFwcGVuZChjb2xsYXBzZUJ0bik7XG4gICAgICB9XG4gICAgfVxuICAgIGRjLiRlbGVtLmFwcGVuZChsZWZ0TWVudSk7XG5cbiAgICBmdW5jdGlvbiBidWlsZE1lbnVCdXR0b24oYWN0aW9uKSB7XG4gICAgICB2YXIgYnV0dG9uID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbWVudS1hY3Rpb24nKVxuICAgICAgICAuaHRtbChkYy5vcHMuZmlsZVthY3Rpb25dLmljb24gfHwgJyEnKVxuICAgICAgICAuYXR0cignZGF0YS1vcGVyYXRpb24nLCBhY3Rpb24pXG4gICAgICAgIC5hdHRyKCdkYXRhLXRvb2x0aXAnLCBkYy5vcHMuZmlsZVthY3Rpb25dLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKGRjLm9wcy5maWxlW2FjdGlvbl0udHlwZSA9PT0gJ2luZm8nKSBidXR0b24uYWRkQ2xhc3MoJ2Ryb3BjaG9wLWluZm8nKTtcbiAgICAgIGJ1dHRvbi5vbignY2xpY2snLCBfZmlsZUJ0bkNsaWNrKTtcbiAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICB9O1xuXG4gIC8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cblxuICAvKiBpZ25vcmluZyB0aGVzZSBmdW5jdGlvbnMgaW4ganNoaW50IGJlY2F1c2Ugd2UgYXJlIGdldHRpbmdcbiAgYW4gdW5lY2Vzc2FyeSBzdHJpY3QgdmlvbGF0aW9uIHdhcm5pbmcsIGJ1dCBvdXIgdXNhZ2Ugb2YgYHRoaXNgXG4gIGlzIHByb3BlciBoZXJlLiAqL1xuICBmdW5jdGlvbiBfZ2VvQnRuQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgLy8gaWYgb3BlcmF0aW9uIHJlcXVpcmVzIG5vIHBhcmFtZXRlcnMsIGRvbid0IHJlbmRlciBhIGZvcm1cbiAgICBpZiAoIWRjLm9wcy5nZW9bb3BlcmF0aW9uXS5wYXJhbWV0ZXJzKSB7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdvcGVyYXRpb246Z2VvJywgW29wZXJhdGlvbiwgZGMuc2VsZWN0aW9uLmxpc3RdKTtcbiAgICAvLyBvdGhlcndpc2UgcmVuZGVyIHRoZSBmb3JtXG4gICAgfSBlbHNlIHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06Z2VvJywgW29wZXJhdGlvbl0pO1xuICAgIH1cbiAgfVxuXG5cbiAgZnVuY3Rpb24gX2ZpbGVCdG5DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgb3BlcmF0aW9uID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9wZXJhdGlvbicpO1xuICAgIHRyeSB7XG4gICAgICBkYy5vcHMuZmlsZVtvcGVyYXRpb25dLmV4ZWN1dGUoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhpcyBvcGVyYXRpb24gZG9lc25cXCd0IGV4aXN0IScpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG5cbiAgLy8gU29ydCB0dXJmIG9wZXJhdGlvbnMgYnkgYXZhaWxhYmxpbGl0eSBhbmQgYWxwaGFiZXRpY2FsbHlcbiAgZnVuY3Rpb24gX3NvcnRHZW8oKSB7XG5cbiAgICAvLyBHZXQgYWxsIG9mIHRoZSB0dXJmIGJ1dHRvbnMgYW5kIHNvcnQgdGhlbSBhbHBoYWJldGljYWxseVxuICAgIHZhciBhbHBoYSA9ICQoJy5vcGVyYXRpb24tZ2VvJykuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gKCQoYikuZGF0YSgnb3BlcmF0aW9uJykgPCAkKGEpLmRhdGEoJ29wZXJhdGlvbicpKSA/IDEgOiAtMTtcbiAgICB9KTtcblxuICAgIC8vIEdyYWIgYWxsIHRoZSBhY3RpdmUgYnV0dG9ucyBhbmQgcmVhcHBlbmQgdGhlbVxuICAgIGFscGhhLmZpbHRlcihmdW5jdGlvbihpLCBkKSB7XG4gICAgICBpZiAoISgkKGQpLnByb3AoJ2Rpc2FibGVkJykpKSB7IHJldHVybiBkIH1cbiAgICB9KS5hcHBlbmRUbygnLm9wZXJhdGlvbnMtZ2VvJyk7XG5cbiAgICAvLyBHcmFiIGFsbCB0aGUgaW5hY3RpdmUgYnV0dG9ucyBhbmQgcmVhcHBlbmQgdGhlbVxuICAgIGFscGhhLmZpbHRlcihmdW5jdGlvbihpLCBkKSB7XG4gICAgICBpZiAoJChkKS5wcm9wKCdkaXNhYmxlZCcpKSB7IHJldHVybiBkIH1cbiAgICB9KS5hcHBlbmRUbygnLm9wZXJhdGlvbnMtZ2VvJyk7XG5cbiAgICAvLyBTY3JvbGwgdG8gdGhlIHRvcCB0byBrZWVwIHRoaW5ncyBuaWNlXG4gICAgJCgnLm9wZXJhdGlvbnMtZ2VvJykuc2Nyb2xsVG9wKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSB0dXJmIGZ1bmN0aW9uIGJhc2VkIG9uIGJ1dHRvbiBvcGVyYXRpb24gY2xpY2suXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcmlnaW5hbCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRpb24gdG8gYmUgZXhlY3V0ZWQgdmlhIHR1cmZcbiAgICogQHBhcmFtIHthcnJheX0gc2VyaWVzIG9mIHBhcmFtZXRlcnMgdG8gYmUgYXBwbGllZCB0byB0dXJmIG9wZXJhdGlvblxuICAgKi9cbiAgZGMub3BzLmdlb0V4ZWN1dGUgPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uLCBwYXJhbWV0ZXJzKSB7XG4gICAgdmFyIHByZXAgPSBkYy5vcHMucHJlcGFyZVR1cmZQYXJhbXMob3BlcmF0aW9uLCBwYXJhbWV0ZXJzKTtcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZGMub3BzLmdlb1tvcGVyYXRpb25dLmV4ZWN1dGUocHJlcC5vcHRpb25zKTtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgZGMubm90aWZ5KCdUaGF0IG9wZXJhdGlvbiBpc25cXCd0IHBvc3NpYmxlLiBUcnkgY2hhbmdpbmcgdGhlIG9yZGVyIG9mIHlvdXIgc2VsZWN0aW9uLicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbcHJlcC5uYW1lLCByZXN1bHRdKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJlcGFyZSBwYXJhbWV0ZXJzIGZvciBleGVjdXRpbmcgd2l0aGluIGEgdHVyZiBmdW5jdGlvbiB1c2luZyAuYXBwbHkoKSAtIHJldHVybnMgYW4gYXJyYXlcbiAgICogQHBhcmFtIHthcnJheX0gb3B0aW9ucyBmcm9tIHRoZSB1c2VyIHBhc3NlZCBmcm9tIHRoZSBvcmlnaW5hbCBldmVudCB0cmlnZ2VyXG4gICAqL1xuICBkYy5vcHMucHJlcGFyZVR1cmZQYXJhbXMgPSBmdW5jdGlvbihvcGVyYXRpb24sIHBhcmFtcykge1xuICAgIHZhciBkYXRhID0ge307XG4gICAgZGF0YS5vcHRpb25zID0gW107XG5cbiAgICB2YXIgZ2VvbXMgPSBbXTtcbiAgICB2YXIgbmFtZUFycmF5ID0gW107XG4gICAgLy8gZ2V0IGdlb21ldHJ5IGFycmF5IGZyb20gc2VsZWN0aW9uXG4gICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBpZiAoJC5pbkFycmF5KCdzd2l0Y2gtJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wLCBwYXJhbXMpID09PSAtMSkge1xuICAgICAgICBnZW9tcy5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZW9tcy51bnNoaWZ0KGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICB9XG4gICAgICBuYW1lQXJyYXkucHVzaChkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lKTtcbiAgICB9KTtcblxuICAgIC8vIG1lcmdlIHBhcmFtcyB3aXRoIG9wdGlvbnMgYXJyYXlcbiAgICBkYXRhLm9wdGlvbnMgPSAkLm1lcmdlKGdlb21zLCBwYXJhbXMpO1xuXG4gICAgLy8gY3JlYXRlIG5hbWUgYXJyYXlcbiAgICBkYXRhLm5hbWUgPSBkYy51dGlsLmNvbmNhdChuYW1lQXJyYXksICdfJywgb3BlcmF0aW9uKTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9O1xuXG4gIGRjLm9wcy5nZW9DaGVjayA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuXG4gICAgLy8gY2hlY2sgc2VsZWN0aW9uIGNvdW50IHZzIG9wZXJhdGlvbiBtaW4vbWF4XG4gICAgZm9yICh2YXIgbyBpbiBkYy5vcHMuZ2VvKSB7XG4gICAgICB2YXIgb3AgPSBkYy5vcHMuZ2VvW29dO1xuICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA+IG9wLm1heEZlYXR1cmVzIHx8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA8IG9wLm1pbkZlYXR1cmVzKSB7XG4gICAgICAgIHR1cm5JdE9mZihvKTtcbiAgICAgICAgLy8gZG9uJ3QgZ28gYW55IGZ1cnRoZXJcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy8gY2hlY2sgb3BlcmF0aW9uIGFnYWluc3QgZWFjaCBzZWxlY3Rpb24gZGF0YSB0eXBlXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICB2YXIgc2VsID0gZGMuc2VsZWN0aW9uLmxpc3RbeF07XG5cbiAgICAgICAgICAvLyBpZiB0aGUgc2VsZWN0aW9uIHR5cGUgaXMgaW4gdGhlIGFycmF5LCBtYXJrIGl0IGFzIGFjdGl2ZSFcbiAgICAgICAgICBpZiAoJC5pbkFycmF5KHNlbC50eXBlLCBvcC5yZXF1aXJlbWVudHMudHlwZXMpID4gLTEgfHwgb3AucmVxdWlyZW1lbnRzLmdlbmVyYWxGZWF0dXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0dXJuSXRPbihvKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHVybkl0T2ZmKG8pO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHVybkl0T2ZmKG9wKSB7XG4gICAgICB2YXIgYnRuID0gJCgnW2RhdGEtb3BlcmF0aW9uPScrIG9wICsnXScpO1xuICAgICAgYnRuLmFkZENsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHR1cm5JdE9uKG9wKSB7XG4gICAgICB2YXIgYnRuID0gJCgnW2RhdGEtb3BlcmF0aW9uPScrIG9wICsnXScpO1xuICAgICAgYnRuLnJlbW92ZUNsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvLyBTb3J0IHRoZSBsaXN0XG4gICAgX3NvcnRHZW8oKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5vcHMgPSBkYy5vcHMgfHwge307XG5cbiAgZGMub3BzLmZpbGUgPSB7XG4gICAgdXBsb2FkOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ1VwbG9hZCBmcm9tIHlvdXIgY29tcHV0ZXIgKC5nZW9qc29uKScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS11cGxvYWRcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBpbnNwaXJlZCBmcm9tIGdlb2pzb24uaW9cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9nZW9qc29uLmlvL2Jsb2IvZ2gtcGFnZXMvc3JjL3VpL2ZpbGVfYmFyLmpzI0wzOTBcbiAgICAgICAgdmFyICRibGluZElucHV0ID0gJCgnPGlucHV0PicpXG4gICAgICAgICAgLmF0dHIoJ3R5cGUnLCAnZmlsZScpXG4gICAgICAgICAgLmF0dHIoJ211bHRpcGxlJywgJ3RydWUnKVxuICAgICAgICAgIC5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJylcbiAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpXG4gICAgICAgICAgLmNzcygnaGVpZ2h0JywgJzAnKVxuICAgICAgICAgIC5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLmZpbGVzO1xuICAgICAgICAgICAgJChmaWxlcykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgIGRjLnV0aWwucmVhZEZpbGUoZmlsZXNbaV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkYmxpbmRJbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkYmxpbmRJbnB1dCk7XG4gICAgICAgICRibGluZElucHV0LmNsaWNrKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLXVybCc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0IGZpbGUgZnJvbSBhIFVSTCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saW5rXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndXJsJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1VSTCcsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdodHRwOi8vJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLXVybCddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciB1cmwgPSBwYXJhbWV0ZXJzWzBdO1xuICAgICAgICBkYy51dGlsLnhocih1cmwsIGRjLm9wcy5maWxlW25hbWVdLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgLy8gZ2V0IGZpbGVuYW1lIGJhc2VkIG9uIHRoZSBlbmQgb2YgdGhlIHVybCAtIG5vdCBzdXJlIGlmIHRoaXMgaXMgc3VzdGFpbmFibGVcbiAgICAgICAgICB2YXIgbmFtZSA9IHhoci5yZXNwb25zZVVSTC5zdWJzdHJpbmcoeGhyLnJlc3BvbnNlVVJMLmxhc3RJbmRleE9mKCcvJykrMSk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtuYW1lLCBkYXRhLCAndXJsJywgeGhyLnJlc3BvbnNlVVJMXSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCByZXRyaWV2ZSBHaXN0LiBQbGVhc2UgY2hlY2sgeW91ciBVUkwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnbG9hZC1naXN0Jzoge1xuICAgICAgZGVzY3JpcHRpb246ICdJbXBvcnQgZmlsZXMgZnJvbSBHaXN0JyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWdpdGh1YlwiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2dpc3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonR2lzdCBJRCBvciBVUkwnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vJ1xuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtZ2lzdCddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBnaXN0ID0gcGFyYW1ldGVyc1swXS5zcGxpdCgnLycpW3BhcmFtZXRlcnNbMF0uc3BsaXQoJy8nKS5sZW5ndGgtMV07XG4gICAgICAgIHZhciB1cmwgPSAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9naXN0cy8nICsgZ2lzdDtcbiAgICAgICAgZGMudXRpbC54aHIodXJsLCBkYy5vcHMuZmlsZVtuYW1lXS5jYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIGZvciAodmFyIGYgaW4gZGF0YS5maWxlcykge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBkYXRhLmZpbGVzW2ZdLmZpbGVuYW1lO1xuICAgICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtuYW1lLCBKU09OLnBhcnNlKGRhdGEuZmlsZXNbZl0uY29udGVudCksICdnaXN0JywgeGhyLnJlc3BvbnNlVVJMLnNwbGl0KCcvJylbeGhyLnJlc3BvbnNlVVJMLnNwbGl0KCcvJykubGVuZ3RoIC0gMV1dKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnU3VjY2VzZnVsbHkgcmV0cmlldmVkIGdpc3QnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHJldHJpZXZlIEdpc3QuIFBsZWFzZSBjaGVjayB5b3VyIFVSTCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLW92ZXJwYXNzJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRlcm1pbmFsXCI+PC9pPicsXG4gICAgICBfdGVtcDoge30sXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncXVlcnknLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonTGVhcm4gbW9yZSBhYm91dCA8YSBocmVmPVwiaHR0cDovL3dpa2kub3BlbnN0cmVldG1hcC5vcmcvd2lraS9PdmVycGFzc19BUEkvTGFuZ3VhZ2VfR3VpZGVcIiB0YXJnZXQ9XCJfYmxhbmtcIj50aGUgcXVlcnkgbGFuZ3VhZ2U8L2E+LicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdhbWVuaXR5PWJhcidcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdsYXllciBuYW1lJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J05hbWUgb2YgdGhlIGxheWVyIGFkZGVkIGlmIHJlc3VsdHMgYXJlIGZvdW5kLicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdvdmVycGFzc19sYXllcl9uYW1lJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1vdmVycGFzcyddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIC8vIHNldCBsYXllciBuYW1lIHRvIF90ZW1wIGZvciBsYXRlciB1c2FnZVxuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLl90ZW1wLmxheWVyTmFtZSA9IHBhcmFtZXRlcnNbMV07IC8vIHRoaXMgaXMgdWdseVxuXG4gICAgICAgIC8vIGJ1aWxkIHRoZSBxdWVyeSB3aXRoIGJvdW5kaW5nIGJveFxuICAgICAgICB2YXIgYmJveCA9IGRjLnV0aWwuZ2V0QkJveCgpO1xuICAgICAgICBkYy51dGlsLnhocignaHR0cDovL292ZXJwYXNzLWFwaS5kZS9hcGkvaW50ZXJwcmV0ZXI/W291dDpqc29uXTtub2RlWycrcGFyYW1ldGVyc1swXSsnXSgnK2Jib3grJyk7b3V0OycsIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB2YXIgZ2VvanNvbiA9IG9zbXRvZ2VvanNvbihkYXRhLCB7XG4gICAgICAgICAgICBmbGF0UHJvcGVydGllczogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghZGF0YS5lbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBlbGVtZW50cyBmb3VuZCBpbiB5b3VyIHF1ZXJ5LicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2RjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uX3RlbXAubGF5ZXJOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnRm91bmQgPHN0cm9uZz4nICsgZGF0YS5lbGVtZW50cy5sZW5ndGggKyAnIGVsZW1lbnRzPC9zdHJvbmc+IGZyb20gdGhlIE92ZXJwYXNzIEFQSScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCBxdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbG9jYXRpb246IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWRkIHlvdXIgbG9jYXRpb24gYXMgYSBsYXllcicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jcm9zc2hhaXJzXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0dlb2xvY2F0aW9uIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBicm93c2VyLicsIDQwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm1hcC5tLmxvY2F0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdzYXZlLWdlb2pzb24nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBHZW9KU09OJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGUtY29kZS1vXCI+PC9pPicsXG4gICAgICBjcmVhdGVzTGF5ZXI6IGZhbHNlLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICAgICAgdmFyIHRpdGxlID0gJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJy5nZW9qc29uJztcbiAgICAgICAgICBzYXZlQXMobmV3IEJsb2IoW2NvbnRlbnRdLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04J1xuICAgICAgICAgIH0pLCB0aXRsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ3NhdmUtdG9wb2pzb24nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBUb3BvSlNPTicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1vYmplY3QtdW5ncm91cFwiPjwvaT4nLFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgIHRvcG9qc29uLnRvcG9sb2d5KHtcbiAgICAgICAgICAgICAgY29sbGVjdGlvbjogZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICdwcm9wZXJ0eS10cmFuc2Zvcm0nOiBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmUucHJvcGVydGllcztcbiAgICAgICAgICAgIH19KVxuICAgICAgICAgICk7XG4gICAgICAgICAgdmFyIHRpdGxlID0gJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJy50b3BvanNvbic7XG4gICAgICAgICAgc2F2ZUFzKG5ldyBCbG9iKFtjb250ZW50XSwge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCdcbiAgICAgICAgICB9KSwgdGl0bGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdzYXZlLXNoYXBlZmlsZSc6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdTYXZlIGFzIFNoYXBlZmlsZScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1maWxlXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICBmb2xkZXI6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSxcbiAgICAgICAgICAgICAgdHlwZXM6IHtcbiAgICAgICAgICAgICAgICBwb2ludDogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19wb2ludCcsXG4gICAgICAgICAgICAgICAgcG9seWdvbjogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19wb2x5JyxcbiAgICAgICAgICAgICAgICBsaW5lOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX2xpbmUnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzaHB3cml0ZS5kb3dubG9hZChkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcsIG9wdGlvbnMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZGMubm90aWZ5KCdFcnJvcicsICdUaGVyZSB3YXMgYSBwcm9ibGVtIGRvd25sb2FkaW5nIHRoZSBzaGFwZWZpbGUuJyArIGVycik7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBjcmVhdGVzTGF5ZXI6IGZhbHNlXG4gICAgfSxcblxuICAgIGV4dGVudDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1ZpZXcgZXh0ZW50IG9mIGxheWVycycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1nbG9iZVwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKCFkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBleHRlbnQgb2YgZW50aXJlIGxheWVyIGxpc3QgaWYgbm90aGluZyBzZWxlY3RlZFxuICAgICAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhkYy5tYXAubGF5ZXJncm91cC5nZXRCb3VuZHMoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGJ1aWxkIHRoZSBib3VuZHMgYmFzZWQgb24gc2VsZWN0ZWQgbGF5ZXJzXG4gICAgICAgICAgdmFyIGJvdW5kcztcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIHZhciBmbCA9IGRjLnNlbGVjdGlvbi5saXN0W2xdLmZlYXR1cmVsYXllcjtcbiAgICAgICAgICAgIGlmKCFsKSBib3VuZHMgPSBmbC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIGVsc2UgYm91bmRzLmV4dGVuZChmbC5nZXRCb3VuZHMoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgIH1cblxuICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBhbmQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdDb252ZXJ0IEZlYXR1cmVDb2xsZWN0aW9uIGludG8gc2VwYXJhdGUgZmVhdHVyZXMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZXhwYW5kXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHZhciBmYyA9IGRjLnNlbGVjdGlvbi5saXN0WzBdO1xuICAgICAgICAgIGlmIChmYy5yYXcudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgICAgJChmYy5yYXcuZmVhdHVyZXMpLmVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2ZjLm5hbWUgKyBjb3VudCArICdfJyArIGZjLnJhdy5mZWF0dXJlc1tmXS5nZW9tZXRyeS50eXBlLCBmYy5yYXcuZmVhdHVyZXNbZl1dKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdUaGF0IG5lZWRzIHRvIGJlIGEgZmVhdHVyZSBjb2xsZWN0aW9uIScpO1xuICAgICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdMYXllciBpcyBub3QgYSBGZWF0dXJlQ29sbGVjdGlvbi4nKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ1BsZWFzZSBzZWxlY3QgYSBzaW5nbGUgbGF5ZXIhJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY29tYmluZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbWJpbmVzIHNlbGVjdGVkIGZlYXR1cmVzIGludG8gYSBzaW5nbGUgRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtY29tcHJlc3NcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZmMgPSB7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogW11cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdFtmXS5yYXcudHlwZSAhPT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgICAgICBmYy5mZWF0dXJlcy5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ZdLnJhdyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCBkYy5zZWxlY3Rpb24ubGlzdFtmXS5uYW1lICsgJyB3YXMgbm90IGFkZGVkIGJlY2F1c2UgaXQgaXMgYWxyZWFkeSBhIEZlYXR1cmVDb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFsnbmV3X0ZlYXR1cmVDb2xsZWN0aW9uJywgZmNdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnTm8gbGF5ZXJzIHNlbGVjdGVkIScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vICd2aWV3LWF0dHJpYnV0ZXMnOiB7XG4gICAgLy8gICBtaW5GZWF0dXJlczogMSxcbiAgICAvLyAgIGRlc2NyaXB0aW9uOiAnU2hvdyBhdHRyaWJ1dGUgdGFibGUnLFxuICAgIC8vICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdGgtbGlzdFwiPjwvaT4nLFxuICAgIC8vICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgIGRjLmF0dHIucmVuZGVyKGRjLnNlbGVjdGlvbi5saXN0WzBdKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9LFxuXG4gICAgcmVuYW1lOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVuYW1lIGxheWVyJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXBlbmNpbFwiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ05hbWUnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydyZW5hbWUnXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ1BsZWFzZSBzZWxlY3QgPHN0cm9uZz5vbmUgbGF5ZXI8L3N0cm9uZz4uJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVuYW1lJywgW2RjLnNlbGVjdGlvbi5saXN0WzBdLCBwYXJhbWV0ZXJzWzBdXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JlbW92ZSBzZWxlY3RlZCBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdHJhc2gtb1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZScsIFt0aGlzLnN0YW1wXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5mbzoge1xuICAgICAgdHlwZTogJ2luZm8nLFxuICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBtb3JlIGFib3V0IGRyb3BjaG9wJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWluZm9cIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2Fib3V0Lmh0bWwnO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuZ2VvID0ge1xuICAgIGFsb25nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGxpbmUgYW5kIHJldHVybnMgYSBwb2ludCBhdCBhIHNwZWNpZmllZCBkaXN0YW5jZSBhbG9uZyB0aGUgbGluZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2Rpc3RhbmNlIGFsb25nIHRoZSBsaW5lJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXRzJyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdraWxvbWV0ZXJzJywgJ3JhZGlhbnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2Fsb25nJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5hbG9uZy5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJlemllcjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBsaW5lIGFuZCByZXR1cm5zIGEgY3VydmVkIHZlcnNpb24gYnkgYXBwbHlpbmcgYSBCZXppZXIgc3BsaW5lIGFsZ29yaXRobS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Jlc29sdXRpb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonVGltZSBpbiBtaWxsaXNlY29uZHMgYmV0d2VlbiBwb2ludHMnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwMDAwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnc2hhcnBuZXNzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2EgbWVhc3VyZSBvZiBob3cgY3VydnkgdGhlIHBhdGggc2hvdWxkIGJlIGJldHdlZW4gc3BsaW5lcycsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogIDAuODVcblxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnYmV6aWVyJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5iZXppZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBidWZmZXI6IHtcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ2FsY3VsYXRlcyBhIGJ1ZmZlciBmb3IgaW5wdXQgZmVhdHVyZXMgZm9yIGEgZ2l2ZW4gcmFkaXVzLiBVbml0cyBzdXBwb3J0ZWQgYXJlIG1pbGVzLCBraWxvbWV0ZXJzLCBhbmQgZGVncmVlcy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Rpc3RhbmNlIHRvIGRyYXcgdGhlIGJ1ZmZlci4nLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdCcsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAnZmVldCcsICdraWxvbWV0ZXJzJywgJ21ldGVycycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmJ1ZmZlci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjZW50ZXI6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHBvaW50IGluIHRoZSBjZW50ZXIgb2YgdGhlIGZlYXR1cmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZWN1cnNpdmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRoZSBvcGVyYXRpb24gb24gZWFjaCBmZWF0dXJlIGluIHRoZSBjb2xsZWN0aW9uIG9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4nLFxuICAgICAgICAgIHR5cGU6ICdyZWN1cnNpdmUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAvLyBpZiBydW5uaW5nIHRoZSBvcGVyYXRpb24gcmVjdXJzaXZlbHkgXCJ0cnVlXCJcbiAgICAgICAgaWYgKHBhcmFtc1sxXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdjZW50ZXInLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuY2VudGVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2VudHJvaWQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHBvaW50IGluIHRoZSBjZW50cm9pZCBvZiB0aGUgZmVhdHVyZXMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZWN1cnNpdmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRoZSBvcGVyYXRpb24gb24gZWFjaCBmZWF0dXJlIGluIHRoZSBjb2xsZWN0aW9uIG9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4nLFxuICAgICAgICAgIHR5cGU6ICdyZWN1cnNpdmUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAvLyBpZiBydW5uaW5nIHRoZSBvcGVyYXRpb24gcmVjdXJzaXZlbHkgXCJ0cnVlXCJcbiAgICAgICAgaWYgKHBhcmFtc1sxXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdjZW50cm9pZCcsIHBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5jZW50cm9pZC5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGRlc3RpbmF0aW9uOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2ludD4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBQb2ludCBhbmQgY2FsY3VsYXRlcyB0aGUgbG9jYXRpb24gb2YgYSBkZXN0aW5hdGlvbiBwb2ludCBnaXZlbiBhIGRpc3RhbmNlIGluIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzOyBhbmQgYmVhcmluZyBpbiBkZWdyZWVzLiBUaGlzIHVzZXMgdGhlIEhhdmVyc2luZSBmb3JtdWxhIHRvIGFjY291bnQgZm9yIGdsb2JhbCBjdXJ2YXR1cmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidkaXN0YW5jZSBmcm9tIHRoZSBzdGFydGluZyBwb2ludCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdiZWFyaW5nJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J3JhbmdpbmcgZnJvbSAtMTgwIHRvIDE4MCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogIDBcblxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXRzJyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdraWxvbWV0ZXJzJywgJ3JhZGlhbnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2Rlc3RpbmF0aW9uJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5kZXN0aW5hdGlvbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVudmVsb3BlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXSAvLyBUT0RPOiBtYWtlIHRoaXMgdGFrZSBmZWF0dXJlcyBhbmQgcnVuIGFjcm9zcyBmdWxsIHNlbGVjdGlvblxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYW55IG51bWJlciBvZiBmZWF0dXJlcyBhbmQgcmV0dXJucyBhIHJlY3Rhbmd1bGFyIFBvbHlnb24gdGhhdCBlbmNvbXBhc3NlcyBhbGwgdmVydGljZXMuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5lbnZlbG9wZS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBsb2RlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgZmVhdHVyZSBvciBzZXQgb2YgZmVhdHVyZXMgYW5kIHJldHVybnMgYWxsIHBvc2l0aW9ucyBhcyBwb2ludHMuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5leHBsb2RlLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIG1pZHBvaW50OiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2ludD4nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgdHdvIHBvaW50cyBhbmQgcmV0dXJucyBhIHBvaW50IG1pZHdheSBiZXR3ZWVuIHRoZW0uJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5taWRwb2ludC5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBzaW1wbGlmeToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZTxQb2x5Z29uPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIExpbmVTdHJpbmcgb3IgUG9seWdvbiBhbmQgcmV0dXJucyBhIHNpbXBsaWZpZWQgdmVyc2lvbi4gSW50ZXJuYWxseSB1c2VzIHNpbXBsaWZ5LWpzIHRvIHBlcmZvcm0gc2ltcGxpZmljYXRpb24uJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndG9sZXJhbmNlJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uIDonc2ltcGxpZmljYXRpb24gdG9sZXJhbmNlJyxcbiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgZGVmYXVsdDogMC4xXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnaGlnaCBxdWFsaXR5JyxcbiAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ3doZXRoZXIgb3Igbm90IHRvIHNwZW5kIG1vcmUgdGltZSB0byBjcmVhdGUgYSBoaWdoZXItcXVhbGl0eSBzaW1wbGlmaWNhdGlvbiB3aXRoIGEgZGlmZmVyZW50IGFsZ29yaXRobScsXG4gICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdzaW1wbGlmeScsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuc2ltcGxpZnkuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0aW46IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUcmlhbmd1bGF0ZWQgaXJyZWd1bGFyIG5ldHdvcmssIGludGVycG9sYXRpb24gbWV0aG9kJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi50aW4uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdW5pb246IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvbHlnb24+J11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIHR3byBwb2x5Z29ucyBhbmQgcmV0dXJucyBhIGNvbWJpbmVkIHBvbHlnb24uIElmIHRoZSBpbnB1dCBwb2x5Z29ucyBhcmUgbm90IGNvbnRpZ3VvdXMsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIE11bHRpUG9seWdvbiBmZWF0dXJlLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYudW5pb24uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgd2l0aGluOiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBzZXQgb2YgcG9pbnRzIGFuZCBhIHNldCBvZiBwb2x5Z29ucyBhbmQgcmV0dXJucyB0aGUgcG9pbnRzIHRoYXQgZmFsbCB3aXRoaW4gdGhlIHBvbHlnb25zLiBGaXJzdCBpbnB1dCBzaG91bGQgYmUgdGhlIHBvaW50cy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ1BvaW50cyB0byBjbGlwJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1NlbGVjdCB0aGUgbGF5ZXIgdGhhdCByZXByZXNlbnRzIHRoZSBwb2ludHMgeW91IHdhbnQgdG8gY2xpcC4gVGhpcyBhc3N1bWVzIHRoZSBvdGhlciBsYXllciBpcyB5b3VyIGNsaXBwaW5nIHBvbHlnb24uJyxcbiAgICAgICAgICB0eXBlOiAnc3dpdGNoJ1xuICAgICAgICAgIC8vIGRlZmF1bHQ6IGRjLnNlbGVjdGlvbi5saXN0WzBdXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYud2l0aGluLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIFxuICBkYy5zZWxlY3Rpb24gPSB7fTtcbiAgZGMuc2VsZWN0aW9uLmxpc3QgPSBbXTtcblxuICBkYy5zZWxlY3Rpb24uaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdsYXllcjpzZWxlY3RlZCcsIGRjLnNlbGVjdGlvbi5hZGQpO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMuc2VsZWN0aW9uLnJlbW92ZSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBfbGF5ZXJSZW1vdmVkKTtcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uYWRkID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3QucHVzaChsYXllcik7XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLnJlbW92ZSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIHZhciBpbmRleCA9IG51bGw7XG4gICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXAgPT09IGxheWVyLnN0YW1wKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdC5zcGxpY2UoaW5kZXgsIDEpOyAvLyByZW1vdmUgb3V0c2lkZSBvZiB0aGUgbG9vcCBzbyB3ZSBkb24ndCBicmVhayBvdXIgY291bnRcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcubGF5ZXItbmFtZS5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICQoJy5vcGVyYXRpb24tZ2VvJykuYWRkQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICQoJy5vcGVyYXRpb24tZ2VvJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdCA9IFtdO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9sYXllclJlbW92ZWQoZXZlbnQsIHN0YW1wKSB7XG4gICAgZGMuc2VsZWN0aW9uLnJlbW92ZSh7fSwge3N0YW1wOiBzdGFtcH0pO1xuICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcblxuICBkYy51dGlsID0ge307XG5cbiAgZGMudXRpbC5yZW1vdmVGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL1xcLlteLy5dKyQvLCBcIlwiKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwucmVtb3ZlV2hpdGVTcGFjZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgY29uc29sZS5sb2coc3RyaW5nKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwuY29uY2F0ID0gZnVuY3Rpb24oYXJyYXksIHNlcGFyYXRvciwgcHJlZml4KSB7XG4gICAgdmFyIHN0cmluZyA9ICcnO1xuICAgICQoYXJyYXkpLmVhY2goZnVuY3Rpb24oYSkge1xuICAgICAgc3RyaW5nICs9IHNlcGFyYXRvciArIGFycmF5W2FdO1xuICAgIH0pO1xuICAgIHN0cmluZyA9IHByZWZpeCArIHN0cmluZztcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwueGhyID0gZnVuY3Rpb24odXJsLCBjYWxsYmFjaykge1xuICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKHRydWUpO1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICB4aHIub25sb2FkID0gY2FsbGJhY2suYmluZCh0aGlzLCB4aHIpO1xuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oIHhociApIHtcbiAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoeGhyKTtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVW5hYmxlIHRvIGFjY2VzcyAnICsgdXJsLCAyNTAwKTtcbiAgICB9O1xuICAgIHhoci5zZW5kKCk7XG4gIH07XG5cbiAgZGMudXRpbC5yZWFkRmlsZSA9IGZ1bmN0aW9uKGZpbGUpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAvLyBpZiBhIHppcGZpbGUsIGFzc3VtZSBzaGFwZWZpbGUgZm9yIG5vd1xuICAgIGlmIChmaWxlLm5hbWUuaW5kZXhPZignLnppcCcpID4gLTEgfHwgZmlsZS5uYW1lLmluZGV4T2YoJy5zaHAnKSA+IC0xKSB7XG4gICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7XG4gICAgICBkYy51dGlsLmxvYWRlcih0cnVlKTtcbiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBzaHAocmVhZGVyLnJlc3VsdClcbiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUHJvYmxlbWF0aWMgcHJvamVjdGlvbiAtIFwiLCBlcnJvcik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihnZW9qc29uKSB7XG4gICAgICAgICAgICBkYy51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgICAgICBpZiAoIWdlb2pzb24pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRjLm5vdGlmeSgnZXJyb3InLCAnSW52YWxpZCBwcm9qZWN0aW9uIG9yIHNoYXBlZmlsZS4nLCAyNTAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtnZW9qc29uLmZpbGVOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlLCAnVVRGLTgnKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtmaWxlLm5hbWUsIEpTT04ucGFyc2UocmVhZGVyLnJlc3VsdCldKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9yd2FyZFRvR2VvSnNvbklvKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2dlb2pzb24uaW8vI2RhdGE9ZGF0YTphcHBsaWNhdGlvbi9qc29uLFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHVybDtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5qc29uRnJvbVVybCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBxdWVyeSA9IGxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSlcbiAgICAgIC5zcGxpdCgvKCY/Z2lzdD18Jj91cmw9KS9nKVxuICAgICAgLmZpbHRlcihmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBkLmxlbmd0aCA+IDA7XG4gICAgICB9KTtcblxuICAgIHZhciByZXN1bHQgPSB7fTtcblxuICAgIHF1ZXJ5LmZvckVhY2goZnVuY3Rpb24ocGFydCwgaSkge1xuICAgICAgaWYgKGkgPT09IDAgfHwgaSAlIDIgPT09IDApIHtcbiAgICAgICAgdmFyIGtleSA9IHBhcnQucmVwbGFjZSgvJnw9L2csICcnKTtcblxuICAgICAgICBpZiAoIXJlc3VsdFtrZXldKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdFtrZXldLnB1c2goZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5W2kgKyAxXSkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBkYy51dGlsLnVwZGF0ZVNlYXJjaCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsYXllcnMgPSBbXTtcblxuICAgIE9iamVjdC5rZXlzKGRjLmxheWVycy5saXN0KS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICAgIC8qXG4gICAgICAgICoqIElmIGEgbGF5ZXIgaGFzIGEgdHlwZSBhbmQgVVJMIChhIGdpc3Qgb3IgZXh0ZXJuYWwgR2VvSlNPTiBsaW5rKSxcbiAgICAgICAgKiogYW5kIHdlIGhhdmVuJ3QgcmVjb3JlZCB0aGlzIHR5cGUtdXJsIGNvbWJvIGFscmVhZHksIGFkZCBpdCB0byB0aGVcbiAgICAgICAgKiogdW5pcXVlIGxpc3QuIFRoZSBsYXN0IGNoZWNrIGlzIG5lZWRlZCB0byBhY2NvdW50IGZvciBnaXN0cyB3aXRoXG4gICAgICAgICoqIG11bHRpcGxlIGxheWVycy5cbiAgICAgICAgKi9cbiAgICAgICAgaWYgKGRjLmxheWVycy5saXN0W2xheWVyXS5sdHlwZSAmJiBkYy5sYXllcnMubGlzdFtsYXllcl0udXJsICYmIGxheWVycy5pbmRleE9mKGRjLmxheWVycy5saXN0W2xheWVyXS5sdHlwZSArICc9JyArIGRjLmxheWVycy5saXN0W2xheWVyXS51cmwpIDwgMCkge1xuICAgICAgICAgICAgbGF5ZXJzLnB1c2goZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLmx0eXBlICsgJz0nICsgZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLnVybCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBzZWFyY2ggPSBsYXllcnMubGVuZ3RoID8gICgnPycgKyBsYXllcnMuam9pbignJicpKSA6ICcvJztcblxuICAgIC8vIE9ubHkgdXBkYXRlIHRoZSBVUkkgaWYgYW55dGhpbmcgaGFzIGNoYW5nZWRcbiAgICBpZiAoc2VhcmNoICE9PSB3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgc2VhcmNoKTtcbiAgICB9XG5cbiAgfTtcblxuICBkYy51dGlsLmV4ZWN1dGVVcmxQYXJhbXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGF0YSA9IGRjLnV0aWwuanNvbkZyb21VcmwoKTtcblxuICAgIC8vIGxvYWQgZ2lzdFxuICAgIGlmIChkYXRhLmdpc3QgJiYgZGF0YS5naXN0Lmxlbmd0aCkge1xuICAgICAgJChkYXRhLmdpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1naXN0J10uZ2V0KHt9LCAnbG9hZC1naXN0JywgW2RhdGEuZ2lzdFtpXV0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gbG9hZFxuICAgIGlmIChkYXRhLnVybCAmJiBkYXRhLnVybC5sZW5ndGgpIHtcbiAgICAgICQoZGF0YS51cmwpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC11cmwnXS5nZXQoe30sICdsb2FkLXVybCcsIFtkYXRhLnVybFtpXV0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGRjLnV0aWwuZ2V0RmlsZUV4dGVuc2lvbiA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gICAgcmV0dXJuIGZpbGVuYW1lLnN1YnN0cihmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpKzEpO1xuICB9O1xuXG4gIGRjLnV0aWwuZ2V0QkJveCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBib3VuZHMgPSBkYy5tYXAubS5nZXRCb3VuZHMoKSxcbiAgICAgICAgICAgIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpLFxuICAgICAgICAgICAgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7XG4gICAgLy8gd2Ugc2hvdWxkIHByb2JhYmx5IGNoZWNrIHRoZSBzaXplIGhlcmU/XG4gICAgLy8gbm9kZSg1Ny43LDExLjksNTcuOCwxMi4wKVxuICAgIHJldHVybiBzdy5sYXQrJywnK3N3LmxuZysnLCcrbmUubGF0KycsJytuZS5sbmc7XG4gIH07XG5cbiAgZGMudXRpbC51bmNvbGxlY3QgPSBmdW5jdGlvbihmYykge1xuICAgIHJldHVybiBmYy5mZWF0dXJlc1swXTtcbiAgfTtcblxuICBkYy51dGlsLmV4ZWN1dGVGQyA9IGZ1bmN0aW9uKGZjLCBvcGVyYXRpb24sIHBhcmFtcykge1xuXG4gICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcbiAgICB2YXIgbmV3RkMgPSB7fTtcbiAgICBuZXdGQy50eXBlID0gJ0ZlYXR1cmVDb2xsZWN0aW9uJztcbiAgICBuZXdGQy5mZWF0dXJlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgZiA9IDA7IGYgPCBmYy5mZWF0dXJlcy5sZW5ndGg7IGYrKykge1xuICAgICAgbmV3UGFyYW1zWzBdID0gZmMuZmVhdHVyZXNbZl07XG4gICAgICB2YXIgZmVhdHVyZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZlYXR1cmUgPSB0dXJmW29wZXJhdGlvbl0uYXBwbHkobnVsbCwgbmV3UGFyYW1zKTtcbiAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzID0gZmMuZmVhdHVyZXNbZl0ucHJvcGVydGllcyB8fCB7fTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH1cbiAgICAgIG5ld0ZDLmZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0ZDO1xuXG4gIH07XG5cbiAgZGMudXRpbC5sb2FkZXIgPSBmdW5jdGlvbih5ZXMpIHtcbiAgICB2YXIgbG9hZGVyID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnZHJvcGNob3AtbG9hZGVyJyk7XG5cbiAgICBpZiAoeWVzKSB7XG4gICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRpbmcnKTtcbiAgICAgICQoJ2JvZHknKS5hcHBlbmQobG9hZGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdkcm9wY2hvcC1sb2FkaW5nJyk7XG4gICAgICAkKCcuZHJvcGNob3AtbG9hZGVyJykuYWRkQ2xhc3MoJ2xvYWRlci1jb21wbGV0ZScpLmZhZGVPdXQoMjAwMCwgZnVuY3Rpb24oKXtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmVycm9yID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgdmFyIGVycm9yID0gbmV3IEVycm9yKGVycik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
