var dropchop=function(e){return e=e||{},e.version="0.1.1",e.init=function(t){t||e.util.error("No options provided in dropchop.init()"),e.options=t,$(t.id).length||e.util.error("Element with options.id does not exist."),e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.menus.geo.init(),e.menus.left.init(),e.menus.layerContextMenu.init(),e.form.init(),e.shortcuts.init(),location.search.length&&e.util.executeUrlParams()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},radio:function(e){var t=$("<div>").attr("class","radioGroup"),a=e.name.replace(/\s/g,"");return $(e.options).each(function(r){var o=e.options[r],n=o.replace(/\s/g,""),i=$("<label>").addClass("sub-label").attr("for",n),s=$("<input>").attr("type","radio").attr("id",n).attr("name",a).addClass("radio").val(o);o===e["default"]&&s.prop("defaultChecked",!0),i.append(o),i.appendTo(t),s.appendTo(t)}),t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input id="allCheckboxes" type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),s=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),l=$('<button title="More Options">').addClass("layer-action layer-dropdown").html('<i class="fa fa-ellipsis-h"></i>');s.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;if(!i)return;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),s=i.parent().attr("data-stamp");t===r&&(a=e),t===s&&(o=e)}),a>o?$(".layer-element").each(function(t){t>=o&&t<=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){t<o&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey||t.ctrlKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),n.on("contextmenu",function(t){e.menus.layerContextMenu.createLayerContextMenu(this,t.offsetX,t.pageY),t.preventDefault()}),l.on("click",function(t){return e.menus.layerContextMenu.createLayerContextMenu($(this).siblings(".layer-name"),t.pageX-40,t.pageY),t.preventDefault(),!1}),n.on("dblclick",function(t){e.ops.file.extent.execute()}),o.append(n),o.append(s),o.append(i),o.append(l),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show(),$(e).trigger("layerlist:added",n)},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.selectAll=function(){$(".layer-element").each(function(t){e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})},e.layerlist.checkAll=function(t){for(var r in e.layers.list){var o=e.layers.list[r];t&&!dropchop.selection.isSelected(o)||a(e.layers.list[r].stamp,!0)}},e.layerlist.uncheckAll=function(t){for(var r in e.layers.list){var o=e.layers.list[r];t&&!dropchop.selection.isSelected(o)||a(o.stamp,!1)}},e.layerlist.toggleAll=function(t){document.getElementById("allCheckboxes").checked?e.layerlist.checkAll():e.layerlist.uncheckAll()},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r,o,n){"Topology"===r.type&&(r=topojson.client.feature(r,r.objects[Object.keys(r.objects)[0]]));var i=e.layers.makeLayer(a,r);e.layers.list[i.stamp]=i,o&&n&&(e.layers.list[i.stamp].ltype=o,e.layers.list[i.stamp].url=n),e.notify("success","<strong>"+i.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[i]),o&&n&&e.util.updateSearch()},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer),$(e.map.m).on("locationfound",function(t){var a=t.originalEvent;e.map.m.fitBounds(a.bounds);var r={type:"Feature",geometry:{type:"Point",coordinates:[a.latlng.lng,a.latlng.lat]},properties:{title:"There You Are","marker-color":"#207178","marker-symbol":"heart"}};$(e).trigger("file:added",["your location",r])}),$(e.map.m).on("locationerror",function(){e.notify("error","There was a problem finding your location.",3e3)})}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(){var e=$(".operation-geo").sort(function(e,t){return $(t).data("operation")<$(e).data("operation")?1:-1});e.filter(function(e,t){if(!$(t).prop("disabled"))return t}).appendTo(".operations-geo"),e.filter(function(e,t){if($(t).prop("disabled"))return t}).appendTo(".operations-geo"),$(".operations-geo").scrollTop(0)}return e=e||{},e.menus=e.menus||{},e.menus.geo=e.menus.geo||{},e.menus.geo.init=function(){var a=$("<div>").addClass("operations-geo");e.$elem.append(a),$(e).on("layer:selected",e.menus.geo.geoCheck),$(e).on("layer:unselected",e.menus.geo.geoCheck),$(e).on("operation:geo",e.menus.geo.geoExecute);for(var r in e.ops.geo){var o=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+r+"</h4><p>"+e.ops.geo[r].description+"</p>").prop("disabled",!0).attr("data-operation",r);o.on("click",t),a.append(o)}},e.menus.geo.geoExecute=function(t,a,r){var o=e.menus.geo.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.menus.geo.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){$.inArray("switch-"+e.selection.list[t].stamp,a)===-1?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.menus.geo.geoCheck=function(t,r){function o(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function n(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var i in e.ops.geo){var s=e.ops.geo[i];if(e.selection.list.length>s.maxFeatures||e.selection.list.length<s.minFeatures)o(i);else for(var l=0;l<e.selection.list.length;l++){var c=e.selection.list[l];$.inArray(c.type,s.requirements.types)>-1||s.requirements.generalFeature===!0?n(i):o(i)}}a()},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.menus=e.menus||{},e.menus.layerContextMenu=e.menus.layerContextMenu||{},e.menus.layerContextMenu.init=function(){$("html").bind("click",function(t){e.menus.layerContextMenu.removeLayerContextMenus()})},e.menus.layerContextMenu.createLayerContextMenu=function(a,r,o){function n(){var e=10,t=$(window).height(),a=l.height();if(o+a<t)return{top:o,left:r};var n=o+a-t;return{top:o-n-e,left:r}}a instanceof jQuery||(a=$(a)),e.menus.layerContextMenu.removeLayerContextMenus();var i=a.parent(),s=e.layers.list[i.attr("data-stamp")];dropchop.selection.isSelected(s)||a.trigger("click");var l=$("<div>").addClass("context-menu"),c=$("<ul>");l.append(c);var p={title1:"Layer",rename:e.ops.file.rename,duplicate:e.ops.file.duplicate,remove:e.ops.file.remove,title2:"Geo",extent:e.ops.file.extent,expand:e.ops.file.expand,combine:e.ops.file.combine};for(var u in p){var d=p[u];if("string"==typeof d||d instanceof String)c.append($('<li class="title"><h4>'+d+"</h4></li>"));else{var f=$("<li>").addClass("menu-action").html('<div class="icon">'+d.icon+'</div><div class="description">'+d.description+"</div>").attr("data-operation",u).attr("data-tooltip",d.description);(d.minFeatures>dropchop.selection.list.length||d.maxFeatures<dropchop.selection.list.length)&&f.addClass("operation-inactive"),f.on("click",t),c.append(f)}}l.addClass("hidden"),i.parent().append(l);var m=n();l.css(m),l.removeClass("hidden")},e.menus.layerContextMenu.removeLayerContextMenus=function(){$(".context-menu").remove()},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.menus=e.menus||{},e.menus.left=e.menus.left||{},e.menus.left.init=function(){function a(a){var r=$("<button>").addClass("menu-action").html(e.ops.file[a].icon||"!").attr("data-operation",a).attr("data-tooltip",e.ops.file[a].description);return"info"===e.ops.file[a].type&&r.addClass("dropchop-info"),r.on("click",t),r}$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:load-arcgis",e.ops.file["load-arcgis"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback),e.menus.left.setup=[{name:"import",icon:'<i class="fa fa-plus"></i>',actions:["upload","load-url","load-gist","load-overpass","load-arcgis","location"]},{name:"Save",icon:'<i class="fa fa-floppy-o"></i>',actions:["save-geojson","save-topojson","save-shapefile"]},"info"];for(var r=$("<div>").addClass("dropchop-menu-left"),o=e.menus.left.setup,n=0;n<o.length;n++){var i=o[n];if("object"!=typeof o[n])if("break"===e.ops.file[i].type){var s=$("<div>").addClass("menu-action-break");r.append(s)}else r.append(a(i));else{var l=$("<div>").addClass("menu-action menu-collapse").html(o[n].icon);"import"===o[n].name&&l.addClass("menu-import");for(var c=$("<div>").addClass("menu-collapse-inner"),p=0;p<o[n].actions.length;p++){var u=o[n].actions[p];c.append(a(u))}l.append(c),r.append(l)}}e.$elem.append(r)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);if("close"===r){var n=$("<button>").addClass("notification-close").prop("type","button").html('<i class="fa fa-times"></i>');n.on("click",function(e){$(this).parent().remove()}),$(o).append(n),$(e.$elem).append(o)}else $(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r,"url",t.responseURL])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content),"gist",t.responseURL.split("/")[t.responseURL.split("/").length-1]])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-arcgis":{description:"Query an ArcGIS Server Feature Service",icon:'<i class="fa fa-globe"></i>',_temp:{layerName:"arcjson"},parameters:[{name:"feature service",description:"Enter URL to ArcGIS Feature Service (ex. http://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/0)",type:"text","default":"http://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/0"},{name:"where",description:"A where clause for the query filter. Any legal SQL where clause operating on the fields in the layer is allowed.",type:"text","default":"1=1"},{name:"request type",description:"select JSONP if you receive cross-origin resource sharing errors",type:"radio","default":"CORS",options:["CORS","JSONP"]},{name:"limit to map",description:"only load features within current map view",type:"checkbox"}],execute:function(){$(e).trigger("form:file",["load-arcgis"])},checkJsonp:function(e){return"JSONP"!==e[2]},get:function(t,a,r){e.ops.file["load-arcgis"]._temp.layerName=r[0];var o="-180,-90,180,90";r[3]&&(o=e.util.getEsriBBox());var n=r[0]+"/query/",i={f:"json",inSR:4326,outSR:4326,geometry:o,where:r[1],outfields:"*"},s=e.ops.file["load-arcgis"].checkJsonp(r);e.util.get(n,i,s).done(function(t){e.ops.file["load-arcgis"].callback(t)}).fail(function(t,a,r){dropchop.util.loader(!1),e.notify("Error",a,r)})},callback:function(t){dropchop.util.loader(!1);var a=e.util.esri2geo(t);t.features.length<1?e.notify("info","No features found in your query."):($(e).trigger("file:added",[e.ops.file["load-arcgis"]._temp.layerName,a]),e.notify("success","Found <strong>"+t.features.length+" features</strong> from the ArcGIS Service"))}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Enter a search query in the overpass-turbo wizard syntax. Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_turbo/Wizard" target="_blank">the supported features</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox(),n=overpassWizard(r[0]);return n===!1?e.notify("error","Can't create overpass query for this search input."):void overpassWizardExpand(n,o,function(t,a){return t?e.notify("error","Error while expanding overpass query: "+t):void e.util.xhr("http://overpass-api.de/api/interpreter?data="+encodeURIComponent(a),e.ops.file["load-overpass"].callback)})},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r,{flatProperties:!0});r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},location:{description:"Add your location as a layer",icon:'<i class="fa fa-crosshairs"></i>',execute:function(){navigator.geolocation?e.map.m.locate():e.notify("error","Geolocation is not available on this browser.",4e3)}},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-topojson":{minFeatures:1,description:"Save as TopoJSON",icon:'<i class="fa fa-object-ungroup"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(topojson.topology({collection:e.selection.list[t].raw},{"property-transform":function(e){return e.properties}})),r="dropchop_"+e.selection.list[t].name+".topojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},duplicate:{minFeatures:1,description:"Duplicate selected layers",icon:'<i class="fa fa-files-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:duplicate",[this.stamp])}),e.selection.clear()}},rename:{minFeatures:1,maxFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear(),e.util.updateSearch()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",
parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e.selection.isSelected=function(e){return Boolean(dropchop.selection.list.indexOf(e)+1)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.shortcuts={},e.shortcuts.list=[],e.shortcuts.init=function(){Mousetrap.bind(["command+a","ctrl+a"],function(t){return e.layerlist.selectAll(),!1}),Mousetrap.bind(["command+backspace","ctrl+backspace"],function(t){return e.layerlist.clearSelection(),!1}),Mousetrap.bind(["ctrl+shift+k"],function(t){return e.ops.file.remove.execute(),!1}),Mousetrap.bind(["command+plus","ctrl+plus","command+=","ctrl+="],function(e){return dropchop.layerlist.checkAll(!0),!1}),Mousetrap.bind(["command+-","ctrl+-"],function(t){return e.layerlist.uncheckAll(!0),!1})},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^\/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.get=function(t,a,r){var o={data:a,dataType:"json"};e.util.corsSupport&&r!==!1||(console.log("No CORS support, using JSONP"),o.dataType="jsonp"),dropchop.util.loader(!0);var n=$.ajax(t,o);return n},e.util.readFile=function(t){var a=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(a.readAsArrayBuffer(t),e.util.loader(!0),a.onloadend=function(t){shp(a.result)["catch"](function(e){console.log("Problematic projection - ",e)}).then(function(t){return e.util.loader(!1),t?void $(e).trigger("file:added",[t.fileName,t]):e.notify("error","Invalid projection or shapefile.",2500)})}):(a.readAsText(t,"UTF-8"),a.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(a.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1).split(/(&?gist=|&?url=)/g).filter(function(e){return e.length>0}),t={};return e.forEach(function(a,r){if(0===r||r%2===0){var o=a.replace(/&|=/g,"");t[o]||(t[o]=[]),t[o].push(decodeURIComponent(e[r+1]))}}),t},e.util.updateSearch=function(){var t=[];Object.keys(e.layers.list).forEach(function(a){e.layers.list[a].ltype&&e.layers.list[a].url&&t.indexOf(e.layers.list[a].ltype+"="+e.layers.list[a].url)<0&&t.push(e.layers.list[a].ltype+"="+e.layers.list[a].url)});var a=t.length?"?"+t.join("&"):"/";a!==window.location.search&&window.history.pushState(null,null,a)},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.getEsriBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lng+","+a.lat+","+r.lng+","+r.lat},e.util.uncollect=function(e){return e.features[0]},e.util.esri2geo=function(e){return toGeoJSON(e)},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var s;try{s=turf[a].apply(null,o),s.properties=t.features[i].properties||{}}catch(l){e.notify("error",l)}n.features.push(s)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.corsSupport=function(){return"XMLHttprequest"in window&&"withCredentials"in new window.XMLHttpRequest},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibWVudXMuZ2VvLmRyb3BjaG9wLmpzIiwibWVudXMubGF5ZXItY29udGV4dC1tZW51LmRyb3BjaG9wLmpzIiwibWVudXMubGVmdC5kcm9wY2hvcC5qcyIsIm5vdGlmeS5kcm9wY2hvcC5qcyIsIm9wcy5maWxlLmRyb3BjaG9wLmpzIiwib3BzLmdlby5kcm9wY2hvcC5qcyIsInNlbGVjdGlvbi5kcm9wY2hvcC5qcyIsInNob3J0Y3V0cy5kcm9wY2hvcC5qcyIsInV0aWwuZHJvcGNob3AuanMiXSwibmFtZXMiOlsiZHJvcGNob3AiLCJkYyIsInZlcnNpb24iLCJpbml0Iiwib3B0cyIsInV0aWwiLCJlcnJvciIsIm9wdGlvbnMiLCIkIiwiaWQiLCJsZW5ndGgiLCIkZWxlbSIsImxheWVycyIsInByZXBhcmUiLCJtYXAiLCJzZWxlY3Rpb24iLCJsYXllcmxpc3QiLCJkcm9wem9uZSIsIm1lbnVzIiwiZ2VvIiwibGVmdCIsImxheWVyQ29udGV4dE1lbnUiLCJmb3JtIiwic2hvcnRjdXRzIiwibG9jYXRpb24iLCJzZWFyY2giLCJleGVjdXRlVXJsUGFyYW1zIiwiYm9vbSIsImNvbnNvbGUiLCJsb2ciLCJfZXZlbnRzIiwiJGNvbnRhaW5lciIsIm9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRoaXMiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZmlsZXMiLCJvcmlnaW5hbEV2ZW50IiwiZGF0YVRyYW5zZmVyIiwiZWFjaCIsImkiLCJyZWFkRmlsZSIsImZpbGUiLCJvcGVyYXRpb24iLCJjcmVhdGUiLCJvcHMiLCJuYW1lIiwiaW5mbyIsInRyaWdnZXIiLCJyZW1vdmUiLCIkaHRtbCIsImF0dHIiLCJ0ZXh0IiwiYXBwZW5kVG8iLCJkZXNjcmlwdGlvbiIsInBhcmFtZXRlcnMiLCJwIiwiY3JlYXRlUGFyYW0iLCIkc3VibWl0IiwiJGNhbmNlbCIsImRhdGEiLCJzZXJpYWxpemVBcnJheSIsInB1c2giLCJ2YWx1ZSIsImFwcGVuZCIsInBhcmFtIiwiJGlucHV0IiwiJGxhYmVsIiwiJGZpZWxkIiwiaW5wdXRzIiwidHlwZSIsImh0bWwiLCJudW1iZXIiLCIkaSIsInNlbGVjdCIsIiRvcHQiLCJjaGVja2JveCIsInJhZGlvIiwiZ3JvdXBOYW1lIiwicmVwbGFjZSIsIm9wdCIsIm9wdElkIiwiJGxibCIsInZhbCIsInByb3AiLCJzd2l0Y2giLCJsaXN0Iiwic3RhbXAiLCJyZWN1cnNpdmUiLCIkbGJsMSIsIiRvcHQxIiwiJGxibDIiLCIkb3B0MiIsImxheWVyVHlwZUljb24iLCJpY29uIiwiZWxlbVRvZ2dsZSIsImJvb2wiLCJmaW5kIiwiZWxlbXMiLCJ0YXJnZXQiLCJoYXNDbGFzcyIsImNsZWFyIiwibGlIZWxwZXIiLCJ0b2dnbGVMYXllcnMiLCJ0b2dnbGVBbGwiLCJhZGRMYXllckxpc3RJdGVtIiwicmVtb3ZlTGF5ZXJMaXN0SXRlbSIsInJlbmFtZSIsIm5ld05hbWUiLCJsYXllciIsImxheWVybGlzdEl0ZW0iLCJsYXllckRpdiIsImRlbGF5IiwicXVldWUiLCJuZXh0IiwibGF5ZXJUeXBlIiwiY2hlY2tlZCIsImRyb3Bkb3duIiwic2hpZnRLZXkiLCJ0b0NvdW50IiwiZnJvbUNvdW50IiwidG8iLCJmcm9tIiwiX2xhc3RTZWxlY3RlZCIsImUiLCJjaGVjayIsInRvU3RhbXAiLCJwYXJlbnQiLCJmcm9tU3RhbXAiLCJsIiwic2VsZWN0TGF5ZXIiLCJtZXRhS2V5IiwiY3RybEtleSIsInNlbGVjdFRvZ2dsZSIsImNsZWFyU2VsZWN0aW9uIiwiY3JlYXRlTGF5ZXJDb250ZXh0TWVudSIsIm9mZnNldFgiLCJwYWdlWSIsInNpYmxpbmdzIiwicGFnZVgiLCJleHRlbnQiLCJleGVjdXRlIiwiaGlkZSIsInNob3ciLCIkaXRlbSIsImx5ciIsInNlbGVjdEFsbCIsImNoZWNrQWxsIiwibXVzdEJlU2VsZWN0ZWQiLCJpc1NlbGVjdGVkIiwidW5jaGVja0FsbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJmYWRlT3V0IiwiZ2V0VHlwZSIsImdqIiwiZ2VvbWV0cnkiLCJhZGQiLCJkdXBsaWNhdGUiLCJibG9iIiwibHR5cGUiLCJ1cmwiLCJ0b3BvanNvbiIsImNsaWVudCIsImZlYXR1cmUiLCJvYmplY3RzIiwiT2JqZWN0Iiwia2V5cyIsIm1ha2VMYXllciIsIm5vdGlmeSIsInVwZGF0ZVNlYXJjaCIsImVyciIsInJhdyIsImpzb24iLCJnZW9qc29uIiwiZmwiLCJMIiwibWFwYm94IiwiZmVhdHVyZUxheWVyIiwicmVtb3ZlRmlsZUV4dGVuc2lvbiIsImZlYXR1cmVsYXllciIsImRhdGVBZGRlZCIsIkRhdGUiLCJfbWFrZU1hcCIsInRva2VuIiwiYWNjZXNzVG9rZW4iLCJtIiwiem9vbUNvbnRyb2wiLCJ3b3JsZENvcHlKdW1wIiwic2V0VmlldyIsImNvbnRyb2wiLCJ6b29tIiwicG9zaXRpb24iLCJhZGRUbyIsImdlb2NvZGVyQ29udHJvbCIsImJhc2VMYXllcnMiLCJNYXBib3ggU3RyZWV0cyIsInRpbGVMYXllciIsIk1hcGJveCBPdXRkb29ycyIsIk1hcGJveCBMaWdodCIsIk1hcGJveCBEYXJrIiwiTWFwYm94IFNhdGVsbGl0ZSIsImNvbGxhcHNlZCIsImxheWVyZ3JvdXAiLCJhZGRMYXllciIsImhpZGVMYXllciIsInNob3dMYXllciIsImZpdEJvdW5kcyIsImJvdW5kcyIsImNvb3JkaW5hdGVzIiwibGF0bG5nIiwibG5nIiwibGF0IiwicHJvcGVydGllcyIsInRpdGxlIiwibWFya2VyLWNvbG9yIiwibWFya2VyLXN5bWJvbCIsInJlbW92ZUxheWVyIiwiY291bnQiLCJlYWNoTGF5ZXIiLCJjb250ZW50IiwiYmluZFBvcHVwIiwicG9wdXAiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImF1dG9QYW5QYWRkaW5nIiwiY2xhc3NOYW1lIiwic2V0Q29udGVudCIsIl9oYW5kbGVCdG5DbGljayIsIl9zb3J0R2VvIiwiYWxwaGEiLCJzb3J0IiwiYSIsImIiLCJmaWx0ZXIiLCJkIiwic2Nyb2xsVG9wIiwiZ2VvQ29udGFpbmVyIiwiZ2VvQ2hlY2siLCJnZW9FeGVjdXRlIiwiZ2VvT3AiLCJnZW9CdG4iLCJwcmVwIiwicHJlcGFyZVR1cmZQYXJhbXMiLCJyZXN1bHQiLCJwYXJhbXMiLCJnZW9tcyIsIm5hbWVBcnJheSIsImluQXJyYXkiLCJ1bnNoaWZ0IiwibWVyZ2UiLCJjb25jYXQiLCJ0dXJuSXRPZmYiLCJvcCIsImJ0biIsInR1cm5JdE9uIiwibyIsIm1heEZlYXR1cmVzIiwibWluRmVhdHVyZXMiLCJ4Iiwic2VsIiwicmVxdWlyZW1lbnRzIiwidHlwZXMiLCJnZW5lcmFsRmVhdHVyZSIsImJpbmQiLCJyZW1vdmVMYXllckNvbnRleHRNZW51cyIsIiRsYXllck5hbWVEaXYiLCJ4UG9zIiwieVBvcyIsIl9jYWxjdWxhdGVNZW51TG9jYXRpb24iLCJidWZmZXIiLCJ3aW5kb3dIZWlnaHQiLCJ3aW5kb3ciLCJoZWlnaHQiLCJtZW51SGVpZ2h0IiwibWVudSIsInRvcCIsImRpZmZlcmVuY2UiLCJqUXVlcnkiLCJseXJEYXRhIiwibWVudUxpc3QiLCJtZW51SXRlbXMiLCJ0aXRsZTEiLCJ0aXRsZTIiLCJleHBhbmQiLCJjb21iaW5lIiwibWVudUl0ZW0iLCJpdGVtIiwiU3RyaW5nIiwiZmlsZUJ0biIsImNzcyIsImJ1aWxkTWVudUJ1dHRvbiIsImFjdGlvbiIsImJ1dHRvbiIsImdldCIsImNhbGxiYWNrIiwic2V0dXAiLCJhY3Rpb25zIiwibGVmdE1lbnUiLCIkYnJlYWtTcGFjZSIsImNvbGxhcHNlQnRuIiwiY29sbGFwc2VJbm5lciIsImFjdG4iLCJ0aW1lIiwibm90ZSIsIiRjbG9zZSIsInNldFRpbWVvdXQiLCJ1cGxvYWQiLCIkYmxpbmRJbnB1dCIsImNsaWNrIiwibG9hZC11cmwiLCJkZWZhdWx0IiwieGhyIiwieGhyRXZlbnQiLCJsb2FkZXIiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZVVSTCIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwibG9hZC1naXN0IiwiZ2lzdCIsInNwbGl0IiwiZiIsImZpbGVuYW1lIiwibG9hZC1hcmNnaXMiLCJfdGVtcCIsImxheWVyTmFtZSIsImNoZWNrSnNvbnAiLCJiYm94IiwiZ2V0RXNyaUJCb3giLCJ1cmxQYXJhbXMiLCJpblNSIiwib3V0U1IiLCJ3aGVyZSIsIm91dGZpZWxkcyIsImNvcnMiLCJkb25lIiwiZmFpbCIsImpxWGhyIiwidGV4dFN0YXR1cyIsImVzcmkyZ2VvIiwiZmVhdHVyZXMiLCJsb2FkLW92ZXJwYXNzIiwiZ2V0QkJveCIsIm92ZXJwYXNzUXVlcnkiLCJvdmVycGFzc1dpemFyZCIsIm92ZXJwYXNzV2l6YXJkRXhwYW5kIiwiZXhwYW5kZWRPdmVycGFzc1F1ZXJ5IiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwib3NtdG9nZW9qc29uIiwiZmxhdFByb3BlcnRpZXMiLCJlbGVtZW50cyIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwibG9jYXRlIiwic2F2ZS1nZW9qc29uIiwiY3JlYXRlc0xheWVyIiwic3RyaW5naWZ5Iiwic2F2ZUFzIiwiQmxvYiIsInNhdmUtdG9wb2pzb24iLCJ0b3BvbG9neSIsImNvbGxlY3Rpb24iLCJwcm9wZXJ0eS10cmFuc2Zvcm0iLCJzYXZlLXNoYXBlZmlsZSIsImZvbGRlciIsInBvaW50IiwicG9seWdvbiIsImxpbmUiLCJzaHB3cml0ZSIsImRvd25sb2FkIiwiZXh0ZW5kIiwiZ2V0Qm91bmRzIiwiZmMiLCJFcnJvciIsImFsb25nIiwiZXhlY3V0ZUZDIiwidHVyZiIsImFwcGx5IiwiYmV6aWVyIiwiY2VudGVyIiwiY2VudHJvaWQiLCJkZXN0aW5hdGlvbiIsImVudmVsb3BlIiwiZXhwbG9kZSIsIm1pZHBvaW50Iiwic2ltcGxpZnkiLCJ0aW4iLCJ1bmlvbiIsIndpdGhpbiIsIl9sYXllclJlbW92ZWQiLCJpbmRleCIsInNwbGljZSIsIkJvb2xlYW4iLCJpbmRleE9mIiwiTW91c2V0cmFwIiwic3RyaW5nIiwicmVtb3ZlV2hpdGVTcGFjZSIsImFycmF5Iiwic2VwYXJhdG9yIiwicHJlZml4IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwib25lcnJvciIsInNlbmQiLCJkYXRhVHlwZSIsImNvcnNTdXBwb3J0IiwiYWpheCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJyZWFkQXNBcnJheUJ1ZmZlciIsIm9ubG9hZGVuZCIsInNocCIsInRoZW4iLCJmaWxlTmFtZSIsInJlYWRBc1RleHQiLCJqc29uRnJvbVVybCIsInF1ZXJ5Iiwic3Vic3RyIiwiZm9yRWFjaCIsInBhcnQiLCJrZXkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJqb2luIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsImdldEZpbGVFeHRlbnNpb24iLCJzdyIsImdldFNvdXRoV2VzdCIsIm5lIiwiZ2V0Tm9ydGhFYXN0IiwidW5jb2xsZWN0IiwiYXJjanNvbiIsInRvR2VvSlNPTiIsIm5ld1BhcmFtcyIsIm5ld0ZDIiwieWVzIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxVQUFBLFNBQUFDLEdBbURBLE1BbERBQSxHQUFBQSxNQUNBQSxFQUFBQyxRQUFBLFFBQ0FELEVBQUFFLEtBQUEsU0FBQUMsR0FDQUEsR0FDQUgsRUFBQUksS0FBQUMsTUFBQSwwQ0FFQUwsRUFBQU0sUUFBQUgsRUFFQUksRUFBQUosRUFBQUssSUFBQUMsUUFDQVQsRUFBQUksS0FBQUMsTUFBQSwyQ0FFQUwsRUFBQVUsTUFBQUgsRUFBQUosRUFBQUssSUFHQVIsRUFBQVcsT0FBQUMsVUFHQVosRUFBQWEsSUFBQVgsT0FHQUYsRUFBQWMsVUFBQVosT0FHQUYsRUFBQWUsVUFBQWIsS0FBQSxhQUdBRixFQUFBZ0IsU0FBQVQsRUFBQSxTQUdBUCxFQUFBaUIsTUFBQUMsSUFBQWhCLE9BQ0FGLEVBQUFpQixNQUFBRSxLQUFBakIsT0FDQUYsRUFBQWlCLE1BQUFH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LGdCQUdBdFosR0FHQUQiLCJmaWxlIjoiZHJvcGNob3AuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMudmVyc2lvbiA9ICcwLjEuMSc7XG4gIGRjLmluaXQgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgaWYoIW9wdHMpIHtcbiAgICAgIGRjLnV0aWwuZXJyb3IoJ05vIG9wdGlvbnMgcHJvdmlkZWQgaW4gZHJvcGNob3AuaW5pdCgpJyk7XG4gICAgfVxuICAgIGRjLm9wdGlvbnMgPSBvcHRzO1xuXG4gICAgaWYoISQob3B0cy5pZCkubGVuZ3RoKSB7XG4gICAgICBkYy51dGlsLmVycm9yKCdFbGVtZW50IHdpdGggb3B0aW9ucy5pZCBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICB9XG4gICAgZGMuJGVsZW0gPSAkKG9wdHMuaWQpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJzXG4gICAgZGMubGF5ZXJzLnByZXBhcmUoKTtcblxuICAgIC8vIHNldHVwIG1hcFxuICAgIGRjLm1hcC5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBzZWxlY3Rpb25cbiAgICBkYy5zZWxlY3Rpb24uaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgbGF5ZXJsaXN0XG4gICAgZGMubGF5ZXJsaXN0LmluaXQoJ2xheWVybGlzdCcpO1xuXG4gICAgLy8gc2V0dXAgZHJvcHpvbmVcbiAgICBkYy5kcm9wem9uZSgkKCdib2R5JykpO1xuXG4gICAgLy8gc2V0dXAgbWVudXNcbiAgICBkYy5tZW51cy5nZW8uaW5pdCgpO1xuICAgIGRjLm1lbnVzLmxlZnQuaW5pdCgpO1xuICAgIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUuaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgZm9ybXNcbiAgICBkYy5mb3JtLmluaXQoKTtcblxuICAgIC8vIHNldHVwIGtleWJvYXJkIHNob3J0Y3V0c1xuICAgIGRjLnNob3J0Y3V0cy5pbml0KCk7XG5cbiAgICAvLyBnZXQgVVJMIGluZm9ybWF0aW9uIGlmIGl0IGV4aXN0c1xuICAgIGlmKGxvY2F0aW9uLnNlYXJjaC5sZW5ndGgpIHtcbiAgICAgIGRjLnV0aWwuZXhlY3V0ZVVybFBhcmFtcygpO1xuICAgIH1cblxuICB9O1xuXG4gIGRjLmJvb20gPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnc2hha2FsYWthJyk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBkcm9wem9uZS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRhaW5lciBlbGVtZW50IChsZXRzIGRvIGRvY3VtZW50LmJvZHkpXG4gICAqL1xuICBkYy5kcm9wem9uZSA9IGZ1bmN0aW9uKCRjb250YWluZXIpIHtcbiAgICBfZXZlbnRzKCRjb250YWluZXIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9ldmVudHMoJGNvbnRhaW5lcikge1xuICAgICRjb250YWluZXIub24oJ2RyYWdvdmVyJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgfSk7XG5cbiAgICAkY29udGFpbmVyLm9uKCdkcmFnbGVhdmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICB9KTtcblxuICAgICRjb250YWluZXIub24oJ2Ryb3AnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICAgIHZhciBmaWxlcyA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgICAgJChmaWxlcykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLnV0aWwucmVhZEZpbGUoZmlsZXNbaV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMuZm9ybSA9IGRjLmZvcm0gfHwge307XG4gIGRjLmZvcm0uaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdmb3JtOmdlbycsIGRjLmZvcm0uZ2VvKTtcbiAgICAkKGRjKS5vbignZm9ybTpmaWxlJywgZGMuZm9ybS5maWxlKTtcbiAgfTtcblxuICBkYy5mb3JtLmdlbyA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24pIHtcbiAgICBkYy5mb3JtLmNyZWF0ZShvcGVyYXRpb24sIGRjLm9wcy5nZW9bb3BlcmF0aW9uXSwgJ2dlbycpO1xuICB9O1xuXG4gIGRjLmZvcm0uZmlsZSA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24pIHtcbiAgICBkYy5mb3JtLmNyZWF0ZShvcGVyYXRpb24sIGRjLm9wcy5maWxlW29wZXJhdGlvbl0sICdmaWxlOicgKyBvcGVyYXRpb24pO1xuICB9O1xuXG4gIGRjLmZvcm0uY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgaW5mbywgdHJpZ2dlcikge1xuICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgdmFyICRodG1sID0gJCgnPGZvcm0+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0gZHJvcGNob3AtZm9ybS0nK3RyaWdnZXIpXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2Ryb3BjaG9wLWZvcm0nKVxuICAgICAgICAgIC5hdHRyKCdkYXRhJywgbmFtZSk7XG4gICAgdmFyICR0aXRsZSA9ICQoJzxoMj4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS10aXRsZScpLnRleHQobmFtZSkuYXBwZW5kVG8oJGh0bWwpO1xuICAgIHZhciAkZGVzYyA9ICQoJzxwPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLWRlc2NyaXB0aW9uJykudGV4dChpbmZvLmRlc2NyaXB0aW9uKS5hcHBlbmRUbygkaHRtbCk7XG5cbiAgICAvLyBjcmVhdGUgcGFyYW1zXG4gICAgaWYoaW5mby5wYXJhbWV0ZXJzKSB7XG4gICAgICAkKGluZm8ucGFyYW1ldGVycykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHAgPSBkYy5mb3JtLmNyZWF0ZVBhcmFtKHRoaXMpO1xuICAgICAgICBwLmFwcGVuZFRvKCRodG1sKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSBzdWJtaXQgYnV0dG9uXG4gICAgdmFyICRzdWJtaXQgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdkcm9wY2hvcC1idG4gZHJvcGNob3AtYnRuLWdyZWVuIGRyb3BjaG9wLWZvcm0tc3VibWl0JykudGV4dCgnRXhlY3V0ZScpLmF0dHIoJ2ZvcicsIG5hbWUpO1xuICAgIHZhciAkY2FuY2VsID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnZHJvcGNob3AtYnRuIGRyb3BjaG9wLWJ0bi1jYW5jZWwgZHJvcGNob3AtZm9ybS1jYW5jZWwnKS50ZXh0KCdDYW5jZWwnKS5hdHRyKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICRjYW5jZWwub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgICRodG1sLm9uKCdzdWJtaXQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vIGdldCB0aGUgcGFyYW1ldGVycyBmcm9tIHRoZSBmb3JtXG4gICAgICB2YXIgcGFyYW1ldGVycyA9IFtdO1xuICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLnNlcmlhbGl6ZUFycmF5KCk7XG4gICAgICAkKGRhdGEpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnB1c2goZGF0YVtpXS52YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ29wZXJhdGlvbjonICsgdHJpZ2dlciwgW25hbWUsIHBhcmFtZXRlcnNdKTtcbiAgICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgJGh0bWwuYXBwZW5kKCRzdWJtaXQpO1xuICAgICRodG1sLmFwcGVuZCgkY2FuY2VsKTtcblxuICAgIGRjLiRlbGVtLmFwcGVuZCgkaHRtbCk7XG4gICAgLy8gc3VibWl0IGJ1dHRvbiBuZWVkcyB0cmlnZ2VyIG9wZXJhdGlvbjpnZW8gd2l0aCBvcCBhbmQgcGFyYW1ldGVyIGFycmF5XG4gIH07XG5cbiAgZGMuZm9ybS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcjZHJvcGNob3AtZm9ybScpLnJlbW92ZSgpO1xuICB9O1xuXG4gIGRjLmZvcm0uY3JlYXRlUGFyYW0gPSBmdW5jdGlvbihwYXJhbSkge1xuICAgIHZhciAkaW5wdXQgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlcicpO1xuICAgIHZhciAkbGFiZWwgPSAkKCc8bGFiZWw+JykudGV4dChwYXJhbS5uYW1lKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXItbGFiZWwnKTtcbiAgICB2YXIgJGZpZWxkID0gZGMuZm9ybS5pbnB1dHNbcGFyYW0udHlwZV0ocGFyYW0pO1xuICAgICRmaWVsZC5hcHBlbmRUbygkbGFiZWwpO1xuICAgIGlmKHBhcmFtLmRlc2NyaXB0aW9uLmxlbmd0aCkge1xuICAgICAgJCgnPHA+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyLWRlc2NyaXB0aW9uJykuaHRtbChwYXJhbS5kZXNjcmlwdGlvbikuYXBwZW5kVG8oJGxhYmVsKTtcbiAgICB9XG4gICAgJGlucHV0LmFwcGVuZCgkbGFiZWwpO1xuICAgIHJldHVybiAkaW5wdXQ7XG4gIH07XG5cbiAgZGMuZm9ybS5pbnB1dHMgPSB7XG4gICAgbnVtYmVyOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICdudW1iZXInKVxuICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpXG4gICAgICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc2VsZWN0OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8c2VsZWN0PicpLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJChwLm9wdGlvbnMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgJG9wdCA9ICQoJzxvcHRpb24+JykudGV4dChwLm9wdGlvbnNbaV0pXG4gICAgICAgICAgICAgIC5hdHRyKCd2YWx1ZScsIHAub3B0aW9uc1tpXSk7XG4gICAgICAgICRvcHQuYXBwZW5kVG8oJGkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICB0ZXh0OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICd0ZXh0JylcbiAgICAgICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIGNoZWNrYm94OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICdjaGVja2JveCcpXG4gICAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgICAgIC5hdHRyKCd2YWx1ZScsIHAuZGVmYXVsdCk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICByYWRpbzogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGRpdj4nKS5hdHRyKCdjbGFzcycsICdyYWRpb0dyb3VwJyk7XG4gICAgICB2YXIgZ3JvdXBOYW1lID0gcC5uYW1lLnJlcGxhY2UoL1xccy9nLCAnJyk7XG4gICAgICAkKHAub3B0aW9ucykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciBvcHQgPSBwLm9wdGlvbnNbaV07XG4gICAgICAgIHZhciBvcHRJZCA9IG9wdC5yZXBsYWNlKC9cXHMvZywgJycpO1xuICAgICAgICB2YXIgJGxibCA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpXG4gICAgICAgICAgICAgIC5hdHRyKCdmb3InLCBvcHRJZCk7XG5cbiAgICAgICAgdmFyICRvcHQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAgICAgICAuYXR0cignaWQnLCBvcHRJZClcbiAgICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCBncm91cE5hbWUpXG4gICAgICAgICAgICAgIC5hZGRDbGFzcygncmFkaW8nKVxuICAgICAgICAgICAgICAudmFsKG9wdCk7XG4gICAgICAgIGlmIChvcHQgPT09IHAuZGVmYXVsdCkge1xuICAgICAgICAgICRvcHQucHJvcCgnZGVmYXVsdENoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICAkbGJsLmFwcGVuZChvcHQpO1xuICAgICAgICAkbGJsLmFwcGVuZFRvKCRpKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkaSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHN3aXRjaDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGRpdj4nKTtcbiAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgJGxibCA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgICB2YXIgJG9wdCA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgICAgICAgIC52YWwoJ3N3aXRjaC0nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXApXG4gICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkbGJsKTtcbiAgICAgICAgJGxibC5hcHBlbmQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSk7XG4gICAgICAgICRsYmwuYXBwZW5kVG8oJGkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICByZWN1cnNpdmU6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxkaXY+Jyk7XG5cbiAgICAgIHZhciAkbGJsMSA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgIHZhciAkb3B0MSA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAgICAgLnZhbCgndHJ1ZScpXG4gICAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkb3B0MS5hcHBlbmRUbygkbGJsMSk7XG4gICAgICAkbGJsMS5hcHBlbmQoJ0luZGl2aWR1YWwgZmVhdHVyZXMnKTtcblxuICAgICAgdmFyICRsYmwyID0gJCgnPGxhYmVsPicpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgdmFyICRvcHQyID0gJCgnPGlucHV0PicpXG4gICAgICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgICAgICAudmFsKCdmYWxzZScpXG4gICAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkb3B0Mi5hcHBlbmRUbygkbGJsMik7XG4gICAgICAkbGJsMi5hcHBlbmQoJ0VudGlyZSBjb2xsZWN0aW9uJyk7XG5cbiAgICAgICRsYmwxLmFwcGVuZFRvKCRpKTtcbiAgICAgICRsYmwyLmFwcGVuZFRvKCRpKTtcblxuICAgICAgcmV0dXJuICRpO1xuICAgIH1cbiAgfTtcblxuICAvLyBkYy5mb3JtLmdldFZhbHVlcyA9IGZ1bmN0aW9uKCRmb3JtKSB7XG4gIC8vICAgdmFyIHZhbHVlcyA9IFtdO1xuICAvLyAgIGNvbnNvbGUubG9nKCRmb3JtKTtcbiAgLy8gICByZXR1cm4gdmFsdWVzO1xuICAvLyB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVybGlzdCA9IHt9O1xuICBkYy5sYXllcmxpc3QuZWxlbXMgPSB7fTtcblxuICBkYy5sYXllcmxpc3QuaW5pdCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0gPSAkKCc8b2w+JykuYWRkQ2xhc3MobmFtZSk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGRjLmxheWVybGlzdC4kZWxlbSk7XG5cbiAgICAvLyBDbGlja2luZyBvbiBsYXllcmxpc3QgYnV0IG5vdCBsYXllciAoaWUgYmVsb3cgbGF5ZXJzKSBjbGVhcnMgc2VsZWN0aW9uXG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAoJChldmVudC50YXJnZXQpLmhhc0NsYXNzKG5hbWUpKSB7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGxpSGVscGVyID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci1oZWxwJylcbiAgICAgIC5odG1sKCdXZWxjb21lIHRvIDxzdHJvbmc+ZHJvcGNob3A8L3N0cm9uZz4hIEhlcmUgeW91IGNhbiBkcmFnIGFuZCBkcm9wIGZpbGVzIGFuZCB0aGV5IHdpbGwgc2hvdyB1cCBpbiB0aGUgbGF5ZXIgbGlzdCBiZWxvdy48YnI+PGJyPlRvIHRoZSBsZWZ0IHlvdSBjYW4gdXBsb2FkIGFuZCBzYXZlIHlvdXIgZmlsZXMgb3IgPGEgaHJlZj1cIi8/Z2lzdD0wOTEyOWMyMGVjMDIwYjgzYmY4NVwiPmFkZCBleGFtcGxlIGRhdGE8L2E+IG9yIHRoZSA8YSBocmVmPVwiLz9naXN0PWQwNjZiNTcyZThhOGFkMmI2ZDE2XCI+VVMgU3RhdGVzPC9hPi48YnI+PGJyPlRvIHRoZSByaWdodCB5b3VcXCdsbCBub3RpY2Ugc29tZSBnZW9zcGF0aWFsIG9wZXJhdGlvbnMgdGhhdCBiZWNvbWUgYXZhaWxhYmxlIGJhc2VkIG9uIHNlbGVjdGluZyBzcGVjaWZpYyBsYXllcnMuJyApO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGlIZWxwZXIpO1xuXG4gICAgdmFyIHRvZ2dsZUxheWVycyA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItdG9nZ2xlQWxsJylcbiAgICAgIC5odG1sKCc8bGFiZWw+PGlucHV0IGlkPVwiYWxsQ2hlY2tib3hlc1wiIHR5cGU9XCJjaGVja2JveFwiIGNoZWNrZWQ+VG9nZ2xlIGFsbCBsYXllcnM8L2xhYmVsPicpO1xuICAgIHRvZ2dsZUxheWVycy5vbignY2hhbmdlJywgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZCh0b2dnbGVMYXllcnMpO1xuXG4gICAgJChkYykub24oJ2xheWVyOmFkZGVkJywgZGMubGF5ZXJsaXN0LmFkZExheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgZGMubGF5ZXJsaXN0LnJlbW92ZUxheWVyTGlzdEl0ZW0pO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWVkJywgZGMubGF5ZXJsaXN0LnJlbmFtZSk7XG4gIH07XG5cbiAgZGMubGF5ZXJsaXN0LnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCwgbmV3TmFtZSkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5maW5kKCcubGF5ZXItbmFtZScpLnRleHQobmV3TmFtZSk7XG4gIH07XG5cbiAgLy8gdHJpZ2dlcmVkIGluIGRyb3BjaG9wLmpzXG4gIGRjLmxheWVybGlzdC5hZGRMYXllckxpc3RJdGVtID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGxheWVybGlzdEl0ZW0gPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLWVsZW1lbnQnKS5hdHRyKCdkYXRhLXN0YW1wJywgbGF5ZXIuc3RhbXApO1xuICAgIHZhciBsYXllckRpdiA9ICQoJzxkaXY+JylcbiAgICAgIC5hZGRDbGFzcygnbGF5ZXItbmFtZSBsYXllci1uZXcnKVxuICAgICAgLnRleHQobGF5ZXIubmFtZSlcbiAgICAgIC5kZWxheSgzMDAwKVxuICAgICAgLnF1ZXVlKGZ1bmN0aW9uKG5leHQpIHtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnbGF5ZXItbmV3Jyk7XG4gICAgICB9KTtcblxuICAgIHZhciBsYXllclR5cGUgPSAkKCc8c3Bhbj4nKS5hZGRDbGFzcygnbGF5ZXItdHlwZS1pbWFnZSBzcHJpdGUgc3ByaXRlLWxheWVyLScrbGF5ZXJUeXBlSWNvbihsYXllci50eXBlKSk7XG4gICAgdmFyIGNoZWNrYm94ID0gJCgnPGlucHV0PicpLmFkZENsYXNzKCdsYXllci10b2dnbGUnKS5wcm9wKHsndHlwZSc6ICdjaGVja2JveCcsICdjaGVja2VkJzogdHJ1ZX0pO1xuICAgIHZhciBkcm9wZG93biA9ICQoJzxidXR0b24gdGl0bGU9XCJNb3JlIE9wdGlvbnNcIj4nKS5hZGRDbGFzcygnbGF5ZXItYWN0aW9uIGxheWVyLWRyb3Bkb3duJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1lbGxpcHNpcy1oXCI+PC9pPicpO1xuXG4gICAgY2hlY2tib3gub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgIC8vIHRyaWdnZXIgbGF5ZXI6c2hvd1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzaG93JywgW2xheWVyXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpoaWRlJywgW2xheWVyXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsYXllckRpdi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgLy8gY2hlY2sgZm9yIGtleXMgYmVpbmcgaGVsZCBmb3Igc3BlY2lhbCBzZWxlY3Rpb25cbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAvLyBzZWxlY3QgYWxsIGxheWVyZXMgaW4gYmV0d2VlbiBwcmV2aW91cyB0YXJnZXQgYW5kIHRhcmdldFxuICAgICAgICAvLyBub3RlOiBkb24ndCB1bnNlbGVjdCBsYXllcnMgYWxyZWFkeSBzZWxlY3RlZCwganVzdCBhZGQgdG8gc2VsZWN0aW9uXG4gICAgICAgIHZhciB0b1NlbGVjdCA9IFtdO1xuICAgICAgICB2YXIgdG8gPSAkKHRoaXMpO1xuICAgICAgICB2YXIgZnJvbSA9IGRjLmxheWVybGlzdC5fbGFzdFNlbGVjdGVkO1xuICAgICAgICB2YXIgdG9Db3VudCwgZnJvbUNvdW50O1xuXG4gICAgICAgIGlmICghZnJvbSkgcmV0dXJuO1xuXG4gICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgdmFyIGNoZWNrID0gJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgdmFyIHRvU3RhbXAgPSB0by5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgdmFyIGZyb21TdGFtcCA9IGZyb20ucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIGlmIChjaGVjayA9PT0gdG9TdGFtcCkgdG9Db3VudCA9IGU7XG4gICAgICAgICAgaWYgKGNoZWNrID09PSBmcm9tU3RhbXApIGZyb21Db3VudCA9IGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0b0NvdW50ID4gZnJvbUNvdW50KSB7XG4gICAgICAgICAgLy8gbG9vcCB1cFxuICAgICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICBpZiAobCA+PSBmcm9tQ291bnQgJiYgbCA8PSB0b0NvdW50ICkge1xuICAgICAgICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIoJCh0aGlzKS5maW5kKCcubGF5ZXItbmFtZScpLCBkYy5sYXllcnMubGlzdFskKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICBpZiAobCA8IGZyb21Db3VudCAmJiBsID49IHRvQ291bnQgKSB7XG4gICAgICAgICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RMYXllcigkKHRoaXMpLmZpbmQoJy5sYXllci1uYW1lJyksIGRjLmxheWVycy5saXN0WyQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5KSB7XG4gICAgICAgIC8vIGFkZC9yZW1vdmUgc2VsZWN0ZWQgbGF5ZXIgdG8gY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSgkKHRoaXMpLCBsYXllcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjbGVhciBzZWxlY3Rpb24gYW5kIHNlbGVjdCB0YXJnZXRcbiAgICAgICAgZGMubGF5ZXJsaXN0LmNsZWFyU2VsZWN0aW9uKCQodGhpcyksIGxheWVyKTtcbiAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdFRvZ2dsZSgkKHRoaXMpLCBsYXllcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsYXllckRpdi5vbignY29udGV4dG1lbnUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZGMubWVudXMubGF5ZXJDb250ZXh0TWVudS5jcmVhdGVMYXllckNvbnRleHRNZW51KFxuICAgICAgICB0aGlzLCBldmVudC5vZmZzZXRYLCBldmVudC5wYWdlWVxuICAgICAgKTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICBkcm9wZG93bi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZGMubWVudXMubGF5ZXJDb250ZXh0TWVudS5jcmVhdGVMYXllckNvbnRleHRNZW51KFxuICAgICAgICAvLyBJIGhhdmUgbm8gaWRlYSB3aHkgd2UgbmVlZCB0byBzdWJ0cmFjdCA0MHB4IGJ1dCB0aGF0J3Mgd2hhdFxuICAgICAgICAvLyBpdCB0YWtlcyB0byBtYWtlIGl0IHBvc2l0aW9uIGNvcnJlY3RseS4uLlxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGF5ZXItbmFtZScpLCBldmVudC5wYWdlWCAtIDQwLCBldmVudC5wYWdlWVxuICAgICAgKTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIGRpc2FibGUgZnVydGhlciBjbGljayBoYW5kbGVyc1xuICAgIH0pO1xuXG4gICAgbGF5ZXJEaXYub24oJ2RibGNsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGRjLm9wcy5maWxlLmV4dGVudC5leGVjdXRlKCk7XG4gICAgfSk7XG5cbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChsYXllckRpdik7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoY2hlY2tib3gpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGxheWVyVHlwZSk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoZHJvcGRvd24pO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQobGF5ZXJsaXN0SXRlbSk7XG5cbiAgICBkYy5sYXllcmxpc3QuZWxlbXNbbGF5ZXIuc3RhbXBdID0gbGF5ZXJsaXN0SXRlbTtcblxuICAgIC8vIGhpZGUgaGVscGVyIHRleHRcbiAgICAkKCcubGF5ZXItaGVscCcpLmhpZGUoKTtcbiAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuc2hvdygpO1xuXG4gICAgLy8gc2VuZCBvdXQgbGF5ZXJsaXN0OmFkZGVkIHNpZ25hbFxuICAgICQoZGMpLnRyaWdnZXIoJ2xheWVybGlzdDphZGRlZCcsIGxheWVyRGl2KTtcbiAgfTtcblxuICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIgPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgaWYgKCEkaXRlbS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9XG4gIH07XG4gIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUgPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgaWYgKCRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAkaXRlbS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnVuc2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRpdGVtLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6c2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfVxuICAgIGRjLmxheWVybGlzdC5fbGFzdFNlbGVjdGVkID0gJGl0ZW07XG4gIH07XG4gIGRjLmxheWVybGlzdC5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnNlbGVjdEFsbCA9IGZ1bmN0aW9uKCkge1xuICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIoJCh0aGlzKS5maW5kKCcubGF5ZXItbmFtZScpLCBkYy5sYXllcnMubGlzdFskKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgIH0pO1xuICB9O1xuICBkYy5sYXllcmxpc3QuY2hlY2tBbGwgPSBmdW5jdGlvbihtdXN0QmVTZWxlY3RlZCkge1xuICAgIGZvciAodmFyIGkgaW4gZGMubGF5ZXJzLmxpc3QpIHtcbiAgICAgIHZhciBsYXllciA9IGRjLmxheWVycy5saXN0W2ldO1xuICAgICAgaWYgKG11c3RCZVNlbGVjdGVkICYmICFkcm9wY2hvcC5zZWxlY3Rpb24uaXNTZWxlY3RlZChsYXllcikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBlbGVtVG9nZ2xlKGRjLmxheWVycy5saXN0W2ldLnN0YW1wLCB0cnVlKTtcbiAgICB9XG4gIH07XG4gIGRjLmxheWVybGlzdC51bmNoZWNrQWxsID0gZnVuY3Rpb24obXVzdEJlU2VsZWN0ZWQpIHtcbiAgICBmb3IgKHZhciBpIGluIGRjLmxheWVycy5saXN0KSB7XG4gICAgICB2YXIgbGF5ZXIgPSBkYy5sYXllcnMubGlzdFtpXTtcbiAgICAgIGlmIChtdXN0QmVTZWxlY3RlZCAmJiAhZHJvcGNob3Auc2VsZWN0aW9uLmlzU2VsZWN0ZWQobGF5ZXIpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZWxlbVRvZ2dsZShsYXllci5zdGFtcCwgZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxDaGVja2JveGVzJykuY2hlY2tlZCkge1xuICAgICAgZGMubGF5ZXJsaXN0LmNoZWNrQWxsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRjLmxheWVybGlzdC51bmNoZWNrQWxsKCk7XG4gICAgfVxuICB9O1xuICBkYy5sYXllcmxpc3QucmVtb3ZlTGF5ZXJMaXN0SXRlbSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5mYWRlT3V0KDMwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIGRjLmxheWVybGlzdC5lbGVtc1tzdGFtcF07XG5cbiAgICAgIC8vIHNob3cgaGVscGVyIHRleHQgaWYgbm8gbGF5ZXJzIGV4aXN0XG4gICAgICAvLyB0aGlzIGhhcyB0byBjaGVjayBpbnNpZGUgc2luY2UgdGhlcmUgaXMgYSAzMDAgbXMgZGVsYXkgd2l0aCB0aGUgZmFkZVxuICAgICAgaWYgKCQoJy5sYXllci1lbGVtZW50JykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICQoJy5sYXllci1oZWxwJykuc2hvdygpO1xuICAgICAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuaGlkZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGxheWVyVHlwZUljb24odHlwZSkge1xuICAgIHZhciBpY29uO1xuICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICBjYXNlICdGZWF0dXJlQ29sbGVjdGlvbic6XG4gICAgICAgIGljb24gPSAnZmVhdHVyZWNvbGxlY3Rpb24nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8UG9pbnQ+JzpcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlQb2ludD4nOlxuICAgICAgICBpY29uID0gJ3BvaW50JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPExpbmVTdHJpbmc+JzpcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPic6XG4gICAgICAgIGljb24gPSAnbGluZSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxQb2x5Z29uPic6XG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpUG9seWdvbj4nOlxuICAgICAgICBpY29uID0gJ3BvbHlnb24nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPic6XG4gICAgICAgIGljb24gPSAnZ2VvbSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWNvbiA9ICdkZWZhdWx0JztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBpY29uO1xuICB9XG5cbiAgZnVuY3Rpb24gZWxlbVRvZ2dsZShzdGFtcCwgYm9vbCkge1xuICAgICQoJy5sYXllci1lbGVtZW50W2RhdGEtc3RhbXA9JytzdGFtcCsnXScpXG4gICAgICAuZmluZCgnLmxheWVyLXRvZ2dsZScpXG4gICAgICAucHJvcCgnY2hlY2tlZCcsIGJvb2wpXG4gICAgICAudHJpZ2dlcignY2hhbmdlJyk7IC8vIHNldHMgb2ZmIGEgY2hhaW4gcmVhY3Rpb25cbiAgfVxuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVycyA9IHt9O1xuICBkYy5sYXllcnMubGlzdCA9IHt9O1xuXG4gIGRjLmxheWVycy5wcmVwYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2ZpbGU6YWRkZWQnLCBkYy5sYXllcnMuYWRkKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlJywgZGMubGF5ZXJzLnJlbW92ZSk7XG4gICAgJChkYykub24oJ2xheWVyOmR1cGxpY2F0ZScsIGRjLmxheWVycy5kdXBsaWNhdGUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWUnLCBkYy5sYXllcnMucmVuYW1lKTtcbiAgfTtcblxuLyoqXG4gKiBBZGQgYSBsYXllciB0byB0aGUgbGF5ZXJzIGxpc3QgYW5kIHRyaWdnZXIgbGF5ZXI6YWRkZWQgZm9yIHN1YnNjcmliZXJzIHRvIHBpY2sgdXAuXG4gKiBAcGFyYW0ge29iamVjdH0gZXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSBmaWxlIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGUgYmxvYiB0byBiZSBjb252ZXJ0ZWQgd2l0aCBKU09OLnBhcnNlKClcbiAqL1xuICBkYy5sYXllcnMuYWRkID0gZnVuY3Rpb24oZXZlbnQsIG5hbWUsIGJsb2IsIGx0eXBlLCB1cmwpIHtcbiAgICBpZiAoYmxvYi50eXBlID09PSBcIlRvcG9sb2d5XCIpIHtcbiAgICAgIGJsb2IgPSB0b3BvanNvbi5jbGllbnQuZmVhdHVyZShibG9iLCBibG9iLm9iamVjdHNbT2JqZWN0LmtleXMoYmxvYi5vYmplY3RzKVswXV0pO1xuICAgIH1cblxuICAgIHZhciBsID0gZGMubGF5ZXJzLm1ha2VMYXllcihuYW1lLCBibG9iKTtcbiAgICBkYy5sYXllcnMubGlzdFtsLnN0YW1wXSA9IGw7XG5cbiAgICBpZiAobHR5cGUgJiYgdXJsKSB7XG4gICAgICBkYy5sYXllcnMubGlzdFtsLnN0YW1wXS5sdHlwZSA9IGx0eXBlO1xuICAgICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0udXJsID0gdXJsO1xuICAgIH1cblxuICAgIGRjLm5vdGlmeSgnc3VjY2VzcycsICc8c3Ryb25nPicrbC5uYW1lKyc8L3N0cm9uZz4gaGFzIGJlZW4gYWRkZWQhJywgMzUwMCk7XG5cbiAgICAvLyB0cmlnZ2VyIGxheWVyOmFkZGVkXG4gICAgJChkYykudHJpZ2dlcignbGF5ZXI6YWRkZWQnLCBbbF0pO1xuXG4gICAgLy8gVXBkYXRlIFVSTCwgaWYgYXBwbGljYWJsZVxuICAgIGlmIChsdHlwZSAmJiB1cmwpIHtcbiAgICAgIGRjLnV0aWwudXBkYXRlU2VhcmNoKCk7XG4gICAgfVxuXG4gIH07XG5cbi8qKlxuICogUmVtb3ZlIGEgbGF5ZXIsIHdoaWNoIHRyaWdnZXJzIGxheWVyOnJlbW92ZWQgZm9yIHRoZSByZXN0IG9mIHRoZSBhcHBcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYXllciBzdGFtcFxuICovXG4gIGRjLmxheWVycy5yZW1vdmUgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICAvLyB0cmlnZ2VyIGxheWVyOnJlbW92ZWRcbiAgICB0cnkge1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlZCcsIFtzdGFtcF0pO1xuICAgICAgZGMubm90aWZ5KCdpbmZvJywgJzxzdHJvbmc+JyArIGRjLmxheWVycy5saXN0W3N0YW1wXS5uYW1lICsgJzwvc3Ryb25nPiBoYXMgYmVlbiByZW1vdmVkLicpO1xuICAgICAgZGVsZXRlIGRjLmxheWVycy5saXN0W3N0YW1wXTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSByZW1vdmluZyB0aGUgbGF5ZXIuJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuXG4gIGRjLmxheWVycy5kdXBsaWNhdGUgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICB2YXIgbHlyID0gZGMubGF5ZXJzLmxpc3Rbc3RhbXBdO1xuICAgIC8vIG5lZWQgdG8gY3JlYXRlIG5ldyBsYXllciBzbyB3ZSBjYW4gZ2V0IGEgdW5pcWUgTC5zdGFtcCgpXG4gICAgZGMubGF5ZXJzLmFkZCh7fSwgJ2NvcHlfJytseXIubmFtZSwgbHlyLnJhdyk7XG4gIH07XG5cbiAgZGMubGF5ZXJzLnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllciwgbmV3TmFtZSkge1xuICAgIC8vIHJlbmFtZSBpbiBsYXllciBvYmplY3RcbiAgICBkYy5sYXllcnMubGlzdFtsYXllci5zdGFtcF0ubmFtZSA9IG5ld05hbWU7XG5cbiAgICAvLyByZW5hbWUgaW4gbGF5ZXJsaXN0XG4gICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVuYW1lZCcsIFtsYXllci5zdGFtcCwgbmV3TmFtZV0pO1xuICB9O1xuXG4gIGRjLmxheWVycy5tYWtlTGF5ZXIgPSBmdW5jdGlvbihuYW1lLCBqc29uKSB7XG4gICAgdmFyIGdlb2pzb24gPSBqc29uO1xuICAgIC8vIGlmIChqc29uLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicgJiYganNvbi5mZWF0dXJlcy5sZW5ndGggPT09IDEpIHtcbiAgICAvLyAgIGdlb2pzb24gPSBkYy51dGlsLnVuY29sbGVjdChqc29uKTtcbiAgICAvLyB9XG5cbiAgICB2YXIgZmwgPSBMLm1hcGJveC5mZWF0dXJlTGF5ZXIoZ2VvanNvbik7XG4gICAgdmFyIGxheWVyID0ge1xuICAgICAgbmFtZTogZGMudXRpbC5yZW1vdmVGaWxlRXh0ZW5zaW9uKG5hbWUpLFxuICAgICAgc3RhbXA6IEwuc3RhbXAoZmwpLFxuICAgICAgcmF3OiBnZW9qc29uLFxuICAgICAgdHlwZTogZ2V0VHlwZShnZW9qc29uKSxcbiAgICAgIGZlYXR1cmVsYXllcjogZmwsXG4gICAgICBkYXRlQWRkZWQ6IG5ldyBEYXRlKClcbiAgICB9O1xuICAgIHJldHVybiBsYXllcjtcbiAgfTtcblxuICBmdW5jdGlvbiBnZXRUeXBlKGdqKSB7XG4gICAgaWYgKGdqLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgIHJldHVybiAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2oudHlwZSArICc8JyArIGdqLmdlb21ldHJ5LnR5cGUgKyAnPic7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubWFwID0ge307XG5cbiAgZGMubWFwLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBkYy5tYXAuJGVsZW0gPSAkKCc8ZGl2PicpLnByb3AoJ2lkJywgJ2Ryb3BjaG9wLW1hcCcpLmFkZENsYXNzKCdtYXAnKTtcbiAgICBkYy4kZWxlbS5hcHBlbmQoZGMubWFwLiRlbGVtKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgZGMubWFwLnJlbW92ZUxheWVyKTtcblxuICAgIF9tYWtlTWFwKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gX21ha2VNYXAoKSB7XG4gICAgZGMubWFwLnRva2VuID0gTC5tYXBib3guYWNjZXNzVG9rZW4gPSAncGsuZXlKMUlqb2ljM1p0WVhSMGFHVjNjeUlzSW1FaU9pSlZNVWxVUjB4ckluMC5Od2VTX0F0dGpzd3RONXdSdVdDU05BJztcbiAgICBkYy5tYXAubSA9IEwubWFwYm94Lm1hcCgnZHJvcGNob3AtbWFwJywgbnVsbCwge1xuICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLFxuICAgICAgd29ybGRDb3B5SnVtcDogdHJ1ZVxuICAgIH0pLnNldFZpZXcoWzAsMF0sIDMpO1xuXG4gICAgLy8gc2V0cyB0aGUgbG9jYXRpb24gb2YgdGhlIHpvb20gYnV0dG9ucyB0byB0aGUgdG9wIHJpZ2h0XG4gICAgTC5jb250cm9sLnpvb20oe1xuICAgICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIEwubWFwYm94Lmdlb2NvZGVyQ29udHJvbCgnbWFwYm94LnBsYWNlcycsIHtcbiAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICB2YXIgYmFzZUxheWVycyA9IHtcbiAgICAgIFwiTWFwYm94IFN0cmVldHNcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guc3RyZWV0cycpLFxuICAgICAgXCJNYXBib3ggT3V0ZG9vcnNcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3gub3V0ZG9vcnMnKSxcbiAgICAgIFwiTWFwYm94IExpZ2h0XCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LmxpZ2h0JyksXG4gICAgICBcIk1hcGJveCBEYXJrXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LmRhcmsnKSxcbiAgICAgIFwiTWFwYm94IFNhdGVsbGl0ZVwiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5zYXRlbGxpdGUnKVxuICAgIH07XG5cbiAgICBiYXNlTGF5ZXJzWydNYXBib3ggU3RyZWV0cyddLmFkZFRvKGRjLm1hcC5tKTtcbiAgICAvLyBzZXRzIGxvY2F0aW9uIG9mIGJhc2UgbGF5ZXIgY29udHJvbCB0byB0aGUgYm90dG9tIHJpZ2h0XG4gICAgTC5jb250cm9sLmxheWVycyhiYXNlTGF5ZXJzLCB7fSwge1xuICAgICAgcG9zaXRpb246ICdib3R0b21yaWdodCcsXG4gICAgICBjb2xsYXBzZWQ6IGZhbHNlXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgZGMubWFwLmxheWVyZ3JvdXAgPSBMLm1hcGJveC5mZWF0dXJlTGF5ZXIoKTtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6YWRkZWQnLCBkYy5tYXAuYWRkTGF5ZXIpO1xuICAgICQoZGMpLm9uKCdsYXllcjpoaWRlJywgZGMubWFwLmhpZGVMYXllcik7XG4gICAgJChkYykub24oJ2xheWVyOnNob3cnLCBkYy5tYXAuc2hvd0xheWVyKTtcblxuICAgIC8vIC8vIG15IGxvY2F0aW9uIGFzIGxheWVyXG4gICAgLy8gdmFyIGdlb2xvY2F0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZW9sb2NhdGUnKTtcblxuICAgICQoZGMubWFwLm0pLm9uKCdsb2NhdGlvbmZvdW5kJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGRhdGEgPSBlLm9yaWdpbmFsRXZlbnQ7XG4gICAgICBkYy5tYXAubS5maXRCb3VuZHMoZGF0YS5ib3VuZHMpO1xuXG4gICAgICB2YXIgbHlyID0ge1xuICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAgICAgICBjb29yZGluYXRlczogW2RhdGEubGF0bG5nLmxuZywgZGF0YS5sYXRsbmcubGF0XVxuICAgICAgICB9LFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgJ3RpdGxlJzogJ1RoZXJlIFlvdSBBcmUnLFxuICAgICAgICAgICdtYXJrZXItY29sb3InOiAnIzIwNzE3OCcsXG4gICAgICAgICAgJ21hcmtlci1zeW1ib2wnOiAnaGVhcnQnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbJ3lvdXIgbG9jYXRpb24nLCBseXJdKTtcbiAgICB9KTtcblxuICAgICQoZGMubWFwLm0pLm9uKCdsb2NhdGlvbmVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gZmluZGluZyB5b3VyIGxvY2F0aW9uLicsIDMwMDApO1xuICAgIH0pO1xuXG4gICAgLy8gLy8gT25jZSB3ZSd2ZSBnb3QgYSBwb3NpdGlvbiwgem9vbSBhbmQgY2VudGVyIHRoZSBtYXBcbiAgICAvLyAvLyBvbiBpdCwgYW5kIGFkZCBhIHNpbmdsZSBtYXJrZXIuXG4gICAgLy8gdGhpcy5fbWFwLm9uKCdsb2NhdGlvbmZvdW5kJywgZnVuY3Rpb24oZSkge1xuICAgIC8vICAgdGhpcy5fbWFwLmZpdEJvdW5kcyhlLmJvdW5kcyk7XG5cblxuICAgIC8vICAgbXlMYXllci5zZXRHZW9KU09OKHtcbiAgICAvLyAgICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgIC8vICAgICBnZW9tZXRyeToge1xuICAgIC8vICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgLy8gICAgICAgY29vcmRpbmF0ZXM6IFtlLmxhdGxuZy5sbmcsIGUubGF0bG5nLmxhdF1cbiAgICAvLyAgICAgfSxcbiAgICAvLyAgICAgcHJvcGVydGllczoge1xuICAgIC8vICAgICAgICd0aXRsZSc6ICdUaGVyZSBZb3UgQXJlJyxcbiAgICAvLyAgICAgICAnbWFya2VyLWNvbG9yJzogJyMyMDcxNzgnLFxuICAgIC8vICAgICAgICdtYXJrZXItc3ltYm9sJzogJ2hlYXJ0J1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9KTtcblxuICAgIC8vICAgLy8gQW5kIGhpZGUgdGhlIGdlb2xvY2F0aW9uIGJ1dHRvblxuICAgIC8vICAgLy9nZW9sb2NhdGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChnZW9sb2NhdGUpO1xuICAgIC8vIH0uYmluZCh0aGlzKSk7XG5cbiAgICAvLyAvLyBJZiB0aGUgdXNlciBjaG9vc2VzIG5vdCB0byBhbGxvdyB0aGVpciBsb2NhdGlvblxuICAgIC8vIC8vIHRvIGJlIHNoYXJlZCwgZGlzcGxheSBhbiBlcnJvciBtZXNzYWdlLlxuICAgIC8vIHRoaXMuX21hcC5vbignbG9jYXRpb25lcnJvcicsIGZ1bmN0aW9uKCkge1xuICAgIC8vICAgZ2VvbG9jYXRlLmlubmVySFRNTCA9ICdQb3NpdGlvbiBjb3VsZCBub3QgYmUgZm91bmQnO1xuICAgIC8vIH0pO1xuXG5cbiAgfVxuXG4gIGRjLm1hcC5jb3VudCA9IDA7XG5cbiAgZGMubWFwLmFkZExheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGZsID0gbGF5ZXIuZmVhdHVyZWxheWVyO1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZExheWVyKGZsKTtcblxuICAgIC8vIGNyZWF0ZSBwb3B1cCB0YWJsZSBmb3IgZWFjaCBmZWF0dXJlXG4gICAgZmwuZWFjaExheWVyKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICB2YXIgY29udGVudCA9ICc8dGFibGUgY2xhc3M9XCJkcm9wY2hvcC10YWJsZVwiPjx0cj48dGg+UHJvcGVydHk8L3RoPjx0aD5EYXRhPC90aD48L3RyPic7XG5cbiAgICAgIGlmIChsYXllci5mZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBsYXllci5mZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICBjb250ZW50ICs9ICc8dHI+PHRkPjxzdHJvbmc+JyArIHByb3AgKyAnPC9zdHJvbmc+PC90ZD48dGQ+JyArIGxheWVyLmZlYXR1cmUucHJvcGVydGllc1twcm9wXSArICc8L3RkPjwvdHI+JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudCArPSAnPHA+VGhlcmUgYXJlIG5vIHByb3BlcnRpZXMgc2V0IGZvciB0aGlzIGZlYXR1cmUuPC9wPic7XG4gICAgICB9XG4gICAgICBjb250ZW50ICs9ICc8L3RhYmxlPic7XG5cbiAgICAgIGxheWVyLmJpbmRQb3B1cChMLnBvcHVwKHtcbiAgICAgICAgbWF4V2lkdGg6IDQ1MCxcbiAgICAgICAgbWF4SGVpZ2h0OiAyMDAsXG4gICAgICAgIGF1dG9QYW5QYWRkaW5nOiBbNDUsIDQ1XSxcbiAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGNob3AtcG9wdXAnXG4gICAgICB9LCBsYXllcikuc2V0Q29udGVudChjb250ZW50KSk7XG4gICAgfSk7XG5cbiAgfTtcblxuICBkYy5tYXAuaGlkZUxheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAucmVtb3ZlTGF5ZXIobGF5ZXIuZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICBkYy5tYXAuc2hvd0xheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkTGF5ZXIobGF5ZXIuZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICBkYy5tYXAucmVtb3ZlTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5yZW1vdmVMYXllcihkYy5sYXllcnMubGlzdFtzdGFtcF0uZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5tZW51cyA9IGRjLm1lbnVzIHx8IHt9O1xuICBkYy5tZW51cy5nZW8gPSBkYy5tZW51cy5nZW8gfHwge307XG5cbiAgZGMubWVudXMuZ2VvLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBidWlsZCBvcHMuZ2VvIGNvbnRhaW5lclxuICAgIHZhciBnZW9Db250YWluZXIgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdvcGVyYXRpb25zLWdlbycpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChnZW9Db250YWluZXIpO1xuXG4gICAgLy8gd2lyZSB1cCBzaWduYWwgaGFuZGxlcnNcbiAgICAkKGRjKS5vbignbGF5ZXI6c2VsZWN0ZWQnLCBkYy5tZW51cy5nZW8uZ2VvQ2hlY2spO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMubWVudXMuZ2VvLmdlb0NoZWNrKTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmdlbycsIGRjLm1lbnVzLmdlby5nZW9FeGVjdXRlKTtcblxuICAgIC8vIGNyZWF0ZSBnZW8gYnV0dG9ucyAmIGZvcm1zXG4gICAgZm9yICh2YXIgZ2VvT3AgaW4gZGMub3BzLmdlbykge1xuICAgICAgdmFyIGdlb0J0biA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ29wZXJhdGlvbiBvcGVyYXRpb24tZ2VvIG9wZXJhdGlvbi1pbmFjdGl2ZScpXG4gICAgICAgIC5odG1sKCc8aDQ+JyArIGdlb09wICsgJzwvaDQ+PHA+JyArIGRjLm9wcy5nZW9bZ2VvT3BdLmRlc2NyaXB0aW9uICsgJzwvcD4nKVxuICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICAuYXR0cignZGF0YS1vcGVyYXRpb24nLCBnZW9PcCk7XG4gICAgICBnZW9CdG4ub24oJ2NsaWNrJywgX2hhbmRsZUJ0bkNsaWNrKTtcblxuICAgICAgZ2VvQ29udGFpbmVyLmFwcGVuZChnZW9CdG4pO1xuICAgIH1cbiAgfTtcblxuXG4gIC8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cbiAgLyogaWdub3JpbmcgdGhlc2UgZnVuY3Rpb25zIGluIGpzaGludCBiZWNhdXNlIHdlIGFyZSBnZXR0aW5nXG4gIGFuIHVuZWNlc3Nhcnkgc3RyaWN0IHZpb2xhdGlvbiB3YXJuaW5nLCBidXQgb3VyIHVzYWdlIG9mIGB0aGlzYFxuICBpcyBwcm9wZXIgaGVyZS4gKi9cbiAgZnVuY3Rpb24gX2hhbmRsZUJ0bkNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgb3BlcmF0aW9uID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9wZXJhdGlvbicpO1xuICAgIC8vIGlmIG9wZXJhdGlvbiByZXF1aXJlcyBubyBwYXJhbWV0ZXJzLCBkb24ndCByZW5kZXIgYSBmb3JtXG4gICAgaWYgKCFkYy5vcHMuZ2VvW29wZXJhdGlvbl0ucGFyYW1ldGVycykge1xuICAgICAgJChkYykudHJpZ2dlcignb3BlcmF0aW9uOmdlbycsIFtvcGVyYXRpb24sIGRjLnNlbGVjdGlvbi5saXN0XSk7XG4gICAgLy8gb3RoZXJ3aXNlIHJlbmRlciB0aGUgZm9ybVxuICAgIH0gZWxzZSB7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmdlbycsIFtvcGVyYXRpb25dKTtcbiAgICB9XG4gIH1cbiAgLyoganNoaW50IGlnbm9yZTplbmQgKi9cblxuICAvLyBTb3J0IHR1cmYgb3BlcmF0aW9ucyBieSBhdmFpbGFibGlsaXR5IGFuZCBhbHBoYWJldGljYWxseVxuICBmdW5jdGlvbiBfc29ydEdlbygpIHtcblxuICAgIC8vIEdldCBhbGwgb2YgdGhlIHR1cmYgYnV0dG9ucyBhbmQgc29ydCB0aGVtIGFscGhhYmV0aWNhbGx5XG4gICAgdmFyIGFscGhhID0gJCgnLm9wZXJhdGlvbi1nZW8nKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiAoJChiKS5kYXRhKCdvcGVyYXRpb24nKSA8ICQoYSkuZGF0YSgnb3BlcmF0aW9uJykpID8gMSA6IC0xO1xuICAgIH0pO1xuXG4gICAgLy8gR3JhYiBhbGwgdGhlIGFjdGl2ZSBidXR0b25zIGFuZCByZWFwcGVuZCB0aGVtXG4gICAgYWxwaGEuZmlsdGVyKGZ1bmN0aW9uKGksIGQpIHtcbiAgICAgIGlmICghKCQoZCkucHJvcCgnZGlzYWJsZWQnKSkpIHsgcmV0dXJuIGQ7IH1cbiAgICB9KS5hcHBlbmRUbygnLm9wZXJhdGlvbnMtZ2VvJyk7XG5cbiAgICAvLyBHcmFiIGFsbCB0aGUgaW5hY3RpdmUgYnV0dG9ucyBhbmQgcmVhcHBlbmQgdGhlbVxuICAgIGFscGhhLmZpbHRlcihmdW5jdGlvbihpLCBkKSB7XG4gICAgICBpZiAoJChkKS5wcm9wKCdkaXNhYmxlZCcpKSB7IHJldHVybiBkOyB9XG4gICAgfSkuYXBwZW5kVG8oJy5vcGVyYXRpb25zLWdlbycpO1xuXG4gICAgLy8gU2Nyb2xsIHRvIHRoZSB0b3AgdG8ga2VlcCB0aGluZ3MgbmljZVxuICAgICQoJy5vcGVyYXRpb25zLWdlbycpLnNjcm9sbFRvcCgwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgdHVyZiBmdW5jdGlvbiBiYXNlZCBvbiBidXR0b24gb3BlcmF0aW9uIGNsaWNrLlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3JpZ2luYWwgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhpcyBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0aW9uIHRvIGJlIGV4ZWN1dGVkIHZpYSB0dXJmXG4gICAqIEBwYXJhbSB7YXJyYXl9IHNlcmllcyBvZiBwYXJhbWV0ZXJzIHRvIGJlIGFwcGxpZWQgdG8gdHVyZiBvcGVyYXRpb25cbiAgICovXG4gIGRjLm1lbnVzLmdlby5nZW9FeGVjdXRlID0gZnVuY3Rpb24oZXZlbnQsIG9wZXJhdGlvbiwgcGFyYW1ldGVycykge1xuICAgIHZhciBwcmVwID0gZGMubWVudXMuZ2VvLnByZXBhcmVUdXJmUGFyYW1zKG9wZXJhdGlvbiwgcGFyYW1ldGVycyk7XG4gICAgdmFyIHJlc3VsdCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGRjLm9wcy5nZW9bb3BlcmF0aW9uXS5leGVjdXRlKHByZXAub3B0aW9ucyk7XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnVGhhdCBvcGVyYXRpb24gaXNuXFwndCBwb3NzaWJsZS4gVHJ5IGNoYW5naW5nIHRoZSBvcmRlciBvZiB5b3VyIHNlbGVjdGlvbi4nKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW3ByZXAubmFtZSwgcmVzdWx0XSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgcGFyYW1ldGVycyBmb3IgZXhlY3V0aW5nIHdpdGhpbiBhIHR1cmYgZnVuY3Rpb24gdXNpbmcgLmFwcGx5KCkgLSByZXR1cm5zIGFuIGFycmF5XG4gICAqIEBwYXJhbSB7YXJyYXl9IG9wdGlvbnMgZnJvbSB0aGUgdXNlciBwYXNzZWQgZnJvbSB0aGUgb3JpZ2luYWwgZXZlbnQgdHJpZ2dlclxuICAgKi9cbiAgZGMubWVudXMuZ2VvLnByZXBhcmVUdXJmUGFyYW1zID0gZnVuY3Rpb24ob3BlcmF0aW9uLCBwYXJhbXMpIHtcbiAgICB2YXIgZGF0YSA9IHt9O1xuICAgIGRhdGEub3B0aW9ucyA9IFtdO1xuXG4gICAgdmFyIGdlb21zID0gW107XG4gICAgdmFyIG5hbWVBcnJheSA9IFtdO1xuICAgIC8vIGdldCBnZW9tZXRyeSBhcnJheSBmcm9tIHNlbGVjdGlvblxuICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgaWYgKCQuaW5BcnJheSgnc3dpdGNoLScgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcCwgcGFyYW1zKSA9PT0gLTEpIHtcbiAgICAgICAgZ2VvbXMucHVzaChkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2VvbXMudW5zaGlmdChkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcpO1xuICAgICAgfVxuICAgICAgbmFtZUFycmF5LnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSk7XG4gICAgfSk7XG5cbiAgICAvLyBtZXJnZSBwYXJhbXMgd2l0aCBvcHRpb25zIGFycmF5XG4gICAgZGF0YS5vcHRpb25zID0gJC5tZXJnZShnZW9tcywgcGFyYW1zKTtcblxuICAgIC8vIGNyZWF0ZSBuYW1lIGFycmF5XG4gICAgZGF0YS5uYW1lID0gZGMudXRpbC5jb25jYXQobmFtZUFycmF5LCAnXycsIG9wZXJhdGlvbik7XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICBkYy5tZW51cy5nZW8uZ2VvQ2hlY2sgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICAvLyBjaGVjayBzZWxlY3Rpb24gY291bnQgdnMgb3BlcmF0aW9uIG1pbi9tYXhcbiAgICBmb3IgKHZhciBvIGluIGRjLm9wcy5nZW8pIHtcbiAgICAgIHZhciBvcCA9IGRjLm9wcy5nZW9bb107XG4gICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID4gb3AubWF4RmVhdHVyZXMgfHwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoIDwgb3AubWluRmVhdHVyZXMpIHtcbiAgICAgICAgdHVybkl0T2ZmKG8pO1xuICAgICAgICAvLyBkb24ndCBnbyBhbnkgZnVydGhlclxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICAvLyBjaGVjayBvcGVyYXRpb24gYWdhaW5zdCBlYWNoIHNlbGVjdGlvbiBkYXRhIHR5cGVcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGg7IHgrKykge1xuICAgICAgICAgIHZhciBzZWwgPSBkYy5zZWxlY3Rpb24ubGlzdFt4XTtcblxuICAgICAgICAgIC8vIGlmIHRoZSBzZWxlY3Rpb24gdHlwZSBpcyBpbiB0aGUgYXJyYXksIG1hcmsgaXQgYXMgYWN0aXZlIVxuICAgICAgICAgIGlmICgkLmluQXJyYXkoc2VsLnR5cGUsIG9wLnJlcXVpcmVtZW50cy50eXBlcykgPiAtMSB8fCBvcC5yZXF1aXJlbWVudHMuZ2VuZXJhbEZlYXR1cmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHR1cm5JdE9uKG8pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0dXJuSXRPZmYobyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0dXJuSXRPZmYob3ApIHtcbiAgICAgIHZhciBidG4gPSAkKCdbZGF0YS1vcGVyYXRpb249Jysgb3AgKyddJyk7XG4gICAgICBidG4uYWRkQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICAgYnRuLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHVybkl0T24ob3ApIHtcbiAgICAgIHZhciBidG4gPSAkKCdbZGF0YS1vcGVyYXRpb249Jysgb3AgKyddJyk7XG4gICAgICBidG4ucmVtb3ZlQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICAgYnRuLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIH1cblxuICAgIC8vIFNvcnQgdGhlIGxpc3RcbiAgICBfc29ydEdlbygpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm1lbnVzID0gZGMubWVudXMgfHwge307XG4gIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUgPSBkYy5tZW51cy5sYXllckNvbnRleHRNZW51IHx8IHt9O1xuXG4gIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFJlbW92ZSBvcGVuIG1lbnVzXG4gICAgJCgnaHRtbCcpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUucmVtb3ZlTGF5ZXJDb250ZXh0TWVudXMoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBHZW5lcmF0ZSBsYXllciBjb250ZXh0IG1lbnUgZG9tIGVsZW1lbnQgKGJvdW5kIHRvIHJpZ2h0LWNsaWNrIG9uIGxheWVybGlzdClcbiAgZGMubWVudXMubGF5ZXJDb250ZXh0TWVudS5jcmVhdGVMYXllckNvbnRleHRNZW51ID0gZnVuY3Rpb24oJGxheWVyTmFtZURpdiwgeFBvcywgeVBvcykge1xuICAgIGlmICghKCRsYXllck5hbWVEaXYgaW5zdGFuY2VvZiBqUXVlcnkpKSB7XG4gICAgICAkbGF5ZXJOYW1lRGl2ID0gJCgkbGF5ZXJOYW1lRGl2KTtcbiAgICB9XG5cbiAgICAvLyBDbG9zZSBhbnkgYWxyZWFkeS1vcGVuIGNvbnRleHRtZW51c1xuICAgIGRjLm1lbnVzLmxheWVyQ29udGV4dE1lbnUucmVtb3ZlTGF5ZXJDb250ZXh0TWVudXMoKTtcblxuICAgIC8vIFNlbGVjdCByaWdodC1jbGlja2VkIGxheWVyLlxuICAgIHZhciBsYXllciA9ICRsYXllck5hbWVEaXYucGFyZW50KCk7XG4gICAgdmFyIGx5ckRhdGEgPSBkYy5sYXllcnMubGlzdFtsYXllci5hdHRyKCdkYXRhLXN0YW1wJyldO1xuXG4gICAgLy8gU2VsZWN0IGxheWVyIGlmIHVuc2VsZWN0ZWRcbiAgICBpZiAoIShkcm9wY2hvcC5zZWxlY3Rpb24uaXNTZWxlY3RlZChseXJEYXRhKSkpIHtcbiAgICAgICRsYXllck5hbWVEaXYudHJpZ2dlcignY2xpY2snKTtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgbGVmdC1jbGljayBjb250ZXh0LW1lbnVcbiAgICB2YXIgbWVudSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2NvbnRleHQtbWVudScpO1xuXG4gICAgdmFyIG1lbnVMaXN0ID0gJCgnPHVsPicpO1xuICAgIG1lbnUuYXBwZW5kKG1lbnVMaXN0KTtcblxuICAgIC8vIHBvcHVsYXRlIGNvbnRleHQtbWVudVxuICAgIHZhciBtZW51SXRlbXMgPSB7XG4gICAgICAvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG4gICAgICAndGl0bGUxJzogJ0xheWVyJyxcbiAgICAgICdyZW5hbWUnOiBkYy5vcHMuZmlsZVsncmVuYW1lJ10sXG4gICAgICAnZHVwbGljYXRlJzogZGMub3BzLmZpbGVbJ2R1cGxpY2F0ZSddLFxuICAgICAgJ3JlbW92ZSc6IGRjLm9wcy5maWxlWydyZW1vdmUnXSxcbiAgICAgICd0aXRsZTInOiAnR2VvJyxcbiAgICAgICdleHRlbnQnOiBkYy5vcHMuZmlsZVsnZXh0ZW50J10sXG4gICAgICAnZXhwYW5kJzogZGMub3BzLmZpbGVbJ2V4cGFuZCddLFxuICAgICAgJ2NvbWJpbmUnOiBkYy5vcHMuZmlsZVsnY29tYmluZSddLFxuICAgICAgLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgbWVudUl0ZW0gaW4gbWVudUl0ZW1zKSB7XG4gICAgICB2YXIgaXRlbSA9IG1lbnVJdGVtc1ttZW51SXRlbV07XG4gICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnIHx8IGl0ZW0gaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgbWVudUxpc3QuYXBwZW5kKCQoJzxsaSBjbGFzcz1cInRpdGxlXCI+PGg0PicgKyBpdGVtICsgJzwvaDQ+PC9saT4nKSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIGZpbGVCdG4gPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uJylcbiAgICAgICAgLmh0bWwoJzxkaXYgY2xhc3M9XCJpY29uXCI+JyArIGl0ZW0uaWNvbiArICc8L2Rpdj48ZGl2IGNsYXNzPVwiZGVzY3JpcHRpb25cIj4nICsgaXRlbS5kZXNjcmlwdGlvbiArICc8L2Rpdj4nKVxuICAgICAgICAuYXR0cignZGF0YS1vcGVyYXRpb24nLCBtZW51SXRlbSlcbiAgICAgICAgLmF0dHIoJ2RhdGEtdG9vbHRpcCcsIGl0ZW0uZGVzY3JpcHRpb24pO1xuXG4gICAgICAvLyBkaXNhYmxlIGludmFsaWQgb3BlcmF0aW9uc1xuICAgICAgaWYgKFxuICAgICAgICAoaXRlbS5taW5GZWF0dXJlcyA+IGRyb3BjaG9wLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCkgfHxcbiAgICAgICAgKGl0ZW0ubWF4RmVhdHVyZXMgPCBkcm9wY2hvcC5zZWxlY3Rpb24ubGlzdC5sZW5ndGgpXG4gICAgICApIHtcbiAgICAgICAgZmlsZUJ0bi5hZGRDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICB9XG4gICAgICBmaWxlQnRuLm9uKCdjbGljaycsIF9oYW5kbGVCdG5DbGljayk7XG4gICAgICBtZW51TGlzdC5hcHBlbmQoZmlsZUJ0bik7XG4gICAgfVxuXG5cbiAgICAvLyBtYWtlIHN1cmUgdG8gc2V0IHZpc2liaWxpdHk6aGlkZGVuXG4gICAgbWVudS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAvLyBhcHBlbmQgdG8gRE9NXG4gICAgbGF5ZXIucGFyZW50KCkuYXBwZW5kKG1lbnUpO1xuXG4gICAgLy8gY2FsY3VsYXRlIHRoZSBoZWlnaHQsIHNldCBwb3NpdGlvblxuICAgIHZhciBwb3NpdGlvbiA9IF9jYWxjdWxhdGVNZW51TG9jYXRpb24oKTtcbiAgICBtZW51LmNzcyhwb3NpdGlvbik7XG5cbiAgICAvLyByZW1vdmUgdmlzaWJpbGl0eTpoaWRkZW5cbiAgICBtZW51LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgIGZ1bmN0aW9uIF9jYWxjdWxhdGVNZW51TG9jYXRpb24oKSB7XG4gICAgICAvLyBidWZmZXIgZnJvbSB0aGUgZWRnZSBvZiB0aGUgd2luZG93IChpbiBwaXhlbHMpXG4gICAgICB2YXIgYnVmZmVyID0gMTA7XG5cbiAgICAgIC8vIGZpcnN0IGdldCB0aGUgd2luZG93IGhlaWdodFxuICAgICAgdmFyIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcblxuICAgICAgLy8gdGhlbiBnZXQgdGhlIG1lbnUgaGVpZ2h0XG4gICAgICB2YXIgbWVudUhlaWdodCA9IG1lbnUuaGVpZ2h0KCk7XG5cbiAgICAgIC8vIGNoZWNrIHRvIG1ha2Ugc3VyZSBmcm9tIHRoZSB0b3Agb2Ygd2luZG93IHRvIHRoZSBib3R0b20gb2YgbWVudVxuICAgICAgLy8gaXMgbGFyZ2VyIHRoYW4gdGhlIHdpbmRvdyBoZWlnaHRcbiAgICAgIGlmICggeVBvcyArIG1lbnVIZWlnaHQgPCB3aW5kb3dIZWlnaHQgKSB7XG4gICAgICAgIC8vIHJldHVybiBub3JtYWxseVxuICAgICAgICByZXR1cm4ge3RvcDogeVBvcywgbGVmdDogeFBvc307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiBpdCBpc24ndCwgZmlndXJlIG91dCBieSBob3cgbXVjaCwgYW5kIHJldHVyblxuICAgICAgICAvLyB5IHBvc2l0aW9uIHdpdGggc2FmZSBjb250ZXh0IHNwYWNlIGFuZCBidWZmZXIgZnJvbSB0aGUgd2luZG93XG4gICAgICAgIHZhciBkaWZmZXJlbmNlID0gKHlQb3MgKyBtZW51SGVpZ2h0KSAtIHdpbmRvd0hlaWdodDtcbiAgICAgICAgcmV0dXJuIHt0b3A6ICh5UG9zIC0gZGlmZmVyZW5jZSAtIGJ1ZmZlciksIGxlZnQ6IHhQb3N9O1xuICAgICAgfVxuXG4gICAgfVxuXG4gIH07XG5cbiAgLy8gUmVtb3ZlIGFueSBvcGVuIGNvbnRleHQtbWVudXMgZnJvbSBET01cbiAgZGMubWVudXMubGF5ZXJDb250ZXh0TWVudS5yZW1vdmVMYXllckNvbnRleHRNZW51cyA9IGZ1bmN0aW9uKCkge1xuICAgICQoJy5jb250ZXh0LW1lbnUnKS5yZW1vdmUoKTtcbiAgfTtcblxuICAvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG4gIC8qIGlnbm9yaW5nIHRoZXNlIGZ1bmN0aW9ucyBpbiBqc2hpbnQgYmVjYXVzZSB3ZSBhcmUgZ2V0dGluZ1xuICBhbiB1bmVjZXNzYXJ5IHN0cmljdCB2aW9sYXRpb24gd2FybmluZywgYnV0IG91ciB1c2FnZSBvZiBgdGhpc2BcbiAgaXMgcHJvcGVyIGhlcmUuICovXG4gIGZ1bmN0aW9uIF9oYW5kbGVCdG5DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIG9wZXJhdGlvbiA9ICQodGhpcykuYXR0cignZGF0YS1vcGVyYXRpb24nKTtcbiAgICB0cnkge1xuICAgICAgZGMub3BzLmZpbGVbb3BlcmF0aW9uXS5leGVjdXRlKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoaXMgb3BlcmF0aW9uIGRvZXNuXFwndCBleGlzdCEnKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH07XG4gIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm1lbnVzID0gZGMubWVudXMgfHwge307XG4gIGRjLm1lbnVzLmxlZnQgPSBkYy5tZW51cy5sZWZ0IHx8IHt9O1xuXG4gIGRjLm1lbnVzLmxlZnQuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIHdpcmUgdXAgc2lnbmFsIGhhbmRsZXJzXG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtZ2lzdCcsIGRjLm9wcy5maWxlWydsb2FkLWdpc3QnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLXVybCcsIGRjLm9wcy5maWxlWydsb2FkLXVybCddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtb3ZlcnBhc3MnLCBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtYXJjZ2lzJywgZGMub3BzLmZpbGVbJ2xvYWQtYXJjZ2lzJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6cmVuYW1lJywgZGMub3BzLmZpbGUucmVuYW1lLmNhbGxiYWNrKTtcblxuICAgIGRjLm1lbnVzLmxlZnQuc2V0dXAgPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdpbXBvcnQnLFxuICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1wbHVzXCI+PC9pPicsXG4gICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAndXBsb2FkJyxcbiAgICAgICAgICAnbG9hZC11cmwnLFxuICAgICAgICAgICdsb2FkLWdpc3QnLFxuICAgICAgICAgICdsb2FkLW92ZXJwYXNzJyxcbiAgICAgICAgICAnbG9hZC1hcmNnaXMnLFxuICAgICAgICAgICdsb2NhdGlvbidcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1NhdmUnLFxuICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1mbG9wcHktb1wiPjwvaT4nLFxuICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgJ3NhdmUtZ2VvanNvbicsXG4gICAgICAgICAgJ3NhdmUtdG9wb2pzb24nLFxuICAgICAgICAgICdzYXZlLXNoYXBlZmlsZSdcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgICdpbmZvJ1xuICAgIF07XG5cbiAgICAvLyBzZXR1cCBvcHMgZmlsZVxuICAgIHZhciBsZWZ0TWVudSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLW1lbnUtbGVmdCcpO1xuICAgIHZhciBzZXR1cCA9IGRjLm1lbnVzLmxlZnQuc2V0dXA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldHVwLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYWN0aW9uID0gc2V0dXBbaV07XG4gICAgICBpZiAodHlwZW9mIHNldHVwW2ldICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBpZihkYy5vcHMuZmlsZVthY3Rpb25dLnR5cGUgPT09ICdicmVhaycpIHtcbiAgICAgICAgICB2YXIgJGJyZWFrU3BhY2UgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdtZW51LWFjdGlvbi1icmVhaycpO1xuICAgICAgICAgIGxlZnRNZW51LmFwcGVuZCgkYnJlYWtTcGFjZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGVmdE1lbnUuYXBwZW5kKGJ1aWxkTWVudUJ1dHRvbihhY3Rpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBidWlsZCBhIGNvbGxhcHNlYWJsZSBtZW51IFwiYnV0dG9uXCJcbiAgICAgICAgdmFyIGNvbGxhcHNlQnRuID0gJCgnPGRpdj4nKVxuICAgICAgICAgIC5hZGRDbGFzcygnbWVudS1hY3Rpb24gbWVudS1jb2xsYXBzZScpXG4gICAgICAgICAgLmh0bWwoc2V0dXBbaV0uaWNvbik7XG4gICAgICAgIGlmIChzZXR1cFtpXS5uYW1lID09PSAnaW1wb3J0JykgY29sbGFwc2VCdG4uYWRkQ2xhc3MoJ21lbnUtaW1wb3J0Jyk7XG5cbiAgICAgICAgdmFyIGNvbGxhcHNlSW5uZXIgPSAkKCc8ZGl2PicpXG4gICAgICAgICAgLmFkZENsYXNzKCdtZW51LWNvbGxhcHNlLWlubmVyJyk7XG5cbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggYWN0aW9uIGFuZCBidWlsZCBhIGJ1dHRvbiBmb3IgaXQsIGp1c3QgbGlrZSBhYm92ZSxcbiAgICAgICAgLy8gYnV0IGFwcGVuZCBpdCB0byB0aGUgbWVudS1jb2xsYXBzZS1pbm5lciBlbGVtZW50XG4gICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgc2V0dXBbaV0uYWN0aW9ucy5sZW5ndGg7IGErKykge1xuICAgICAgICAgIHZhciBhY3RuID0gc2V0dXBbaV0uYWN0aW9uc1thXTtcbiAgICAgICAgICBjb2xsYXBzZUlubmVyLmFwcGVuZChidWlsZE1lbnVCdXR0b24oYWN0bikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbGxhcHNlQnRuLmFwcGVuZChjb2xsYXBzZUlubmVyKTtcblxuICAgICAgICAvLyBhcHBlbmQgdGhlIGVudGlyZSBjb2xsYXBzZUJ0biB0byB0aGUgbGVmdE1lbnVcbiAgICAgICAgbGVmdE1lbnUuYXBwZW5kKGNvbGxhcHNlQnRuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZGMuJGVsZW0uYXBwZW5kKGxlZnRNZW51KTtcblxuICAgIGZ1bmN0aW9uIGJ1aWxkTWVudUJ1dHRvbihhY3Rpb24pIHtcbiAgICAgIHZhciBidXR0b24gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdtZW51LWFjdGlvbicpXG4gICAgICAgIC5odG1sKGRjLm9wcy5maWxlW2FjdGlvbl0uaWNvbiB8fCAnIScpXG4gICAgICAgIC5hdHRyKCdkYXRhLW9wZXJhdGlvbicsIGFjdGlvbilcbiAgICAgICAgLmF0dHIoJ2RhdGEtdG9vbHRpcCcsIGRjLm9wcy5maWxlW2FjdGlvbl0uZGVzY3JpcHRpb24pO1xuICAgICAgICBpZiAoZGMub3BzLmZpbGVbYWN0aW9uXS50eXBlID09PSAnaW5mbycpIGJ1dHRvbi5hZGRDbGFzcygnZHJvcGNob3AtaW5mbycpO1xuICAgICAgYnV0dG9uLm9uKCdjbGljaycsIF9oYW5kbGVCdG5DbGljayk7XG4gICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgfTtcblxuICAvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG4gIC8qIGlnbm9yaW5nIHRoZXNlIGZ1bmN0aW9ucyBpbiBqc2hpbnQgYmVjYXVzZSB3ZSBhcmUgZ2V0dGluZ1xuICBhbiB1bmVjZXNzYXJ5IHN0cmljdCB2aW9sYXRpb24gd2FybmluZywgYnV0IG91ciB1c2FnZSBvZiBgdGhpc2BcbiAgaXMgcHJvcGVyIGhlcmUuICovXG4gIGZ1bmN0aW9uIF9oYW5kbGVCdG5DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIG9wZXJhdGlvbiA9ICQodGhpcykuYXR0cignZGF0YS1vcGVyYXRpb24nKTtcbiAgICB0cnkge1xuICAgICAgZGMub3BzLmZpbGVbb3BlcmF0aW9uXS5leGVjdXRlKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoaXMgb3BlcmF0aW9uIGRvZXNuXFwndCBleGlzdCEnKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH07XG4gIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5ub3RpZnkgPSBmdW5jdGlvbih0eXBlLCB0ZXh0LCB0aW1lKSB7XG4gICAgdmFyIG5vdGUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdub3RpZmljYXRpb24nKVxuICAgICAgLmFkZENsYXNzKHR5cGUpXG4gICAgICAuaHRtbCh0ZXh0KTtcblxuICAgIC8vIGB0aW1lYCBjYW4gZXF1YWwgJ2Nsb3NlJyBpbiBvcmRlciB0byBjcmVhdGUgYSBjbG9zZSBidXR0b25cbiAgICBpZiAodGltZSA9PT0gJ2Nsb3NlJykge1xuXG4gICAgICB2YXIgJGNsb3NlID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbm90aWZpY2F0aW9uLWNsb3NlJylcbiAgICAgICAgLnByb3AoJ3R5cGUnLCAnYnV0dG9uJylcbiAgICAgICAgLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIj48L2k+Jyk7XG5cbiAgICAgICRjbG9zZS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgICQobm90ZSkuYXBwZW5kKCRjbG9zZSk7XG4gICAgICAkKGRjLiRlbGVtKS5hcHBlbmQobm90ZSk7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICAkKGRjLiRlbGVtKS5hcHBlbmQobm90ZSk7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIG5vdGUucmVtb3ZlKCk7XG4gICAgICB9LCB0aW1lIHx8IDMwMDApO1xuXG4gICAgfVxuXG4gICAgXG5cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMub3BzID0gZGMub3BzIHx8IHt9O1xuXG4gIGRjLm9wcy5maWxlID0ge1xuXG4gICAgLy9cbiAgICAvLyBJbXBvcnQgRGF0YVxuICAgIC8vL1xuICAgIHVwbG9hZDoge1xuICAgICAgZGVzY3JpcHRpb246ICdVcGxvYWQgZnJvbSB5b3VyIGNvbXB1dGVyICguZ2VvanNvbiknLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdXBsb2FkXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gaW5zcGlyZWQgZnJvbSBnZW9qc29uLmlvXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvZ2VvanNvbi5pby9ibG9iL2doLXBhZ2VzL3NyYy91aS9maWxlX2Jhci5qcyNMMzkwXG4gICAgICAgIHZhciAkYmxpbmRJbnB1dCA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgICAgICAuYXR0cigndHlwZScsICdmaWxlJylcbiAgICAgICAgICAgICAgLmF0dHIoJ211bHRpcGxlJywgJ3RydWUnKVxuICAgICAgICAgICAgICAuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpXG4gICAgICAgICAgICAgIC5jc3MoJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJylcbiAgICAgICAgICAgICAgLmNzcygnaGVpZ2h0JywgJzAnKVxuICAgICAgICAgICAgICAub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBmaWxlcyA9IHRoaXMuZmlsZXM7XG4gICAgICAgICAgICAgICAgJChmaWxlcykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgICAgICBkYy51dGlsLnJlYWRGaWxlKGZpbGVzW2ldKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkYmxpbmRJbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGJsaW5kSW5wdXQpO1xuICAgICAgICAkYmxpbmRJbnB1dC5jbGljaygpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAnbG9hZC11cmwnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0ltcG9ydCBmaWxlIGZyb20gYSBVUkwnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtbGlua1wiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VybCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidVUkwnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnaHR0cDovLycsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC11cmwnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICB2YXIgdXJsID0gcGFyYW1ldGVyc1swXTtcbiAgICAgICAgZGMudXRpbC54aHIodXJsLCBkYy5vcHMuZmlsZVtuYW1lXS5jYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIC8vIGdldCBmaWxlbmFtZSBiYXNlZCBvbiB0aGUgZW5kIG9mIHRoZSB1cmwgLSBub3Qgc3VyZSBpZiB0aGlzIGlzIHN1c3RhaW5hYmxlXG4gICAgICAgICAgdmFyIG5hbWUgPSB4aHIucmVzcG9uc2VVUkwuc3Vic3RyaW5nKHhoci5yZXNwb25zZVVSTC5sYXN0SW5kZXhPZignLycpKzEpO1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbbmFtZSwgZGF0YSwgJ3VybCcsIHhoci5yZXNwb25zZVVSTF0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcmV0cmlldmUgR2lzdC4gUGxlYXNlIGNoZWNrIHlvdXIgVVJMJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtZ2lzdCc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0IGZpbGVzIGZyb20gR2lzdCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1naXRodWJcIj48L2k+JyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdnaXN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J0dpc3QgSUQgb3IgVVJMJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHBzOi8vZ2lzdC5naXRodWIuY29tLydcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLWdpc3QnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICB2YXIgZ2lzdCA9IHBhcmFtZXRlcnNbMF0uc3BsaXQoJy8nKVtwYXJhbWV0ZXJzWzBdLnNwbGl0KCcvJykubGVuZ3RoLTFdO1xuICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vZ2lzdHMvJyArIGdpc3Q7XG4gICAgICAgIGRjLnV0aWwueGhyKHVybCwgZGMub3BzLmZpbGVbbmFtZV0uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICBmb3IgKHZhciBmIGluIGRhdGEuZmlsZXMpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gZGF0YS5maWxlc1tmXS5maWxlbmFtZTtcbiAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbbmFtZSwgSlNPTi5wYXJzZShkYXRhLmZpbGVzW2ZdLmNvbnRlbnQpLCAnZ2lzdCcsIHhoci5yZXNwb25zZVVSTC5zcGxpdCgnLycpW3hoci5yZXNwb25zZVVSTC5zcGxpdCgnLycpLmxlbmd0aCAtIDFdXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZGMubm90aWZ5KCdzdWNjZXNzJywgJ1N1Y2Nlc2Z1bGx5IHJldHJpZXZlZCBnaXN0JylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCByZXRyaWV2ZSBHaXN0LiBQbGVhc2UgY2hlY2sgeW91ciBVUkwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnbG9hZC1hcmNnaXMnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ1F1ZXJ5IGFuIEFyY0dJUyBTZXJ2ZXIgRmVhdHVyZSBTZXJ2aWNlJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWdsb2JlXCI+PC9pPicsXG4gICAgICBfdGVtcDogeydsYXllck5hbWUnOiAnYXJjanNvbid9LFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2ZlYXR1cmUgc2VydmljZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdFbnRlciBVUkwgdG8gQXJjR0lTIEZlYXR1cmUgU2VydmljZSAoZXguIGh0dHA6Ly9zYW1wbGVzZXJ2ZXI2LmFyY2dpc29ubGluZS5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvSHVycmljYW5lcy9NYXBTZXJ2ZXIvMCknLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnaHR0cDovL3NhbXBsZXNlcnZlcjYuYXJjZ2lzb25saW5lLmNvbS9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9IdXJyaWNhbmVzL01hcFNlcnZlci8wJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3doZXJlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Egd2hlcmUgY2xhdXNlIGZvciB0aGUgcXVlcnkgZmlsdGVyLiBBbnkgbGVnYWwgU1FMIHdoZXJlIGNsYXVzZSBvcGVyYXRpbmcgb24gdGhlIGZpZWxkcyBpbiB0aGUgbGF5ZXIgaXMgYWxsb3dlZC4nLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnMT0xJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3JlcXVlc3QgdHlwZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdzZWxlY3QgSlNPTlAgaWYgeW91IHJlY2VpdmUgY3Jvc3Mtb3JpZ2luIHJlc291cmNlIHNoYXJpbmcgZXJyb3JzJyxcbiAgICAgICAgICB0eXBlOiAncmFkaW8nLFxuICAgICAgICAgIGRlZmF1bHQ6ICdDT1JTJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ0NPUlMnLCAnSlNPTlAnXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2xpbWl0IHRvIG1hcCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdvbmx5IGxvYWQgZmVhdHVyZXMgd2l0aGluIGN1cnJlbnQgbWFwIHZpZXcnLFxuICAgICAgICAgIHR5cGU6ICdjaGVja2JveCdcblxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1hcmNnaXMnXSk7XG4gICAgICB9LFxuICAgICAgY2hlY2tKc29ucDogZnVuY3Rpb24ocGFyYW1ldGVycykge1xuICAgICAgICBpZiAocGFyYW1ldGVyc1syXSA9PT0gJ0pTT05QJykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtYXJjZ2lzJ10uX3RlbXAubGF5ZXJOYW1lID0gcGFyYW1ldGVyc1swXTtcbiAgICAgICAgdmFyIGJib3ggPSAnLTE4MCwtOTAsMTgwLDkwJztcbiAgICAgICAgaWYgKHBhcmFtZXRlcnNbM10pIHtcbiAgICAgICAgICBiYm94ID0gZGMudXRpbC5nZXRFc3JpQkJveCgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1cmwgPSBwYXJhbWV0ZXJzWzBdKycvcXVlcnkvJztcbiAgICAgICAgdmFyIHVybFBhcmFtcyA9IHtcbiAgICAgICAgICBmOiAnanNvbicsXG4gICAgICAgICAgaW5TUjogNDMyNixcbiAgICAgICAgICBvdXRTUjogNDMyNixcbiAgICAgICAgICBnZW9tZXRyeTogYmJveCxcbiAgICAgICAgICB3aGVyZTogcGFyYW1ldGVyc1sxXSxcbiAgICAgICAgICBvdXRmaWVsZHM6ICcqJ1xuICAgICAgICB9O1xuICAgICAgICB2YXIgY29ycyA9IGRjLm9wcy5maWxlWydsb2FkLWFyY2dpcyddLmNoZWNrSnNvbnAocGFyYW1ldGVycyk7XG4gICAgICAgIGRjLnV0aWwuZ2V0KHVybCwgdXJsUGFyYW1zLCBjb3JzKVxuICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGRjLm9wcy5maWxlWydsb2FkLWFyY2dpcyddLmNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZhaWwoZnVuY3Rpb24oanFYaHIsIHRleHRTdGF0dXMsIGVycikge1xuICAgICAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICAgICAgZGMubm90aWZ5KCdFcnJvcicsIHRleHRTdGF0dXMsIGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICB2YXIgZ2VvanNvbiA9IGRjLnV0aWwuZXNyaTJnZW8oZGF0YSk7XG4gICAgICAgIGlmIChkYXRhLmZlYXR1cmVzLmxlbmd0aDwxKSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ05vIGZlYXR1cmVzIGZvdW5kIGluIHlvdXIgcXVlcnkuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtkYy5vcHMuZmlsZVsnbG9hZC1hcmNnaXMnXS5fdGVtcC5sYXllck5hbWUsIGdlb2pzb25dKTtcbiAgICAgICAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnRm91bmQgPHN0cm9uZz4nICsgZGF0YS5mZWF0dXJlcy5sZW5ndGggKyAnIGZlYXR1cmVzPC9zdHJvbmc+IGZyb20gdGhlIEFyY0dJUyBTZXJ2aWNlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtb3ZlcnBhc3MnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ1F1ZXJ5IHRoZSBPdmVycGFzcyBBUEknLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdGVybWluYWxcIj48L2k+JyxcbiAgICAgIF90ZW1wOiB7fSxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdxdWVyeScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidFbnRlciBhIHNlYXJjaCBxdWVyeSBpbiB0aGUgb3ZlcnBhc3MtdHVyYm8gd2l6YXJkIHN5bnRheC4gTGVhcm4gbW9yZSBhYm91dCA8YSBocmVmPVwiaHR0cDovL3dpa2kub3BlbnN0cmVldG1hcC5vcmcvd2lraS9PdmVycGFzc190dXJiby9XaXphcmRcIiB0YXJnZXQ9XCJfYmxhbmtcIj50aGUgc3VwcG9ydGVkIGZlYXR1cmVzPC9hPi4nLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnYW1lbml0eT1iYXInXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnbGF5ZXIgbmFtZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidOYW1lIG9mIHRoZSBsYXllciBhZGRlZCBpZiByZXN1bHRzIGFyZSBmb3VuZC4nLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnb3ZlcnBhc3NfbGF5ZXJfbmFtZSdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtb3ZlcnBhc3MnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICAvLyBzZXQgbGF5ZXIgbmFtZSB0byBfdGVtcCBmb3IgbGF0ZXIgdXNhZ2VcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5fdGVtcC5sYXllck5hbWUgPSBwYXJhbWV0ZXJzWzFdOyAvLyB0aGlzIGlzIHVnbHlcblxuICAgICAgICAvLyBidWlsZCB0aGUgcXVlcnkgd2l0aCBib3VuZGluZyBib3hcbiAgICAgICAgdmFyIGJib3ggPSBkYy51dGlsLmdldEJCb3goKTtcbiAgICAgICAgdmFyIG92ZXJwYXNzUXVlcnkgPSBvdmVycGFzc1dpemFyZChwYXJhbWV0ZXJzWzBdKTtcbiAgICAgICAgaWYgKG92ZXJwYXNzUXVlcnkgPT09IGZhbHNlKVxuICAgICAgICAgIHJldHVybiBkYy5ub3RpZnkoJ2Vycm9yJywgJ0NhblxcJ3QgY3JlYXRlIG92ZXJwYXNzIHF1ZXJ5IGZvciB0aGlzIHNlYXJjaCBpbnB1dC4nKTtcbiAgICAgICAgb3ZlcnBhc3NXaXphcmRFeHBhbmQob3ZlcnBhc3NRdWVyeSwgYmJveCwgZnVuY3Rpb24oZXJyLCBleHBhbmRlZE92ZXJwYXNzUXVlcnkpIHtcbiAgICAgICAgICBpZiAoZXJyKVxuICAgICAgICAgICAgcmV0dXJuIGRjLm5vdGlmeSgnZXJyb3InLCAnRXJyb3Igd2hpbGUgZXhwYW5kaW5nIG92ZXJwYXNzIHF1ZXJ5OiAnICsgZXJyKTtcbiAgICAgICAgICBkYy51dGlsLnhocignaHR0cDovL292ZXJwYXNzLWFwaS5kZS9hcGkvaW50ZXJwcmV0ZXI/ZGF0YT0nK2VuY29kZVVSSUNvbXBvbmVudChleHBhbmRlZE92ZXJwYXNzUXVlcnkpLCBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLmNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIHZhciBnZW9qc29uID0gb3NtdG9nZW9qc29uKGRhdGEsIHtcbiAgICAgICAgICAgIGZsYXRQcm9wZXJ0aWVzOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKCFkYXRhLmVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ05vIGVsZW1lbnRzIGZvdW5kIGluIHlvdXIgcXVlcnkuJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5fdGVtcC5sYXllck5hbWUsIGdlb2pzb25dKTtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnc3VjY2VzcycsICdGb3VuZCA8c3Ryb25nPicgKyBkYXRhLmVsZW1lbnRzLmxlbmd0aCArICcgZWxlbWVudHM8L3N0cm9uZz4gZnJvbSB0aGUgT3ZlcnBhc3MgQVBJJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHF1ZXJ5IHRoZSBPdmVycGFzcyBBUEknKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBsb2NhdGlvbjoge1xuICAgICAgZGVzY3JpcHRpb246ICdBZGQgeW91ciBsb2NhdGlvbiBhcyBhIGxheWVyJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWNyb3NzaGFpcnNcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIW5hdmlnYXRvci5nZW9sb2NhdGlvbikge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnR2VvbG9jYXRpb24gaXMgbm90IGF2YWlsYWJsZSBvbiB0aGlzIGJyb3dzZXIuJywgNDAwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubWFwLm0ubG9jYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgICAvL1xuICAgIC8vIEV4cG9ydCBEYXRhXG4gICAgLy9cbiAgICAnc2F2ZS1nZW9qc29uJzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhdmUgYXMgR2VvSlNPTicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1maWxlLWNvZGUtb1wiPjwvaT4nLFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcpO1xuICAgICAgICAgIHZhciB0aXRsZSA9ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICcuZ2VvanNvbic7XG4gICAgICAgICAgc2F2ZUFzKG5ldyBCbG9iKFtjb250ZW50XSwge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCdcbiAgICAgICAgICB9KSwgdGl0bGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdzYXZlLXRvcG9qc29uJzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhdmUgYXMgVG9wb0pTT04nLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtb2JqZWN0LXVuZ3JvdXBcIj48L2k+JyxcbiAgICAgIGNyZWF0ZXNMYXllcjogZmFsc2UsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICB0b3BvanNvbi50b3BvbG9neSh7XG4gICAgICAgICAgICAgIGNvbGxlY3Rpb246IGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhd1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAncHJvcGVydHktdHJhbnNmb3JtJzogZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmZWF0dXJlLnByb3BlcnRpZXM7XG4gICAgICAgICAgICB9fSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHZhciB0aXRsZSA9ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICcudG9wb2pzb24nO1xuICAgICAgICAgIHNhdmVBcyhuZXcgQmxvYihbY29udGVudF0sIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnXG4gICAgICAgICAgfSksIHRpdGxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnc2F2ZS1zaGFwZWZpbGUnOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBTaGFwZWZpbGUnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZmlsZVwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgZm9sZGVyOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVzOiB7XG4gICAgICAgICAgICAgICAgcG9pbnQ6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfcG9pbnQnLFxuICAgICAgICAgICAgICAgIHBvbHlnb246ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfcG9seScsXG4gICAgICAgICAgICAgICAgbGluZTogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19saW5lJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2hwd3JpdGUuZG93bmxvYWQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3LCBvcHRpb25zKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnRXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBkb3dubG9hZGluZyB0aGUgc2hhcGVmaWxlLicgKyBlcnIpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZVxuICAgIH0sXG5cblxuICAgIC8vXG4gICAgLy8gTGF5ZXIgT3B0aW9uc1xuICAgIC8vXG4gICAgZXh0ZW50OiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVmlldyBleHRlbnQgb2YgbGF5ZXJzJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWdsb2JlXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoIWRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCkge1xuICAgICAgICAgIC8vIGV4dGVudCBvZiBlbnRpcmUgbGF5ZXIgbGlzdCBpZiBub3RoaW5nIHNlbGVjdGVkXG4gICAgICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGRjLm1hcC5sYXllcmdyb3VwLmdldEJvdW5kcygpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBvdGhlcndpc2UgYnVpbGQgdGhlIGJvdW5kcyBiYXNlZCBvbiBzZWxlY3RlZCBsYXllcnNcbiAgICAgICAgICB2YXIgYm91bmRzO1xuICAgICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgdmFyIGZsID0gZGMuc2VsZWN0aW9uLmxpc3RbbF0uZmVhdHVyZWxheWVyO1xuICAgICAgICAgICAgaWYoIWwpIGJvdW5kcyA9IGZsLmdldEJvdW5kcygpO1xuICAgICAgICAgICAgZWxzZSBib3VuZHMuZXh0ZW5kKGZsLmdldEJvdW5kcygpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBkYy5tYXAubS5maXRCb3VuZHMoYm91bmRzKTtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfSxcblxuICAgIGV4cGFuZDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbnZlcnQgRmVhdHVyZUNvbGxlY3Rpb24gaW50byBzZXBhcmF0ZSBmZWF0dXJlcycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1leHBhbmRcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgdmFyIGZjID0gZGMuc2VsZWN0aW9uLmxpc3RbMF07XG4gICAgICAgICAgaWYgKGZjLnJhdy50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAkKGZjLnJhdy5mZWF0dXJlcykuZWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZmMubmFtZSArIGNvdW50ICsgJ18nICsgZmMucmF3LmZlYXR1cmVzW2ZdLmdlb21ldHJ5LnR5cGUsIGZjLnJhdy5mZWF0dXJlc1tmXV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1RoYXQgbmVlZHMgdG8gYmUgYSBmZWF0dXJlIGNvbGxlY3Rpb24hJyk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0xheWVyIGlzIG5vdCBhIEZlYXR1cmVDb2xsZWN0aW9uLicpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnUGxlYXNlIHNlbGVjdCBhIHNpbmdsZSBsYXllciEnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb21iaW5lOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29tYmluZXMgc2VsZWN0ZWQgZmVhdHVyZXMgaW50byBhIHNpbmdsZSBGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jb21wcmVzc1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmYyA9IHtcbiAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgICAgIGZlYXR1cmVzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0W2ZdLnJhdy50eXBlICE9PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAgIGZjLmZlYXR1cmVzLnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbZl0ucmF3KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsIGRjLnNlbGVjdGlvbi5saXN0W2ZdLm5hbWUgKyAnIHdhcyBub3QgYWRkZWQgYmVjYXVzZSBpdCBpcyBhbHJlYWR5IGEgRmVhdHVyZUNvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgWyduZXdfRmVhdHVyZUNvbGxlY3Rpb24nLCBmY10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBsYXllcnMgc2VsZWN0ZWQhJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gJ3ZpZXctYXR0cmlidXRlcyc6IHtcbiAgICAvLyAgIG1pbkZlYXR1cmVzOiAxLFxuICAgIC8vICAgZGVzY3JpcHRpb246ICdTaG93IGF0dHJpYnV0ZSB0YWJsZScsXG4gICAgLy8gICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10aC1saXN0XCI+PC9pPicsXG4gICAgLy8gICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgZGMuYXR0ci5yZW5kZXIoZGMuc2VsZWN0aW9uLmxpc3RbMF0pO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG5cbiAgICBkdXBsaWNhdGU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdEdXBsaWNhdGUgc2VsZWN0ZWQgbGF5ZXJzJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGVzLW9cIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpkdXBsaWNhdGUnLCBbdGhpcy5zdGFtcF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlbmFtZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVuYW1lIGxheWVyJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXBlbmNpbFwiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ05hbWUnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydyZW5hbWUnXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ1BsZWFzZSBzZWxlY3QgPHN0cm9uZz5vbmUgbGF5ZXI8L3N0cm9uZz4uJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVuYW1lJywgW2RjLnNlbGVjdGlvbi5saXN0WzBdLCBwYXJhbWV0ZXJzWzBdXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JlbW92ZSBzZWxlY3RlZCBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdHJhc2gtb1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZScsIFt0aGlzLnN0YW1wXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgICAgZGMudXRpbC51cGRhdGVTZWFyY2goKTtcbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgICAvL1xuICAgIC8vIEV4dHJhIFZpZXdzXG4gICAgLy9cbiAgICBpbmZvOiB7XG4gICAgICB0eXBlOiAnaW5mbycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0xlYXJuIG1vcmUgYWJvdXQgZHJvcGNob3AnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtaW5mb1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvYWJvdXQuaHRtbCc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pO1xuIiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMub3BzID0gZGMub3BzIHx8IHt9O1xuXG4gIGRjLm9wcy5nZW8gPSB7XG4gICAgYWxvbmc6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgbGluZSBhbmQgcmV0dXJucyBhIHBvaW50IGF0IGEgc3BlY2lmaWVkIGRpc3RhbmNlIGFsb25nIHRoZSBsaW5lLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZGlzdGFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonZGlzdGFuY2UgYWxvbmcgdGhlIGxpbmUnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdHMnLFxuICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ21pbGVzJywgJ2tpbG9tZXRlcnMnLCAncmFkaWFucycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnYWxvbmcnLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmFsb25nLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYmV6aWVyOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGxpbmUgYW5kIHJldHVybnMgYSBjdXJ2ZWQgdmVyc2lvbiBieSBhcHBseWluZyBhIEJlemllciBzcGxpbmUgYWxnb3JpdGhtLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVzb2x1dGlvbicsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidUaW1lIGluIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHBvaW50cycsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTAwMDBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdzaGFycG5lc3MnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonYSBtZWFzdXJlIG9mIGhvdyBjdXJ2eSB0aGUgcGF0aCBzaG91bGQgYmUgYmV0d2VlbiBzcGxpbmVzJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAgMC44NVxuXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdiZXppZXInLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmJlemllci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJ1ZmZlcjoge1xuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdDYWxjdWxhdGVzIGEgYnVmZmVyIGZvciBpbnB1dCBmZWF0dXJlcyBmb3IgYSBnaXZlbiByYWRpdXMuIFVuaXRzIHN1cHBvcnRlZCBhcmUgbWlsZXMsIGtpbG9tZXRlcnMsIGFuZCBkZWdyZWVzLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZGlzdGFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRGlzdGFuY2UgdG8gZHJhdyB0aGUgYnVmZmVyLicsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0JyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdmZWV0JywgJ2tpbG9tZXRlcnMnLCAnbWV0ZXJzJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuYnVmZmVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNlbnRlcjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGVzIGEgcG9pbnQgaW4gdGhlIGNlbnRlciBvZiB0aGUgZmVhdHVyZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3JlY3Vyc2l2ZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdSdW4gdGhlIG9wZXJhdGlvbiBvbiBlYWNoIGZlYXR1cmUgaW4gdGhlIGNvbGxlY3Rpb24gb3IgdGhlIGVudGlyZSBjb2xsZWN0aW9uLicsXG4gICAgICAgICAgdHlwZTogJ3JlY3Vyc2l2ZSdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIC8vIGlmIHJ1bm5pbmcgdGhlIG9wZXJhdGlvbiByZWN1cnNpdmVseSBcInRydWVcIlxuICAgICAgICBpZiAocGFyYW1zWzFdID09PSBcInRydWVcIikge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2NlbnRlcicsIHBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5jZW50ZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjZW50cm9pZDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGVzIGEgcG9pbnQgaW4gdGhlIGNlbnRyb2lkIG9mIHRoZSBmZWF0dXJlcy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3JlY3Vyc2l2ZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdSdW4gdGhlIG9wZXJhdGlvbiBvbiBlYWNoIGZlYXR1cmUgaW4gdGhlIGNvbGxlY3Rpb24gb3IgdGhlIGVudGlyZSBjb2xsZWN0aW9uLicsXG4gICAgICAgICAgdHlwZTogJ3JlY3Vyc2l2ZSdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIC8vIGlmIHJ1bm5pbmcgdGhlIG9wZXJhdGlvbiByZWN1cnNpdmVseSBcInRydWVcIlxuICAgICAgICBpZiAocGFyYW1zWzFdID09PSBcInRydWVcIikge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2NlbnRyb2lkJywgcGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmNlbnRyb2lkLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGVzdGluYXRpb246IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvaW50PicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIFBvaW50IGFuZCBjYWxjdWxhdGVzIHRoZSBsb2NhdGlvbiBvZiBhIGRlc3RpbmF0aW9uIHBvaW50IGdpdmVuIGEgZGlzdGFuY2UgaW4gZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnM7IGFuZCBiZWFyaW5nIGluIGRlZ3JlZXMuIFRoaXMgdXNlcyB0aGUgSGF2ZXJzaW5lIGZvcm11bGEgdG8gYWNjb3VudCBmb3IgZ2xvYmFsIGN1cnZhdHVyZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2Rpc3RhbmNlIGZyb20gdGhlIHN0YXJ0aW5nIHBvaW50JyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2JlYXJpbmcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDoncmFuZ2luZyBmcm9tIC0xODAgdG8gMTgwJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAgMFxuXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdHMnLFxuICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ21pbGVzJywgJ2tpbG9tZXRlcnMnLCAncmFkaWFucycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnZGVzdGluYXRpb24nLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmRlc3RpbmF0aW9uLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZW52ZWxvcGU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddIC8vIFRPRE86IG1ha2UgdGhpcyB0YWtlIGZlYXR1cmVzIGFuZCBydW4gYWNyb3NzIGZ1bGwgc2VsZWN0aW9uXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhbnkgbnVtYmVyIG9mIGZlYXR1cmVzIGFuZCByZXR1cm5zIGEgcmVjdGFuZ3VsYXIgUG9seWdvbiB0aGF0IGVuY29tcGFzc2VzIGFsbCB2ZXJ0aWNlcy4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmVudmVsb3BlLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGV4cGxvZGU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBmZWF0dXJlIG9yIHNldCBvZiBmZWF0dXJlcyBhbmQgcmV0dXJucyBhbGwgcG9zaXRpb25zIGFzIHBvaW50cy4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmV4cGxvZGUuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbWlkcG9pbnQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvaW50PiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyB0d28gcG9pbnRzIGFuZCByZXR1cm5zIGEgcG9pbnQgbWlkd2F5IGJldHdlZW4gdGhlbS4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLm1pZHBvaW50LmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHNpbXBsaWZ5OiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlPFBvbHlnb24+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgTGluZVN0cmluZyBvciBQb2x5Z29uIGFuZCByZXR1cm5zIGEgc2ltcGxpZmllZCB2ZXJzaW9uLiBJbnRlcm5hbGx5IHVzZXMgc2ltcGxpZnktanMgdG8gcGVyZm9ybSBzaW1wbGlmaWNhdGlvbi4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0b2xlcmFuY2UnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24gOidzaW1wbGlmaWNhdGlvbiB0b2xlcmFuY2UnLFxuICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgICBkZWZhdWx0OiAwLjFcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdoaWdoIHF1YWxpdHknLFxuICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnd2hldGhlciBvciBub3QgdG8gc3BlbmQgbW9yZSB0aW1lIHRvIGNyZWF0ZSBhIGhpZ2hlci1xdWFsaXR5IHNpbXBsaWZpY2F0aW9uIHdpdGggYSBkaWZmZXJlbnQgYWxnb3JpdGhtJyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ3NpbXBsaWZ5JywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5zaW1wbGlmeS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHRpbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1RyaWFuZ3VsYXRlZCBpcnJlZ3VsYXIgbmV0d29yaywgaW50ZXJwb2xhdGlvbiBtZXRob2QnLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLnRpbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1bmlvbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9seWdvbj4nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgdHdvIHBvbHlnb25zIGFuZCByZXR1cm5zIGEgY29tYmluZWQgcG9seWdvbi4gSWYgdGhlIGlucHV0IHBvbHlnb25zIGFyZSBub3QgY29udGlndW91cywgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGEgTXVsdGlQb2x5Z29uIGZlYXR1cmUuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi51bmlvbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB3aXRoaW46IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIHNldCBvZiBwb2ludHMgYW5kIGEgc2V0IG9mIHBvbHlnb25zIGFuZCByZXR1cm5zIHRoZSBwb2ludHMgdGhhdCBmYWxsIHdpdGhpbiB0aGUgcG9seWdvbnMuIEZpcnN0IGlucHV0IHNob3VsZCBiZSB0aGUgcG9pbnRzLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnUG9pbnRzIHRvIGNsaXAnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonU2VsZWN0IHRoZSBsYXllciB0aGF0IHJlcHJlc2VudHMgdGhlIHBvaW50cyB5b3Ugd2FudCB0byBjbGlwLiBUaGlzIGFzc3VtZXMgdGhlIG90aGVyIGxheWVyIGlzIHlvdXIgY2xpcHBpbmcgcG9seWdvbi4nLFxuICAgICAgICAgIHR5cGU6ICdzd2l0Y2gnXG4gICAgICAgICAgLy8gZGVmYXVsdDogZGMuc2VsZWN0aW9uLmxpc3RbMF1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi53aXRoaW4uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG5cbiAgZGMuc2VsZWN0aW9uID0ge307XG4gIGRjLnNlbGVjdGlvbi5saXN0ID0gW107XG5cbiAgZGMuc2VsZWN0aW9uLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignbGF5ZXI6c2VsZWN0ZWQnLCBkYy5zZWxlY3Rpb24uYWRkKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6dW5zZWxlY3RlZCcsIGRjLnNlbGVjdGlvbi5yZW1vdmUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgX2xheWVyUmVtb3ZlZCk7XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLmFkZCA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIGRjLnNlbGVjdGlvbi5saXN0LnB1c2gobGF5ZXIpO1xuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5yZW1vdmUgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgaW5kZXggPSBudWxsO1xuICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wID09PSBsYXllci5zdGFtcCkge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3Quc3BsaWNlKGluZGV4LCAxKTsgLy8gcmVtb3ZlIG91dHNpZGUgb2YgdGhlIGxvb3Agc28gd2UgZG9uJ3QgYnJlYWsgb3VyIGNvdW50XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgJCgnLmxheWVyLW5hbWUuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAkKCcub3BlcmF0aW9uLWdlbycpLmFkZENsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAkKCcub3BlcmF0aW9uLWdlbycpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3QgPSBbXTtcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uaXNTZWxlY3RlZCA9IGZ1bmN0aW9uKGx5ckRhdGEpIHtcbiAgICByZXR1cm4gQm9vbGVhbihkcm9wY2hvcC5zZWxlY3Rpb24ubGlzdC5pbmRleE9mKGx5ckRhdGEpICsgMSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gX2xheWVyUmVtb3ZlZChldmVudCwgc3RhbXApIHtcbiAgICBkYy5zZWxlY3Rpb24ucmVtb3ZlKHt9LCB7c3RhbXA6IHN0YW1wfSk7XG4gICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gIH1cblxuICByZXR1cm4gZGM7XG5cblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuXG4gIGRjLnNob3J0Y3V0cyA9IHt9O1xuICBkYy5zaG9ydGN1dHMubGlzdCA9IFtdO1xuXG4gIGRjLnNob3J0Y3V0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gU2VsZWN0IEFsbFxuICAgIE1vdXNldHJhcC5iaW5kKFsnY29tbWFuZCthJywgJ2N0cmwrYSddLCBmdW5jdGlvbihlKSB7XG4gICAgICBkYy5sYXllcmxpc3Quc2VsZWN0QWxsKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvLyBDbGVhciBTZWxlY3Rpb25cbiAgICBNb3VzZXRyYXAuYmluZChbJ2NvbW1hbmQrYmFja3NwYWNlJywgJ2N0cmwrYmFja3NwYWNlJ10sIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGRjLmxheWVybGlzdC5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgLy8gRGVsZXRlIFNlbGVjdGVkIExheWVyc1xuICAgIE1vdXNldHJhcC5iaW5kKFsnY3RybCtzaGlmdCtrJ10sIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGRjLm9wcy5maWxlLnJlbW92ZS5leGVjdXRlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvLyBVbmNoZWNrIExheWVyIFZpc2liaWxpdHlcbiAgICBNb3VzZXRyYXAuYmluZChbJ2NvbW1hbmQrcGx1cycsICdjdHJsK3BsdXMnLCAnY29tbWFuZCs9JywgJ2N0cmwrPSddLCBmdW5jdGlvbihlKSB7XG4gICAgICBkcm9wY2hvcC5sYXllcmxpc3QuY2hlY2tBbGwodHJ1ZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvLyBDaGVjayBMYXllciBWaXNpYmlsaXR5XG4gICAgTW91c2V0cmFwLmJpbmQoWydjb21tYW5kKy0nLCAnY3RybCstJ10sIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGRjLmxheWVybGlzdC51bmNoZWNrQWxsKHRydWUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4gZGM7XG5cblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuXG4gIGRjLnV0aWwgPSB7fTtcblxuICBkYy51dGlsLnJlbW92ZUZpbGVFeHRlbnNpb24gPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXFwuW14vLl0rJC8sIFwiXCIpO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG5cbiAgZGMudXRpbC5yZW1vdmVXaGl0ZVNwYWNlID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbiAgICBjb25zb2xlLmxvZyhzdHJpbmcpO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG5cbiAgZGMudXRpbC5jb25jYXQgPSBmdW5jdGlvbihhcnJheSwgc2VwYXJhdG9yLCBwcmVmaXgpIHtcbiAgICB2YXIgc3RyaW5nID0gJyc7XG4gICAgJChhcnJheSkuZWFjaChmdW5jdGlvbihhKSB7XG4gICAgICBzdHJpbmcgKz0gc2VwYXJhdG9yICsgYXJyYXlbYV07XG4gICAgfSk7XG4gICAgc3RyaW5nID0gcHJlZml4ICsgc3RyaW5nO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG5cbiAgZGMudXRpbC54aHIgPSBmdW5jdGlvbih1cmwsIGNhbGxiYWNrKSB7XG4gICAgZHJvcGNob3AudXRpbC5sb2FkZXIodHJ1ZSk7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgIHhoci5vbmxvYWQgPSBjYWxsYmFjay5iaW5kKHRoaXMsIHhocik7XG4gICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiggeGhyICkge1xuICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgY29uc29sZS5lcnJvcih4aHIpO1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdVbmFibGUgdG8gYWNjZXNzICcgKyB1cmwsIDI1MDApO1xuICAgIH07XG4gICAgeGhyLnNlbmQoKTtcbiAgfTtcblxuICBkYy51dGlsLmdldCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY29ycykge1xuICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICBkYXRhOiBkYXRhLFxuICAgICAgZGF0YVR5cGU6ICdqc29uJ1xuICAgIH07XG4gICAgaWYoIWRjLnV0aWwuY29yc1N1cHBvcnQgfHwgY29ycyA9PT0gZmFsc2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBDT1JTIHN1cHBvcnQsIHVzaW5nIEpTT05QJyk7XG4gICAgICBwYXJhbXMuZGF0YVR5cGUgPSAnanNvbnAnO1xuICAgIH1cbiAgICBkcm9wY2hvcC51dGlsLmxvYWRlcih0cnVlKTtcbiAgICB2YXIgeGhyID0gJC5hamF4KHVybCwgcGFyYW1zKTtcbiAgICByZXR1cm4geGhyO1xuICB9O1xuXG4gIGRjLnV0aWwucmVhZEZpbGUgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgLy8gaWYgYSB6aXBmaWxlLCBhc3N1bWUgc2hhcGVmaWxlIGZvciBub3dcbiAgICBpZiAoZmlsZS5uYW1lLmluZGV4T2YoJy56aXAnKSA+IC0xIHx8IGZpbGUubmFtZS5pbmRleE9mKCcuc2hwJykgPiAtMSkge1xuICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xuICAgICAgZGMudXRpbC5sb2FkZXIodHJ1ZSk7XG4gICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgc2hwKHJlYWRlci5yZXN1bHQpXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlByb2JsZW1hdGljIHByb2plY3Rpb24gLSBcIiwgZXJyb3IpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZ2VvanNvbikge1xuICAgICAgICAgICAgZGMudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICAgICAgaWYgKCFnZW9qc29uKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkYy5ub3RpZnkoJ2Vycm9yJywgJ0ludmFsaWQgcHJvamVjdGlvbiBvciBzaGFwZWZpbGUuJywgMjUwMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZ2VvanNvbi5maWxlTmFtZSwgZ2VvanNvbl0pO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSwgJ1VURi04Jyk7XG4gICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZmlsZS5uYW1lLCBKU09OLnBhcnNlKHJlYWRlci5yZXN1bHQpXSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcndhcmRUb0dlb0pzb25JbyhkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9nZW9qc29uLmlvLyNkYXRhPWRhdGE6YXBwbGljYXRpb24vanNvbixcIiArIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICB3aW5kb3cubG9jYXRpb24gPSB1cmw7XG4gICAgfVxuICB9O1xuXG4gIGRjLnV0aWwuanNvbkZyb21VcmwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcXVlcnkgPSBsb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpXG4gICAgICAgICAgLnNwbGl0KC8oJj9naXN0PXwmP3VybD0pL2cpXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gZC5sZW5ndGggPiAwO1xuICAgICAgICAgIH0pO1xuXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gICAgcXVlcnkuZm9yRWFjaChmdW5jdGlvbihwYXJ0LCBpKSB7XG4gICAgICBpZiAoaSA9PT0gMCB8fCBpICUgMiA9PT0gMCkge1xuICAgICAgICB2YXIga2V5ID0gcGFydC5yZXBsYWNlKC8mfD0vZywgJycpO1xuXG4gICAgICAgIGlmICghcmVzdWx0W2tleV0pIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0W2tleV0ucHVzaChkZWNvZGVVUklDb21wb25lbnQocXVlcnlbaSArIDFdKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIGRjLnV0aWwudXBkYXRlU2VhcmNoID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxheWVycyA9IFtdO1xuXG4gICAgT2JqZWN0LmtleXMoZGMubGF5ZXJzLmxpc3QpLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgIC8qXG4gICAgICAgKiogSWYgYSBsYXllciBoYXMgYSB0eXBlIGFuZCBVUkwgKGEgZ2lzdCBvciBleHRlcm5hbCBHZW9KU09OIGxpbmspLFxuICAgICAgICoqIGFuZCB3ZSBoYXZlbid0IHJlY29yZWQgdGhpcyB0eXBlLXVybCBjb21ibyBhbHJlYWR5LCBhZGQgaXQgdG8gdGhlXG4gICAgICAgKiogdW5pcXVlIGxpc3QuIFRoZSBsYXN0IGNoZWNrIGlzIG5lZWRlZCB0byBhY2NvdW50IGZvciBnaXN0cyB3aXRoXG4gICAgICAgKiogbXVsdGlwbGUgbGF5ZXJzLlxuICAgICAgICovXG4gICAgICBpZiAoZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLmx0eXBlICYmIGRjLmxheWVycy5saXN0W2xheWVyXS51cmwgJiYgbGF5ZXJzLmluZGV4T2YoZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLmx0eXBlICsgJz0nICsgZGMubGF5ZXJzLmxpc3RbbGF5ZXJdLnVybCkgPCAwKSB7XG4gICAgICAgIGxheWVycy5wdXNoKGRjLmxheWVycy5saXN0W2xheWVyXS5sdHlwZSArICc9JyArIGRjLmxheWVycy5saXN0W2xheWVyXS51cmwpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHNlYXJjaCA9IGxheWVycy5sZW5ndGggPyAgKCc/JyArIGxheWVycy5qb2luKCcmJykpIDogJy8nO1xuXG4gICAgLy8gT25seSB1cGRhdGUgdGhlIFVSSSBpZiBhbnl0aGluZyBoYXMgY2hhbmdlZFxuICAgIGlmIChzZWFyY2ggIT09IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpIHtcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBzZWFyY2gpO1xuICAgIH1cblxuICB9O1xuXG4gIGRjLnV0aWwuZXhlY3V0ZVVybFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkYXRhID0gZGMudXRpbC5qc29uRnJvbVVybCgpO1xuXG4gICAgLy8gbG9hZCBnaXN0XG4gICAgaWYgKGRhdGEuZ2lzdCAmJiBkYXRhLmdpc3QubGVuZ3RoKSB7XG4gICAgICAkKGRhdGEuZ2lzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLWdpc3QnXS5nZXQoe30sICdsb2FkLWdpc3QnLCBbZGF0YS5naXN0W2ldXSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBsb2FkXG4gICAgaWYgKGRhdGEudXJsICYmIGRhdGEudXJsLmxlbmd0aCkge1xuICAgICAgJChkYXRhLnVybCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLXVybCddLmdldCh7fSwgJ2xvYWQtdXJsJywgW2RhdGEudXJsW2ldXSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5nZXRGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgICByZXR1cm4gZmlsZW5hbWUuc3Vic3RyKGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykrMSk7XG4gIH07XG5cbiAgZGMudXRpbC5nZXRCQm94ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJvdW5kcyA9IGRjLm1hcC5tLmdldEJvdW5kcygpLFxuICAgICAgICBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKSxcbiAgICAgICAgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7XG4gICAgLy8gd2Ugc2hvdWxkIHByb2JhYmx5IGNoZWNrIHRoZSBzaXplIGhlcmU/XG4gICAgLy8gbm9kZSg1Ny43LDExLjksNTcuOCwxMi4wKVxuICAgIHJldHVybiBzdy5sYXQrJywnK3N3LmxuZysnLCcrbmUubGF0KycsJytuZS5sbmc7XG4gIH07XG5cbiAgZGMudXRpbC5nZXRFc3JpQkJveCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBib3VuZHMgPSBkYy5tYXAubS5nZXRCb3VuZHMoKSxcbiAgICAgICAgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCksXG4gICAgICAgIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpO1xuICAgIHJldHVybiBzdy5sbmcrJywnK3N3LmxhdCsnLCcrbmUubG5nKycsJytuZS5sYXQ7XG4gIH07XG5cbiAgZGMudXRpbC51bmNvbGxlY3QgPSBmdW5jdGlvbihmYykge1xuICAgIHJldHVybiBmYy5mZWF0dXJlc1swXTtcbiAgfTtcblxuICBkYy51dGlsLmVzcmkyZ2VvID0gZnVuY3Rpb24oYXJjanNvbikge1xuICAgIHJldHVybiB0b0dlb0pTT04oYXJjanNvbik7XG4gIH07XG5cbiAgZGMudXRpbC5leGVjdXRlRkMgPSBmdW5jdGlvbihmYywgb3BlcmF0aW9uLCBwYXJhbXMpIHtcblxuICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG4gICAgdmFyIG5ld0ZDID0ge307XG4gICAgbmV3RkMudHlwZSA9ICdGZWF0dXJlQ29sbGVjdGlvbic7XG4gICAgbmV3RkMuZmVhdHVyZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGYgPSAwOyBmIDwgZmMuZmVhdHVyZXMubGVuZ3RoOyBmKyspIHtcbiAgICAgIG5ld1BhcmFtc1swXSA9IGZjLmZlYXR1cmVzW2ZdO1xuICAgICAgdmFyIGZlYXR1cmU7XG4gICAgICB0cnkge1xuICAgICAgICBmZWF0dXJlID0gdHVyZltvcGVyYXRpb25dLmFwcGx5KG51bGwsIG5ld1BhcmFtcyk7XG4gICAgICAgIGZlYXR1cmUucHJvcGVydGllcyA9IGZjLmZlYXR1cmVzW2ZdLnByb3BlcnRpZXMgfHwge307XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIGVycik7XG4gICAgICB9XG4gICAgICBuZXdGQy5mZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdGQztcblxuICB9O1xuXG4gIGRjLnV0aWwubG9hZGVyID0gZnVuY3Rpb24oeWVzKSB7XG4gICAgdmFyIGxvYWRlciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRlcicpO1xuXG4gICAgaWYgKHllcykge1xuICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdkcm9wY2hvcC1sb2FkaW5nJyk7XG4gICAgICAkKCdib2R5JykuYXBwZW5kKGxvYWRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZHJvcGNob3AtbG9hZGluZycpO1xuICAgICAgJCgnLmRyb3BjaG9wLWxvYWRlcicpLmFkZENsYXNzKCdsb2FkZXItY29tcGxldGUnKS5mYWRlT3V0KDIwMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5jb3JzU3VwcG9ydCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAnWE1MSHR0cHJlcXVlc3QnIGluIHdpbmRvdyAmJiAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG5cbn0pKGRyb3BjaG9wIHx8IHt9KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
