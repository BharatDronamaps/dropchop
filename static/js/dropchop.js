var dropchop=function(e){return e=e||{},e.version="0.1.1",e.init=function(t){t||e.util.error("No options provided in dropchop.init()"),e.options=t,$(t.id).length||e.util.error("Element with options.id does not exist."),e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.ops.init(),e.form.init(),location.search.length&&e.util.executeUrlParams()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),l=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),s=$("<button>").addClass("layer-action layer-remove").html('<i class="fa fa-times"></i>'),p=$("<button>").addClass("layer-action layer-duplicate").html('<i class="fa fa-files-o"></i>');p.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:duplicate",[$(this).parent().attr("data-stamp")]),!1}),s.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:remove",[$(this).parent().attr("data-stamp")]),e.selection.clear(),!1}),l.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),l=i.parent().attr("data-stamp");t===r&&(a=e),t===l&&(o=e)}),a>o?$(".layer-element").each(function(t){t>=o&&a>=t&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){o>t&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),o.append(n),o.append(l),o.append(i),o.append(s),o.append(p),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show()},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.toggleAll=function(t){function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}if($(this).find("input").prop("checked"))for(var r in e.layers.list)a(e.layers.list[r].stamp,!0);else for(var o in e.layers.list)a(e.layers.list[o].stamp,!1)},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r){var o=e.layers.makeLayer(a,r);e.layers.list[o.stamp]=o,e.notify("success","<strong>"+o.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[o])},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer),$(e.map.m).on("locationfound",function(t){var a=t.originalEvent;e.map.m.fitBounds(a.bounds);var r={type:"Feature",geometry:{type:"Point",coordinates:[a.latlng.lng,a.latlng.lat]},properties:{title:"There You Are","marker-color":"#207178","marker-symbol":"heart"}};$(e).trigger("file:added",["your location",r])}),$(e.map.m).on("locationerror",function(){e.notify("error","There was a problem finding your location.",3e3)})}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);if("close"===r){var n=$("<button>").addClass("notification-close").prop("type","button").html('<i class="fa fa-times"></i>');n.on("click",function(e){$(this).parent().remove()}),$(o).append(n),$(e.$elem).append(o)}else $(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.ops=e.ops||{},e.ops.init=function(){var r=$("<div>").addClass("operations-geo");e.$elem.append(r);for(var o in e.ops.geo){var n=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+o+"</h4><p>"+e.ops.geo[o].description+"</p>").prop("disabled",!0).attr("data-operation",o);n.on("click",t),r.append(n)}$(e).on("layer:selected",e.ops.geoCheck),$(e).on("layer:unselected",e.ops.geoCheck),$(e).on("operation:geo",e.ops.geoExecute),$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback);var i=$("<div>").addClass("dropchop-menu-left");for(var l in e.ops.file)if("break"===e.ops.file[l].type){var s=$("<div>").addClass("menu-action-break");i.append(s)}else{var p=$("<button>").addClass("menu-action").html(e.ops.file[l].icon||"A").attr("data-operation",l).attr("data-tooltip",e.ops.file[l].description);"info"===e.ops.file[l].type&&p.addClass("dropchop-info"),p.on("click",a),i.append(p)}e.$elem.append(i)},e.ops.geoExecute=function(t,a,r){var o=e.ops.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.ops.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){-1===$.inArray("switch-"+e.selection.list[t].stamp,a)?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.ops.geoCheck=function(t,a){function r(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function o(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var n in e.ops.geo){var i=e.ops.geo[n];if(e.selection.list.length>i.maxFeatures||e.selection.list.length<i.minFeatures)r(n);else for(var l=0;l<e.selection.list.length;l++){var s=e.selection.list[l];$.inArray(s.type,i.requirements.types)>-1||i.requirements.generalFeature===!0?o(n):r(n)}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content)])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide" target="_blank">the query language</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox();e.util.xhr("http://overpass-api.de/api/interpreter?[out:json];node["+r[0]+"]("+o+");out;",e.ops.file["load-overpass"].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r,{flatProperties:!0});r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},location:{description:"Add your location as a layer",icon:'<i class="fa fa-crosshairs"></i>',execute:function(){navigator.geolocation?e.map.m.locate():e.notify("error","Geolocation is not available on this browser.",4e3)}},break1:{type:"break"},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},break2:{type:"break"},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},break3:{type:"break"},rename:{minFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.readFile=function(t){var a=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(a.readAsArrayBuffer(t),e.util.loader(!0),a.onloadend=function(t){shp(a.result).then(function(t){e.util.loader(!1),$(e).trigger("file:added",[t.fileName,t])})}):(a.readAsText(t,"UTF-8"),a.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(a.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1).split(/(&?gist=|&?url=)/g).filter(function(e){return e.length>0}),t={};return e.forEach(function(a,r){if(0===r||r%2===0){var o=a.replace(/&|=/g,"");t[o]||(t[o]=[]),t[o].push(decodeURIComponent(e[r+1]))}}),t},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.uncollect=function(e){return e.features[0]},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var l;try{l=turf[a].apply(null,o),l.properties=t.features[i].properties||{}}catch(s){e.notify("error",s)}n.features.push(l)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.error=function(e){var t=new Error(e);throw t},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibm90aWZ5LmRyb3BjaG9wLmpzIiwib3BzLmRyb3BjaG9wLmpzIiwib3BzLmZpbGUuZHJvcGNob3AuanMiLCJvcHMuZ2VvLmRyb3BjaG9wLmpzIiwic2VsZWN0aW9uLmRyb3BjaG9wLmpzIiwidXRpbC5kcm9wY2hvcC5qcyJdLCJuYW1lcyI6WyJkcm9wY2hvcCIsImRjIiwidmVyc2lvbiIsImluaXQiLCJvcHRzIiwidXRpbCIsImVycm9yIiwib3B0aW9ucyIsIiQiLCJpZCIsImxlbmd0aCIsIiRlbGVtIiwibGF5ZXJzIiwicHJlcGFyZSIsIm1hcCIsInNlbGVjdGlvbiIsImxheWVybGlzdCIsImRyb3B6b25lIiwib3BzIiwiZm9ybSIsImxvY2F0aW9uIiwic2VhcmNoIiwiZXhlY3V0ZVVybFBhcmFtcyIsImJvb20iLCJjb25zb2xlIiwibG9nIiwiX2V2ZW50cyIsIiRjb250YWluZXIiLCJvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJ0aGlzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImZpbGVzIiwib3JpZ2luYWxFdmVudCIsImRhdGFUcmFuc2ZlciIsImVhY2giLCJpIiwicmVhZEZpbGUiLCJnZW8iLCJmaWxlIiwib3BlcmF0aW9uIiwiY3JlYXRlIiwibmFtZSIsImluZm8iLCJ0cmlnZ2VyIiwicmVtb3ZlIiwiJGh0bWwiLCJhdHRyIiwidGV4dCIsImFwcGVuZFRvIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwicCIsImNyZWF0ZVBhcmFtIiwiJHN1Ym1pdCIsIiRjYW5jZWwiLCJkYXRhIiwic2VyaWFsaXplQXJyYXkiLCJwdXNoIiwidmFsdWUiLCJhcHBlbmQiLCJwYXJhbSIsIiRpbnB1dCIsIiRsYWJlbCIsIiRmaWVsZCIsImlucHV0cyIsInR5cGUiLCJodG1sIiwibnVtYmVyIiwiJGkiLCJzZWxlY3QiLCIkb3B0IiwiY2hlY2tib3giLCJzd2l0Y2giLCJsaXN0IiwiJGxibCIsInZhbCIsInN0YW1wIiwicmVjdXJzaXZlIiwiJGxibDEiLCIkb3B0MSIsIiRsYmwyIiwiJG9wdDIiLCJsYXllclR5cGVJY29uIiwiaWNvbiIsImVsZW1zIiwidGFyZ2V0IiwiaGFzQ2xhc3MiLCJjbGVhciIsImxpSGVscGVyIiwidG9nZ2xlTGF5ZXJzIiwidG9nZ2xlQWxsIiwiYWRkTGF5ZXJMaXN0SXRlbSIsInJlbW92ZUxheWVyTGlzdEl0ZW0iLCJyZW5hbWUiLCJuZXdOYW1lIiwiZmluZCIsImxheWVyIiwibGF5ZXJsaXN0SXRlbSIsImxheWVyRGl2IiwiZGVsYXkiLCJxdWV1ZSIsIm5leHQiLCJsYXllclR5cGUiLCJwcm9wIiwiY2hlY2tlZCIsImR1cGxpY2F0ZSIsInBhcmVudCIsInNoaWZ0S2V5IiwidG9Db3VudCIsImZyb21Db3VudCIsInRvIiwiZnJvbSIsIl9sYXN0U2VsZWN0ZWQiLCJlIiwiY2hlY2siLCJ0b1N0YW1wIiwiZnJvbVN0YW1wIiwibCIsInNlbGVjdExheWVyIiwibWV0YUtleSIsInNlbGVjdFRvZ2dsZSIsImNsZWFyU2VsZWN0aW9uIiwiaGlkZSIsInNob3ciLCIkaXRlbSIsImx5ciIsImVsZW1Ub2dnbGUiLCJib29sIiwibyIsImZhZGVPdXQiLCJnZXRUeXBlIiwiZ2oiLCJnZW9tZXRyeSIsImFkZCIsImJsb2IiLCJtYWtlTGF5ZXIiLCJub3RpZnkiLCJlcnIiLCJyYXciLCJqc29uIiwiZ2VvanNvbiIsImZsIiwiTCIsIm1hcGJveCIsImZlYXR1cmVMYXllciIsInJlbW92ZUZpbGVFeHRlbnNpb24iLCJmZWF0dXJlbGF5ZXIiLCJkYXRlQWRkZWQiLCJEYXRlIiwiX21ha2VNYXAiLCJ0b2tlbiIsImFjY2Vzc1Rva2VuIiwibSIsInpvb21Db250cm9sIiwid29ybGRDb3B5SnVtcCIsInNldFZpZXciLCJjb250cm9sIiwiem9vbSIsInBvc2l0aW9uIiwiYWRkVG8iLCJnZW9jb2RlckNvbnRyb2wiLCJiYXNlTGF5ZXJzIiwiTWFwYm94IFN0cmVldHMiLCJ0aWxlTGF5ZXIiLCJNYXBib3ggT3V0ZG9vcnMiLCJNYXBib3ggTGlnaHQiLCJNYXBib3ggRGFyayIsIk1hcGJveCBTYXRlbGxpdGUiLCJjb2xsYXBzZWQiLCJsYXllcmdyb3VwIiwiYWRkTGF5ZXIiLCJoaWRlTGF5ZXIiLCJzaG93TGF5ZXIiLCJmaXRCb3VuZHMiLCJib3VuZHMiLCJjb29yZGluYXRlcyIsImxhdGxuZyIsImxuZyIsImxhdCIsInByb3BlcnRpZXMiLCJ0aXRsZSIsIm1hcmtlci1jb2xvciIsIm1hcmtlci1zeW1ib2wiLCJyZW1vdmVMYXllciIsImNvdW50IiwiZWFjaExheWVyIiwiY29udGVudCIsImZlYXR1cmUiLCJiaW5kUG9wdXAiLCJwb3B1cCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiYXV0b1BhblBhZGRpbmciLCJjbGFzc05hbWUiLCJzZXRDb250ZW50IiwidGltZSIsIm5vdGUiLCIkY2xvc2UiLCJzZXRUaW1lb3V0IiwiX2dlb0J0bkNsaWNrIiwiX2ZpbGVCdG5DbGljayIsImV4ZWN1dGUiLCJnZW9Db250YWluZXIiLCJnZW9PcCIsImdlb0J0biIsImdlb0NoZWNrIiwiZ2VvRXhlY3V0ZSIsImdldCIsImNhbGxiYWNrIiwibGVmdE1lbnUiLCJmaWxlT3AiLCIkYnJlYWtTcGFjZSIsImZpbGVCdG4iLCJwcmVwIiwicHJlcGFyZVR1cmZQYXJhbXMiLCJyZXN1bHQiLCJwYXJhbXMiLCJnZW9tcyIsIm5hbWVBcnJheSIsImluQXJyYXkiLCJ1bnNoaWZ0IiwibWVyZ2UiLCJjb25jYXQiLCJ0dXJuSXRPZmYiLCJvcCIsImJ0biIsInR1cm5JdE9uIiwibWF4RmVhdHVyZXMiLCJtaW5GZWF0dXJlcyIsIngiLCJzZWwiLCJyZXF1aXJlbWVudHMiLCJ0eXBlcyIsImdlbmVyYWxGZWF0dXJlIiwidXBsb2FkIiwiJGJsaW5kSW5wdXQiLCJjc3MiLCJjbGljayIsImxvYWQtdXJsIiwiZGVmYXVsdCIsInVybCIsInhociIsInhockV2ZW50IiwibG9hZGVyIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2VVUkwiLCJzdWJzdHJpbmciLCJsYXN0SW5kZXhPZiIsImxvYWQtZ2lzdCIsImdpc3QiLCJzcGxpdCIsImYiLCJmaWxlbmFtZSIsImxvYWQtb3ZlcnBhc3MiLCJfdGVtcCIsImxheWVyTmFtZSIsImJib3giLCJnZXRCQm94Iiwib3NtdG9nZW9qc29uIiwiZmxhdFByb3BlcnRpZXMiLCJlbGVtZW50cyIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwibG9jYXRlIiwiYnJlYWsxIiwic2F2ZS1nZW9qc29uIiwiY3JlYXRlc0xheWVyIiwic3RyaW5naWZ5Iiwic2F2ZUFzIiwiQmxvYiIsInNhdmUtc2hhcGVmaWxlIiwiZm9sZGVyIiwicG9pbnQiLCJwb2x5Z29uIiwibGluZSIsInNocHdyaXRlIiwiZG93bmxvYWQiLCJicmVhazIiLCJleHRlbnQiLCJleHRlbmQiLCJnZXRCb3VuZHMiLCJleHBhbmQiLCJmYyIsIkVycm9yIiwiZmVhdHVyZXMiLCJjb21iaW5lIiwiYnJlYWszIiwid2luZG93IiwiYWxvbmciLCJleGVjdXRlRkMiLCJ0dXJmIiwiYXBwbHkiLCJiZXppZXIiLCJidWZmZXIiLCJjZW50ZXIiLCJjZW50cm9pZCIsImRlc3RpbmF0aW9uIiwiZW52ZWxvcGUiLCJleHBsb2RlIiwibWlkcG9pbnQiLCJzaW1wbGlmeSIsInRpbiIsInVuaW9uIiwid2l0aGluIiwiX2xheWVyUmVtb3ZlZCIsImluZGV4Iiwic3BsaWNlIiwic3RyaW5nIiwicmVwbGFjZSIsInJlbW92ZVdoaXRlU3BhY2UiLCJhcnJheSIsInNlcGFyYXRvciIsInByZWZpeCIsImEiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJiaW5kIiwib25lcnJvciIsInNlbmQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiaW5kZXhPZiIsInJlYWRBc0FycmF5QnVmZmVyIiwib25sb2FkZW5kIiwic2hwIiwidGhlbiIsImZpbGVOYW1lIiwicmVhZEFzVGV4dCIsImpzb25Gcm9tVXJsIiwicXVlcnkiLCJzdWJzdHIiLCJmaWx0ZXIiLCJkIiwiZm9yRWFjaCIsInBhcnQiLCJrZXkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJnZXRGaWxlRXh0ZW5zaW9uIiwic3ciLCJnZXRTb3V0aFdlc3QiLCJuZSIsImdldE5vcnRoRWFzdCIsInVuY29sbGVjdCIsIm5ld1BhcmFtcyIsIm5ld0ZDIiwieWVzIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxVQUFBLFNBQUFDLEdBOENBLE1BN0NBQSxHQUFBQSxNQUNBQSxFQUFBQyxRQUFBLFFBQ0FELEVBQUFFLEtBQUEsU0FBQUMsR0FDQUEsR0FDQUgsRUFBQUksS0FBQUMsTUFBQSwwQ0FFQUwsRUFBQU0sUUFBQUgsRUFFQUksRUFBQUosRUFBQUssSUFBQUMsUUFDQVQsRUFBQUksS0FBQUMsTUFBQSwyQ0FFQUwsRUFBQVUsTUFBQUgsRUFBQUosRUFBQUssSUFHQVIsRUFBQVcsT0FBQUMsVUFHQVosRUFBQWEsSUFBQVgsT0FHQUYsRUFBQWMsVUFBQVosT0FHQUYsRUFBQWUsVUFBQWIsS0FBQSxhQUdBRixFQUFBZ0IsU0FBQVQsRUFBQSxTQUdBUCxFQUFBaUIsSUFBQWYsT0FHQUYsRUFBQWtCLEtBQUFoQixPQUdBaUIsU0FBQUMsT0FBQVgsUUFDQVQsRUFBQUksS0FBQWlCLG9CQUtBckIsRUFBQXNCLEtBQUEsV0FDQUMsUUFBQUMsSUFBQSxjQUdBeEIsR0FFQUQsY0NoREFBLFNBQUEsU0FBQUMsR0FFQSxZQVlBLFNBQUF5QixHQUFBQyxHQUNBQSxFQUFBQyxHQUFBLFdBQUEsU0FBQUMsR0FDQUEsRUFBQUMsaUJBQ0FELEVBQUFFLGtCQUNBdkIsRUFBQXdCLE1BQUFDLFNBQUEsY0FHQU4sRUFBQUMsR0FBQSxZQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLGlCQUNBRCxFQUFBRSxrQkFDQXZCLEVBQUF3QixNQUFBRSxZQUFBLGNBR0FQLEVBQUFDLEdBQUEsT0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFDQUQsRUFBQUUsa0JBQ0F2QixFQUFBd0IsTUFBQUUsWUFBQSxXQUNBLElBQUFDLEdBQUFOLEVBQUFPLGNBQUFDLGFBQUFGLEtBQ0EzQixHQUFBMkIsR0FBQUcsS0FBQSxTQUFBQyxHQUNBdEMsRUFBQUksS0FBQW1DLFNBQUFMLEVBQUFJLFFBS0EsTUFsQ0F0QyxHQUFBQSxNQU1BQSxFQUFBZ0IsU0FBQSxTQUFBVSxHQUNBRCxFQUFBQyxJQTJCQTFCLEdBRUFELGNDeENBQSxTQUFBLFNBQUFDLEdBRUEsWUF5SkEsT0F2SkFBLEdBQUFBLE1BQ0FBLEVBQUFrQixLQUFBbEIsRUFBQWtCLFNBQ0FsQixFQUFBa0IsS0FBQWhCLEtBQUEsV0FDQUssRUFBQVAsR0FBQTJCLEdBQUEsV0FBQTNCLEVBQUFrQixLQUFBc0IsS0FDQWpDLEVBQUFQLEdBQUEyQixHQUFBLFlBQUEzQixFQUFBa0IsS0FBQXVCLE9BR0F6QyxFQUFBa0IsS0FBQXNCLElBQUEsU0FBQVosRUFBQWMsR0FDQTFDLEVBQUFrQixLQUFBeUIsT0FBQUQsRUFBQTFDLEVBQUFpQixJQUFBdUIsSUFBQUUsR0FBQSxRQUdBMUMsRUFBQWtCLEtBQUF1QixLQUFBLFNBQUFiLEVBQUFjLEdBQ0ExQyxFQUFBa0IsS0FBQXlCLE9BQUFELEVBQUExQyxFQUFBaUIsSUFBQXdCLEtBQUFDLEdBQUEsUUFBQUEsSUFHQTFDLEVBQUFrQixLQUFBeUIsT0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBOUMsRUFBQWtCLEtBQUE2QixRQUNBLElBQUFDLEdBQUF6QyxFQUFBLFVBQUF5QixTQUFBLCtCQUFBYyxHQUNBRyxLQUFBLEtBQUEsaUJBQ0FBLEtBQUEsT0FBQUwsRUFDQXJDLEdBQUEsUUFBQXlCLFNBQUEsdUJBQUFrQixLQUFBTixHQUFBTyxTQUFBSCxHQUNBekMsRUFBQSxPQUFBeUIsU0FBQSw2QkFBQWtCLEtBQUFMLEVBQUFPLGFBQUFELFNBQUFILEVBR0FILEdBQUFRLFlBQ0E5QyxFQUFBc0MsRUFBQVEsWUFBQWhCLEtBQUEsV0FDQSxHQUFBaUIsR0FBQXRELEVBQUFrQixLQUFBcUMsWUFBQXhCLEtBQ0F1QixHQUFBSCxTQUFBSCxJQUtBLElBQUFRLEdBQUFqRCxFQUFBLFlBQUF5QixTQUFBLHdEQUFBa0IsS0FBQSxXQUFBRCxLQUFBLE1BQUFMLEdBQ0FhLEVBQUFsRCxFQUFBLFlBQUF5QixTQUFBLHlEQUFBa0IsS0FBQSxVQUFBRCxLQUFBLE9BQUEsU0FDQVEsR0FBQTlCLEdBQUEsUUFBQSxTQUFBQyxHQUdBLE1BRkFBLEdBQUFDLGlCQUNBN0IsRUFBQWtCLEtBQUE2QixVQUNBLElBRUFDLEVBQUFyQixHQUFBLFNBQUEsU0FBQUMsR0FDQUEsRUFBQUMsZ0JBRUEsSUFBQXdCLE1BQ0FLLEVBQUFuRCxFQUFBd0IsTUFBQTRCLGdCQU1BLE9BTEFwRCxHQUFBbUQsR0FBQXJCLEtBQUEsU0FBQUMsR0FDQWUsRUFBQU8sS0FBQUYsRUFBQXBCLEdBQUF1QixTQUVBdEQsRUFBQVAsR0FBQThDLFFBQUEsYUFBQUEsR0FBQUYsRUFBQVMsSUFDQXJELEVBQUFrQixLQUFBNkIsVUFDQSxJQUVBQyxFQUFBYyxPQUFBTixHQUNBUixFQUFBYyxPQUFBTCxHQUVBekQsRUFBQVUsTUFBQW9ELE9BQUFkLElBSUFoRCxFQUFBa0IsS0FBQTZCLE9BQUEsV0FDQXhDLEVBQUEsa0JBQUF3QyxVQUdBL0MsRUFBQWtCLEtBQUFxQyxZQUFBLFNBQUFRLEdBQ0EsR0FBQUMsR0FBQXpELEVBQUEsU0FBQXlCLFNBQUEsMkJBQ0FpQyxFQUFBMUQsRUFBQSxXQUFBMkMsS0FBQWEsRUFBQW5CLE1BQUFaLFNBQUEsaUNBQ0FrQyxFQUFBbEUsRUFBQWtCLEtBQUFpRCxPQUFBSixFQUFBSyxNQUFBTCxFQU1BLE9BTEFHLEdBQUFmLFNBQUFjLEdBQ0FGLEVBQUFYLFlBQUEzQyxRQUNBRixFQUFBLE9BQUF5QixTQUFBLHVDQUFBcUMsS0FBQU4sRUFBQVgsYUFBQUQsU0FBQWMsR0FFQUQsRUFBQUYsT0FBQUcsR0FDQUQsR0FHQWhFLEVBQUFrQixLQUFBaUQsUUFDQUcsT0FBQSxTQUFBaEIsR0FDQSxHQUFBaUIsR0FBQWhFLEVBQUEsV0FBQTBDLEtBQUEsT0FBQSxVQUNBQSxLQUFBLE9BQUFLLEVBQUFWLE1BQ0FLLEtBQUEsUUFBQUssRUFBQUEsV0FDQSxPQUFBaUIsSUFFQUMsT0FBQSxTQUFBbEIsR0FDQSxHQUFBaUIsR0FBQWhFLEVBQUEsWUFBQTBDLEtBQUEsT0FBQUssRUFBQVYsS0FNQSxPQUxBckMsR0FBQStDLEVBQUFoRCxTQUFBK0IsS0FBQSxTQUFBQyxHQUNBLEdBQUFtQyxHQUFBbEUsRUFBQSxZQUFBMkMsS0FBQUksRUFBQWhELFFBQUFnQyxJQUNBVyxLQUFBLFFBQUFLLEVBQUFoRCxRQUFBZ0MsR0FDQW1DLEdBQUF0QixTQUFBb0IsS0FFQUEsR0FFQXJCLEtBQUEsU0FBQUksR0FDQSxHQUFBaUIsR0FBQWhFLEVBQUEsV0FBQTBDLEtBQUEsT0FBQSxRQUNBQSxLQUFBLE9BQUFLLEVBQUFWLE1BQ0FLLEtBQUEsUUFBQUssRUFBQUEsV0FDQSxPQUFBaUIsSUFFQUcsU0FBQSxTQUFBcEIsR0FDQSxHQUFBaUIsR0FBQWhFLEVBQUEsV0FBQTBDLEtBQUEsT0FBQSxZQUNBQSxLQUFBLE9BQUFLLEVBQUFWLE1BQ0FLLEtBQUEsUUFBQUssRUFBQUEsV0FDQSxPQUFBaUIsSUFFQUksU0FBQSxTQUFBckIsR0FDQSxHQUFBaUIsR0FBQWhFLEVBQUEsUUFZQSxPQVhBQSxHQUFBUCxFQUFBYyxVQUFBOEQsTUFBQXZDLEtBQUEsU0FBQUMsR0FDQSxHQUFBdUMsR0FBQXRFLEVBQUEsV0FDQXlCLFNBQUEsYUFDQXlDLEVBQUFsRSxFQUFBLFdBQ0EwQyxLQUFBLE9BQUEsU0FDQTZCLElBQUEsVUFBQTlFLEVBQUFjLFVBQUE4RCxLQUFBdEMsR0FBQXlDLE9BQ0E5QixLQUFBLE9BQUFLLEVBQUFWLEtBQ0E2QixHQUFBdEIsU0FBQTBCLEdBQ0FBLEVBQUFmLE9BQUE5RCxFQUFBYyxVQUFBOEQsS0FBQXRDLEdBQUFNLE1BQ0FpQyxFQUFBMUIsU0FBQW9CLEtBRUFBLEdBRUFTLFVBQUEsU0FBQTFCLEdBQ0EsR0FBQWlCLEdBQUFoRSxFQUFBLFNBRUEwRSxFQUFBMUUsRUFBQSxXQUNBeUIsU0FBQSxhQUNBa0QsRUFBQTNFLEVBQUEsV0FDQTBDLEtBQUEsT0FBQSxTQUNBNkIsSUFBQSxRQUNBN0IsS0FBQSxPQUFBSyxFQUFBVixLQUNBc0MsR0FBQS9CLFNBQUE4QixHQUNBQSxFQUFBbkIsT0FBQSxzQkFFQSxJQUFBcUIsR0FBQTVFLEVBQUEsV0FDQXlCLFNBQUEsYUFDQW9ELEVBQUE3RSxFQUFBLFdBQ0EwQyxLQUFBLE9BQUEsU0FDQTZCLElBQUEsU0FDQTdCLEtBQUEsT0FBQUssRUFBQVYsS0FPQSxPQU5Bd0MsR0FBQWpDLFNBQUFnQyxHQUNBQSxFQUFBckIsT0FBQSxxQkFFQW1CLEVBQUE5QixTQUFBb0IsR0FDQVksRUFBQWhDLFNBQUFvQixHQUVBQSxJQVVBdkUsR0FFQUQsY0M3SkFBLFNBQUEsU0FBQUMsR0FFQSxZQXFKQSxTQUFBcUYsR0FBQWpCLEdBQ0EsR0FBQWtCLEVBQ0EsUUFBQWxCLEdBQ0EsSUFBQSxvQkFDQWtCLEVBQUEsbUJBQ0EsTUFDQSxLQUFBLGlCQUNBLElBQUEsc0JBQ0FBLEVBQUEsT0FDQSxNQUNBLEtBQUEsc0JBQ0EsSUFBQSwyQkFDQUEsRUFBQSxNQUNBLE1BQ0EsS0FBQSxtQkFDQSxJQUFBLHdCQUNBQSxFQUFBLFNBQ0EsTUFDQSxLQUFBLDhCQUNBQSxFQUFBLE1BQ0EsTUFDQSxTQUNBQSxFQUFBLFVBR0EsTUFBQUEsR0FzQ0EsTUFsTkF0RixHQUFBQSxNQUNBQSxFQUFBZSxhQUNBZixFQUFBZSxVQUFBd0UsU0FFQXZGLEVBQUFlLFVBQUFiLEtBQUEsU0FBQTBDLEdBQ0E1QyxFQUFBZSxVQUFBTCxNQUFBSCxFQUFBLFFBQUF5QixTQUFBWSxHQUNBNUMsRUFBQVUsTUFBQW9ELE9BQUE5RCxFQUFBZSxVQUFBTCxPQUNBVixFQUFBZSxVQUFBTCxNQUFBaUIsR0FBQSxRQUFBLFNBQUFDLEdBQ0FyQixFQUFBcUIsRUFBQTRELFFBQUFDLFNBQUE3QyxJQUNBNUMsRUFBQWMsVUFBQTRFLFNBSUEsSUFBQUMsR0FBQXBGLEVBQUEsUUFBQXlCLFNBQUEsY0FDQXFDLEtBQUEsZ2FBQ0FyRSxHQUFBZSxVQUFBTCxNQUFBb0QsT0FBQTZCLEVBRUEsSUFBQUMsR0FBQXJGLEVBQUEsUUFBQXlCLFNBQUEsbUJBQ0FxQyxLQUFBLGtFQUNBdUIsR0FBQWpFLEdBQUEsU0FBQTNCLEVBQUFlLFVBQUE4RSxXQUNBN0YsRUFBQWUsVUFBQUwsTUFBQW9ELE9BQUE4QixHQUVBckYsRUFBQVAsR0FBQTJCLEdBQUEsY0FBQTNCLEVBQUFlLFVBQUErRSxrQkFDQXZGLEVBQUFQLEdBQUEyQixHQUFBLGdCQUFBM0IsRUFBQWUsVUFBQWdGLHFCQUNBeEYsRUFBQVAsR0FBQTJCLEdBQUEsZ0JBQUEzQixFQUFBZSxVQUFBaUYsU0FHQWhHLEVBQUFlLFVBQUFpRixPQUFBLFNBQUFwRSxFQUFBbUQsRUFBQWtCLEdBQ0ExRixFQUFBLGVBQUF3RSxFQUFBLEtBQUFtQixLQUFBLGVBQUFoRCxLQUFBK0MsSUFJQWpHLEVBQUFlLFVBQUErRSxpQkFBQSxTQUFBbEUsRUFBQXVFLEdBQ0EsR0FBQUMsR0FBQTdGLEVBQUEsUUFBQXlCLFNBQUEsaUJBQUFpQixLQUFBLGFBQUFrRCxFQUFBcEIsT0FDQXNCLEVBQUE5RixFQUFBLFNBQ0F5QixTQUFBLHdCQUNBa0IsS0FBQWlELEVBQUF2RCxNQUNBMEQsTUFBQSxLQUNBQyxNQUFBLFNBQUFDLEdBQ0FqRyxFQUFBd0IsTUFBQUUsWUFBQSxlQUlBd0UsRUFBQWxHLEVBQUEsVUFBQXlCLFNBQUEsd0NBQUFxRCxFQUFBYyxFQUFBL0IsT0FDQU0sRUFBQW5FLEVBQUEsV0FBQXlCLFNBQUEsZ0JBQUEwRSxNQUFBdEMsS0FBQSxXQUFBdUMsU0FBQSxJQUNBNUQsRUFBQXhDLEVBQUEsWUFBQXlCLFNBQUEsNkJBQUFxQyxLQUFBLCtCQUNBdUMsRUFBQXJHLEVBQUEsWUFBQXlCLFNBQUEsZ0NBQUFxQyxLQUFBLGdDQUVBdUMsR0FBQWpGLEdBQUEsUUFBQSxTQUFBQyxHQUdBLE1BRkFBLEdBQUFDLGlCQUNBdEIsRUFBQVAsR0FBQThDLFFBQUEsbUJBQUF2QyxFQUFBd0IsTUFBQThFLFNBQUE1RCxLQUFBLGlCQUNBLElBR0FGLEVBQUFwQixHQUFBLFFBQUEsU0FBQUMsR0FJQSxNQUhBQSxHQUFBQyxpQkFDQXRCLEVBQUFQLEdBQUE4QyxRQUFBLGdCQUFBdkMsRUFBQXdCLE1BQUE4RSxTQUFBNUQsS0FBQSxnQkFDQWpELEVBQUFjLFVBQUE0RSxTQUNBLElBR0FoQixFQUFBL0MsR0FBQSxTQUFBLFNBQUFDLEdBQ0FHLEtBQUE0RSxRQUVBcEcsRUFBQVAsR0FBQThDLFFBQUEsY0FBQXFELElBRUE1RixFQUFBUCxHQUFBOEMsUUFBQSxjQUFBcUQsTUFJQUUsRUFBQTFFLEdBQUEsUUFBQSxTQUFBQyxHQUdBLEdBQUFBLEVBQUFrRixTQUFBLENBR0EsR0FHQUMsR0FBQUMsRUFGQUMsRUFBQTFHLEVBQUF3QixNQUNBbUYsRUFBQWxILEVBQUFlLFVBQUFvRyxhQUdBNUcsR0FBQSxrQkFBQThCLEtBQUEsU0FBQStFLEdBQ0EsR0FBQUMsR0FBQTlHLEVBQUF3QixNQUFBa0IsS0FBQSxjQUNBcUUsRUFBQUwsRUFBQUosU0FBQTVELEtBQUEsY0FDQXNFLEVBQUFMLEVBQUFMLFNBQUE1RCxLQUFBLGFBQ0FvRSxLQUFBQyxJQUFBUCxFQUFBSyxHQUNBQyxJQUFBRSxJQUFBUCxFQUFBSSxLQUdBTCxFQUFBQyxFQUVBekcsRUFBQSxrQkFBQThCLEtBQUEsU0FBQW1GLEdBQ0FBLEdBQUFSLEdBQUFELEdBQUFTLEdBQ0F4SCxFQUFBZSxVQUFBMEcsWUFBQWxILEVBQUF3QixNQUFBbUUsS0FBQSxlQUFBbEcsRUFBQVcsT0FBQWlFLEtBQUFyRSxFQUFBd0IsTUFBQWtCLEtBQUEsa0JBSUExQyxFQUFBLGtCQUFBOEIsS0FBQSxTQUFBbUYsR0FDQVIsRUFBQVEsR0FBQUEsR0FBQVQsR0FDQS9HLEVBQUFlLFVBQUEwRyxZQUFBbEgsRUFBQXdCLE1BQUFtRSxLQUFBLGVBQUFsRyxFQUFBVyxPQUFBaUUsS0FBQXJFLEVBQUF3QixNQUFBa0IsS0FBQSxzQkFJQXJCLEdBQUE4RixRQUVBMUgsRUFBQWUsVUFBQTRHLGFBQUFwSCxFQUFBd0IsTUFBQW9FLElBR0FuRyxFQUFBZSxVQUFBNkcsZUFBQXJILEVBQUF3QixNQUFBb0UsR0FDQW5HLEVBQUFlLFVBQUE0RyxhQUFBcEgsRUFBQXdCLE1BQUFvRSxNQUlBQyxFQUFBdEMsT0FBQXVDLEdBQ0FELEVBQUF0QyxPQUFBWSxHQUNBMEIsRUFBQXRDLE9BQUEyQyxHQUNBTCxFQUFBdEMsT0FBQWYsR0FDQXFELEVBQUF0QyxPQUFBOEMsR0FDQTVHLEVBQUFlLFVBQUFMLE1BQUFvRCxPQUFBc0MsR0FFQXBHLEVBQUFlLFVBQUF3RSxNQUFBWSxFQUFBcEIsT0FBQXFCLEVBR0E3RixFQUFBLGVBQUFzSCxPQUNBdEgsRUFBQSxvQkFBQXVILFFBR0E5SCxFQUFBZSxVQUFBMEcsWUFBQSxTQUFBTSxFQUFBQyxHQUNBRCxFQUFBdEMsU0FBQSxjQUNBc0MsRUFBQS9GLFNBQUEsWUFDQXpCLEVBQUFQLEdBQUE4QyxRQUFBLGtCQUFBa0YsTUFHQWhJLEVBQUFlLFVBQUE0RyxhQUFBLFNBQUFJLEVBQUFDLEdBQ0FELEVBQUF0QyxTQUFBLGFBQ0FzQyxFQUFBOUYsWUFBQSxZQUNBMUIsRUFBQVAsR0FBQThDLFFBQUEsb0JBQUFrRixNQUVBRCxFQUFBL0YsU0FBQSxZQUNBekIsRUFBQVAsR0FBQThDLFFBQUEsa0JBQUFrRixLQUVBaEksRUFBQWUsVUFBQW9HLGNBQUFZLEdBRUEvSCxFQUFBZSxVQUFBNkcsZUFBQSxTQUFBRyxFQUFBQyxHQUNBaEksRUFBQWMsVUFBQTRFLFNBK0JBMUYsRUFBQWUsVUFBQThFLFVBQUEsU0FBQWpFLEdBYUEsUUFBQXFHLEdBQUFsRCxFQUFBbUQsR0FDQTNILEVBQUEsNkJBQUF3RSxFQUFBLEtBQ0FtQixLQUFBLGlCQUNBUSxLQUFBLFVBQUF3QixHQUNBcEYsUUFBQSxVQWZBLEdBQUF2QyxFQUFBd0IsTUFBQW1FLEtBQUEsU0FBQVEsS0FBQSxXQUNBLElBQUEsR0FBQXBFLEtBQUF0QyxHQUFBVyxPQUFBaUUsS0FDQXFELEVBQUFqSSxFQUFBVyxPQUFBaUUsS0FBQXRDLEdBQUF5QyxPQUFBLE9BSUEsS0FBQSxHQUFBb0QsS0FBQW5JLEdBQUFXLE9BQUFpRSxLQUNBcUQsRUFBQWpJLEVBQUFXLE9BQUFpRSxLQUFBdUQsR0FBQXBELE9BQUEsSUFZQS9FLEVBQUFlLFVBQUFnRixvQkFBQSxTQUFBbkUsRUFBQW1ELEdBQ0F4RSxFQUFBLGVBQUF3RSxFQUFBLEtBQUFxRCxRQUFBLElBQUEsV0FDQTdILEVBQUF3QixNQUFBZ0IsZUFDQS9DLEdBQUFlLFVBQUF3RSxNQUFBUixHQUlBLElBQUF4RSxFQUFBLGtCQUFBRSxTQUNBRixFQUFBLGVBQUF1SCxPQUNBdkgsRUFBQSxvQkFBQXNILFdBS0E3SCxHQUVBRCxjQ3hOQUEsU0FBQSxTQUFBQyxHQUVBLFlBOEVBLFNBQUFxSSxHQUFBQyxHQUNBLE1BQUEsc0JBQUFBLEVBQUFsRSxLQUNBLG9CQUVBa0UsRUFBQWxFLEtBQUEsSUFBQWtFLEVBQUFDLFNBQUFuRSxLQUFBLElBSUEsTUFwRkFwRSxHQUFBQSxNQUNBQSxFQUFBVyxVQUNBWCxFQUFBVyxPQUFBaUUsUUFFQTVFLEVBQUFXLE9BQUFDLFFBQUEsV0FDQUwsRUFBQVAsR0FBQTJCLEdBQUEsYUFBQTNCLEVBQUFXLE9BQUE2SCxLQUNBakksRUFBQVAsR0FBQTJCLEdBQUEsZUFBQTNCLEVBQUFXLE9BQUFvQyxRQUNBeEMsRUFBQVAsR0FBQTJCLEdBQUEsa0JBQUEzQixFQUFBVyxPQUFBaUcsV0FDQXJHLEVBQUFQLEdBQUEyQixHQUFBLGVBQUEzQixFQUFBVyxPQUFBcUYsU0FTQWhHLEVBQUFXLE9BQUE2SCxJQUFBLFNBQUE1RyxFQUFBZ0IsRUFBQTZGLEdBQ0EsR0FBQWpCLEdBQUF4SCxFQUFBVyxPQUFBK0gsVUFBQTlGLEVBQUE2RixFQUNBekksR0FBQVcsT0FBQWlFLEtBQUE0QyxFQUFBekMsT0FBQXlDLEVBRUF4SCxFQUFBMkksT0FBQSxVQUFBLFdBQUFuQixFQUFBNUUsS0FBQSw0QkFBQSxNQUdBckMsRUFBQVAsR0FBQThDLFFBQUEsZUFBQTBFLEtBT0F4SCxFQUFBVyxPQUFBb0MsT0FBQSxTQUFBbkIsRUFBQW1ELEdBRUEsSUFDQXhFLEVBQUFQLEdBQUE4QyxRQUFBLGlCQUFBaUMsSUFDQS9FLEVBQUEySSxPQUFBLE9BQUEsV0FBQTNJLEVBQUFXLE9BQUFpRSxLQUFBRyxHQUFBbkMsS0FBQSxxQ0FDQTVDLEdBQUFXLE9BQUFpRSxLQUFBRyxHQUNBLE1BQUE2RCxHQUVBLEtBREE1SSxHQUFBMkksT0FBQSxRQUFBLDJDQUNBQyxJQUtBNUksRUFBQVcsT0FBQWlHLFVBQUEsU0FBQWhGLEVBQUFtRCxHQUNBLEdBQUFpRCxHQUFBaEksRUFBQVcsT0FBQWlFLEtBQUFHLEVBRUEvRSxHQUFBVyxPQUFBNkgsT0FBQSxRQUFBUixFQUFBcEYsS0FBQW9GLEVBQUFhLE1BR0E3SSxFQUFBVyxPQUFBcUYsT0FBQSxTQUFBcEUsRUFBQXVFLEVBQUFGLEdBRUFqRyxFQUFBVyxPQUFBaUUsS0FBQXVCLEVBQUFwQixPQUFBbkMsS0FBQXFELEVBR0ExRixFQUFBUCxHQUFBOEMsUUFBQSxpQkFBQXFELEVBQUFwQixNQUFBa0IsS0FHQWpHLEVBQUFXLE9BQUErSCxVQUFBLFNBQUE5RixFQUFBa0csR0FDQSxHQUFBQyxHQUFBRCxFQUtBRSxFQUFBQyxFQUFBQyxPQUFBQyxhQUFBSixHQUNBNUMsR0FDQXZELEtBQUE1QyxFQUFBSSxLQUFBZ0osb0JBQUF4RyxHQUNBbUMsTUFBQWtFLEVBQUFsRSxNQUFBaUUsR0FDQUgsSUFBQUUsRUFDQTNFLEtBQUFpRSxFQUFBVSxHQUNBTSxhQUFBTCxFQUNBTSxVQUFBLEdBQUFDLE1BRUEsT0FBQXBELElBV0FuRyxHQUVBRCxjQzFGQUEsU0FBQSxTQUFBQyxHQUVBLFlBY0EsU0FBQXdKLEtBQ0F4SixFQUFBYSxJQUFBNEksTUFBQVIsRUFBQUMsT0FBQVEsWUFBQSx3RUFDQTFKLEVBQUFhLElBQUE4SSxFQUFBVixFQUFBQyxPQUFBckksSUFBQSxlQUFBLE1BQ0ErSSxhQUFBLEVBQ0FDLGVBQUEsSUFDQUMsU0FBQSxFQUFBLEdBQUEsR0FHQWIsRUFBQWMsUUFBQUMsTUFDQUMsU0FBQSxZQUNBQyxNQUFBbEssRUFBQWEsSUFBQThJLEdBRUFWLEVBQUFDLE9BQUFpQixnQkFBQSxpQkFDQUYsU0FBQSxZQUNBQyxNQUFBbEssRUFBQWEsSUFBQThJLEVBRUEsSUFBQVMsSUFDQUMsaUJBQUFwQixFQUFBQyxPQUFBb0IsVUFBQSxrQkFDQUMsa0JBQUF0QixFQUFBQyxPQUFBb0IsVUFBQSxtQkFDQUUsZUFBQXZCLEVBQUFDLE9BQUFvQixVQUFBLGdCQUNBRyxjQUFBeEIsRUFBQUMsT0FBQW9CLFVBQUEsZUFDQUksbUJBQUF6QixFQUFBQyxPQUFBb0IsVUFBQSxvQkFHQUYsR0FBQSxrQkFBQUYsTUFBQWxLLEVBQUFhLElBQUE4SSxHQUVBVixFQUFBYyxRQUFBcEosT0FBQXlKLE1BQ0FILFNBQUEsY0FDQVUsV0FBQSxJQUNBVCxNQUFBbEssRUFBQWEsSUFBQThJLEdBRUEzSixFQUFBYSxJQUFBK0osV0FBQTNCLEVBQUFDLE9BQUFDLGVBQ0FuSixFQUFBYSxJQUFBK0osV0FBQVYsTUFBQWxLLEVBQUFhLElBQUE4SSxHQUVBcEosRUFBQVAsR0FBQTJCLEdBQUEsY0FBQTNCLEVBQUFhLElBQUFnSyxVQUNBdEssRUFBQVAsR0FBQTJCLEdBQUEsYUFBQTNCLEVBQUFhLElBQUFpSyxXQUNBdkssRUFBQVAsR0FBQTJCLEdBQUEsYUFBQTNCLEVBQUFhLElBQUFrSyxXQUtBeEssRUFBQVAsRUFBQWEsSUFBQThJLEdBQUFoSSxHQUFBLGdCQUFBLFNBQUF5RixHQUNBLEdBQUExRCxHQUFBMEQsRUFBQWpGLGFBQ0FuQyxHQUFBYSxJQUFBOEksRUFBQXFCLFVBQUF0SCxFQUFBdUgsT0FFQSxJQUFBakQsSUFDQTVELEtBQUEsVUFDQW1FLFVBQ0FuRSxLQUFBLFFBQ0E4RyxhQUFBeEgsRUFBQXlILE9BQUFDLElBQUExSCxFQUFBeUgsT0FBQUUsTUFFQUMsWUFDQUMsTUFBQSxnQkFDQUMsZUFBQSxVQUNBQyxnQkFBQSxTQUlBbEwsR0FBQVAsR0FBQThDLFFBQUEsY0FBQSxnQkFBQWtGLE1BR0F6SCxFQUFBUCxFQUFBYSxJQUFBOEksR0FBQWhJLEdBQUEsZ0JBQUEsV0FDQTNCLEVBQUEySSxPQUFBLFFBQUEsNkNBQUEsT0E0RUEsTUF0SkEzSSxHQUFBQSxNQUNBQSxFQUFBYSxPQUVBYixFQUFBYSxJQUFBWCxLQUFBLFdBQ0FGLEVBQUFhLElBQUFILE1BQUFILEVBQUEsU0FBQW1HLEtBQUEsS0FBQSxnQkFBQTFFLFNBQUEsT0FDQWhDLEVBQUFVLE1BQUFvRCxPQUFBOUQsRUFBQWEsSUFBQUgsT0FFQUgsRUFBQVAsR0FBQTJCLEdBQUEsZ0JBQUEzQixFQUFBYSxJQUFBNkssYUFFQWxDLEtBb0dBeEosRUFBQWEsSUFBQThLLE1BQUEsRUFFQTNMLEVBQUFhLElBQUFnSyxTQUFBLFNBQUFqSixFQUFBdUUsR0FDQSxHQUFBNkMsR0FBQTdDLEVBQUFrRCxZQUNBckosR0FBQWEsSUFBQStKLFdBQUFDLFNBQUE3QixHQUdBQSxFQUFBNEMsVUFBQSxTQUFBekYsR0FDQSxHQUFBMEYsR0FBQSx1RUFFQSxJQUFBMUYsRUFBQTJGLFFBQUFSLFdBQ0EsSUFBQSxHQUFBNUUsS0FBQVAsR0FBQTJGLFFBQUFSLFdBQ0FPLEdBQUEsbUJBQUFuRixFQUFBLHFCQUFBUCxFQUFBMkYsUUFBQVIsV0FBQTVFLEdBQUEsaUJBR0FtRixJQUFBLHNEQUVBQSxJQUFBLFdBRUExRixFQUFBNEYsVUFBQTlDLEVBQUErQyxPQUNBQyxTQUFBLElBQ0FDLFVBQUEsSUFDQUMsZ0JBQUEsR0FBQSxJQUNBQyxVQUFBLGtCQUNBakcsR0FBQWtHLFdBQUFSLE9BS0E3TCxFQUFBYSxJQUFBaUssVUFBQSxTQUFBbEosRUFBQXVFLEdBQ0FuRyxFQUFBYSxJQUFBK0osV0FBQWMsWUFBQXZGLEVBQUFrRCxlQUdBckosRUFBQWEsSUFBQWtLLFVBQUEsU0FBQW5KLEVBQUF1RSxHQUNBbkcsRUFBQWEsSUFBQStKLFdBQUFDLFNBQUExRSxFQUFBa0QsZUFHQXJKLEVBQUFhLElBQUE2SyxZQUFBLFNBQUE5SixFQUFBbUQsR0FDQS9FLEVBQUFhLElBQUErSixXQUFBYyxZQUFBMUwsRUFBQVcsT0FBQWlFLEtBQUFHLEdBQUFzRSxlQUdBckosR0FFQUQsY0M1SkFBLFNBQUEsU0FBQUMsR0FFQSxZQW9DQSxPQWxDQUEsR0FBQUEsTUFDQUEsRUFBQTJJLE9BQUEsU0FBQXZFLEVBQUFsQixFQUFBb0osR0FDQSxHQUFBQyxHQUFBaE0sRUFBQSxTQUFBeUIsU0FBQSxnQkFDQUEsU0FBQW9DLEdBQ0FDLEtBQUFuQixFQUdBLElBQUEsVUFBQW9KLEVBQUEsQ0FFQSxHQUFBRSxHQUFBak0sRUFBQSxZQUFBeUIsU0FBQSxzQkFDQTBFLEtBQUEsT0FBQSxVQUNBckMsS0FBQSw4QkFFQW1JLEdBQUE3SyxHQUFBLFFBQUEsU0FBQUMsR0FDQXJCLEVBQUF3QixNQUFBOEUsU0FBQTlELFdBR0F4QyxFQUFBZ00sR0FBQXpJLE9BQUEwSSxHQUNBak0sRUFBQVAsRUFBQVUsT0FBQW9ELE9BQUF5SSxPQUlBaE0sR0FBQVAsRUFBQVUsT0FBQW9ELE9BQUF5SSxHQUVBRSxXQUFBLFdBQ0FGLEVBQUF4SixVQUNBdUosR0FBQSxNQVFBdE0sR0FFQUQsY0N4Q0FBLFNBQUEsU0FBQUMsR0FFQSxZQXFEQSxTQUFBME0sR0FBQTlLLEdBQ0FBLEVBQUFDLGdCQUNBLElBQUFhLEdBQUFuQyxFQUFBd0IsTUFBQWtCLEtBQUEsaUJBRUFqRCxHQUFBaUIsSUFBQXVCLElBQUFFLEdBQUFXLFdBSUE5QyxFQUFBUCxHQUFBOEMsUUFBQSxZQUFBSixJQUhBbkMsRUFBQVAsR0FBQThDLFFBQUEsaUJBQUFKLEVBQUExQyxFQUFBYyxVQUFBOEQsT0FRQSxRQUFBK0gsR0FBQS9LLEdBQ0FBLEVBQUFDLGdCQUVBLElBQUFhLEdBQUFuQyxFQUFBd0IsTUFBQWtCLEtBQUEsaUJBQ0EsS0FDQWpELEVBQUFpQixJQUFBd0IsS0FBQUMsR0FBQWtLLFVBQ0EsTUFBQWhFLEdBRUEsS0FEQTVJLEdBQUEySSxPQUFBLFFBQUEsaUNBQ0FDLEdBNEZBLE1BcEtBNUksR0FBQUEsTUFDQUEsRUFBQWlCLElBQUFqQixFQUFBaUIsUUFFQWpCLEVBQUFpQixJQUFBZixLQUFBLFdBRUEsR0FBQTJNLEdBQUF0TSxFQUFBLFNBQUF5QixTQUFBLGlCQUNBaEMsR0FBQVUsTUFBQW9ELE9BQUErSSxFQUdBLEtBQUEsR0FBQUMsS0FBQTlNLEdBQUFpQixJQUFBdUIsSUFBQSxDQUNBLEdBQUF1SyxHQUFBeE0sRUFBQSxZQUFBeUIsU0FBQSw4Q0FDQXFDLEtBQUEsT0FBQXlJLEVBQUEsV0FBQTlNLEVBQUFpQixJQUFBdUIsSUFBQXNLLEdBQUExSixZQUFBLFFBQ0FzRCxLQUFBLFlBQUEsR0FDQXpELEtBQUEsaUJBQUE2SixFQUNBQyxHQUFBcEwsR0FBQSxRQUFBK0ssR0FFQUcsRUFBQS9JLE9BQUFpSixHQUdBeE0sRUFBQVAsR0FBQTJCLEdBQUEsaUJBQUEzQixFQUFBaUIsSUFBQStMLFVBQ0F6TSxFQUFBUCxHQUFBMkIsR0FBQSxtQkFBQTNCLEVBQUFpQixJQUFBK0wsVUFDQXpNLEVBQUFQLEdBQUEyQixHQUFBLGdCQUFBM0IsRUFBQWlCLElBQUFnTSxZQUNBMU0sRUFBQVAsR0FBQTJCLEdBQUEsMkJBQUEzQixFQUFBaUIsSUFBQXdCLEtBQUEsYUFBQXlLLEtBQ0EzTSxFQUFBUCxHQUFBMkIsR0FBQSwwQkFBQTNCLEVBQUFpQixJQUFBd0IsS0FBQSxZQUFBeUssS0FDQTNNLEVBQUFQLEdBQUEyQixHQUFBLCtCQUFBM0IsRUFBQWlCLElBQUF3QixLQUFBLGlCQUFBeUssS0FDQTNNLEVBQUFQLEdBQUEyQixHQUFBLHdCQUFBM0IsRUFBQWlCLElBQUF3QixLQUFBdUQsT0FBQW1ILFNBR0EsSUFBQUMsR0FBQTdNLEVBQUEsU0FBQXlCLFNBQUEscUJBQ0EsS0FBQSxHQUFBcUwsS0FBQXJOLEdBQUFpQixJQUFBd0IsS0FDQSxHQUFBLFVBQUF6QyxFQUFBaUIsSUFBQXdCLEtBQUE0SyxHQUFBakosS0FBQSxDQUNBLEdBQUFrSixHQUFBL00sRUFBQSxTQUFBeUIsU0FBQSxvQkFDQW9MLEdBQUF0SixPQUFBd0osT0FDQSxDQUNBLEdBQUFDLEdBQUFoTixFQUFBLFlBQUF5QixTQUFBLGVBQ0FxQyxLQUFBckUsRUFBQWlCLElBQUF3QixLQUFBNEssR0FBQS9ILE1BQUEsS0FDQXJDLEtBQUEsaUJBQUFvSyxHQUNBcEssS0FBQSxlQUFBakQsRUFBQWlCLElBQUF3QixLQUFBNEssR0FBQWpLLFlBQ0EsVUFBQXBELEVBQUFpQixJQUFBd0IsS0FBQTRLLEdBQUFqSixNQUFBbUosRUFBQXZMLFNBQUEsaUJBQ0F1TCxFQUFBNUwsR0FBQSxRQUFBZ0wsR0FDQVMsRUFBQXRKLE9BQUF5SixHQUdBdk4sRUFBQVUsTUFBQW9ELE9BQUFzSixJQXdDQXBOLEVBQUFpQixJQUFBZ00sV0FBQSxTQUFBckwsRUFBQWMsRUFBQVcsR0FDQSxHQUFBbUssR0FBQXhOLEVBQUFpQixJQUFBd00sa0JBQUEvSyxFQUFBVyxHQUNBcUssRUFBQSxJQUNBLEtBQ0FBLEVBQUExTixFQUFBaUIsSUFBQXVCLElBQUFFLEdBQUFrSyxRQUFBWSxFQUFBbE4sU0FDQSxNQUFBc0ksR0FFQSxLQURBNUksR0FBQTJJLE9BQUEsNEVBQ0FDLEVBR0FySSxFQUFBUCxHQUFBOEMsUUFBQSxjQUFBMEssRUFBQTVLLEtBQUE4SyxLQU9BMU4sRUFBQWlCLElBQUF3TSxrQkFBQSxTQUFBL0ssRUFBQWlMLEdBQ0EsR0FBQWpLLEtBQ0FBLEdBQUFwRCxVQUVBLElBQUFzTixNQUNBQyxJQWlCQSxPQWZBdE4sR0FBQVAsRUFBQWMsVUFBQThELE1BQUF2QyxLQUFBLFNBQUFDLEdBQ0EsS0FBQS9CLEVBQUF1TixRQUFBLFVBQUE5TixFQUFBYyxVQUFBOEQsS0FBQXRDLEdBQUF5QyxNQUFBNEksR0FDQUMsRUFBQWhLLEtBQUE1RCxFQUFBYyxVQUFBOEQsS0FBQXRDLEdBQUF1RyxLQUVBK0UsRUFBQUcsUUFBQS9OLEVBQUFjLFVBQUE4RCxLQUFBdEMsR0FBQXVHLEtBRUFnRixFQUFBakssS0FBQTVELEVBQUFjLFVBQUE4RCxLQUFBdEMsR0FBQU0sUUFJQWMsRUFBQXBELFFBQUFDLEVBQUF5TixNQUFBSixFQUFBRCxHQUdBakssRUFBQWQsS0FBQTVDLEVBQUFJLEtBQUE2TixPQUFBSixFQUFBLElBQUFuTCxHQUVBZ0IsR0FHQTFELEVBQUFpQixJQUFBK0wsU0FBQSxTQUFBcEwsRUFBQXVFLEdBeUJBLFFBQUErSCxHQUFBQyxHQUNBLEdBQUFDLEdBQUE3TixFQUFBLG1CQUFBNE4sRUFBQSxJQUNBQyxHQUFBcE0sU0FBQSxzQkFDQW9NLEVBQUExSCxLQUFBLFlBQUEsR0FHQSxRQUFBMkgsR0FBQUYsR0FDQSxHQUFBQyxHQUFBN04sRUFBQSxtQkFBQTROLEVBQUEsSUFDQUMsR0FBQW5NLFlBQUEsc0JBQ0FtTSxFQUFBMUgsS0FBQSxZQUFBLEdBL0JBLElBQUEsR0FBQXlCLEtBQUFuSSxHQUFBaUIsSUFBQXVCLElBQUEsQ0FDQSxHQUFBMkwsR0FBQW5PLEVBQUFpQixJQUFBdUIsSUFBQTJGLEVBQ0EsSUFBQW5JLEVBQUFjLFVBQUE4RCxLQUFBbkUsT0FBQTBOLEVBQUFHLGFBQUF0TyxFQUFBYyxVQUFBOEQsS0FBQW5FLE9BQUEwTixFQUFBSSxZQUNBTCxFQUFBL0YsT0FLQSxLQUFBLEdBQUFxRyxHQUFBLEVBQUFBLEVBQUF4TyxFQUFBYyxVQUFBOEQsS0FBQW5FLE9BQUErTixJQUFBLENBQ0EsR0FBQUMsR0FBQXpPLEVBQUFjLFVBQUE4RCxLQUFBNEosRUFHQWpPLEdBQUF1TixRQUFBVyxFQUFBckssS0FBQStKLEVBQUFPLGFBQUFDLE9BQUEsSUFBQVIsRUFBQU8sYUFBQUUsa0JBQUEsRUFDQVAsRUFBQWxHLEdBRUErRixFQUFBL0YsTUFxQkFuSSxHQUVBRCxjQzFLQUEsU0FBQSxTQUFBQyxHQUVBLFlBa1ZBLE9BaFZBQSxHQUFBQSxNQUNBQSxFQUFBaUIsSUFBQWpCLEVBQUFpQixRQUVBakIsRUFBQWlCLElBQUF3QixNQUNBb00sUUFDQXpMLFlBQUEsdUNBQ0FrQyxLQUFBLCtCQUNBc0gsUUFBQSxXQUdBLEdBQUFrQyxHQUFBdk8sRUFBQSxXQUNBMEMsS0FBQSxPQUFBLFFBQ0FBLEtBQUEsV0FBQSxRQUNBOEwsSUFBQSxhQUFBLFVBQ0FBLElBQUEsV0FBQSxZQUNBQSxJQUFBLFNBQUEsS0FDQXBOLEdBQUEsU0FBQSxXQUNBLEdBQUFPLEdBQUFILEtBQUFHLEtBQ0EzQixHQUFBMkIsR0FBQUcsS0FBQSxTQUFBQyxHQVdBdEMsRUFBQUksS0FBQW1DLFNBQUFMLEVBQUFJLE1BSUF3TSxFQUFBL0wsVUFFQXhDLEdBQUEsUUFBQXVELE9BQUFnTCxHQUNBQSxFQUFBRSxVQUlBQyxZQUNBN0wsWUFBQSx5QkFDQWtDLEtBQUEsNkJBQ0FqQyxhQUVBVCxLQUFBLE1BQ0FRLFlBQUEsTUFDQWdCLEtBQUEsT0FDQThLLFVBQUEsWUFHQXRDLFFBQUEsV0FDQXJNLEVBQUFQLEdBQUE4QyxRQUFBLGFBQUEsY0FFQW9LLElBQUEsU0FBQXRMLEVBQUFnQixFQUFBUyxHQUNBLEdBQUE4TCxHQUFBOUwsRUFBQSxFQUNBckQsR0FBQUksS0FBQWdQLElBQUFELEVBQUFuUCxFQUFBaUIsSUFBQXdCLEtBQUFHLEdBQUF1SyxXQUVBQSxTQUFBLFNBQUFpQyxFQUFBQyxHQUVBLEdBREF0UCxTQUFBSyxLQUFBa1AsUUFBQSxHQUNBLE1BQUFGLEVBQUFHLE9BQUEsQ0FDQSxHQUFBN0wsR0FBQThMLEtBQUFDLE1BQUFMLEVBQUFNLGNBRUE5TSxFQUFBd00sRUFBQU8sWUFBQUMsVUFBQVIsRUFBQU8sWUFBQUUsWUFBQSxLQUFBLEVBQ0F0UCxHQUFBUCxHQUFBOEMsUUFBQSxjQUFBRixFQUFBYyxRQUVBMUQsR0FBQTJJLE9BQUEsUUFBQXlHLEVBQUFHLE9BQUEsc0RBS0FPLGFBQ0ExTSxZQUFBLHlCQUNBa0MsS0FBQSwrQkFDQWpDLGFBRUFULEtBQUEsT0FDQVEsWUFBQSxpQkFDQWdCLEtBQUEsT0FDQThLLFVBQUEsNkJBR0F0QyxRQUFBLFdBQ0FyTSxFQUFBUCxHQUFBOEMsUUFBQSxhQUFBLGVBRUFvSyxJQUFBLFNBQUF0TCxFQUFBZ0IsRUFBQVMsR0FDQSxHQUFBME0sR0FBQTFNLEVBQUEsR0FBQTJNLE1BQUEsS0FBQTNNLEVBQUEsR0FBQTJNLE1BQUEsS0FBQXZQLE9BQUEsR0FDQTBPLEVBQUEsZ0NBQUFZLENBQ0EvUCxHQUFBSSxLQUFBZ1AsSUFBQUQsRUFBQW5QLEVBQUFpQixJQUFBd0IsS0FBQUcsR0FBQXVLLFdBRUFBLFNBQUEsU0FBQWlDLEVBQUFDLEdBRUEsR0FEQXRQLFNBQUFLLEtBQUFrUCxRQUFBLEdBQ0EsTUFBQUYsRUFBQUcsT0FBQSxDQUNBLEdBQUE3TCxHQUFBOEwsS0FBQUMsTUFBQUwsRUFBQU0sYUFDQSxLQUFBLEdBQUFPLEtBQUF2TSxHQUFBeEIsTUFBQSxDQUNBLEdBQUFVLEdBQUFjLEVBQUF4QixNQUFBK04sR0FBQUMsUUFDQTNQLEdBQUFQLEdBQUE4QyxRQUFBLGNBQUFGLEVBQUE0TSxLQUFBQyxNQUFBL0wsRUFBQXhCLE1BQUErTixHQUFBcEUsZ0JBSUE3TCxHQUFBMkksT0FBQSxRQUFBeUcsRUFBQUcsT0FBQSxzREFLQVksaUJBQ0EvTSxZQUFBLHlCQUNBa0MsS0FBQSxpQ0FDQThLLFNBQ0EvTSxhQUVBVCxLQUFBLFFBQ0FRLFlBQUEsb0lBQ0FnQixLQUFBLE9BQ0E4SyxVQUFBLGdCQUdBdE0sS0FBQSxhQUNBUSxZQUFBLGdEQUNBZ0IsS0FBQSxPQUNBOEssVUFBQSx3QkFHQXRDLFFBQUEsV0FDQXJNLEVBQUFQLEdBQUE4QyxRQUFBLGFBQUEsbUJBRUFvSyxJQUFBLFNBQUF0TCxFQUFBZ0IsRUFBQVMsR0FFQXJELEVBQUFpQixJQUFBd0IsS0FBQSxpQkFBQTJOLE1BQUFDLFVBQUFoTixFQUFBLEVBR0EsSUFBQWlOLEdBQUF0USxFQUFBSSxLQUFBbVEsU0FDQXZRLEdBQUFJLEtBQUFnUCxJQUFBLDBEQUFBL0wsRUFBQSxHQUFBLEtBQUFpTixFQUFBLFNBQUF0USxFQUFBaUIsSUFBQXdCLEtBQUEsaUJBQUEwSyxXQUVBQSxTQUFBLFNBQUFpQyxFQUFBQyxHQUVBLEdBREF0UCxTQUFBSyxLQUFBa1AsUUFBQSxHQUNBLE1BQUFGLEVBQUFHLE9BQUEsQ0FDQSxHQUFBN0wsR0FBQThMLEtBQUFDLE1BQUFMLEVBQUFNLGNBQ0EzRyxFQUFBeUgsYUFBQTlNLEdBQ0ErTSxnQkFBQSxHQUVBL00sR0FBQWdOLFNBQUFqUSxRQUdBRixFQUFBUCxHQUFBOEMsUUFBQSxjQUFBOUMsRUFBQWlCLElBQUF3QixLQUFBLGlCQUFBMk4sTUFBQUMsVUFBQXRILElBQ0EvSSxFQUFBMkksT0FBQSxVQUFBLGlCQUFBakYsRUFBQWdOLFNBQUFqUSxPQUFBLDZDQUhBVCxFQUFBMkksT0FBQSxPQUFBLHdDQU1BM0ksR0FBQTJJLE9BQUEsUUFBQXlHLEVBQUFHLE9BQUEsd0NBS0FwTyxVQUNBaUMsWUFBQSwrQkFDQWtDLEtBQUEsbUNBQ0FzSCxRQUFBLFdBQ0ErRCxVQUFBQyxZQUdBNVEsRUFBQWEsSUFBQThJLEVBQUFrSCxTQUZBN1EsRUFBQTJJLE9BQUEsUUFBQSxnREFBQSxPQU9BbUksUUFBQTFNLEtBQUEsU0FFQTJNLGdCQUNBeEMsWUFBQSxFQUNBbkwsWUFBQSxrQkFDQWtDLEtBQUEsb0NBQ0EwTCxjQUFBLEVBQ0FwRSxRQUFBLFdBQ0EsSUFBQSxHQUFBdEssR0FBQSxFQUFBQSxFQUFBdEMsRUFBQWMsVUFBQThELEtBQUFuRSxPQUFBNkIsSUFBQSxDQUNBLEdBQUF1SixHQUFBMkQsS0FBQXlCLFVBQUFqUixFQUFBYyxVQUFBOEQsS0FBQXRDLEdBQUF1RyxLQUNBMEMsRUFBQSxZQUFBdkwsRUFBQWMsVUFBQThELEtBQUF0QyxHQUFBTSxLQUFBLFVBQ0FzTyxRQUFBLEdBQUFDLE9BQUF0RixJQUNBekgsS0FBQSw2QkFDQW1ILE1BS0E2RixrQkFDQTdDLFlBQUEsRUFDQW5MLFlBQUEsb0JBQ0FrQyxLQUFBLDZCQUNBc0gsUUFBQSxXQUNBck0sRUFBQVAsRUFBQWMsVUFBQThELE1BQUF2QyxLQUFBLFNBQUFDLEdBQ0EsSUFDQSxHQUFBaEMsSUFDQStRLE9BQUEsWUFBQXJSLEVBQUFjLFVBQUE4RCxLQUFBdEMsR0FBQU0sS0FDQStMLE9BQ0EyQyxNQUFBLFlBQUF0UixFQUFBYyxVQUFBOEQsS0FBQXRDLEdBQUFNLEtBQUEsU0FDQTJPLFFBQUEsWUFBQXZSLEVBQUFjLFVBQUE4RCxLQUFBdEMsR0FBQU0sS0FBQSxRQUNBNE8sS0FBQSxZQUFBeFIsRUFBQWMsVUFBQThELEtBQUF0QyxHQUFBTSxLQUFBLFNBR0E2TyxVQUFBQyxTQUFBMVIsRUFBQWMsVUFBQThELEtBQUF0QyxHQUFBdUcsSUFBQXZJLEdBQ0EsTUFBQXNJLEdBRUEsS0FEQTVJLEdBQUEySSxPQUFBLFFBQUEsaURBQUFDLEdBQ0FBLE1BSUFvSSxjQUFBLEdBR0FXLFFBQUF2TixLQUFBLFNBRUF3TixRQUNBckQsWUFBQSxFQUNBbkwsWUFBQSx3QkFDQWtDLEtBQUEsOEJBQ0FzSCxRQUFBLFdBQ0EsR0FBQTVNLEVBQUFjLFVBQUE4RCxLQUFBbkUsT0FHQSxDQUVBLEdBQUF3SyxFQUNBMUssR0FBQVAsRUFBQWMsVUFBQThELE1BQUF2QyxLQUFBLFNBQUFtRixHQUNBLEdBQUF3QixHQUFBaEosRUFBQWMsVUFBQThELEtBQUE0QyxHQUFBNkIsWUFDQTdCLEdBQ0F5RCxFQUFBNEcsT0FBQTdJLEVBQUE4SSxhQURBN0csRUFBQWpDLEVBQUE4SSxjQUdBOVIsRUFBQWEsSUFBQThJLEVBQUFxQixVQUFBQyxPQVRBakwsR0FBQWEsSUFBQThJLEVBQUFxQixVQUFBaEwsRUFBQWEsSUFBQStKLFdBQUFrSCxlQWVBQyxRQUNBeEQsWUFBQSxFQUNBbkwsWUFBQSxtREFDQWtDLEtBQUEsK0JBQ0FzSCxRQUFBLFdBQ0EsR0FBQWpCLEdBQUEsQ0FDQSxJQUFBLElBQUEzTCxFQUFBYyxVQUFBOEQsS0FBQW5FLE9BQUEsQ0FDQSxHQUFBdVIsR0FBQWhTLEVBQUFjLFVBQUE4RCxLQUFBLEVBQ0EsSUFBQSxzQkFBQW9OLEVBQUFuSixJQUFBekUsS0FLQSxDQUNBLEdBQUF3RSxHQUFBLEdBQUFxSixPQUFBLHlDQUVBLE1BREFqUyxHQUFBMkksT0FBQSxRQUFBLHFDQUNBQyxFQVBBckksRUFBQXlSLEVBQUFuSixJQUFBcUosVUFBQTdQLEtBQUEsU0FBQTROLEdBQ0F0RSxJQUNBcEwsRUFBQVAsR0FBQThDLFFBQUEsY0FBQWtQLEVBQUFwUCxLQUFBK0ksRUFBQSxJQUFBcUcsRUFBQW5KLElBQUFxSixTQUFBakMsR0FBQTFILFNBQUFuRSxLQUFBNE4sRUFBQW5KLElBQUFxSixTQUFBakMsV0FRQWpRLEdBQUEySSxPQUFBLE9BQUEsbUNBS0F3SixTQUNBNUQsWUFBQSxFQUNBbkwsWUFBQSw2REFDQWtDLEtBQUEsaUNBQ0FzSCxRQUFBLFdBQ0EsR0FBQW9GLElBQ0E1TixLQUFBLG9CQUNBOE4sWUFFQWxTLEdBQUFjLFVBQUE4RCxLQUFBbkUsT0FBQSxHQUNBRixFQUFBUCxFQUFBYyxVQUFBOEQsTUFBQXZDLEtBQUEsU0FBQTROLEdBQ0Esc0JBQUFqUSxFQUFBYyxVQUFBOEQsS0FBQXFMLEdBQUFwSCxJQUFBekUsS0FDQTROLEVBQUFFLFNBQUF0TyxLQUFBNUQsRUFBQWMsVUFBQThELEtBQUFxTCxHQUFBcEgsS0FFQTdJLEVBQUEySSxPQUFBLE9BQUEzSSxFQUFBYyxVQUFBOEQsS0FBQXFMLEdBQUFyTixLQUFBLDhEQUdBckMsRUFBQVAsR0FBQThDLFFBQUEsY0FBQSx3QkFBQWtQLEtBRUFoUyxFQUFBMkksT0FBQSxPQUFBLHlCQWNBeUosUUFBQWhPLEtBQUEsU0FFQTRCLFFBQ0F1SSxZQUFBLEVBQ0FuTCxZQUFBLGVBQ0FrQyxLQUFBLCtCQUNBakMsYUFFQVQsS0FBQSxPQUNBd0IsS0FBQSxPQUNBaEIsWUFBQSxLQUdBd0osUUFBQSxXQUNBLElBQUE1TSxFQUFBYyxVQUFBOEQsS0FBQW5FLE9BQ0FGLEVBQUFQLEdBQUE4QyxRQUFBLGFBQUEsV0FFQTlDLEVBQUEySSxPQUFBLE9BQUEsOENBR0F3RSxTQUFBLFNBQUF2TCxFQUFBZ0IsRUFBQVMsR0FDQTlDLEVBQUFQLEdBQUE4QyxRQUFBLGdCQUFBOUMsRUFBQWMsVUFBQThELEtBQUEsR0FBQXZCLEVBQUEsT0FJQU4sUUFDQXdMLFlBQUEsRUFDQW5MLFlBQUEseUJBQ0FrQyxLQUFBLGdDQUNBc0gsUUFBQSxXQUNBck0sRUFBQVAsRUFBQWMsVUFBQThELE1BQUF2QyxLQUFBLFNBQUFDLEdBQ0EvQixFQUFBUCxHQUFBOEMsUUFBQSxnQkFBQWYsS0FBQWdELFVBRUEvRSxFQUFBYyxVQUFBNEUsVUFJQTdDLE1BQ0F1QixLQUFBLE9BQ0FoQixZQUFBLDRCQUNBa0MsS0FBQSw2QkFDQXNILFFBQUEsV0FDQXlGLE9BQUFsUixTQUFBLGlCQUtBbkIsR0FFQUQsY0N0VkFBLFNBQUEsU0FBQUMsR0FFQSxZQW9WQSxPQWxWQUEsR0FBQUEsTUFDQUEsRUFBQWlCLElBQUFqQixFQUFBaUIsUUFFQWpCLEVBQUFpQixJQUFBdUIsS0FDQThQLE9BQ0EvRCxZQUFBLEVBQ0FELFlBQUEsRUFDQUksY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxzQkFBQSxzQkFFQXZMLFlBQUEsMkVBQ0FDLGFBRUFULEtBQUEsV0FDQVEsWUFBQSwwQkFDQWdCLEtBQUEsU0FDQThLLFVBQUEsS0FHQXRNLEtBQUEsUUFDQXdCLEtBQUEsU0FDQWhCLFlBQUEsR0FDQTlDLFNBQUEsUUFBQSxhQUFBLFVBQUEsV0FDQTRPLFVBQUEsVUFHQXRDLFFBQUEsU0FBQWUsR0FDQSxHQUFBRCxLQVVBLE9BTEFBLEdBREEsc0JBQUFDLEVBQUEsR0FBQXZKLEtBQ0FwRSxFQUFBSSxLQUFBbVMsVUFBQTVFLEVBQUEsR0FBQSxRQUFBQSxHQUdBNkUsS0FBQUYsTUFBQUcsTUFBQSxLQUFBOUUsS0FNQStFLFFBQ0FuRSxZQUFBLEVBQ0FELFlBQUEsRUFDQUksY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxzQkFBQSxzQkFFQXZMLFlBQUEsbUZBQ0FDLGFBRUFULEtBQUEsYUFDQVEsWUFBQSxzQ0FDQWdCLEtBQUEsU0FDQThLLFVBQUEsTUFHQXRNLEtBQUEsWUFDQVEsWUFBQSw0REFDQWdCLEtBQUEsU0FDQThLLFVBQUEsTUFJQXRDLFFBQUEsU0FBQWUsR0FDQSxHQUFBRCxLQVVBLE9BTEFBLEdBREEsc0JBQUFDLEVBQUEsR0FBQXZKLEtBQ0FwRSxFQUFBSSxLQUFBbVMsVUFBQTVFLEVBQUEsR0FBQSxTQUFBQSxHQUdBNkUsS0FBQUUsT0FBQUQsTUFBQSxLQUFBOUUsS0FNQWdGLFFBQ0FyRSxZQUFBLEVBQ0FDLFlBQUEsRUFDQUcsY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxVQUFBLHNCQUVBdkwsWUFBQSxpSEFDQUMsYUFFQVQsS0FBQSxXQUNBUSxZQUFBLCtCQUNBZ0IsS0FBQSxTQUNBOEssVUFBQSxLQUdBdE0sS0FBQSxPQUNBd0IsS0FBQSxTQUNBaEIsWUFBQSxHQUNBOUMsU0FBQSxRQUFBLE9BQUEsYUFBQSxTQUFBLFdBQ0E0TyxVQUFBLFVBR0F0QyxRQUFBLFNBQUFlLEdBQ0EsR0FBQUQsR0FBQThFLEtBQUFHLE9BQUFGLE1BQUEsS0FBQTlFLEVBQ0EsT0FBQUQsS0FJQWtGLFFBQ0FyRSxZQUFBLEVBQ0FELFlBQUEsRUFDQUksY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxVQUFBLHNCQUVBdkwsWUFBQSxnREFDQUMsYUFFQVQsS0FBQSxZQUNBUSxZQUFBLGdGQUNBZ0IsS0FBQSxjQUdBd0ksUUFBQSxTQUFBZSxHQUNBLEdBQUFELEtBT0EsT0FKQUEsR0FEQSxTQUFBQyxFQUFBLEdBQ0EzTixFQUFBSSxLQUFBbVMsVUFBQTVFLEVBQUEsR0FBQSxTQUFBQSxHQUVBNkUsS0FBQUksT0FBQUgsTUFBQSxLQUFBOUUsS0FNQWtGLFVBQ0F0RSxZQUFBLEVBQ0FELFlBQUEsRUFDQUksY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxVQUFBLHNCQUVBdkwsWUFBQSxtREFDQUMsYUFFQVQsS0FBQSxZQUNBUSxZQUFBLGdGQUNBZ0IsS0FBQSxjQUdBd0ksUUFBQSxTQUFBZSxHQUNBLEdBQUFELEtBT0EsT0FKQUEsR0FEQSxTQUFBQyxFQUFBLEdBQ0EzTixFQUFBSSxLQUFBbVMsVUFBQTVFLEVBQUEsR0FBQSxXQUFBQSxHQUVBNkUsS0FBQUssU0FBQUosTUFBQSxLQUFBOUUsS0FNQW1GLGFBQ0F2RSxZQUFBLEVBQ0FELFlBQUEsRUFDQUksY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxpQkFBQSxzQkFFQXZMLFlBQUEsd05BQ0FDLGFBRUFULEtBQUEsV0FDQVEsWUFBQSxtQ0FDQWdCLEtBQUEsU0FDQThLLFVBQUEsS0FHQXRNLEtBQUEsVUFDQVEsWUFBQSwyQkFDQWdCLEtBQUEsU0FDQThLLFVBQUEsSUFJQXRNLEtBQUEsUUFDQXdCLEtBQUEsU0FDQWhCLFlBQUEsR0FDQTlDLFNBQUEsUUFBQSxhQUFBLFVBQUEsV0FDQTRPLFVBQUEsVUFHQXRDLFFBQUEsU0FBQWUsR0FDQSxHQUFBRCxLQVVBLE9BTEFBLEdBREEsc0JBQUFDLEVBQUEsR0FBQXZKLEtBQ0FwRSxFQUFBSSxLQUFBbVMsVUFBQTVFLEVBQUEsR0FBQSxjQUFBQSxHQUdBNkUsS0FBQU0sWUFBQUwsTUFBQSxLQUFBOUUsS0FNQW9GLFVBQ0F4RSxZQUFBLEVBQ0FELFlBQUEsRUFDQUksY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxzQkFFQXZMLFlBQUEsZ0dBQ0F3SixRQUFBLFNBQUFlLEdBQ0EsR0FBQUQsR0FBQThFLEtBQUFPLFNBQUFOLE1BQUEsS0FBQTlFLEVBQ0EsT0FBQUQsS0FJQXNGLFNBQ0F6RSxZQUFBLEVBQ0FELFlBQUEsRUFDQUksY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxVQUFBLHNCQUVBdkwsWUFBQSwwRUFDQXdKLFFBQUEsU0FBQWUsR0FDQSxHQUFBRCxHQUFBOEUsS0FBQVEsUUFBQVAsTUFBQSxLQUFBOUUsRUFDQSxPQUFBRCxLQUlBdUYsVUFDQTFFLFlBQUEsRUFDQUQsWUFBQSxFQUNBSSxjQUNBRSxnQkFBQSxFQUNBRCxPQUFBLG1CQUVBdkwsWUFBQSw0REFDQXdKLFFBQUEsU0FBQWUsR0FDQSxHQUFBRCxHQUFBOEUsS0FBQVMsU0FBQVIsTUFBQSxLQUFBOUUsRUFDQSxPQUFBRCxLQUlBd0YsVUFDQTNFLFlBQUEsRUFDQUQsWUFBQSxFQUNBSSxjQUNBRSxnQkFBQSxFQUNBRCxPQUFBLHNCQUFBLG1CQUFBLHNCQUVBdkwsWUFBQSx5SEFDQUMsYUFFQVQsS0FBQSxZQUNBUSxZQUFBLDJCQUNBZ0IsS0FBQSxTQUNBOEssVUFBQSxLQUdBdE0sS0FBQSxlQUNBd0IsS0FBQSxXQUNBaEIsWUFBQSx5R0FDQThMLFdBQUEsSUFHQXRDLFFBQUEsU0FBQWUsR0FDQSxHQUFBRCxLQVVBLE9BTEFBLEdBREEsc0JBQUFDLEVBQUEsR0FBQXZKLEtBQ0FwRSxFQUFBSSxLQUFBbVMsVUFBQTVFLEVBQUEsR0FBQSxXQUFBQSxHQUdBNkUsS0FBQVUsU0FBQVQsTUFBQSxLQUFBOUUsS0FNQXdGLEtBQ0E1RSxZQUFBLEVBQ0FELFlBQUEsRUFDQUksY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxzQkFFQXZMLFlBQUEsdURBQ0F3SixRQUFBLFNBQUFlLEdBQ0EsR0FBQUQsR0FBQThFLEtBQUFXLElBQUFWLE1BQUEsS0FBQTlFLEVBQ0EsT0FBQUQsS0FJQTBGLE9BQ0E3RSxZQUFBLEVBQ0FELFlBQUEsRUFDQUksY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxxQkFFQXZMLFlBQUEsNklBQ0F3SixRQUFBLFNBQUFlLEdBQ0EsR0FBQUQsR0FBQThFLEtBQUFZLE1BQUFYLE1BQUEsS0FBQTlFLEVBQ0EsT0FBQUQsS0FJQTJGLFFBQ0E5RSxZQUFBLEVBQ0FELFlBQUEsRUFDQUksY0FDQUUsZ0JBQUEsRUFDQUQsT0FBQSxzQkFFQXZMLFlBQUEsc0lBQ0FDLGFBRUFULEtBQUEsaUJBQ0FRLFlBQUEsdUhBQ0FnQixLQUFBLFdBSUF3SSxRQUFBLFNBQUFlLEdBQ0EsR0FBQUQsR0FBQThFLEtBQUFhLE9BQUFaLE1BQUEsS0FBQTlFLEVBQ0EsT0FBQUQsTUFLQTFOLEdBRUFELGNDeFZBQSxTQUFBLFNBQUFDLEdBRUEsWUFrQ0EsU0FBQXNULEdBQUExUixFQUFBbUQsR0FDQS9FLEVBQUFjLFVBQUFpQyxXQUFBZ0MsTUFBQUEsSUFDQS9FLEVBQUFjLFVBQUE0RSxRQUdBLE1BckNBMUYsR0FBQUEsTUFFQUEsRUFBQWMsYUFDQWQsRUFBQWMsVUFBQThELFFBRUE1RSxFQUFBYyxVQUFBWixLQUFBLFdBQ0FLLEVBQUFQLEdBQUEyQixHQUFBLGlCQUFBM0IsRUFBQWMsVUFBQTBILEtBQ0FqSSxFQUFBUCxHQUFBMkIsR0FBQSxtQkFBQTNCLEVBQUFjLFVBQUFpQyxRQUNBeEMsRUFBQVAsR0FBQTJCLEdBQUEsZ0JBQUEyUixJQUdBdFQsRUFBQWMsVUFBQTBILElBQUEsU0FBQTVHLEVBQUF1RSxHQUNBbkcsRUFBQWMsVUFBQThELEtBQUFoQixLQUFBdUMsSUFHQW5HLEVBQUFjLFVBQUFpQyxPQUFBLFNBQUFuQixFQUFBdUUsR0FDQSxHQUFBb04sR0FBQSxJQUNBaFQsR0FBQVAsRUFBQWMsVUFBQThELE1BQUF2QyxLQUFBLFNBQUFDLEdBQ0F0QyxFQUFBYyxVQUFBOEQsS0FBQXRDLEdBQUF5QyxRQUFBb0IsRUFBQXBCLFFBQ0F3TyxFQUFBalIsS0FHQXRDLEVBQUFjLFVBQUE4RCxLQUFBNE8sT0FBQUQsRUFBQSxJQUdBdlQsRUFBQWMsVUFBQTRFLE1BQUEsV0FDQW5GLEVBQUEsd0JBQUEwQixZQUFBLFlBQ0ExQixFQUFBLGtCQUFBeUIsU0FBQSxzQkFDQXpCLEVBQUEsa0JBQUFtRyxLQUFBLFlBQUEsR0FDQTFHLEVBQUFjLFVBQUE4RCxTQVFBNUUsR0FHQUQsY0M1Q0FBLFNBQUEsU0FBQUMsR0FFQSxZQXNLQSxPQXBLQUEsR0FBQUEsTUFFQUEsRUFBQUksUUFFQUosRUFBQUksS0FBQWdKLG9CQUFBLFNBQUFxSyxHQUVBLE1BREFBLEdBQUFBLEVBQUFDLFFBQUEsWUFBQSxLQUlBMVQsRUFBQUksS0FBQXVULGlCQUFBLFNBQUFGLEdBR0EsTUFGQUEsR0FBQUEsRUFBQUMsUUFBQSxhQUFBLElBQ0FuUyxRQUFBQyxJQUFBaVMsR0FDQUEsR0FHQXpULEVBQUFJLEtBQUE2TixPQUFBLFNBQUEyRixFQUFBQyxFQUFBQyxHQUNBLEdBQUFMLEdBQUEsRUFLQSxPQUpBbFQsR0FBQXFULEdBQUF2UixLQUFBLFNBQUEwUixHQUNBTixHQUFBSSxFQUFBRCxFQUFBRyxLQUVBTixFQUFBSyxFQUFBTCxHQUlBelQsRUFBQUksS0FBQWdQLElBQUEsU0FBQUQsRUFBQWhDLEdBQ0FwTixTQUFBSyxLQUFBa1AsUUFBQSxFQUNBLElBQUFGLEdBQUEsR0FBQTRFLGVBQ0E1RSxHQUFBNkUsS0FBQSxNQUFBOUUsR0FDQUMsRUFBQThFLE9BQUEvRyxFQUFBZ0gsS0FBQXBTLEtBQUFxTixHQUNBQSxFQUFBZ0YsUUFBQSxTQUFBaEYsR0FDQXJQLFNBQUFLLEtBQUFrUCxRQUFBLEdBQ0EvTixRQUFBbEIsTUFBQStPLEdBQ0FwUCxFQUFBMkksT0FBQSxRQUFBLG9CQUFBd0csRUFBQSxPQUVBQyxFQUFBaUYsUUFHQXJVLEVBQUFJLEtBQUFtQyxTQUFBLFNBQUFFLEdBQ0EsR0FBQTZSLEdBQUEsR0FBQUMsV0FFQTlSLEdBQUFHLEtBQUE0UixRQUFBLFFBQUEsSUFBQS9SLEVBQUFHLEtBQUE0UixRQUFBLFFBQUEsSUFDQUYsRUFBQUcsa0JBQUFoUyxHQUNBekMsRUFBQUksS0FBQWtQLFFBQUEsR0FDQWdGLEVBQUFJLFVBQUEsU0FBQTlTLEdBQ0ErUyxJQUFBTCxFQUFBNUcsUUFBQWtILEtBQUEsU0FBQTdMLEdBQ0EvSSxFQUFBSSxLQUFBa1AsUUFBQSxHQUNBL08sRUFBQVAsR0FBQThDLFFBQUEsY0FBQWlHLEVBQUE4TCxTQUFBOUwsU0FJQXVMLEVBQUFRLFdBQUFyUyxFQUFBLFNBQ0E2UixFQUFBSixPQUFBLFdBQ0EzVCxFQUFBUCxHQUFBOEMsUUFBQSxjQUFBTCxFQUFBRyxLQUFBNE0sS0FBQUMsTUFBQTZFLEVBQUE1RyxhQVdBMU4sRUFBQUksS0FBQTJVLFlBQUEsV0FDQSxHQUFBQyxHQUFBN1QsU0FBQUMsT0FBQTZULE9BQUEsR0FDQWpGLE1BQUEscUJBQ0FrRixPQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQTFVLE9BQUEsSUFHQWlOLElBY0EsT0FaQXNILEdBQUFJLFFBQUEsU0FBQUMsRUFBQS9TLEdBQ0EsR0FBQSxJQUFBQSxHQUFBQSxFQUFBLElBQUEsRUFBQSxDQUNBLEdBQUFnVCxHQUFBRCxFQUFBM0IsUUFBQSxPQUFBLEdBRUFoRyxHQUFBNEgsS0FDQTVILEVBQUE0SCxPQUdBNUgsRUFBQTRILEdBQUExUixLQUFBMlIsbUJBQUFQLEVBQUExUyxFQUFBLFFBSUFvTCxHQUdBMU4sRUFBQUksS0FBQWlCLGlCQUFBLFdBQ0EsR0FBQXFDLEdBQUExRCxFQUFBSSxLQUFBMlUsYUFHQXJSLEdBQUFxTSxNQUFBck0sRUFBQXFNLEtBQUF0UCxRQUNBRixFQUFBbUQsRUFBQXFNLE1BQUExTixLQUFBLFNBQUFDLEdBQ0F0QyxFQUFBaUIsSUFBQXdCLEtBQUEsYUFBQXlLLE9BQUEsYUFBQXhKLEVBQUFxTSxLQUFBek4sT0FLQW9CLEVBQUF5TCxLQUFBekwsRUFBQXlMLElBQUExTyxRQUNBRixFQUFBbUQsRUFBQXlMLEtBQUE5TSxLQUFBLFNBQUFDLEdBQ0F0QyxFQUFBaUIsSUFBQXdCLEtBQUEsWUFBQXlLLE9BQUEsWUFBQXhKLEVBQUF5TCxJQUFBN00sUUFLQXRDLEVBQUFJLEtBQUFvVixpQkFBQSxTQUFBdEYsR0FDQSxNQUFBQSxHQUFBK0UsT0FBQS9FLEVBQUFMLFlBQUEsS0FBQSxJQUdBN1AsRUFBQUksS0FBQW1RLFFBQUEsV0FDQSxHQUFBdEYsR0FBQWpMLEVBQUFhLElBQUE4SSxFQUFBbUksWUFDQTJELEVBQUF4SyxFQUFBeUssZUFDQUMsRUFBQTFLLEVBQUEySyxjQUdBLE9BQUFILEdBQUFwSyxJQUFBLElBQUFvSyxFQUFBckssSUFBQSxJQUFBdUssRUFBQXRLLElBQUEsSUFBQXNLLEVBQUF2SyxLQUdBcEwsRUFBQUksS0FBQXlWLFVBQUEsU0FBQTdELEdBQ0EsTUFBQUEsR0FBQUUsU0FBQSxJQUdBbFMsRUFBQUksS0FBQW1TLFVBQUEsU0FBQVAsRUFBQXRQLEVBQUFpTCxHQUVBLEdBQUFtSSxHQUFBbkksRUFDQW9JLElBQ0FBLEdBQUEzUixLQUFBLG9CQUNBMlIsRUFBQTdELFdBRUEsS0FBQSxHQUFBakMsR0FBQSxFQUFBQSxFQUFBK0IsRUFBQUUsU0FBQXpSLE9BQUF3UCxJQUFBLENBQ0E2RixFQUFBLEdBQUE5RCxFQUFBRSxTQUFBakMsRUFDQSxJQUFBbkUsRUFDQSxLQUNBQSxFQUFBMEcsS0FBQTlQLEdBQUErUCxNQUFBLEtBQUFxRCxHQUNBaEssRUFBQVIsV0FBQTBHLEVBQUFFLFNBQUFqQyxHQUFBM0UsZUFDQSxNQUFBMUMsR0FDQTVJLEVBQUEySSxPQUFBLFFBQUFDLEdBRUFtTixFQUFBN0QsU0FBQXRPLEtBQUFrSSxHQUdBLE1BQUFpSyxJQUlBL1YsRUFBQUksS0FBQWtQLE9BQUEsU0FBQTBHLEdBQ0EsR0FBQTFHLEdBQUEvTyxFQUFBLFNBQUF5QixTQUFBLGtCQUVBZ1UsSUFDQXpWLEVBQUEsUUFBQXlCLFNBQUEsb0JBQ0F6QixFQUFBLFFBQUF1RCxPQUFBd0wsS0FFQS9PLEVBQUEsUUFBQTBCLFlBQUEsb0JBQ0ExQixFQUFBLG9CQUFBeUIsU0FBQSxtQkFBQW9HLFFBQUEsSUFBQSxXQUNBN0gsRUFBQXdCLE1BQUFnQixhQUtBL0MsRUFBQUksS0FBQUMsTUFBQSxTQUFBdUksR0FDQSxHQUFBdkksR0FBQSxHQUFBNFIsT0FBQXJKLEVBQ0EsTUFBQXZJLElBR0FMLEdBR0FEIiwiZmlsZSI6ImRyb3BjaG9wLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIGRjID0gZGMgfHwge307XG4gIGRjLnZlcnNpb24gPSAnMC4xLjEnO1xuICBkYy5pbml0ID0gZnVuY3Rpb24ob3B0cykge1xuICAgIGlmKCFvcHRzKSB7XG4gICAgICBkYy51dGlsLmVycm9yKCdObyBvcHRpb25zIHByb3ZpZGVkIGluIGRyb3BjaG9wLmluaXQoKScpO1xuICAgIH1cbiAgICBkYy5vcHRpb25zID0gb3B0cztcblxuICAgIGlmKCEkKG9wdHMuaWQpLmxlbmd0aCkge1xuICAgICAgZGMudXRpbC5lcnJvcignRWxlbWVudCB3aXRoIG9wdGlvbnMuaWQgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgfVxuICAgIGRjLiRlbGVtID0gJChvcHRzLmlkKTtcblxuICAgIC8vIHNldHVwIGxheWVyc1xuICAgIGRjLmxheWVycy5wcmVwYXJlKCk7XG5cbiAgICAvLyBzZXR1cCBtYXBcbiAgICBkYy5tYXAuaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgc2VsZWN0aW9uXG4gICAgZGMuc2VsZWN0aW9uLmluaXQoKTtcblxuICAgIC8vIHNldHVwIGxheWVybGlzdFxuICAgIGRjLmxheWVybGlzdC5pbml0KCdsYXllcmxpc3QnKTtcblxuICAgIC8vIHNldHVwIGRyb3B6b25lXG4gICAgZGMuZHJvcHpvbmUoJCgnYm9keScpKTtcblxuICAgIC8vIHNldHVwIG9wZXJhdGlvbnNcbiAgICBkYy5vcHMuaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgZm9ybXNcbiAgICBkYy5mb3JtLmluaXQoKTtcblxuICAgIC8vIGdldCBVUkwgaW5mb3JtYXRpb24gaWYgaXQgZXhpc3RzXG4gICAgaWYobG9jYXRpb24uc2VhcmNoLmxlbmd0aCkge1xuICAgICAgZGMudXRpbC5leGVjdXRlVXJsUGFyYW1zKCk7XG4gICAgfVxuXG4gIH07XG5cbiAgZGMuYm9vbSA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdzaGFrYWxha2EnKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGRyb3B6b25lLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGFpbmVyIGVsZW1lbnQgKGxldHMgZG8gZG9jdW1lbnQuYm9keSlcbiAgICovXG4gIGRjLmRyb3B6b25lID0gZnVuY3Rpb24oJGNvbnRhaW5lcikge1xuICAgIF9ldmVudHMoJGNvbnRhaW5lcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gX2V2ZW50cygkY29udGFpbmVyKSB7XG4gICAgJGNvbnRhaW5lci5vbignZHJhZ292ZXInLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICB9KTtcblxuICAgICRjb250YWluZXIub24oJ2RyYWdsZWF2ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgIH0pO1xuXG4gICAgJGNvbnRhaW5lci5vbignZHJvcCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgICAgdmFyIGZpbGVzID0gZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgICAkKGZpbGVzKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMudXRpbC5yZWFkRmlsZShmaWxlc1tpXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmZvcm0gPSBkYy5mb3JtIHx8IHt9O1xuICBkYy5mb3JtLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignZm9ybTpnZW8nLCBkYy5mb3JtLmdlbyk7XG4gICAgJChkYykub24oJ2Zvcm06ZmlsZScsIGRjLmZvcm0uZmlsZSk7XG4gIH07XG5cbiAgZGMuZm9ybS5nZW8gPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uKSB7XG4gICAgZGMuZm9ybS5jcmVhdGUob3BlcmF0aW9uLCBkYy5vcHMuZ2VvW29wZXJhdGlvbl0sICdnZW8nKTtcbiAgfTtcblxuICBkYy5mb3JtLmZpbGUgPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uKSB7XG4gICAgZGMuZm9ybS5jcmVhdGUob3BlcmF0aW9uLCBkYy5vcHMuZmlsZVtvcGVyYXRpb25dLCAnZmlsZTonICsgb3BlcmF0aW9uKTtcbiAgfTtcblxuICBkYy5mb3JtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIGluZm8sIHRyaWdnZXIpIHtcbiAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgIHZhciAkaHRtbCA9ICQoJzxmb3JtPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtIGRyb3BjaG9wLWZvcm0tJyt0cmlnZ2VyKVxuICAgICAgLmF0dHIoJ2lkJywgJ2Ryb3BjaG9wLWZvcm0nKVxuICAgICAgLmF0dHIoJ2RhdGEnLCBuYW1lKTtcbiAgICB2YXIgJHRpdGxlID0gJCgnPGgyPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXRpdGxlJykudGV4dChuYW1lKS5hcHBlbmRUbygkaHRtbCk7XG4gICAgdmFyICRkZXNjID0gJCgnPHA+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tZGVzY3JpcHRpb24nKS50ZXh0KGluZm8uZGVzY3JpcHRpb24pLmFwcGVuZFRvKCRodG1sKTtcblxuICAgIC8vIGNyZWF0ZSBwYXJhbXNcbiAgICBpZihpbmZvLnBhcmFtZXRlcnMpIHtcbiAgICAgICQoaW5mby5wYXJhbWV0ZXJzKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcCA9IGRjLmZvcm0uY3JlYXRlUGFyYW0odGhpcyk7XG4gICAgICAgIHAuYXBwZW5kVG8oJGh0bWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIHN1Ym1pdCBidXR0b25cbiAgICB2YXIgJHN1Ym1pdCA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWJ0biBkcm9wY2hvcC1idG4tZ3JlZW4gZHJvcGNob3AtZm9ybS1zdWJtaXQnKS50ZXh0KCdFeGVjdXRlJykuYXR0cignZm9yJywgbmFtZSk7XG4gICAgdmFyICRjYW5jZWwgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdkcm9wY2hvcC1idG4gZHJvcGNob3AtYnRuLWNhbmNlbCBkcm9wY2hvcC1mb3JtLWNhbmNlbCcpLnRleHQoJ0NhbmNlbCcpLmF0dHIoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgJGNhbmNlbC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgJGh0bWwub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gZ2V0IHRoZSBwYXJhbWV0ZXJzIGZyb20gdGhlIGZvcm1cbiAgICAgIHZhciBwYXJhbWV0ZXJzID0gW107XG4gICAgICB2YXIgZGF0YSA9ICQodGhpcykuc2VyaWFsaXplQXJyYXkoKTtcbiAgICAgICQoZGF0YSkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHBhcmFtZXRlcnMucHVzaChkYXRhW2ldLnZhbHVlKTtcbiAgICAgIH0pO1xuICAgICAgJChkYykudHJpZ2dlcignb3BlcmF0aW9uOicgKyB0cmlnZ2VyLCBbbmFtZSwgcGFyYW1ldGVyc10pO1xuICAgICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICAkaHRtbC5hcHBlbmQoJHN1Ym1pdCk7XG4gICAgJGh0bWwuYXBwZW5kKCRjYW5jZWwpO1xuXG4gICAgZGMuJGVsZW0uYXBwZW5kKCRodG1sKTtcbiAgICAvLyBzdWJtaXQgYnV0dG9uIG5lZWRzIHRyaWdnZXIgb3BlcmF0aW9uOmdlbyB3aXRoIG9wIGFuZCBwYXJhbWV0ZXIgYXJyYXlcbiAgfTtcblxuICBkYy5mb3JtLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgICQoJyNkcm9wY2hvcC1mb3JtJykucmVtb3ZlKCk7XG4gIH07XG5cbiAgZGMuZm9ybS5jcmVhdGVQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgdmFyICRpbnB1dCA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyJyk7XG4gICAgdmFyICRsYWJlbCA9ICQoJzxsYWJlbD4nKS50ZXh0KHBhcmFtLm5hbWUpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlci1sYWJlbCcpO1xuICAgIHZhciAkZmllbGQgPSBkYy5mb3JtLmlucHV0c1twYXJhbS50eXBlXShwYXJhbSk7XG4gICAgJGZpZWxkLmFwcGVuZFRvKCRsYWJlbCk7XG4gICAgaWYocGFyYW0uZGVzY3JpcHRpb24ubGVuZ3RoKSB7XG4gICAgICAkKCc8cD4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXItZGVzY3JpcHRpb24nKS5odG1sKHBhcmFtLmRlc2NyaXB0aW9uKS5hcHBlbmRUbygkbGFiZWwpO1xuICAgIH1cbiAgICAkaW5wdXQuYXBwZW5kKCRsYWJlbCk7XG4gICAgcmV0dXJuICRpbnB1dDtcbiAgfTtcblxuICBkYy5mb3JtLmlucHV0cyA9IHtcbiAgICBudW1iZXI6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ251bWJlcicpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc2VsZWN0OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8c2VsZWN0PicpLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJChwLm9wdGlvbnMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgJG9wdCA9ICQoJzxvcHRpb24+JykudGV4dChwLm9wdGlvbnNbaV0pXG4gICAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5vcHRpb25zW2ldKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkaSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHRleHQ6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ3RleHQnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIGNoZWNrYm94OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICdjaGVja2JveCcpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc3dpdGNoOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpO1xuICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciAkbGJsID0gJCgnPGxhYmVsPicpXG4gICAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgICAgdmFyICRvcHQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgICAgLnZhbCgnc3dpdGNoLScgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcClcbiAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAgICRvcHQuYXBwZW5kVG8oJGxibCk7XG4gICAgICAgICRsYmwuYXBwZW5kKGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUpO1xuICAgICAgICAkbGJsLmFwcGVuZFRvKCRpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgcmVjdXJzaXZlOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpO1xuXG4gICAgICB2YXIgJGxibDEgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgIHZhciAkb3B0MSA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgIC52YWwoJ3RydWUnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkb3B0MS5hcHBlbmRUbygkbGJsMSk7XG4gICAgICAkbGJsMS5hcHBlbmQoJ0luZGl2aWR1YWwgZmVhdHVyZXMnKTtcblxuICAgICAgdmFyICRsYmwyID0gJCgnPGxhYmVsPicpXG4gICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICB2YXIgJG9wdDIgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAudmFsKCdmYWxzZScpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICRvcHQyLmFwcGVuZFRvKCRsYmwyKTtcbiAgICAgICRsYmwyLmFwcGVuZCgnRW50aXJlIGNvbGxlY3Rpb24nKTtcblxuICAgICAgJGxibDEuYXBwZW5kVG8oJGkpO1xuICAgICAgJGxibDIuYXBwZW5kVG8oJGkpO1xuXG4gICAgICByZXR1cm4gJGk7XG4gICAgfVxuICB9O1xuXG4gIC8vIGRjLmZvcm0uZ2V0VmFsdWVzID0gZnVuY3Rpb24oJGZvcm0pIHtcbiAgLy8gICB2YXIgdmFsdWVzID0gW107XG4gIC8vICAgY29uc29sZS5sb2coJGZvcm0pO1xuICAvLyAgIHJldHVybiB2YWx1ZXM7XG4gIC8vIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubGF5ZXJsaXN0ID0ge307XG4gIGRjLmxheWVybGlzdC5lbGVtcyA9IHt9O1xuXG4gIGRjLmxheWVybGlzdC5pbml0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRjLmxheWVybGlzdC4kZWxlbSA9ICQoJzxvbD4nKS5hZGRDbGFzcyhuYW1lKTtcbiAgICBkYy4kZWxlbS5hcHBlbmQoZGMubGF5ZXJsaXN0LiRlbGVtKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0ub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICgkKGV2ZW50LnRhcmdldCkuaGFzQ2xhc3MobmFtZSkpIHtcbiAgICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgbGlIZWxwZXIgPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLWhlbHAnKVxuICAgICAgLmh0bWwoJ1dlbGNvbWUgdG8gPHN0cm9uZz5kcm9wY2hvcDwvc3Ryb25nPiEgSGVyZSB5b3UgY2FuIGRyYWcgYW5kIGRyb3AgZmlsZXMgYW5kIHRoZXkgd2lsbCBzaG93IHVwIGluIHRoZSBsYXllciBsaXN0IGJlbG93Ljxicj48YnI+VG8gdGhlIGxlZnQgeW91IGNhbiB1cGxvYWQgYW5kIHNhdmUgeW91ciBmaWxlcyBvciA8YSBocmVmPVwiLz9naXN0PTA5MTI5YzIwZWMwMjBiODNiZjg1XCI+YWRkIGV4YW1wbGUgZGF0YTwvYT4gb3IgdGhlIDxhIGhyZWY9XCIvP2dpc3Q9ZDA2NmI1NzJlOGE4YWQyYjZkMTZcIj5VUyBTdGF0ZXM8L2E+Ljxicj48YnI+VG8gdGhlIHJpZ2h0IHlvdVxcJ2xsIG5vdGljZSBzb21lIGdlb3NwYXRpYWwgb3BlcmF0aW9ucyB0aGF0IGJlY29tZSBhdmFpbGFibGUgYmFzZWQgb24gc2VsZWN0aW5nIHNwZWNpZmljIGxheWVycy4nICk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZChsaUhlbHBlcik7XG5cbiAgICB2YXIgdG9nZ2xlTGF5ZXJzID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci10b2dnbGVBbGwnKVxuICAgICAgLmh0bWwoJzxsYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD5Ub2dnbGUgYWxsIGxheWVyczwvbGFiZWw+Jyk7XG4gICAgdG9nZ2xlTGF5ZXJzLm9uKCdjaGFuZ2UnLCBkYy5sYXllcmxpc3QudG9nZ2xlQWxsKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0uYXBwZW5kKHRvZ2dsZUxheWVycyk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6YWRkZWQnLCBkYy5sYXllcmxpc3QuYWRkTGF5ZXJMaXN0SXRlbSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBkYy5sYXllcmxpc3QucmVtb3ZlTGF5ZXJMaXN0SXRlbSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbmFtZWQnLCBkYy5sYXllcmxpc3QucmVuYW1lKTtcbiAgfTtcblxuICBkYy5sYXllcmxpc3QucmVuYW1lID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wLCBuZXdOYW1lKSB7XG4gICAgJCgnW2RhdGEtc3RhbXA9JytzdGFtcCsnXScpLmZpbmQoJy5sYXllci1uYW1lJykudGV4dChuZXdOYW1lKTtcbiAgfTtcblxuICAvLyB0cmlnZ2VyZWQgaW4gZHJvcGNob3AuanNcbiAgZGMubGF5ZXJsaXN0LmFkZExheWVyTGlzdEl0ZW0gPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgbGF5ZXJsaXN0SXRlbSA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItZWxlbWVudCcpLmF0dHIoJ2RhdGEtc3RhbXAnLCBsYXllci5zdGFtcCk7XG4gICAgdmFyIGxheWVyRGl2ID0gJCgnPGRpdj4nKVxuICAgICAgLmFkZENsYXNzKCdsYXllci1uYW1lIGxheWVyLW5ldycpXG4gICAgICAudGV4dChsYXllci5uYW1lKVxuICAgICAgLmRlbGF5KDMwMDApXG4gICAgICAucXVldWUoZnVuY3Rpb24obmV4dCkge1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdsYXllci1uZXcnKTtcbiAgICAgIH0pO1xuXG4gICAgXG4gICAgdmFyIGxheWVyVHlwZSA9ICQoJzxzcGFuPicpLmFkZENsYXNzKCdsYXllci10eXBlLWltYWdlIHNwcml0ZSBzcHJpdGUtbGF5ZXItJytsYXllclR5cGVJY29uKGxheWVyLnR5cGUpKTtcbiAgICB2YXIgY2hlY2tib3ggPSAkKCc8aW5wdXQ+JykuYWRkQ2xhc3MoJ2xheWVyLXRvZ2dsZScpLnByb3Aoeyd0eXBlJzogJ2NoZWNrYm94JywgJ2NoZWNrZWQnOiB0cnVlfSk7XG4gICAgdmFyIHJlbW92ZSA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2xheWVyLWFjdGlvbiBsYXllci1yZW1vdmUnKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCI+PC9pPicpO1xuICAgIHZhciBkdXBsaWNhdGUgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdsYXllci1hY3Rpb24gbGF5ZXItZHVwbGljYXRlJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1maWxlcy1vXCI+PC9pPicpO1xuXG4gICAgZHVwbGljYXRlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6ZHVwbGljYXRlJywgWyQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgXG4gICAgcmVtb3ZlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlJywgWyQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBcbiAgICBjaGVja2JveC5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgLy8gdHJpZ2dlciBsYXllcjpzaG93XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNob3cnLCBbbGF5ZXJdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmhpZGUnLCBbbGF5ZXJdKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxheWVyRGl2Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgIC8vIGNoZWNrIGZvciBrZXlzIGJlaW5nIGhlbGQgZm9yIHNwZWNpYWwgc2VsZWN0aW9uXG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgLy8gc2VsZWN0IGFsbCBsYXllcmVzIGluIGJldHdlZW4gcHJldmlvdXMgdGFyZ2V0IGFuZCB0YXJnZXRcbiAgICAgICAgLy8gbm90ZTogZG9uJ3QgdW5zZWxlY3QgbGF5ZXJzIGFscmVhZHkgc2VsZWN0ZWQsIGp1c3QgYWRkIHRvIHNlbGVjdGlvblxuICAgICAgICB2YXIgdG9TZWxlY3QgPSBbXTtcbiAgICAgICAgdmFyIHRvID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIGZyb20gPSBkYy5sYXllcmxpc3QuX2xhc3RTZWxlY3RlZDtcbiAgICAgICAgdmFyIHRvQ291bnQsIGZyb21Db3VudDtcblxuICAgICAgICAkKCcubGF5ZXItZWxlbWVudCcpLmVhY2goZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHZhciBjaGVjayA9ICQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIHZhciB0b1N0YW1wID0gdG8ucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIHZhciBmcm9tU3RhbXAgPSBmcm9tLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICBpZiAoY2hlY2sgPT09IHRvU3RhbXApIHRvQ291bnQgPSBlO1xuICAgICAgICAgIGlmIChjaGVjayA9PT0gZnJvbVN0YW1wKSBmcm9tQ291bnQgPSBlO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodG9Db3VudCA+IGZyb21Db3VudCkge1xuICAgICAgICAgIC8vIGxvb3AgdXBcbiAgICAgICAgICAkKCcubGF5ZXItZWxlbWVudCcpLmVhY2goZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgaWYgKGwgPj0gZnJvbUNvdW50ICYmIGwgPD0gdG9Db3VudCApIHtcbiAgICAgICAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdExheWVyKCQodGhpcykuZmluZCgnLmxheWVyLW5hbWUnKSwgZGMubGF5ZXJzLmxpc3RbJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKCcubGF5ZXItZWxlbWVudCcpLmVhY2goZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgaWYgKGwgPCBmcm9tQ291bnQgJiYgbCA+PSB0b0NvdW50ICkge1xuICAgICAgICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIoJCh0aGlzKS5maW5kKCcubGF5ZXItbmFtZScpLCBkYy5sYXllcnMubGlzdFskKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgICAgLy8gYWRkL3JlbW92ZSBzZWxlY3RlZCBsYXllciB0byBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0VG9nZ2xlKCQodGhpcyksIGxheWVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNsZWFyIHNlbGVjdGlvbiBhbmQgc2VsZWN0IHRhcmdldFxuICAgICAgICBkYy5sYXllcmxpc3QuY2xlYXJTZWxlY3Rpb24oJCh0aGlzKSwgbGF5ZXIpO1xuICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0VG9nZ2xlKCQodGhpcyksIGxheWVyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGxheWVyRGl2KTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChjaGVja2JveCk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQobGF5ZXJUeXBlKTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChyZW1vdmUpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGR1cGxpY2F0ZSk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZChsYXllcmxpc3RJdGVtKTtcblxuICAgIGRjLmxheWVybGlzdC5lbGVtc1tsYXllci5zdGFtcF0gPSBsYXllcmxpc3RJdGVtO1xuXG4gICAgLy8gaGlkZSBoZWxwZXIgdGV4dFxuICAgICQoJy5sYXllci1oZWxwJykuaGlkZSgpO1xuICAgICQoJy5sYXllci10b2dnbGVBbGwnKS5zaG93KCk7XG4gIH07XG5cbiAgZGMubGF5ZXJsaXN0LnNlbGVjdExheWVyID0gZnVuY3Rpb24oJGl0ZW0sIGx5cikge1xuICAgIGlmICghJGl0ZW0uaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICRpdGVtLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6c2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfVxuICB9O1xuICBkYy5sYXllcmxpc3Quc2VsZWN0VG9nZ2xlID0gZnVuY3Rpb24oJGl0ZW0sIGx5cikge1xuICAgIGlmICgkaXRlbS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xuICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjp1bnNlbGVjdGVkJywgW2x5cl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAkaXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNlbGVjdGVkJywgW2x5cl0pO1xuICAgIH1cbiAgICBkYy5sYXllcmxpc3QuX2xhc3RTZWxlY3RlZCA9ICRpdGVtO1xuICB9O1xuICBkYy5sYXllcmxpc3QuY2xlYXJTZWxlY3Rpb24gPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbGF5ZXJUeXBlSWNvbih0eXBlKSB7XG4gICAgdmFyIGljb247XG4gICAgc3dpdGNoKHR5cGUpIHtcbiAgICAgIGNhc2UgJ0ZlYXR1cmVDb2xsZWN0aW9uJzpcbiAgICAgICAgaWNvbiA9ICdmZWF0dXJlY29sbGVjdGlvbic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxQb2ludD4nOiBcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlQb2ludD4nOiBcbiAgICAgICAgaWNvbiA9ICdwb2ludCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxMaW5lU3RyaW5nPic6IFxuICAgICAgY2FzZSAnRmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+JzogXG4gICAgICAgIGljb24gPSAnbGluZSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxQb2x5Z29uPic6IFxuICAgICAgY2FzZSAnRmVhdHVyZTxNdWx0aVBvbHlnb24+JzogXG4gICAgICAgIGljb24gPSAncG9seWdvbic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxHZW9tZXRyeUNvbGxlY3Rpb24+JzogXG4gICAgICAgIGljb24gPSAnZ2VvbSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWNvbiA9ICdkZWZhdWx0JztcbiAgICAgICAgYnJlYWs7IFxuICAgIH1cbiAgICByZXR1cm4gaWNvbjtcbiAgfVxuXG4gIGRjLmxheWVybGlzdC50b2dnbGVBbGwgPSBmdW5jdGlvbihldmVudCkge1xuICAgIC8vIHR1cm4gdGhlbSBvblxuICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0JykucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICBmb3IgKHZhciBpIGluIGRjLmxheWVycy5saXN0KSB7XG4gICAgICAgIGVsZW1Ub2dnbGUoZGMubGF5ZXJzLmxpc3RbaV0uc3RhbXAsIHRydWUpO1xuICAgICAgfVxuICAgIC8vIHR1cm4gdGhlbSBvZmZcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgbyBpbiBkYy5sYXllcnMubGlzdCkge1xuICAgICAgICBlbGVtVG9nZ2xlKGRjLmxheWVycy5saXN0W29dLnN0YW1wLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWxlbVRvZ2dsZShzdGFtcCwgYm9vbCkge1xuICAgICAgJCgnLmxheWVyLWVsZW1lbnRbZGF0YS1zdGFtcD0nK3N0YW1wKyddJylcbiAgICAgICAgLmZpbmQoJy5sYXllci10b2dnbGUnKVxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIGJvb2wpXG4gICAgICAgIC50cmlnZ2VyKCdjaGFuZ2UnKTsgLy8gc2V0cyBvZmYgYSBjaGFpbiByZWFjdGlvblxuICAgIH1cbiAgfTtcblxuICBkYy5sYXllcmxpc3QucmVtb3ZlTGF5ZXJMaXN0SXRlbSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5mYWRlT3V0KDMwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIGRjLmxheWVybGlzdC5lbGVtc1tzdGFtcF07XG5cbiAgICAgIC8vIHNob3cgaGVscGVyIHRleHQgaWYgbm8gbGF5ZXJzIGV4aXN0XG4gICAgICAvLyB0aGlzIGhhcyB0byBjaGVjayBpbnNpZGUgc2luY2UgdGhlcmUgaXMgYSAzMDAgbXMgZGVsYXkgd2l0aCB0aGUgZmFkZVxuICAgICAgaWYgKCQoJy5sYXllci1lbGVtZW50JykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICQoJy5sYXllci1oZWxwJykuc2hvdygpO1xuICAgICAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuaGlkZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVycyA9IHt9O1xuICBkYy5sYXllcnMubGlzdCA9IHt9O1xuXG4gIGRjLmxheWVycy5wcmVwYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2ZpbGU6YWRkZWQnLCBkYy5sYXllcnMuYWRkKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlJywgZGMubGF5ZXJzLnJlbW92ZSk7XG4gICAgJChkYykub24oJ2xheWVyOmR1cGxpY2F0ZScsIGRjLmxheWVycy5kdXBsaWNhdGUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWUnLCBkYy5sYXllcnMucmVuYW1lKTtcbiAgfTtcblxuLyoqXG4gKiBBZGQgYSBsYXllciB0byB0aGUgbGF5ZXJzIGxpc3QgYW5kIHRyaWdnZXIgbGF5ZXI6YWRkZWQgZm9yIHN1YnNjcmliZXJzIHRvIHBpY2sgdXAuXG4gKiBAcGFyYW0ge29iamVjdH0gZXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSBmaWxlIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGUgYmxvYiB0byBiZSBjb252ZXJ0ZWQgd2l0aCBKU09OLnBhcnNlKClcbiAqL1xuICBkYy5sYXllcnMuYWRkID0gZnVuY3Rpb24oZXZlbnQsIG5hbWUsIGJsb2IpIHtcbiAgICB2YXIgbCA9IGRjLmxheWVycy5tYWtlTGF5ZXIobmFtZSwgYmxvYik7XG4gICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0gPSBsO1xuXG4gICAgZGMubm90aWZ5KCdzdWNjZXNzJywgJzxzdHJvbmc+JytsLm5hbWUrJzwvc3Ryb25nPiBoYXMgYmVlbiBhZGRlZCEnLCAzNTAwKTtcblxuICAgIC8vIHRyaWdnZXIgbGF5ZXI6YWRkZWRcbiAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjphZGRlZCcsIFtsXSk7XG4gIH07XG5cbi8qKlxuICogUmVtb3ZlIGEgbGF5ZXIsIHdoaWNoIHRyaWdnZXJzIGxheWVyOnJlbW92ZWQgZm9yIHRoZSByZXN0IG9mIHRoZSBhcHBcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYXllciBzdGFtcFxuICovXG4gIGRjLmxheWVycy5yZW1vdmUgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICAvLyB0cmlnZ2VyIGxheWVyOnJlbW92ZWRcbiAgICB0cnkge1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlZCcsIFtzdGFtcF0pO1xuICAgICAgZGMubm90aWZ5KCdpbmZvJywgJzxzdHJvbmc+JyArIGRjLmxheWVycy5saXN0W3N0YW1wXS5uYW1lICsgJzwvc3Ryb25nPiBoYXMgYmVlbiByZW1vdmVkLicpO1xuICAgICAgZGVsZXRlIGRjLmxheWVycy5saXN0W3N0YW1wXTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSByZW1vdmluZyB0aGUgbGF5ZXIuJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIFxuICB9O1xuXG4gIGRjLmxheWVycy5kdXBsaWNhdGUgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICB2YXIgbHlyID0gZGMubGF5ZXJzLmxpc3Rbc3RhbXBdO1xuICAgIC8vIG5lZWQgdG8gY3JlYXRlIG5ldyBsYXllciBzbyB3ZSBjYW4gZ2V0IGEgdW5pcWUgTC5zdGFtcCgpXG4gICAgZGMubGF5ZXJzLmFkZCh7fSwgJ2NvcHlfJytseXIubmFtZSwgbHlyLnJhdyk7XG4gIH07XG5cbiAgZGMubGF5ZXJzLnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllciwgbmV3TmFtZSkge1xuICAgIC8vIHJlbmFtZSBpbiBsYXllciBvYmplY3RcbiAgICBkYy5sYXllcnMubGlzdFtsYXllci5zdGFtcF0ubmFtZSA9IG5ld05hbWU7XG5cbiAgICAvLyByZW5hbWUgaW4gbGF5ZXJsaXN0XG4gICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVuYW1lZCcsIFtsYXllci5zdGFtcCwgbmV3TmFtZV0pO1xuICB9O1xuXG4gIGRjLmxheWVycy5tYWtlTGF5ZXIgPSBmdW5jdGlvbihuYW1lLCBqc29uKSB7XG4gICAgdmFyIGdlb2pzb24gPSBqc29uO1xuICAgIC8vIGlmIChqc29uLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicgJiYganNvbi5mZWF0dXJlcy5sZW5ndGggPT09IDEpIHtcbiAgICAvLyAgIGdlb2pzb24gPSBkYy51dGlsLnVuY29sbGVjdChqc29uKTtcbiAgICAvLyB9XG5cbiAgICB2YXIgZmwgPSBMLm1hcGJveC5mZWF0dXJlTGF5ZXIoZ2VvanNvbik7XG4gICAgdmFyIGxheWVyID0ge1xuICAgICAgbmFtZTogZGMudXRpbC5yZW1vdmVGaWxlRXh0ZW5zaW9uKG5hbWUpLFxuICAgICAgc3RhbXA6IEwuc3RhbXAoZmwpLFxuICAgICAgcmF3OiBnZW9qc29uLFxuICAgICAgdHlwZTogZ2V0VHlwZShnZW9qc29uKSxcbiAgICAgIGZlYXR1cmVsYXllcjogZmwsXG4gICAgICBkYXRlQWRkZWQ6IG5ldyBEYXRlKClcbiAgICB9O1xuICAgIHJldHVybiBsYXllcjtcbiAgfTtcblxuICBmdW5jdGlvbiBnZXRUeXBlKGdqKSB7XG4gICAgaWYgKGdqLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgIHJldHVybiAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2oudHlwZSArICc8JyArIGdqLmdlb21ldHJ5LnR5cGUgKyAnPic7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm1hcCA9IHt9O1xuXG4gIGRjLm1hcC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgZGMubWFwLiRlbGVtID0gJCgnPGRpdj4nKS5wcm9wKCdpZCcsICdkcm9wY2hvcC1tYXAnKS5hZGRDbGFzcygnbWFwJyk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGRjLm1hcC4kZWxlbSk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlZCcsIGRjLm1hcC5yZW1vdmVMYXllcik7XG5cbiAgICBfbWFrZU1hcCgpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9tYWtlTWFwKCkge1xuICAgIGRjLm1hcC50b2tlbiA9IEwubWFwYm94LmFjY2Vzc1Rva2VuID0gJ3BrLmV5SjFJam9pYzNadFlYUjBhR1YzY3lJc0ltRWlPaUpWTVVsVVIweHJJbjAuTndlU19BdHRqc3d0TjV3UnVXQ1NOQSc7XG4gICAgZGMubWFwLm0gPSBMLm1hcGJveC5tYXAoJ2Ryb3BjaG9wLW1hcCcsIG51bGwsIHtcbiAgICAgIHpvb21Db250cm9sOiBmYWxzZSxcbiAgICAgIHdvcmxkQ29weUp1bXA6IHRydWVcbiAgICB9KS5zZXRWaWV3KFswLDBdLCAzKTtcblxuICAgIC8vIHNldHMgdGhlIGxvY2F0aW9uIG9mIHRoZSB6b29tIGJ1dHRvbnMgdG8gdGhlIHRvcCByaWdodFxuICAgIEwuY29udHJvbC56b29tKHtcbiAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICBMLm1hcGJveC5nZW9jb2RlckNvbnRyb2woJ21hcGJveC5wbGFjZXMnLCB7XG4gICAgICBwb3NpdGlvbjogJ3RvcGxlZnQnXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgdmFyIGJhc2VMYXllcnMgPSB7XG4gICAgICBcIk1hcGJveCBTdHJlZXRzXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LnN0cmVldHMnKSxcbiAgICAgIFwiTWFwYm94IE91dGRvb3JzXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94Lm91dGRvb3JzJyksXG4gICAgICBcIk1hcGJveCBMaWdodFwiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5saWdodCcpLFxuICAgICAgXCJNYXBib3ggRGFya1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5kYXJrJyksXG4gICAgICBcIk1hcGJveCBTYXRlbGxpdGVcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guc2F0ZWxsaXRlJylcbiAgICB9O1xuXG4gICAgYmFzZUxheWVyc1snTWFwYm94IFN0cmVldHMnXS5hZGRUbyhkYy5tYXAubSk7XG4gICAgLy8gc2V0cyBsb2NhdGlvbiBvZiBiYXNlIGxheWVyIGNvbnRyb2wgdG8gdGhlIGJvdHRvbSByaWdodFxuICAgIEwuY29udHJvbC5sYXllcnMoYmFzZUxheWVycywge30sIHtcbiAgICAgIHBvc2l0aW9uOiAnYm90dG9tcmlnaHQnLFxuICAgICAgY29sbGFwc2VkOiBmYWxzZVxuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIGRjLm1hcC5sYXllcmdyb3VwID0gTC5tYXBib3guZmVhdHVyZUxheWVyKCk7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgJChkYykub24oJ2xheWVyOmFkZGVkJywgZGMubWFwLmFkZExheWVyKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6aGlkZScsIGRjLm1hcC5oaWRlTGF5ZXIpO1xuICAgICQoZGMpLm9uKCdsYXllcjpzaG93JywgZGMubWFwLnNob3dMYXllcik7XG5cbiAgICAvLyAvLyBteSBsb2NhdGlvbiBhcyBsYXllclxuICAgIC8vIHZhciBnZW9sb2NhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VvbG9jYXRlJyk7XG5cbiAgICAkKGRjLm1hcC5tKS5vbignbG9jYXRpb25mb3VuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBkYXRhID0gZS5vcmlnaW5hbEV2ZW50O1xuICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGRhdGEuYm91bmRzKTtcblxuICAgICAgdmFyIGx5ciA9IHtcbiAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgICAgICBnZW9tZXRyeToge1xuICAgICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgICAgY29vcmRpbmF0ZXM6IFtkYXRhLmxhdGxuZy5sbmcsIGRhdGEubGF0bG5nLmxhdF1cbiAgICAgICAgfSxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICd0aXRsZSc6ICdUaGVyZSBZb3UgQXJlJyxcbiAgICAgICAgICAnbWFya2VyLWNvbG9yJzogJyMyMDcxNzgnLFxuICAgICAgICAgICdtYXJrZXItc3ltYm9sJzogJ2hlYXJ0J1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgWyd5b3VyIGxvY2F0aW9uJywgbHlyXSk7XG4gICAgfSk7XG5cbiAgICAkKGRjLm1hcC5tKS5vbignbG9jYXRpb25lcnJvcicsIGZ1bmN0aW9uKCkge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGVyZSB3YXMgYSBwcm9ibGVtIGZpbmRpbmcgeW91ciBsb2NhdGlvbi4nLCAzMDAwKTtcbiAgICB9KTtcblxuICAgIC8vIC8vIE9uY2Ugd2UndmUgZ290IGEgcG9zaXRpb24sIHpvb20gYW5kIGNlbnRlciB0aGUgbWFwXG4gICAgLy8gLy8gb24gaXQsIGFuZCBhZGQgYSBzaW5nbGUgbWFya2VyLlxuICAgIC8vIHRoaXMuX21hcC5vbignbG9jYXRpb25mb3VuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAvLyAgIHRoaXMuX21hcC5maXRCb3VuZHMoZS5ib3VuZHMpO1xuXG5cbiAgICAvLyAgIG15TGF5ZXIuc2V0R2VvSlNPTih7XG4gICAgLy8gICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAvLyAgICAgZ2VvbWV0cnk6IHtcbiAgICAvLyAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgIC8vICAgICAgIGNvb3JkaW5hdGVzOiBbZS5sYXRsbmcubG5nLCBlLmxhdGxuZy5sYXRdXG4gICAgLy8gICAgIH0sXG4gICAgLy8gICAgIHByb3BlcnRpZXM6IHtcbiAgICAvLyAgICAgICAndGl0bGUnOiAnVGhlcmUgWW91IEFyZScsXG4gICAgLy8gICAgICAgJ21hcmtlci1jb2xvcic6ICcjMjA3MTc4JyxcbiAgICAvLyAgICAgICAnbWFya2VyLXN5bWJvbCc6ICdoZWFydCdcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSk7XG5cbiAgICAvLyAgIC8vIEFuZCBoaWRlIHRoZSBnZW9sb2NhdGlvbiBidXR0b25cbiAgICAvLyAgIC8vZ2VvbG9jYXRlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZ2VvbG9jYXRlKTtcbiAgICAvLyB9LmJpbmQodGhpcykpO1xuXG4gICAgLy8gLy8gSWYgdGhlIHVzZXIgY2hvb3NlcyBub3QgdG8gYWxsb3cgdGhlaXIgbG9jYXRpb25cbiAgICAvLyAvLyB0byBiZSBzaGFyZWQsIGRpc3BsYXkgYW4gZXJyb3IgbWVzc2FnZS5cbiAgICAvLyB0aGlzLl9tYXAub24oJ2xvY2F0aW9uZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAvLyAgIGdlb2xvY2F0ZS5pbm5lckhUTUwgPSAnUG9zaXRpb24gY291bGQgbm90IGJlIGZvdW5kJztcbiAgICAvLyB9KTtcblxuXG4gIH1cblxuICBkYy5tYXAuY291bnQgPSAwO1xuXG4gIGRjLm1hcC5hZGRMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIHZhciBmbCA9IGxheWVyLmZlYXR1cmVsYXllcjtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRMYXllcihmbCk7XG5cbiAgICAvLyBjcmVhdGUgcG9wdXAgdGFibGUgZm9yIGVhY2ggZmVhdHVyZVxuICAgIGZsLmVhY2hMYXllcihmdW5jdGlvbihsYXllcikge1xuICAgICAgdmFyIGNvbnRlbnQgPSAnPHRhYmxlIGNsYXNzPVwiZHJvcGNob3AtdGFibGVcIj48dHI+PHRoPlByb3BlcnR5PC90aD48dGg+RGF0YTwvdGg+PC90cj4nO1xuXG4gICAgICBpZiAobGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgY29udGVudCArPSAnPHRyPjx0ZD48c3Ryb25nPicgKyBwcm9wICsgJzwvc3Ryb25nPjwvdGQ+PHRkPicgKyBsYXllci5mZWF0dXJlLnByb3BlcnRpZXNbcHJvcF0gKyAnPC90ZD48L3RyPic7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQgKz0gJzxwPlRoZXJlIGFyZSBubyBwcm9wZXJ0aWVzIHNldCBmb3IgdGhpcyBmZWF0dXJlLjwvcD4nO1xuICAgICAgfVxuICAgICAgY29udGVudCArPSAnPC90YWJsZT4nO1xuXG4gICAgICBsYXllci5iaW5kUG9wdXAoTC5wb3B1cCh7XG4gICAgICAgIG1heFdpZHRoOiA0NTAsXG4gICAgICAgIG1heEhlaWdodDogMjAwLFxuICAgICAgICBhdXRvUGFuUGFkZGluZzogWzQ1LCA0NV0sXG4gICAgICAgIGNsYXNzTmFtZTogJ2Ryb3BjaG9wLXBvcHVwJ1xuICAgICAgfSwgbGF5ZXIpLnNldENvbnRlbnQoY29udGVudCkpO1xuICAgIH0pO1xuXG4gIH07XG5cbiAgZGMubWFwLmhpZGVMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLnJlbW92ZUxheWVyKGxheWVyLmZlYXR1cmVsYXllcik7XG4gIH07XG5cbiAgZGMubWFwLnNob3dMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZExheWVyKGxheWVyLmZlYXR1cmVsYXllcik7XG4gIH07XG5cbiAgZGMubWFwLnJlbW92ZUxheWVyID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAucmVtb3ZlTGF5ZXIoZGMubGF5ZXJzLmxpc3Rbc3RhbXBdLmZlYXR1cmVsYXllcik7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5ub3RpZnkgPSBmdW5jdGlvbih0eXBlLCB0ZXh0LCB0aW1lKSB7XG4gICAgdmFyIG5vdGUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdub3RpZmljYXRpb24nKVxuICAgICAgLmFkZENsYXNzKHR5cGUpXG4gICAgICAuaHRtbCh0ZXh0KTtcblxuICAgIC8vIGB0aW1lYCBjYW4gZXF1YWwgJ2Nsb3NlJyBpbiBvcmRlciB0byBjcmVhdGUgYSBjbG9zZSBidXR0b25cbiAgICBpZiAodGltZSA9PT0gJ2Nsb3NlJykge1xuXG4gICAgICB2YXIgJGNsb3NlID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbm90aWZpY2F0aW9uLWNsb3NlJylcbiAgICAgICAgLnByb3AoJ3R5cGUnLCAnYnV0dG9uJylcbiAgICAgICAgLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIj48L2k+Jyk7XG5cbiAgICAgICRjbG9zZS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgICQobm90ZSkuYXBwZW5kKCRjbG9zZSk7XG4gICAgICAkKGRjLiRlbGVtKS5hcHBlbmQobm90ZSk7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICAkKGRjLiRlbGVtKS5hcHBlbmQobm90ZSk7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIG5vdGUucmVtb3ZlKCk7XG4gICAgICB9LCB0aW1lIHx8IDMwMDApO1xuXG4gICAgfVxuXG4gICAgXG5cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5vcHMgPSBkYy5vcHMgfHwge307XG5cbiAgZGMub3BzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBidWlsZCBvcHMuZ2VvIGNvbnRhaW5lclxuICAgIHZhciBnZW9Db250YWluZXIgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdvcGVyYXRpb25zLWdlbycpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChnZW9Db250YWluZXIpO1xuXG4gICAgLy8gY3JlYXRlIGdlbyBidXR0b25zICYgZm9ybXNcbiAgICBmb3IgKHZhciBnZW9PcCBpbiBkYy5vcHMuZ2VvKSB7XG4gICAgICB2YXIgZ2VvQnRuID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnb3BlcmF0aW9uIG9wZXJhdGlvbi1nZW8gb3BlcmF0aW9uLWluYWN0aXZlJylcbiAgICAgICAgLmh0bWwoJzxoND4nICsgZ2VvT3AgKyAnPC9oND48cD4nICsgZGMub3BzLmdlb1tnZW9PcF0uZGVzY3JpcHRpb24gKyAnPC9wPicpXG4gICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIC5hdHRyKCdkYXRhLW9wZXJhdGlvbicsIGdlb09wKTtcbiAgICAgIGdlb0J0bi5vbignY2xpY2snLCBfZ2VvQnRuQ2xpY2spO1xuXG4gICAgICBnZW9Db250YWluZXIuYXBwZW5kKGdlb0J0bik7XG4gICAgfVxuXG4gICAgJChkYykub24oJ2xheWVyOnNlbGVjdGVkJywgZGMub3BzLmdlb0NoZWNrKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6dW5zZWxlY3RlZCcsIGRjLm9wcy5nZW9DaGVjayk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpnZW8nLCBkYy5vcHMuZ2VvRXhlY3V0ZSk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtZ2lzdCcsIGRjLm9wcy5maWxlWydsb2FkLWdpc3QnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLXVybCcsIGRjLm9wcy5maWxlWydsb2FkLXVybCddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtb3ZlcnBhc3MnLCBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOnJlbmFtZScsIGRjLm9wcy5maWxlLnJlbmFtZS5jYWxsYmFjayk7XG5cbiAgICAvLyBzZXR1cCBvcHMgZmlsZVxuICAgIHZhciBsZWZ0TWVudSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLW1lbnUtbGVmdCcpO1xuICAgIGZvciAodmFyIGZpbGVPcCBpbiBkYy5vcHMuZmlsZSkge1xuICAgICAgaWYoZGMub3BzLmZpbGVbZmlsZU9wXS50eXBlID09PSAnYnJlYWsnKSB7XG4gICAgICAgIHZhciAkYnJlYWtTcGFjZSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uLWJyZWFrJyk7XG4gICAgICAgIGxlZnRNZW51LmFwcGVuZCgkYnJlYWtTcGFjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZmlsZUJ0biA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uJylcbiAgICAgICAgICAuaHRtbChkYy5vcHMuZmlsZVtmaWxlT3BdLmljb24gfHwgJ0EnKVxuICAgICAgICAgIC5hdHRyKCdkYXRhLW9wZXJhdGlvbicsIGZpbGVPcClcbiAgICAgICAgICAuYXR0cignZGF0YS10b29sdGlwJywgZGMub3BzLmZpbGVbZmlsZU9wXS5kZXNjcmlwdGlvbik7XG4gICAgICAgICAgaWYgKGRjLm9wcy5maWxlW2ZpbGVPcF0udHlwZSA9PT0gJ2luZm8nKSBmaWxlQnRuLmFkZENsYXNzKCdkcm9wY2hvcC1pbmZvJyk7XG4gICAgICAgIGZpbGVCdG4ub24oJ2NsaWNrJywgX2ZpbGVCdG5DbGljayk7XG4gICAgICAgIGxlZnRNZW51LmFwcGVuZChmaWxlQnRuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZGMuJGVsZW0uYXBwZW5kKGxlZnRNZW51KTtcbiAgfTtcblxuICAvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG5cbiAgLyogaWdub3JpbmcgdGhlc2UgZnVuY3Rpb25zIGluIGpzaGludCBiZWNhdXNlIHdlIGFyZSBnZXR0aW5nXG4gIGFuIHVuZWNlc3Nhcnkgc3RyaWN0IHZpb2xhdGlvbiB3YXJuaW5nLCBidXQgb3VyIHVzYWdlIG9mIGB0aGlzYFxuICBpcyBwcm9wZXIgaGVyZS4gKi9cbiAgZnVuY3Rpb24gX2dlb0J0bkNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgb3BlcmF0aW9uID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9wZXJhdGlvbicpO1xuICAgIC8vIGlmIG9wZXJhdGlvbiByZXF1aXJlcyBubyBwYXJhbWV0ZXJzLCBkb24ndCByZW5kZXIgYSBmb3JtXG4gICAgaWYgKCFkYy5vcHMuZ2VvW29wZXJhdGlvbl0ucGFyYW1ldGVycykge1xuICAgICAgJChkYykudHJpZ2dlcignb3BlcmF0aW9uOmdlbycsIFtvcGVyYXRpb24sIGRjLnNlbGVjdGlvbi5saXN0XSk7XG4gICAgLy8gb3RoZXJ3aXNlIHJlbmRlciB0aGUgZm9ybVxuICAgIH0gZWxzZSB7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmdlbycsIFtvcGVyYXRpb25dKTtcbiAgICB9XG4gIH1cblxuXG4gIGZ1bmN0aW9uIF9maWxlQnRuQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIG9wZXJhdGlvbiA9ICQodGhpcykuYXR0cignZGF0YS1vcGVyYXRpb24nKTtcbiAgICB0cnkge1xuICAgICAgZGMub3BzLmZpbGVbb3BlcmF0aW9uXS5leGVjdXRlKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1RoaXMgb3BlcmF0aW9uIGRvZXNuXFwndCBleGlzdCEnKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cbiAgLyoganNoaW50IGlnbm9yZTplbmQgKi9cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIHR1cmYgZnVuY3Rpb24gYmFzZWQgb24gYnV0dG9uIG9wZXJhdGlvbiBjbGljay5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9yaWdpbmFsIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wZXJhdGlvbiB0byBiZSBleGVjdXRlZCB2aWEgdHVyZlxuICAgKiBAcGFyYW0ge2FycmF5fSBzZXJpZXMgb2YgcGFyYW1ldGVycyB0byBiZSBhcHBsaWVkIHRvIHR1cmYgb3BlcmF0aW9uXG4gICAqL1xuICBkYy5vcHMuZ2VvRXhlY3V0ZSA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24sIHBhcmFtZXRlcnMpIHtcbiAgICB2YXIgcHJlcCA9IGRjLm9wcy5wcmVwYXJlVHVyZlBhcmFtcyhvcGVyYXRpb24sIHBhcmFtZXRlcnMpO1xuICAgIHZhciByZXN1bHQgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBkYy5vcHMuZ2VvW29wZXJhdGlvbl0uZXhlY3V0ZShwcmVwLm9wdGlvbnMpO1xuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICBkYy5ub3RpZnkoJ1RoYXQgb3BlcmF0aW9uIGlzblxcJ3QgcG9zc2libGUuIFRyeSBjaGFuZ2luZyB0aGUgb3JkZXIgb2YgeW91ciBzZWxlY3Rpb24uJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtwcmVwLm5hbWUsIHJlc3VsdF0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIHBhcmFtZXRlcnMgZm9yIGV4ZWN1dGluZyB3aXRoaW4gYSB0dXJmIGZ1bmN0aW9uIHVzaW5nIC5hcHBseSgpIC0gcmV0dXJucyBhbiBhcnJheVxuICAgKiBAcGFyYW0ge2FycmF5fSBvcHRpb25zIGZyb20gdGhlIHVzZXIgcGFzc2VkIGZyb20gdGhlIG9yaWdpbmFsIGV2ZW50IHRyaWdnZXJcbiAgICovXG4gIGRjLm9wcy5wcmVwYXJlVHVyZlBhcmFtcyA9IGZ1bmN0aW9uKG9wZXJhdGlvbiwgcGFyYW1zKSB7XG4gICAgdmFyIGRhdGEgPSB7fTtcbiAgICBkYXRhLm9wdGlvbnMgPSBbXTtcblxuICAgIHZhciBnZW9tcyA9IFtdO1xuICAgIHZhciBuYW1lQXJyYXkgPSBbXTtcbiAgICAvLyBnZXQgZ2VvbWV0cnkgYXJyYXkgZnJvbSBzZWxlY3Rpb25cbiAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgIGlmICgkLmluQXJyYXkoJ3N3aXRjaC0nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXAsIHBhcmFtcykgPT09IC0xKSB7XG4gICAgICAgIGdlb21zLnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdlb21zLnVuc2hpZnQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3KTtcbiAgICAgIH1cbiAgICAgIG5hbWVBcnJheS5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUpO1xuICAgIH0pO1xuXG4gICAgLy8gbWVyZ2UgcGFyYW1zIHdpdGggb3B0aW9ucyBhcnJheVxuICAgIGRhdGEub3B0aW9ucyA9ICQubWVyZ2UoZ2VvbXMsIHBhcmFtcyk7XG5cbiAgICAvLyBjcmVhdGUgbmFtZSBhcnJheVxuICAgIGRhdGEubmFtZSA9IGRjLnV0aWwuY29uY2F0KG5hbWVBcnJheSwgJ18nLCBvcGVyYXRpb24pO1xuICAgIFxuICAgIHJldHVybiBkYXRhO1xuICB9O1xuXG4gIGRjLm9wcy5nZW9DaGVjayA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuXG4gICAgLy8gY2hlY2sgc2VsZWN0aW9uIGNvdW50IHZzIG9wZXJhdGlvbiBtaW4vbWF4XG4gICAgZm9yICh2YXIgbyBpbiBkYy5vcHMuZ2VvKSB7XG4gICAgICB2YXIgb3AgPSBkYy5vcHMuZ2VvW29dO1xuICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA+IG9wLm1heEZlYXR1cmVzIHx8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA8IG9wLm1pbkZlYXR1cmVzKSB7XG4gICAgICAgIHR1cm5JdE9mZihvKTtcbiAgICAgICAgLy8gZG9uJ3QgZ28gYW55IGZ1cnRoZXJcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy8gY2hlY2sgb3BlcmF0aW9uIGFnYWluc3QgZWFjaCBzZWxlY3Rpb24gZGF0YSB0eXBlXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICB2YXIgc2VsID0gZGMuc2VsZWN0aW9uLmxpc3RbeF07XG5cbiAgICAgICAgICAvLyBpZiB0aGUgc2VsZWN0aW9uIHR5cGUgaXMgaW4gdGhlIGFycmF5LCBtYXJrIGl0IGFzIGFjdGl2ZSFcbiAgICAgICAgICBpZiAoJC5pbkFycmF5KHNlbC50eXBlLCBvcC5yZXF1aXJlbWVudHMudHlwZXMpID4gLTEgfHwgb3AucmVxdWlyZW1lbnRzLmdlbmVyYWxGZWF0dXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0dXJuSXRPbihvKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHVybkl0T2ZmKG8pO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHVybkl0T2ZmKG9wKSB7XG4gICAgICB2YXIgYnRuID0gJCgnW2RhdGEtb3BlcmF0aW9uPScrIG9wICsnXScpO1xuICAgICAgYnRuLmFkZENsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHR1cm5JdE9uKG9wKSB7XG4gICAgICB2YXIgYnRuID0gJCgnW2RhdGEtb3BlcmF0aW9uPScrIG9wICsnXScpO1xuICAgICAgYnRuLnJlbW92ZUNsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG4gICAgXG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMub3BzID0gZGMub3BzIHx8IHt9O1xuXG4gIGRjLm9wcy5maWxlID0ge1xuICAgIHVwbG9hZDoge1xuICAgICAgZGVzY3JpcHRpb246ICdVcGxvYWQgZnJvbSB5b3VyIGNvbXB1dGVyICguZ2VvanNvbiknLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdXBsb2FkXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gaW5zcGlyZWQgZnJvbSBnZW9qc29uLmlvXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvZ2VvanNvbi5pby9ibG9iL2doLXBhZ2VzL3NyYy91aS9maWxlX2Jhci5qcyNMMzkwXG4gICAgICAgIHZhciAkYmxpbmRJbnB1dCA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ2ZpbGUnKVxuICAgICAgICAgIC5hdHRyKCdtdWx0aXBsZScsICd0cnVlJylcbiAgICAgICAgICAuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpXG4gICAgICAgICAgLmNzcygncG9zaXRpb24nLCAnYWJzb2x1dGUnKVxuICAgICAgICAgIC5jc3MoJ2hlaWdodCcsICcwJylcbiAgICAgICAgICAub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGZpbGVzID0gdGhpcy5maWxlcztcbiAgICAgICAgICAgICQoZmlsZXMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgICAvLyB2YXIgZXh0ID0gZGMudXRpbC5nZXRGaWxlRXh0ZW5zaW9uKGZpbGVzW2ldLm5hbWUpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gLy8gaWYgaXQgaXMgYSBzaGFwZWZpbGUgb3IgemlwIGZpbGVcbiAgICAgICAgICAgICAgLy8gaWYgKGV4dCA9PT0gJ3NocCcgfHwgZXh0ID09PSAnemlwJykge1xuICAgICAgICAgICAgICAvLyAgIC8vIHVwbG9hZCBhIHNoYXBlZmlsZSBhbmQgYWRkIHRoZSBsYXllclxuICAgICAgICAgICAgICAvLyAgIGRjLnV0aWwucmVhZFNocEZpbGVcbiAgICAgICAgICAgICAgLy8gICBzaHAoXCJmaWxlcy9wYW5kclwiKS50aGVuKGZ1bmN0aW9uKGdlb2pzb24pe1xuICAgICAgICAgICAgICAvLyAgICAgLy9kbyBzb21ldGhpbmcgd2l0aCB5b3VyIGdlb2pzb24gXG4gICAgICAgICAgICAgIC8vICAgfSk7XG4gICAgICAgICAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGMudXRpbC5yZWFkRmlsZShmaWxlc1tpXSk7XG4gICAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkYmxpbmRJbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkYmxpbmRJbnB1dCk7XG4gICAgICAgICRibGluZElucHV0LmNsaWNrKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLXVybCc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0IGZpbGUgZnJvbSBhIFVSTCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saW5rXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndXJsJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1VSTCcsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdodHRwOi8vJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLXVybCddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciB1cmwgPSBwYXJhbWV0ZXJzWzBdO1xuICAgICAgICBkYy51dGlsLnhocih1cmwsIGRjLm9wcy5maWxlW25hbWVdLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgLy8gZ2V0IGZpbGVuYW1lIGJhc2VkIG9uIHRoZSBlbmQgb2YgdGhlIHVybCAtIG5vdCBzdXJlIGlmIHRoaXMgaXMgc3VzdGFpbmFibGVcbiAgICAgICAgICB2YXIgbmFtZSA9IHhoci5yZXNwb25zZVVSTC5zdWJzdHJpbmcoeGhyLnJlc3BvbnNlVVJMLmxhc3RJbmRleE9mKCcvJykrMSk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtuYW1lLCBkYXRhXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcmV0cmlldmUgR2lzdC4gUGxlYXNlIGNoZWNrIHlvdXIgVVJMJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtZ2lzdCc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0IGZpbGVzIGZyb20gR2lzdCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1naXRodWJcIj48L2k+JyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdnaXN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J0dpc3QgSUQgb3IgVVJMJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHBzOi8vZ2lzdC5naXRodWIuY29tLydcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLWdpc3QnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICB2YXIgZ2lzdCA9IHBhcmFtZXRlcnNbMF0uc3BsaXQoJy8nKVtwYXJhbWV0ZXJzWzBdLnNwbGl0KCcvJykubGVuZ3RoLTFdO1xuICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vZ2lzdHMvJyArIGdpc3Q7XG4gICAgICAgIGRjLnV0aWwueGhyKHVybCwgZGMub3BzLmZpbGVbbmFtZV0uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICBmb3IgKHZhciBmIGluIGRhdGEuZmlsZXMpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gZGF0YS5maWxlc1tmXS5maWxlbmFtZTtcbiAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbbmFtZSwgSlNPTi5wYXJzZShkYXRhLmZpbGVzW2ZdLmNvbnRlbnQpXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGRjLm5vdGlmeSgnc3VjY2VzcycsICdTdWNjZXNmdWxseSByZXRyaWV2ZWQgZ2lzdCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcmV0cmlldmUgR2lzdC4gUGxlYXNlIGNoZWNrIHlvdXIgVVJMJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtb3ZlcnBhc3MnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ1F1ZXJ5IHRoZSBPdmVycGFzcyBBUEknLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdGVybWluYWxcIj48L2k+JyxcbiAgICAgIF90ZW1wOiB7fSxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdxdWVyeScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidMZWFybiBtb3JlIGFib3V0IDxhIGhyZWY9XCJodHRwOi8vd2lraS5vcGVuc3RyZWV0bWFwLm9yZy93aWtpL092ZXJwYXNzX0FQSS9MYW5ndWFnZV9HdWlkZVwiIHRhcmdldD1cIl9ibGFua1wiPnRoZSBxdWVyeSBsYW5ndWFnZTwvYT4uJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2FtZW5pdHk9YmFyJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2xheWVyIG5hbWUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonTmFtZSBvZiB0aGUgbGF5ZXIgYWRkZWQgaWYgcmVzdWx0cyBhcmUgZm91bmQuJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ292ZXJwYXNzX2xheWVyX25hbWUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydsb2FkLW92ZXJwYXNzJ10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgLy8gc2V0IGxheWVyIG5hbWUgdG8gX3RlbXAgZm9yIGxhdGVyIHVzYWdlXG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uX3RlbXAubGF5ZXJOYW1lID0gcGFyYW1ldGVyc1sxXTsgLy8gdGhpcyBpcyB1Z2x5XG5cbiAgICAgICAgLy8gYnVpbGQgdGhlIHF1ZXJ5IHdpdGggYm91bmRpbmcgYm94XG4gICAgICAgIHZhciBiYm94ID0gZGMudXRpbC5nZXRCQm94KCk7XG4gICAgICAgIGRjLnV0aWwueGhyKCdodHRwOi8vb3ZlcnBhc3MtYXBpLmRlL2FwaS9pbnRlcnByZXRlcj9bb3V0Ompzb25dO25vZGVbJytwYXJhbWV0ZXJzWzBdKyddKCcrYmJveCsnKTtvdXQ7JywgZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5jYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIHZhciBnZW9qc29uID0gb3NtdG9nZW9qc29uKGRhdGEsIHtcbiAgICAgICAgICAgIGZsYXRQcm9wZXJ0aWVzOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKCFkYXRhLmVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ05vIGVsZW1lbnRzIGZvdW5kIGluIHlvdXIgcXVlcnkuJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5fdGVtcC5sYXllck5hbWUsIGdlb2pzb25dKTtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnc3VjY2VzcycsICdGb3VuZCA8c3Ryb25nPicgKyBkYXRhLmVsZW1lbnRzLmxlbmd0aCArICcgZWxlbWVudHM8L3N0cm9uZz4gZnJvbSB0aGUgT3ZlcnBhc3MgQVBJJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHF1ZXJ5IHRoZSBPdmVycGFzcyBBUEknKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBsb2NhdGlvbjoge1xuICAgICAgZGVzY3JpcHRpb246ICdBZGQgeW91ciBsb2NhdGlvbiBhcyBhIGxheWVyJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWNyb3NzaGFpcnNcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIW5hdmlnYXRvci5nZW9sb2NhdGlvbikge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnR2VvbG9jYXRpb24gaXMgbm90IGF2YWlsYWJsZSBvbiB0aGlzIGJyb3dzZXIuJywgNDAwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubWFwLm0ubG9jYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2JyZWFrMSc6IHsgdHlwZTogJ2JyZWFrJyB9LFxuXG4gICAgJ3NhdmUtZ2VvanNvbic6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdTYXZlIGFzIEdlb0pTT04nLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZmlsZS1jb2RlLW9cIj48L2k+JyxcbiAgICAgIGNyZWF0ZXNMYXllcjogZmFsc2UsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3KTtcbiAgICAgICAgICB2YXIgdGl0bGUgPSAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnLmdlb2pzb24nO1xuICAgICAgICAgIHNhdmVBcyhuZXcgQmxvYihbY29udGVudF0sIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnXG4gICAgICAgICAgfSksIHRpdGxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnc2F2ZS1zaGFwZWZpbGUnOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBTaGFwZWZpbGUnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZmlsZVwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgZm9sZGVyOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVzOiB7XG4gICAgICAgICAgICAgICAgcG9pbnQ6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfcG9pbnQnLFxuICAgICAgICAgICAgICAgIHBvbHlnb246ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfcG9seScsXG4gICAgICAgICAgICAgICAgbGluZTogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19saW5lJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2hwd3JpdGUuZG93bmxvYWQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3LCBvcHRpb25zKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnRXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBkb3dubG9hZGluZyB0aGUgc2hhcGVmaWxlLicgKyBlcnIpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZVxuICAgIH0sXG5cbiAgICAnYnJlYWsyJzogeyB0eXBlOiAnYnJlYWsnIH0sXG5cbiAgICBleHRlbnQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdWaWV3IGV4dGVudCBvZiBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZ2xvYmVcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZighZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gZXh0ZW50IG9mIGVudGlyZSBsYXllciBsaXN0IGlmIG5vdGhpbmcgc2VsZWN0ZWRcbiAgICAgICAgICBkYy5tYXAubS5maXRCb3VuZHMoZGMubWFwLmxheWVyZ3JvdXAuZ2V0Qm91bmRzKCkpOyAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGJ1aWxkIHRoZSBib3VuZHMgYmFzZWQgb24gc2VsZWN0ZWQgbGF5ZXJzXG4gICAgICAgICAgdmFyIGJvdW5kcztcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIHZhciBmbCA9IGRjLnNlbGVjdGlvbi5saXN0W2xdLmZlYXR1cmVsYXllcjtcbiAgICAgICAgICAgIGlmKCFsKSBib3VuZHMgPSBmbC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIGVsc2UgYm91bmRzLmV4dGVuZChmbC5nZXRCb3VuZHMoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICB9XG4gICAgfSxcblxuICAgIGV4cGFuZDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbnZlcnQgRmVhdHVyZUNvbGxlY3Rpb24gaW50byBzZXBhcmF0ZSBmZWF0dXJlcycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1leHBhbmRcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgdmFyIGZjID0gZGMuc2VsZWN0aW9uLmxpc3RbMF07XG4gICAgICAgICAgaWYgKGZjLnJhdy50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAkKGZjLnJhdy5mZWF0dXJlcykuZWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZmMubmFtZSArIGNvdW50ICsgJ18nICsgZmMucmF3LmZlYXR1cmVzW2ZdLmdlb21ldHJ5LnR5cGUsIGZjLnJhdy5mZWF0dXJlc1tmXV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1RoYXQgbmVlZHMgdG8gYmUgYSBmZWF0dXJlIGNvbGxlY3Rpb24hJyk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0xheWVyIGlzIG5vdCBhIEZlYXR1cmVDb2xsZWN0aW9uLicpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnUGxlYXNlIHNlbGVjdCBhIHNpbmdsZSBsYXllciEnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb21iaW5lOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29tYmluZXMgc2VsZWN0ZWQgZmVhdHVyZXMgaW50byBhIHNpbmdsZSBGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jb21wcmVzc1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmYyA9IHtcbiAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgICAgIGZlYXR1cmVzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0W2ZdLnJhdy50eXBlICE9PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAgIGZjLmZlYXR1cmVzLnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbZl0ucmF3KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsIGRjLnNlbGVjdGlvbi5saXN0W2ZdLm5hbWUgKyAnIHdhcyBub3QgYWRkZWQgYmVjYXVzZSBpdCBpcyBhbHJlYWR5IGEgRmVhdHVyZUNvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgWyduZXdfRmVhdHVyZUNvbGxlY3Rpb24nLCBmY10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBsYXllcnMgc2VsZWN0ZWQhJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gJ3ZpZXctYXR0cmlidXRlcyc6IHtcbiAgICAvLyAgIG1pbkZlYXR1cmVzOiAxLFxuICAgIC8vICAgZGVzY3JpcHRpb246ICdTaG93IGF0dHJpYnV0ZSB0YWJsZScsXG4gICAgLy8gICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10aC1saXN0XCI+PC9pPicsXG4gICAgLy8gICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgZGMuYXR0ci5yZW5kZXIoZGMuc2VsZWN0aW9uLmxpc3RbMF0pO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG5cbiAgICAnYnJlYWszJzogeyB0eXBlOiAnYnJlYWsnIH0sXG5cbiAgICByZW5hbWU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdSZW5hbWUgbGF5ZXInLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnTmFtZScsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ3JlbmFtZSddKTsgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdQbGVhc2Ugc2VsZWN0IDxzdHJvbmc+b25lIGxheWVyPC9zdHJvbmc+LicpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbmFtZScsIFtkYy5zZWxlY3Rpb24ubGlzdFswXSwgcGFyYW1ldGVyc1swXV0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdSZW1vdmUgc2VsZWN0ZWQgbGF5ZXJzJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoLW9cIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW1vdmUnLCBbdGhpcy5zdGFtcF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGluZm86IHtcbiAgICAgIHR5cGU6ICdpbmZvJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTGVhcm4gbW9yZSBhYm91dCBkcm9wY2hvcCcsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1pbmZvXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJy9hYm91dC5odG1sJztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMub3BzID0gZGMub3BzIHx8IHt9O1xuXG4gIGRjLm9wcy5nZW8gPSB7XG4gICAgYWxvbmc6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgbGluZSBhbmQgcmV0dXJucyBhIHBvaW50IGF0IGEgc3BlY2lmaWVkIGRpc3RhbmNlIGFsb25nIHRoZSBsaW5lLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZGlzdGFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonZGlzdGFuY2UgYWxvbmcgdGhlIGxpbmUnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdHMnLFxuICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ21pbGVzJywgJ2tpbG9tZXRlcnMnLCAncmFkaWFucycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnYWxvbmcnLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmFsb25nLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYmV6aWVyOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGxpbmUgYW5kIHJldHVybnMgYSBjdXJ2ZWQgdmVyc2lvbiBieSBhcHBseWluZyBhIEJlemllciBzcGxpbmUgYWxnb3JpdGhtLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVzb2x1dGlvbicsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidUaW1lIGluIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHBvaW50cycsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTAwMDBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdzaGFycG5lc3MnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonYSBtZWFzdXJlIG9mIGhvdyBjdXJ2eSB0aGUgcGF0aCBzaG91bGQgYmUgYmV0d2VlbiBzcGxpbmVzJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAgMC44NVxuXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdiZXppZXInLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmJlemllci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJ1ZmZlcjoge1xuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdDYWxjdWxhdGVzIGEgYnVmZmVyIGZvciBpbnB1dCBmZWF0dXJlcyBmb3IgYSBnaXZlbiByYWRpdXMuIFVuaXRzIHN1cHBvcnRlZCBhcmUgbWlsZXMsIGtpbG9tZXRlcnMsIGFuZCBkZWdyZWVzLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZGlzdGFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRGlzdGFuY2UgdG8gZHJhdyB0aGUgYnVmZmVyLicsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0JyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdmZWV0JywgJ2tpbG9tZXRlcnMnLCAnbWV0ZXJzJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuYnVmZmVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNlbnRlcjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGVzIGEgcG9pbnQgaW4gdGhlIGNlbnRlciBvZiB0aGUgZmVhdHVyZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3JlY3Vyc2l2ZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdSdW4gdGhlIG9wZXJhdGlvbiBvbiBlYWNoIGZlYXR1cmUgaW4gdGhlIGNvbGxlY3Rpb24gb3IgdGhlIGVudGlyZSBjb2xsZWN0aW9uLicsXG4gICAgICAgICAgdHlwZTogJ3JlY3Vyc2l2ZSdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIC8vIGlmIHJ1bm5pbmcgdGhlIG9wZXJhdGlvbiByZWN1cnNpdmVseSBcInRydWVcIlxuICAgICAgICBpZiAocGFyYW1zWzFdID09PSBcInRydWVcIikge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2NlbnRlcicsIHBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5jZW50ZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjZW50cm9pZDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGVzIGEgcG9pbnQgaW4gdGhlIGNlbnRyb2lkIG9mIHRoZSBmZWF0dXJlcy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3JlY3Vyc2l2ZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdSdW4gdGhlIG9wZXJhdGlvbiBvbiBlYWNoIGZlYXR1cmUgaW4gdGhlIGNvbGxlY3Rpb24gb3IgdGhlIGVudGlyZSBjb2xsZWN0aW9uLicsXG4gICAgICAgICAgdHlwZTogJ3JlY3Vyc2l2ZSdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIC8vIGlmIHJ1bm5pbmcgdGhlIG9wZXJhdGlvbiByZWN1cnNpdmVseSBcInRydWVcIlxuICAgICAgICBpZiAocGFyYW1zWzFdID09PSBcInRydWVcIikge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2NlbnRyb2lkJywgcGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmNlbnRyb2lkLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGVzdGluYXRpb246IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvaW50PicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIFBvaW50IGFuZCBjYWxjdWxhdGVzIHRoZSBsb2NhdGlvbiBvZiBhIGRlc3RpbmF0aW9uIHBvaW50IGdpdmVuIGEgZGlzdGFuY2UgaW4gZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnM7IGFuZCBiZWFyaW5nIGluIGRlZ3JlZXMuIFRoaXMgdXNlcyB0aGUgSGF2ZXJzaW5lIGZvcm11bGEgdG8gYWNjb3VudCBmb3IgZ2xvYmFsIGN1cnZhdHVyZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2Rpc3RhbmNlIGZyb20gdGhlIHN0YXJ0aW5nIHBvaW50JyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2JlYXJpbmcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDoncmFuZ2luZyBmcm9tIC0xODAgdG8gMTgwJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAgMFxuXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdHMnLFxuICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ21pbGVzJywgJ2tpbG9tZXRlcnMnLCAncmFkaWFucycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnZGVzdGluYXRpb24nLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmRlc3RpbmF0aW9uLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZW52ZWxvcGU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddIC8vIFRPRE86IG1ha2UgdGhpcyB0YWtlIGZlYXR1cmVzIGFuZCBydW4gYWNyb3NzIGZ1bGwgc2VsZWN0aW9uXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhbnkgbnVtYmVyIG9mIGZlYXR1cmVzIGFuZCByZXR1cm5zIGEgcmVjdGFuZ3VsYXIgUG9seWdvbiB0aGF0IGVuY29tcGFzc2VzIGFsbCB2ZXJ0aWNlcy4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmVudmVsb3BlLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGV4cGxvZGU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBmZWF0dXJlIG9yIHNldCBvZiBmZWF0dXJlcyBhbmQgcmV0dXJucyBhbGwgcG9zaXRpb25zIGFzIHBvaW50cy4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmV4cGxvZGUuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbWlkcG9pbnQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvaW50PiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyB0d28gcG9pbnRzIGFuZCByZXR1cm5zIGEgcG9pbnQgbWlkd2F5IGJldHdlZW4gdGhlbS4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLm1pZHBvaW50LmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHNpbXBsaWZ5OiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlPFBvbHlnb24+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgTGluZVN0cmluZyBvciBQb2x5Z29uIGFuZCByZXR1cm5zIGEgc2ltcGxpZmllZCB2ZXJzaW9uLiBJbnRlcm5hbGx5IHVzZXMgc2ltcGxpZnktanMgdG8gcGVyZm9ybSBzaW1wbGlmaWNhdGlvbi4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0b2xlcmFuY2UnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24gOidzaW1wbGlmaWNhdGlvbiB0b2xlcmFuY2UnLFxuICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgICBkZWZhdWx0OiAwLjFcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdoaWdoIHF1YWxpdHknLFxuICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnd2hldGhlciBvciBub3QgdG8gc3BlbmQgbW9yZSB0aW1lIHRvIGNyZWF0ZSBhIGhpZ2hlci1xdWFsaXR5IHNpbXBsaWZpY2F0aW9uIHdpdGggYSBkaWZmZXJlbnQgYWxnb3JpdGhtJyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ3NpbXBsaWZ5JywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5zaW1wbGlmeS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHRpbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1RyaWFuZ3VsYXRlZCBpcnJlZ3VsYXIgbmV0d29yaywgaW50ZXJwb2xhdGlvbiBtZXRob2QnLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLnRpbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1bmlvbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9seWdvbj4nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgdHdvIHBvbHlnb25zIGFuZCByZXR1cm5zIGEgY29tYmluZWQgcG9seWdvbi4gSWYgdGhlIGlucHV0IHBvbHlnb25zIGFyZSBub3QgY29udGlndW91cywgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGEgTXVsdGlQb2x5Z29uIGZlYXR1cmUuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi51bmlvbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB3aXRoaW46IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIHNldCBvZiBwb2ludHMgYW5kIGEgc2V0IG9mIHBvbHlnb25zIGFuZCByZXR1cm5zIHRoZSBwb2ludHMgdGhhdCBmYWxsIHdpdGhpbiB0aGUgcG9seWdvbnMuIEZpcnN0IGlucHV0IHNob3VsZCBiZSB0aGUgcG9pbnRzLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnUG9pbnRzIHRvIGNsaXAnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonU2VsZWN0IHRoZSBsYXllciB0aGF0IHJlcHJlc2VudHMgdGhlIHBvaW50cyB5b3Ugd2FudCB0byBjbGlwLiBUaGlzIGFzc3VtZXMgdGhlIG90aGVyIGxheWVyIGlzIHlvdXIgY2xpcHBpbmcgcG9seWdvbi4nLFxuICAgICAgICAgIHR5cGU6ICdzd2l0Y2gnXG4gICAgICAgICAgLy8gZGVmYXVsdDogZGMuc2VsZWN0aW9uLmxpc3RbMF1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi53aXRoaW4uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgXG4gIGRjLnNlbGVjdGlvbiA9IHt9O1xuICBkYy5zZWxlY3Rpb24ubGlzdCA9IFtdO1xuXG4gIGRjLnNlbGVjdGlvbi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2xheWVyOnNlbGVjdGVkJywgZGMuc2VsZWN0aW9uLmFkZCk7XG4gICAgJChkYykub24oJ2xheWVyOnVuc2VsZWN0ZWQnLCBkYy5zZWxlY3Rpb24ucmVtb3ZlKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlZCcsIF9sYXllclJlbW92ZWQpO1xuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5hZGQgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdC5wdXNoKGxheWVyKTtcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24ucmVtb3ZlID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGluZGV4ID0gbnVsbDtcbiAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcCA9PT0gbGF5ZXIuc3RhbXApIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGRjLnNlbGVjdGlvbi5saXN0LnNwbGljZShpbmRleCwgMSk7IC8vIHJlbW92ZSBvdXRzaWRlIG9mIHRoZSBsb29wIHNvIHdlIGRvbid0IGJyZWFrIG91ciBjb3VudFxuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICQoJy5sYXllci1uYW1lLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgJCgnLm9wZXJhdGlvbi1nZW8nKS5hZGRDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgJCgnLm9wZXJhdGlvbi1nZW8nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIGRjLnNlbGVjdGlvbi5saXN0ID0gW107XG4gIH07XG5cbiAgZnVuY3Rpb24gX2xheWVyUmVtb3ZlZChldmVudCwgc3RhbXApIHtcbiAgICBkYy5zZWxlY3Rpb24ucmVtb3ZlKHt9LCB7c3RhbXA6IHN0YW1wfSk7XG4gICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gIH1cblxuICByZXR1cm4gZGM7XG5cblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuXG4gIGRjLnV0aWwgPSB7fTtcblxuICBkYy51dGlsLnJlbW92ZUZpbGVFeHRlbnNpb24gPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXFwuW14vLl0rJC8sIFwiXCIpO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG5cbiAgZGMudXRpbC5yZW1vdmVXaGl0ZVNwYWNlID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbiAgICBjb25zb2xlLmxvZyhzdHJpbmcpO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG5cbiAgZGMudXRpbC5jb25jYXQgPSBmdW5jdGlvbihhcnJheSwgc2VwYXJhdG9yLCBwcmVmaXgpIHtcbiAgICB2YXIgc3RyaW5nID0gJyc7XG4gICAgJChhcnJheSkuZWFjaChmdW5jdGlvbihhKSB7XG4gICAgICBzdHJpbmcgKz0gc2VwYXJhdG9yICsgYXJyYXlbYV07XG4gICAgfSk7XG4gICAgc3RyaW5nID0gcHJlZml4ICsgc3RyaW5nO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG5cbiAgZGMudXRpbC54aHIgPSBmdW5jdGlvbih1cmwsIGNhbGxiYWNrKSB7XG4gICAgZHJvcGNob3AudXRpbC5sb2FkZXIodHJ1ZSk7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgIHhoci5vbmxvYWQgPSBjYWxsYmFjay5iaW5kKHRoaXMsIHhocik7XG4gICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiggeGhyICkge1xuICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgY29uc29sZS5lcnJvcih4aHIpO1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdVbmFibGUgdG8gYWNjZXNzICcgKyB1cmwsIDI1MDApO1xuICAgIH07XG4gICAgeGhyLnNlbmQoKTtcbiAgfTtcblxuICBkYy51dGlsLnJlYWRGaWxlID0gZnVuY3Rpb24oZmlsZSkge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIC8vIGlmIGEgemlwZmlsZSwgYXNzdW1lIHNoYXBlZmlsZSBmb3Igbm93XG4gICAgaWYgKGZpbGUubmFtZS5pbmRleE9mKCcuemlwJykgPiAtMSB8fCBmaWxlLm5hbWUuaW5kZXhPZignLnNocCcpID4gLTEpIHtcbiAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgIGRjLnV0aWwubG9hZGVyKHRydWUpO1xuICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHNocChyZWFkZXIucmVzdWx0KS50aGVuKGZ1bmN0aW9uKGdlb2pzb24pIHtcbiAgICAgICAgICBkYy51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtnZW9qc29uLmZpbGVOYW1lLCBnZW9qc29uXSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSwgJ1VURi04Jyk7XG4gICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZmlsZS5uYW1lLCBKU09OLnBhcnNlKHJlYWRlci5yZXN1bHQpXSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcndhcmRUb0dlb0pzb25JbyhkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9nZW9qc29uLmlvLyNkYXRhPWRhdGE6YXBwbGljYXRpb24vanNvbixcIiArIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICB3aW5kb3cubG9jYXRpb24gPSB1cmw7XG4gICAgfVxuICB9O1xuXG4gIGRjLnV0aWwuanNvbkZyb21VcmwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcXVlcnkgPSBsb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpXG4gICAgICAuc3BsaXQoLygmP2dpc3Q9fCY/dXJsPSkvZylcbiAgICAgIC5maWx0ZXIoZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZC5sZW5ndGggPiAwO1xuICAgICAgfSk7XG5cbiAgICB2YXIgcmVzdWx0ID0ge307XG5cbiAgICBxdWVyeS5mb3JFYWNoKGZ1bmN0aW9uKHBhcnQsIGkpIHtcbiAgICAgIGlmIChpID09PSAwIHx8IGkgJSAyID09PSAwKSB7XG4gICAgICAgIHZhciBrZXkgPSBwYXJ0LnJlcGxhY2UoLyZ8PS9nLCAnJyk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHRba2V5XSkge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gW107XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHRba2V5XS5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChxdWVyeVtpICsgMV0pKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgZGMudXRpbC5leGVjdXRlVXJsUGFyYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRhdGEgPSBkYy51dGlsLmpzb25Gcm9tVXJsKCk7XG5cbiAgICAvLyBsb2FkIGdpc3RcbiAgICBpZiAoZGF0YS5naXN0ICYmIGRhdGEuZ2lzdC5sZW5ndGgpIHtcbiAgICAgICQoZGF0YS5naXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtZ2lzdCddLmdldCh7fSwgJ2xvYWQtZ2lzdCcsIFtkYXRhLmdpc3RbaV1dKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGxvYWRcbiAgICBpZiAoZGF0YS51cmwgJiYgZGF0YS51cmwubGVuZ3RoKSB7XG4gICAgICAkKGRhdGEudXJsKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtdXJsJ10uZ2V0KHt9LCAnbG9hZC11cmwnLCBbZGF0YS51cmxbaV1dKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmdldEZpbGVFeHRlbnNpb24gPSBmdW5jdGlvbihmaWxlbmFtZSkge1xuICAgIHJldHVybiBmaWxlbmFtZS5zdWJzdHIoZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKSsxKTtcbiAgfTtcblxuICBkYy51dGlsLmdldEJCb3ggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm91bmRzID0gZGMubWFwLm0uZ2V0Qm91bmRzKCksXG4gICAgICAgICAgICBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKSxcbiAgICAgICAgICAgIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpO1xuICAgIC8vIHdlIHNob3VsZCBwcm9iYWJseSBjaGVjayB0aGUgc2l6ZSBoZXJlP1xuICAgIC8vIG5vZGUoNTcuNywxMS45LDU3LjgsMTIuMClcbiAgICByZXR1cm4gc3cubGF0KycsJytzdy5sbmcrJywnK25lLmxhdCsnLCcrbmUubG5nO1xuICB9O1xuXG4gIGRjLnV0aWwudW5jb2xsZWN0ID0gZnVuY3Rpb24oZmMpIHtcbiAgICByZXR1cm4gZmMuZmVhdHVyZXNbMF07XG4gIH07XG5cbiAgZGMudXRpbC5leGVjdXRlRkMgPSBmdW5jdGlvbihmYywgb3BlcmF0aW9uLCBwYXJhbXMpIHtcblxuICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG4gICAgdmFyIG5ld0ZDID0ge307XG4gICAgbmV3RkMudHlwZSA9ICdGZWF0dXJlQ29sbGVjdGlvbic7XG4gICAgbmV3RkMuZmVhdHVyZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGYgPSAwOyBmIDwgZmMuZmVhdHVyZXMubGVuZ3RoOyBmKyspIHtcbiAgICAgIG5ld1BhcmFtc1swXSA9IGZjLmZlYXR1cmVzW2ZdO1xuICAgICAgdmFyIGZlYXR1cmU7XG4gICAgICB0cnkge1xuICAgICAgICBmZWF0dXJlID0gdHVyZltvcGVyYXRpb25dLmFwcGx5KG51bGwsIG5ld1BhcmFtcyk7XG4gICAgICAgIGZlYXR1cmUucHJvcGVydGllcyA9IGZjLmZlYXR1cmVzW2ZdLnByb3BlcnRpZXMgfHwge307XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIGVycik7XG4gICAgICB9XG4gICAgICBuZXdGQy5mZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdGQztcblxuICB9O1xuXG4gIGRjLnV0aWwubG9hZGVyID0gZnVuY3Rpb24oeWVzKSB7XG4gICAgdmFyIGxvYWRlciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRlcicpO1xuXG4gICAgaWYgKHllcykge1xuICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdkcm9wY2hvcC1sb2FkaW5nJyk7XG4gICAgICAkKCdib2R5JykuYXBwZW5kKGxvYWRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZHJvcGNob3AtbG9hZGluZycpO1xuICAgICAgJCgnLmRyb3BjaG9wLWxvYWRlcicpLmFkZENsYXNzKCdsb2FkZXItY29tcGxldGUnKS5mYWRlT3V0KDIwMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5lcnJvciA9IGZ1bmN0aW9uKGVycikge1xuICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihlcnIpO1xuICAgIHRocm93IGVycm9yO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
