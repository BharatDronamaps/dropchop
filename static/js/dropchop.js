var dropchop=function(e){return e=e||{},e.version="0.1",e.init=function(t){if(!t){var a=new Error("No options provided in dropchop.init()");throw a}if(e.options=t,!$(t.id).length){var a=new Error("Element with options.id does not exist.");throw a}e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.ops.init(),e.form.init(),location.search.length&&e.util.executeUrlParams(),e.util.welcome()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),l=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),s=$("<button>").addClass("layer-action layer-remove").html('<i class="fa fa-times"></i>'),p=$("<button>").addClass("layer-action layer-duplicate").html('<i class="fa fa-files-o"></i>');p.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:duplicate",[$(this).parent().attr("data-stamp")]),!1}),s.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:remove",[$(this).parent().attr("data-stamp")]),e.selection.clear(),!1}),l.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),l=i.parent().attr("data-stamp");t===r&&(a=e),t===l&&(o=e)}),console.log(a,o),a>o?$(".layer-element").each(function(t){t>=o&&a>=t&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){o>t&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),o.append(n),o.append(l),o.append(i),o.append(s),o.append(p),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show()},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.toggleAll=function(t){function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}if($(this).find("input").prop("checked"))for(var r in e.layers.list)a(e.layers.list[r].stamp,!0);else for(var o in e.layers.list)a(e.layers.list[o].stamp,!1)},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r){var o=e.layers.makeLayer(a,r);e.layers.list[o.stamp]=o,e.notify("success","<strong>"+o.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[o])},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r;"FeatureCollection"===r.type&&1===r.features.length&&(o=e.util.uncollect(r));var n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer)}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);$(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.ops=e.ops||{},e.ops.init=function(){var r=$("<div>").addClass("operations-geo");e.$elem.append(r);for(var o in e.ops.geo){var n=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+o+"</h4><p>"+e.ops.geo[o].description+"</p>").prop("disabled",!0).attr("data-operation",o);n.on("click",t),r.append(n)}$(e).on("layer:selected",e.ops.geoCheck),$(e).on("layer:unselected",e.ops.geoCheck),$(e).on("operation:geo",e.ops.geoExecute),$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback);var i=$("<div>").addClass("dropchop-menu-left");for(var l in e.ops.file)if("break"===e.ops.file[l].type){var s=$("<div>").addClass("menu-action-break");i.append(s)}else{var p=$("<button>").addClass("menu-action").html(e.ops.file[l].icon||"A").attr("data-operation",l).attr("data-tooltip",e.ops.file[l].description);"info"===e.ops.file[l].type&&p.addClass("dropchop-info"),p.on("click",a),i.append(p)}e.$elem.append(i)},e.ops.geoExecute=function(t,a,r){var o=e.ops.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.ops.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){-1===$.inArray("switch-"+e.selection.list[t].stamp,a)?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.ops.geoCheck=function(t,a){function r(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function o(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var n in e.ops.geo){var i=e.ops.geo[n];if(e.selection.list.length>i.maxFeatures||e.selection.list.length<i.minFeatures)r(n);else for(var l=0;l<e.selection.list.length;l++){var s=e.selection.list[l];$.inArray(s.type,i.requirements.types)>-1||i.requirements.generalFeature===!0?o(n):r(n)}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content)])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide" target="_blank">the query language</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox();e.util.xhr("http://overpass-api.de/api/interpreter?[out:json];node["+r[0]+"]("+o+");out;",e.ops.file["load-overpass"].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r);r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},break1:{type:"break"},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++)!function(t){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}(t)}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},break2:{type:"break"},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},break3:{type:"break"},rename:{minFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){console.log(a,r),$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){console.log(this.stamp),$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.readFile=function(t){function a(e){console.log(e);var t="http://geojson.io/#data=data:application/json,"+encodeURIComponent(JSON.stringify(e));window.location=t}var r=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(console.log(t),r.readAsArrayBuffer(t),r.onloadend=function(e){console.log(r),shp(r.result).then(a)}):(r.readAsText(t,"UTF-8"),r.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(r.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1),t={};return e.split("&").forEach(function(e){var a=e.split("=");t[a[0]]||(t[a[0]]=[]),t[a[0]].push(decodeURIComponent(a[1]))}),t},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.uncollect=function(e){return e.features[0]},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var l;try{l=turf[a].apply(null,o),l.properties=t.features[i].properties||{}}catch(s){e.notify("error",s)}n.features.push(l)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.welcome=function(){var e="\nWelcome to Dropchop!\n";e+="Once you drop, the chop don't stop.\n\n",e+="This project is brought to you by the great people of CUGOS, the Cascadian chapter of OSGeo. If you are ever in Seattle, hit us up\nhello@cugos.org\n\n",e+="You can learn more about this project at dropchop.io/about.",console.log(e)},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibm90aWZ5LmRyb3BjaG9wLmpzIiwib3BzLmRyb3BjaG9wLmpzIiwib3BzLmZpbGUuZHJvcGNob3AuanMiLCJvcHMuZ2VvLmRyb3BjaG9wLmpzIiwic2VsZWN0aW9uLmRyb3BjaG9wLmpzIiwidXRpbC5kcm9wY2hvcC5qcyJdLCJuYW1lcyI6WyJkcm9wY2hvcCIsImRjIiwidmVyc2lvbiIsImluaXQiLCJvcHRzIiwiZXJyIiwiRXJyb3IiLCJvcHRpb25zIiwiJCIsImlkIiwibGVuZ3RoIiwiJGVsZW0iLCJsYXllcnMiLCJwcmVwYXJlIiwibWFwIiwic2VsZWN0aW9uIiwibGF5ZXJsaXN0IiwiZHJvcHpvbmUiLCJvcHMiLCJmb3JtIiwibG9jYXRpb24iLCJzZWFyY2giLCJ1dGlsIiwiZXhlY3V0ZVVybFBhcmFtcyIsIndlbGNvbWUiLCJib29tIiwiY29uc29sZSIsImxvZyIsIl9ldmVudHMiLCIkY29udGFpbmVyIiwib24iLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwidGhpcyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJmaWxlcyIsIm9yaWdpbmFsRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJlYWNoIiwiaSIsInJlYWRGaWxlIiwiZ2VvIiwiZmlsZSIsIm9wZXJhdGlvbiIsImNyZWF0ZSIsIm5hbWUiLCJpbmZvIiwidHJpZ2dlciIsInJlbW92ZSIsIiRodG1sIiwiYXR0ciIsInRleHQiLCJhcHBlbmRUbyIsImRlc2NyaXB0aW9uIiwicGFyYW1ldGVycyIsInAiLCJjcmVhdGVQYXJhbSIsIiRzdWJtaXQiLCIkY2FuY2VsIiwiZGF0YSIsInNlcmlhbGl6ZUFycmF5IiwicHVzaCIsInZhbHVlIiwiYXBwZW5kIiwicGFyYW0iLCIkaW5wdXQiLCIkbGFiZWwiLCIkZmllbGQiLCJpbnB1dHMiLCJ0eXBlIiwiaHRtbCIsIm51bWJlciIsIiRpIiwic2VsZWN0IiwiJG9wdCIsImNoZWNrYm94Iiwic3dpdGNoIiwibGlzdCIsIiRsYmwiLCJ2YWwiLCJzdGFtcCIsInJlY3Vyc2l2ZSIsIiRsYmwxIiwiJG9wdDEiLCIkbGJsMiIsIiRvcHQyIiwibGF5ZXJUeXBlSWNvbiIsImljb24iLCJlbGVtcyIsInRhcmdldCIsImhhc0NsYXNzIiwiY2xlYXIiLCJsaUhlbHBlciIsInRvZ2dsZUxheWVycyIsInRvZ2dsZUFsbCIsImFkZExheWVyTGlzdEl0ZW0iLCJyZW1vdmVMYXllckxpc3RJdGVtIiwicmVuYW1lIiwibmV3TmFtZSIsImZpbmQiLCJsYXllciIsImxheWVybGlzdEl0ZW0iLCJsYXllckRpdiIsImRlbGF5IiwicXVldWUiLCJuZXh0IiwibGF5ZXJUeXBlIiwicHJvcCIsImNoZWNrZWQiLCJkdXBsaWNhdGUiLCJwYXJlbnQiLCJzaGlmdEtleSIsInRvQ291bnQiLCJmcm9tQ291bnQiLCJ0byIsImZyb20iLCJfbGFzdFNlbGVjdGVkIiwiZSIsImNoZWNrIiwidG9TdGFtcCIsImZyb21TdGFtcCIsImwiLCJzZWxlY3RMYXllciIsIm1ldGFLZXkiLCJzZWxlY3RUb2dnbGUiLCJjbGVhclNlbGVjdGlvbiIsImhpZGUiLCJzaG93IiwiJGl0ZW0iLCJseXIiLCJlbGVtVG9nZ2xlIiwiYm9vbCIsIm8iLCJmYWRlT3V0IiwiZ2V0VHlwZSIsImdqIiwiZ2VvbWV0cnkiLCJhZGQiLCJibG9iIiwibWFrZUxheWVyIiwibm90aWZ5IiwicmF3IiwianNvbiIsImdlb2pzb24iLCJmZWF0dXJlcyIsInVuY29sbGVjdCIsImZsIiwiTCIsIm1hcGJveCIsImZlYXR1cmVMYXllciIsInJlbW92ZUZpbGVFeHRlbnNpb24iLCJmZWF0dXJlbGF5ZXIiLCJkYXRlQWRkZWQiLCJEYXRlIiwiX21ha2VNYXAiLCJ0b2tlbiIsImFjY2Vzc1Rva2VuIiwibSIsInpvb21Db250cm9sIiwid29ybGRDb3B5SnVtcCIsInNldFZpZXciLCJjb250cm9sIiwiem9vbSIsInBvc2l0aW9uIiwiYWRkVG8iLCJnZW9jb2RlckNvbnRyb2wiLCJiYXNlTGF5ZXJzIiwiTWFwYm94IFN0cmVldHMiLCJ0aWxlTGF5ZXIiLCJNYXBib3ggT3V0ZG9vcnMiLCJNYXBib3ggTGlnaHQiLCJNYXBib3ggRGFyayIsIk1hcGJveCBTYXRlbGxpdGUiLCJjb2xsYXBzZWQiLCJsYXllcmdyb3VwIiwiYWRkTGF5ZXIiLCJoaWRlTGF5ZXIiLCJzaG93TGF5ZXIiLCJyZW1vdmVMYXllciIsImNvdW50IiwiZWFjaExheWVyIiwiY29udGVudCIsImZlYXR1cmUiLCJwcm9wZXJ0aWVzIiwiYmluZFBvcHVwIiwicG9wdXAiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImF1dG9QYW5QYWRkaW5nIiwiY2xhc3NOYW1lIiwic2V0Q29udGVudCIsInRpbWUiLCJub3RlIiwic2V0VGltZW91dCIsIl9nZW9CdG5DbGljayIsIl9maWxlQnRuQ2xpY2siLCJleGVjdXRlIiwiZ2VvQ29udGFpbmVyIiwiZ2VvT3AiLCJnZW9CdG4iLCJnZW9DaGVjayIsImdlb0V4ZWN1dGUiLCJnZXQiLCJjYWxsYmFjayIsImxlZnRNZW51IiwiZmlsZU9wIiwiJGJyZWFrU3BhY2UiLCJmaWxlQnRuIiwicHJlcCIsInByZXBhcmVUdXJmUGFyYW1zIiwicmVzdWx0IiwicGFyYW1zIiwiZ2VvbXMiLCJuYW1lQXJyYXkiLCJpbkFycmF5IiwidW5zaGlmdCIsIm1lcmdlIiwiY29uY2F0IiwidHVybkl0T2ZmIiwib3AiLCJidG4iLCJ0dXJuSXRPbiIsIm1heEZlYXR1cmVzIiwibWluRmVhdHVyZXMiLCJ4Iiwic2VsIiwicmVxdWlyZW1lbnRzIiwidHlwZXMiLCJnZW5lcmFsRmVhdHVyZSIsInVwbG9hZCIsIiRibGluZElucHV0IiwiY3NzIiwiY2xpY2siLCJsb2FkLXVybCIsImRlZmF1bHQiLCJ1cmwiLCJ4aHIiLCJ4aHJFdmVudCIsImxvYWRlciIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlVVJMIiwic3Vic3RyaW5nIiwibGFzdEluZGV4T2YiLCJsb2FkLWdpc3QiLCJnaXN0Iiwic3BsaXQiLCJmIiwiZmlsZW5hbWUiLCJsb2FkLW92ZXJwYXNzIiwiX3RlbXAiLCJsYXllck5hbWUiLCJiYm94IiwiZ2V0QkJveCIsIm9zbXRvZ2VvanNvbiIsImVsZW1lbnRzIiwiYnJlYWsxIiwic2F2ZS1nZW9qc29uIiwiY3JlYXRlc0xheWVyIiwic3RyaW5naWZ5IiwidGl0bGUiLCJzYXZlQXMiLCJCbG9iIiwic2F2ZS1zaGFwZWZpbGUiLCJmb2xkZXIiLCJwb2ludCIsInBvbHlnb24iLCJsaW5lIiwic2hwd3JpdGUiLCJkb3dubG9hZCIsImJyZWFrMiIsImV4dGVudCIsImJvdW5kcyIsImV4dGVuZCIsImdldEJvdW5kcyIsImZpdEJvdW5kcyIsImV4cGFuZCIsImZjIiwiY29tYmluZSIsImJyZWFrMyIsIndpbmRvdyIsImFsb25nIiwiZXhlY3V0ZUZDIiwidHVyZiIsImFwcGx5IiwiYmV6aWVyIiwiYnVmZmVyIiwiY2VudGVyIiwiY2VudHJvaWQiLCJkZXN0aW5hdGlvbiIsImVudmVsb3BlIiwiZXhwbG9kZSIsIm1pZHBvaW50Iiwic2ltcGxpZnkiLCJ0aW4iLCJ1bmlvbiIsIndpdGhpbiIsIl9sYXllclJlbW92ZWQiLCJpbmRleCIsInNwbGljZSIsInN0cmluZyIsInJlcGxhY2UiLCJyZW1vdmVXaGl0ZVNwYWNlIiwiYXJyYXkiLCJzZXBhcmF0b3IiLCJwcmVmaXgiLCJhIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwiYmluZCIsIm9uZXJyb3IiLCJlcnJvciIsInNlbmQiLCJmb3J3YXJkVG9HZW9Kc29uSW8iLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiaW5kZXhPZiIsInJlYWRBc0FycmF5QnVmZmVyIiwib25sb2FkZW5kIiwic2hwIiwidGhlbiIsInJlYWRBc1RleHQiLCJqc29uRnJvbVVybCIsInF1ZXJ5Iiwic3Vic3RyIiwiZm9yRWFjaCIsInBhcnQiLCJpdGVtIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZ2V0RmlsZUV4dGVuc2lvbiIsInN3IiwiZ2V0U291dGhXZXN0IiwibmUiLCJnZXROb3J0aEVhc3QiLCJsYXQiLCJsbmciLCJuZXdQYXJhbXMiLCJuZXdGQyIsInllcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsVUFBQSxTQUFBQyxHQWtEQSxNQWpEQUEsR0FBQUEsTUFDQUEsRUFBQUMsUUFBQSxNQUNBRCxFQUFBRSxLQUFBLFNBQUFDLEdBQ0EsSUFBQUEsRUFBQSxDQUNBLEdBQUFDLEdBQUEsR0FBQUMsT0FBQSx5Q0FDQSxNQUFBRCxHQUlBLEdBRkFKLEVBQUFNLFFBQUFILEdBRUFJLEVBQUFKLEVBQUFLLElBQUFDLE9BQUEsQ0FDQSxHQUFBTCxHQUFBLEdBQUFDLE9BQUEsMENBQ0EsTUFBQUQsR0FFQUosRUFBQVUsTUFBQUgsRUFBQUosRUFBQUssSUFHQVIsRUFBQVcsT0FBQUMsVUFHQVosRUFBQWEsSUFBQVgsT0FHQUYsRUFBQWMsVUFBQVosT0FHQUYsRUFBQWUsVUFBQWIsS0FBQSxhQUdBRixFQUFBZ0IsU0FBQVQsRUFBQSxTQUdBUCxFQUFBaUIsSUFBQWYsT0FHQUYsRUFBQWtCLEtBQUFoQixPQUdBaUIsU0FBQUMsT0FBQVgsUUFDQVQsRUFBQXFCLEtBQUFDLG1CQUdBdEIsRUFBQXFCLEtBQUFFLFdBSUF2QixFQUFBd0IsS0FBQSxXQUNBQyxRQUFBQyxJQUFBLGNBR0ExQixHQUVBRCxjQ3BEQUEsU0FBQSxTQUFBQyxHQUVBLFlBWUEsU0FBQTJCLEdBQUFDLEdBQ0FBLEVBQUFDLEdBQUEsV0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFDQUQsRUFBQUUsa0JBQ0F6QixFQUFBMEIsTUFBQUMsU0FBQSxjQUdBTixFQUFBQyxHQUFBLFlBQUEsU0FBQUMsR0FDQUEsRUFBQUMsaUJBQ0FELEVBQUFFLGtCQUNBekIsRUFBQTBCLE1BQUFFLFlBQUEsY0FH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QUEsSUFBQUosRUFBQUssSUFBQSxJQUFBSCxFQUFBRSxJQUFBLElBQUFGLEVBQUFHLEtBR0FwVixFQUFBcUIsS0FBQTZILFVBQUEsU0FBQXNJLEdBQ0EsTUFBQUEsR0FBQXZJLFNBQUEsSUFHQWpKLEVBQUFxQixLQUFBd1EsVUFBQSxTQUFBTCxFQUFBNU8sRUFBQXdLLEdBRUEsR0FBQWlJLEdBQUFqSSxFQUNBa0ksSUFDQUEsR0FBQWhSLEtBQUEsb0JBQ0FnUixFQUFBck0sV0FFQSxLQUFBLEdBQUF5RyxHQUFBLEVBQUFBLEVBQUE4QixFQUFBdkksU0FBQXhJLE9BQUFpUCxJQUFBLENBQ0EyRixFQUFBLEdBQUE3RCxFQUFBdkksU0FBQXlHLEVBQ0EsSUFBQW5FLEVBQ0EsS0FDQUEsRUFBQXVHLEtBQUFsUCxHQUFBbVAsTUFBQSxLQUFBc0QsR0FDQTlKLEVBQUFDLFdBQUFnRyxFQUFBdkksU0FBQXlHLEdBQUFsRSxlQUNBLE1BQUFwTCxHQUNBSixFQUFBNkksT0FBQSxRQUFBekksR0FFQWtWLEVBQUFyTSxTQUFBbkYsS0FBQXlILEdBR0EsTUFBQStKLElBSUF0VixFQUFBcUIsS0FBQTBOLE9BQUEsU0FBQXdHLEdBQ0EsR0FBQXhHLEdBQUF4TyxFQUFBLFNBQUEyQixTQUFBLGtCQUVBcVQsSUFDQWhWLEVBQUEsUUFBQTJCLFNBQUEsb0JBQ0EzQixFQUFBLFFBQUF5RCxPQUFBK0ssS0FFQXhPLEVBQUEsUUFBQTRCLFlBQUEsb0JBQ0E1QixFQUFBLG9CQUFBMkIsU0FBQSxtQkFBQW9HLFFBQUEsSUFBQSxXQUNBL0gsRUFBQTBCLE1BQUFnQixhQUtBakQsRUFBQXFCLEtBQUFFLFFBQUEsV0FDQSxHQUFBQSxHQUFBLDBCQUNBQSxJQUFBLDBDQUNBQSxHQUFBLDBKQUNBQSxHQUFBLDhEQUNBRSxRQUFBQyxJQUFBSCxJQUdBdkIsR0FHQUQiLCJmaWxlIjoiZHJvcGNob3AuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMudmVyc2lvbiA9ICcwLjEnO1xuICBkYy5pbml0ID0gZnVuY3Rpb24ob3B0cykge1xuICAgIGlmKCFvcHRzKSB7XG4gICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdObyBvcHRpb25zIHByb3ZpZGVkIGluIGRyb3BjaG9wLmluaXQoKScpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICBkYy5vcHRpb25zID0gb3B0cztcblxuICAgIGlmKCEkKG9wdHMuaWQpLmxlbmd0aCkge1xuICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignRWxlbWVudCB3aXRoIG9wdGlvbnMuaWQgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIGRjLiRlbGVtID0gJChvcHRzLmlkKTtcblxuICAgIC8vIHNldHVwIGxheWVyc1xuICAgIGRjLmxheWVycy5wcmVwYXJlKCk7XG5cbiAgICAvLyBzZXR1cCBtYXBcbiAgICBkYy5tYXAuaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgc2VsZWN0aW9uXG4gICAgZGMuc2VsZWN0aW9uLmluaXQoKTtcblxuICAgIC8vIHNldHVwIGxheWVybGlzdFxuICAgIGRjLmxheWVybGlzdC5pbml0KCdsYXllcmxpc3QnKTtcblxuICAgIC8vIHNldHVwIGRyb3B6b25lXG4gICAgZGMuZHJvcHpvbmUoJCgnYm9keScpKTtcblxuICAgIC8vIHNldHVwIG9wZXJhdGlvbnNcbiAgICBkYy5vcHMuaW5pdCgpO1xuXG4gICAgLy8gc2V0dXAgZm9ybXNcbiAgICBkYy5mb3JtLmluaXQoKTtcblxuICAgIC8vIGdldCBVUkwgaW5mb3JtYXRpb24gaWYgaXQgZXhpc3RzXG4gICAgaWYobG9jYXRpb24uc2VhcmNoLmxlbmd0aCkge1xuICAgICAgZGMudXRpbC5leGVjdXRlVXJsUGFyYW1zKCk7XG4gICAgfVxuXG4gICAgZGMudXRpbC53ZWxjb21lKCk7XG5cbiAgfTtcblxuICBkYy5ib29tID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3NoYWthbGFrYScpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZHJvcHpvbmUuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250YWluZXIgZWxlbWVudCAobGV0cyBkbyBkb2N1bWVudC5ib2R5KVxuICAgKi9cbiAgZGMuZHJvcHpvbmUgPSBmdW5jdGlvbigkY29udGFpbmVyKSB7XG4gICAgX2V2ZW50cygkY29udGFpbmVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBfZXZlbnRzKCRjb250YWluZXIpIHtcbiAgICAkY29udGFpbmVyLm9uKCdkcmFnb3ZlcicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdkcmFnZ2luZycpO1xuICAgIH0pO1xuXG4gICAgJGNvbnRhaW5lci5vbignZHJhZ2xlYXZlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgfSk7XG5cbiAgICAkY29udGFpbmVyLm9uKCdkcm9wJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgICB2YXIgZmlsZXMgPSBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICAgICQoZmlsZXMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy51dGlsLnJlYWRGaWxlKGZpbGVzW2ldKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMuZm9ybSA9IGRjLmZvcm0gfHwge307XG4gIGRjLmZvcm0uaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdmb3JtOmdlbycsIGRjLmZvcm0uZ2VvKTtcbiAgICAkKGRjKS5vbignZm9ybTpmaWxlJywgZGMuZm9ybS5maWxlKTtcbiAgfTtcblxuICBkYy5mb3JtLmdlbyA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24pIHtcbiAgICBkYy5mb3JtLmNyZWF0ZShvcGVyYXRpb24sIGRjLm9wcy5nZW9bb3BlcmF0aW9uXSwgJ2dlbycpO1xuICB9O1xuXG4gIGRjLmZvcm0uZmlsZSA9IGZ1bmN0aW9uKGV2ZW50LCBvcGVyYXRpb24pIHtcbiAgICBkYy5mb3JtLmNyZWF0ZShvcGVyYXRpb24sIGRjLm9wcy5maWxlW29wZXJhdGlvbl0sICdmaWxlOicgKyBvcGVyYXRpb24pO1xuICB9O1xuXG4gIGRjLmZvcm0uY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgaW5mbywgdHJpZ2dlcikge1xuICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgdmFyICRodG1sID0gJCgnPGZvcm0+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0gZHJvcGNob3AtZm9ybS0nK3RyaWdnZXIpXG4gICAgICAuYXR0cignaWQnLCAnZHJvcGNob3AtZm9ybScpXG4gICAgICAuYXR0cignZGF0YScsIG5hbWUpO1xuICAgIHZhciAkdGl0bGUgPSAkKCc8aDI+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tdGl0bGUnKS50ZXh0KG5hbWUpLmFwcGVuZFRvKCRodG1sKTtcbiAgICB2YXIgJGRlc2MgPSAkKCc8cD4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1kZXNjcmlwdGlvbicpLnRleHQoaW5mby5kZXNjcmlwdGlvbikuYXBwZW5kVG8oJGh0bWwpO1xuXG4gICAgLy8gY3JlYXRlIHBhcmFtc1xuICAgIGlmKGluZm8ucGFyYW1ldGVycykge1xuICAgICAgJChpbmZvLnBhcmFtZXRlcnMpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwID0gZGMuZm9ybS5jcmVhdGVQYXJhbSh0aGlzKTtcbiAgICAgICAgcC5hcHBlbmRUbygkaHRtbCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgc3VibWl0IGJ1dHRvblxuICAgIHZhciAkc3VibWl0ID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnZHJvcGNob3AtYnRuIGRyb3BjaG9wLWJ0bi1ncmVlbiBkcm9wY2hvcC1mb3JtLXN1Ym1pdCcpLnRleHQoJ0V4ZWN1dGUnKS5hdHRyKCdmb3InLCBuYW1lKTtcbiAgICB2YXIgJGNhbmNlbCA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWJ0biBkcm9wY2hvcC1idG4tY2FuY2VsIGRyb3BjaG9wLWZvcm0tY2FuY2VsJykudGV4dCgnQ2FuY2VsJykuYXR0cigndHlwZScsICdidXR0b24nKTtcbiAgICAkY2FuY2VsLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICAkaHRtbC5vbignc3VibWl0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyBnZXQgdGhlIHBhcmFtZXRlcnMgZnJvbSB0aGUgZm9ybVxuICAgICAgdmFyIHBhcmFtZXRlcnMgPSBbXTtcbiAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5zZXJpYWxpemVBcnJheSgpO1xuICAgICAgJChkYXRhKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgcGFyYW1ldGVycy5wdXNoKGRhdGFbaV0udmFsdWUpO1xuICAgICAgfSk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdvcGVyYXRpb246JyArIHRyaWdnZXIsIFtuYW1lLCBwYXJhbWV0ZXJzXSk7XG4gICAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgICRodG1sLmFwcGVuZCgkc3VibWl0KTtcbiAgICAkaHRtbC5hcHBlbmQoJGNhbmNlbCk7XG5cbiAgICBkYy4kZWxlbS5hcHBlbmQoJGh0bWwpO1xuICAgIC8vIHN1Ym1pdCBidXR0b24gbmVlZHMgdHJpZ2dlciBvcGVyYXRpb246Z2VvIHdpdGggb3AgYW5kIHBhcmFtZXRlciBhcnJheVxuICB9O1xuXG4gIGRjLmZvcm0ucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gICAgJCgnI2Ryb3BjaG9wLWZvcm0nKS5yZW1vdmUoKTtcbiAgfTtcblxuICBkYy5mb3JtLmNyZWF0ZVBhcmFtID0gZnVuY3Rpb24ocGFyYW0pIHtcbiAgICB2YXIgJGlucHV0ID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXInKTtcbiAgICB2YXIgJGxhYmVsID0gJCgnPGxhYmVsPicpLnRleHQocGFyYW0ubmFtZSkuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyLWxhYmVsJyk7XG4gICAgdmFyICRmaWVsZCA9IGRjLmZvcm0uaW5wdXRzW3BhcmFtLnR5cGVdKHBhcmFtKTtcbiAgICAkZmllbGQuYXBwZW5kVG8oJGxhYmVsKTtcbiAgICBpZihwYXJhbS5kZXNjcmlwdGlvbi5sZW5ndGgpIHtcbiAgICAgICQoJzxwPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlci1kZXNjcmlwdGlvbicpLmh0bWwocGFyYW0uZGVzY3JpcHRpb24pLmFwcGVuZFRvKCRsYWJlbCk7XG4gICAgfVxuICAgICRpbnB1dC5hcHBlbmQoJGxhYmVsKTtcbiAgICByZXR1cm4gJGlucHV0O1xuICB9O1xuXG4gIGRjLmZvcm0uaW5wdXRzID0ge1xuICAgIG51bWJlcjogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGlucHV0PicpLmF0dHIoJ3R5cGUnLCAnbnVtYmVyJylcbiAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpXG4gICAgICAgIC5hdHRyKCd2YWx1ZScsIHAuZGVmYXVsdCk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICBzZWxlY3Q6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxzZWxlY3Q+JykuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkKHAub3B0aW9ucykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciAkb3B0ID0gJCgnPG9wdGlvbj4nKS50ZXh0KHAub3B0aW9uc1tpXSlcbiAgICAgICAgICAuYXR0cigndmFsdWUnLCBwLm9wdGlvbnNbaV0pO1xuICAgICAgICAkb3B0LmFwcGVuZFRvKCRpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgdGV4dDogZnVuY3Rpb24ocCkge1xuICAgICAgdmFyICRpID0gJCgnPGlucHV0PicpLmF0dHIoJ3R5cGUnLCAndGV4dCcpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgY2hlY2tib3g6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JylcbiAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpXG4gICAgICAgIC5hdHRyKCd2YWx1ZScsIHAuZGVmYXVsdCk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICBzd2l0Y2g6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxkaXY+Jyk7XG4gICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdmFyICRsYmwgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgICB2YXIgJG9wdCA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ3JhZGlvJylcbiAgICAgICAgICAudmFsKCdzd2l0Y2gtJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wKVxuICAgICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkbGJsKTtcbiAgICAgICAgJGxibC5hcHBlbmQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSk7XG4gICAgICAgICRsYmwuYXBwZW5kVG8oJGkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gJGk7XG4gICAgfSxcbiAgICByZWN1cnNpdmU6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxkaXY+Jyk7XG5cbiAgICAgIHZhciAkbGJsMSA9ICQoJzxsYWJlbD4nKVxuICAgICAgICAuYWRkQ2xhc3MoJ3N1Yi1sYWJlbCcpO1xuICAgICAgdmFyICRvcHQxID0gJCgnPGlucHV0PicpXG4gICAgICAgIC5hdHRyKCd0eXBlJywgJ3JhZGlvJylcbiAgICAgICAgLnZhbCgndHJ1ZScpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICRvcHQxLmFwcGVuZFRvKCRsYmwxKTtcbiAgICAgICRsYmwxLmFwcGVuZCgnSW5kaXZpZHVhbCBmZWF0dXJlcycpO1xuXG4gICAgICB2YXIgJGxibDIgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgIHZhciAkb3B0MiA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgIC52YWwoJ2ZhbHNlJylcbiAgICAgICAgLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJG9wdDIuYXBwZW5kVG8oJGxibDIpO1xuICAgICAgJGxibDIuYXBwZW5kKCdFbnRpcmUgY29sbGVjdGlvbicpO1xuXG4gICAgICAkbGJsMS5hcHBlbmRUbygkaSk7XG4gICAgICAkbGJsMi5hcHBlbmRUbygkaSk7XG5cbiAgICAgIHJldHVybiAkaTtcbiAgICB9XG4gIH07XG5cbiAgLy8gZGMuZm9ybS5nZXRWYWx1ZXMgPSBmdW5jdGlvbigkZm9ybSkge1xuICAvLyAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgLy8gICBjb25zb2xlLmxvZygkZm9ybSk7XG4gIC8vICAgcmV0dXJuIHZhbHVlcztcbiAgLy8gfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5sYXllcmxpc3QgPSB7fTtcbiAgZGMubGF5ZXJsaXN0LmVsZW1zID0ge307XG5cbiAgZGMubGF5ZXJsaXN0LmluaXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtID0gJCgnPG9sPicpLmFkZENsYXNzKG5hbWUpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChkYy5sYXllcmxpc3QuJGVsZW0pO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5oYXNDbGFzcyhuYW1lKSkge1xuICAgICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBsaUhlbHBlciA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItaGVscCcpXG4gICAgICAuaHRtbCgnV2VsY29tZSB0byA8c3Ryb25nPmRyb3BjaG9wPC9zdHJvbmc+ISBIZXJlIHlvdSBjYW4gZHJhZyBhbmQgZHJvcCBmaWxlcyBhbmQgdGhleSB3aWxsIHNob3cgdXAgaW4gdGhlIGxheWVyIGxpc3QgYmVsb3cuPGJyPjxicj5UbyB0aGUgbGVmdCB5b3UgY2FuIHVwbG9hZCBhbmQgc2F2ZSB5b3VyIGZpbGVzIG9yIDxhIGhyZWY9XCIvP2dpc3Q9MDkxMjljMjBlYzAyMGI4M2JmODVcIj5hZGQgZXhhbXBsZSBkYXRhPC9hPiBvciB0aGUgPGEgaHJlZj1cIi8/Z2lzdD1kMDY2YjU3MmU4YThhZDJiNmQxNlwiPlVTIFN0YXRlczwvYT4uPGJyPjxicj5UbyB0aGUgcmlnaHQgeW91XFwnbGwgbm90aWNlIHNvbWUgZ2Vvc3BhdGlhbCBvcGVyYXRpb25zIHRoYXQgYmVjb21lIGF2YWlsYWJsZSBiYXNlZCBvbiBzZWxlY3Rpbmcgc3BlY2lmaWMgbGF5ZXJzLicgKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0uYXBwZW5kKGxpSGVscGVyKTtcblxuICAgIHZhciB0b2dnbGVMYXllcnMgPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLXRvZ2dsZUFsbCcpXG4gICAgICAuaHRtbCgnPGxhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPlRvZ2dsZSBhbGwgbGF5ZXJzPC9sYWJlbD4nKTtcbiAgICB0b2dnbGVMYXllcnMub24oJ2NoYW5nZScsIGRjLmxheWVybGlzdC50b2dnbGVBbGwpO1xuICAgIGRjLmxheWVybGlzdC4kZWxlbS5hcHBlbmQodG9nZ2xlTGF5ZXJzKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjphZGRlZCcsIGRjLmxheWVybGlzdC5hZGRMYXllckxpc3RJdGVtKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlZCcsIGRjLmxheWVybGlzdC5yZW1vdmVMYXllckxpc3RJdGVtKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVuYW1lZCcsIGRjLmxheWVybGlzdC5yZW5hbWUpO1xuICB9O1xuXG4gIGRjLmxheWVybGlzdC5yZW5hbWUgPSBmdW5jdGlvbihldmVudCwgc3RhbXAsIG5ld05hbWUpIHtcbiAgICAkKCdbZGF0YS1zdGFtcD0nK3N0YW1wKyddJykuZmluZCgnLmxheWVyLW5hbWUnKS50ZXh0KG5ld05hbWUpO1xuICB9O1xuXG4gIC8vIHRyaWdnZXJlZCBpbiBkcm9wY2hvcC5qc1xuICBkYy5sYXllcmxpc3QuYWRkTGF5ZXJMaXN0SXRlbSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIHZhciBsYXllcmxpc3RJdGVtID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci1lbGVtZW50JykuYXR0cignZGF0YS1zdGFtcCcsIGxheWVyLnN0YW1wKTtcbiAgICB2YXIgbGF5ZXJEaXYgPSAkKCc8ZGl2PicpXG4gICAgICAuYWRkQ2xhc3MoJ2xheWVyLW5hbWUgbGF5ZXItbmV3JylcbiAgICAgIC50ZXh0KGxheWVyLm5hbWUpXG4gICAgICAuZGVsYXkoMzAwMClcbiAgICAgIC5xdWV1ZShmdW5jdGlvbihuZXh0KSB7XG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2xheWVyLW5ldycpO1xuICAgICAgfSk7XG5cbiAgICBcbiAgICB2YXIgbGF5ZXJUeXBlID0gJCgnPHNwYW4+JykuYWRkQ2xhc3MoJ2xheWVyLXR5cGUtaW1hZ2Ugc3ByaXRlIHNwcml0ZS1sYXllci0nK2xheWVyVHlwZUljb24obGF5ZXIudHlwZSkpO1xuICAgIHZhciBjaGVja2JveCA9ICQoJzxpbnB1dD4nKS5hZGRDbGFzcygnbGF5ZXItdG9nZ2xlJykucHJvcCh7J3R5cGUnOiAnY2hlY2tib3gnLCAnY2hlY2tlZCc6IHRydWV9KTtcbiAgICB2YXIgcmVtb3ZlID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbGF5ZXItYWN0aW9uIGxheWVyLXJlbW92ZScpLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIj48L2k+Jyk7XG4gICAgdmFyIGR1cGxpY2F0ZSA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2xheWVyLWFjdGlvbiBsYXllci1kdXBsaWNhdGUnKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLWZpbGVzLW9cIj48L2k+Jyk7XG5cbiAgICBkdXBsaWNhdGUub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpkdXBsaWNhdGUnLCBbJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBcbiAgICByZW1vdmUub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW1vdmUnLCBbJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgIFxuICAgIGNoZWNrYm94Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xuICAgICAgICAvLyB0cmlnZ2VyIGxheWVyOnNob3dcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6c2hvdycsIFtsYXllcl0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6aGlkZScsIFtsYXllcl0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGF5ZXJEaXYub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgLy8gY2hlY2sgZm9yIGtleXMgYmVpbmcgaGVsZCBmb3Igc3BlY2lhbCBzZWxlY3Rpb25cbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAvLyBzZWxlY3QgYWxsIGxheWVyZXMgaW4gYmV0d2VlbiBwcmV2aW91cyB0YXJnZXQgYW5kIHRhcmdldFxuICAgICAgICAvLyBub3RlOiBkb24ndCB1bnNlbGVjdCBsYXllcnMgYWxyZWFkeSBzZWxlY3RlZCwganVzdCBhZGQgdG8gc2VsZWN0aW9uXG4gICAgICAgIHZhciB0b1NlbGVjdCA9IFtdO1xuICAgICAgICB2YXIgdG8gPSAkKHRoaXMpO1xuICAgICAgICB2YXIgZnJvbSA9IGRjLmxheWVybGlzdC5fbGFzdFNlbGVjdGVkO1xuICAgICAgICB2YXIgdG9Db3VudCwgZnJvbUNvdW50O1xuXG4gICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgdmFyIGNoZWNrID0gJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgdmFyIHRvU3RhbXAgPSB0by5wYXJlbnQoKS5hdHRyKCdkYXRhLXN0YW1wJyk7XG4gICAgICAgICAgdmFyIGZyb21TdGFtcCA9IGZyb20ucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIGlmIChjaGVjayA9PT0gdG9TdGFtcCkgdG9Db3VudCA9IGU7XG4gICAgICAgICAgaWYgKGNoZWNrID09PSBmcm9tU3RhbXApIGZyb21Db3VudCA9IGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHRvQ291bnQsIGZyb21Db3VudCk7XG4gICAgICAgIGlmICh0b0NvdW50ID4gZnJvbUNvdW50KSB7XG4gICAgICAgICAgLy8gbG9vcCB1cFxuICAgICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICBpZiAobCA+PSBmcm9tQ291bnQgJiYgbCA8PSB0b0NvdW50ICkge1xuICAgICAgICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIoJCh0aGlzKS5maW5kKCcubGF5ZXItbmFtZScpLCBkYy5sYXllcnMubGlzdFskKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoJy5sYXllci1lbGVtZW50JykuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICBpZiAobCA8IGZyb21Db3VudCAmJiBsID49IHRvQ291bnQgKSB7XG4gICAgICAgICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RMYXllcigkKHRoaXMpLmZpbmQoJy5sYXllci1uYW1lJyksIGRjLmxheWVycy5saXN0WyQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQubWV0YUtleSkge1xuICAgICAgICAvLyBhZGQvcmVtb3ZlIHNlbGVjdGVkIGxheWVyIHRvIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUoJCh0aGlzKSwgbGF5ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY2xlYXIgc2VsZWN0aW9uIGFuZCBzZWxlY3QgdGFyZ2V0XG4gICAgICAgIGRjLmxheWVybGlzdC5jbGVhclNlbGVjdGlvbigkKHRoaXMpLCBsYXllcik7XG4gICAgICAgIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUoJCh0aGlzKSwgbGF5ZXIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQobGF5ZXJEaXYpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGNoZWNrYm94KTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChsYXllclR5cGUpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKHJlbW92ZSk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQoZHVwbGljYXRlKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0uYXBwZW5kKGxheWVybGlzdEl0ZW0pO1xuXG4gICAgZGMubGF5ZXJsaXN0LmVsZW1zW2xheWVyLnN0YW1wXSA9IGxheWVybGlzdEl0ZW07XG5cbiAgICAvLyBoaWRlIGhlbHBlciB0ZXh0XG4gICAgJCgnLmxheWVyLWhlbHAnKS5oaWRlKCk7XG4gICAgJCgnLmxheWVyLXRvZ2dsZUFsbCcpLnNob3coKTtcbiAgfTtcblxuICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIgPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgaWYgKCEkaXRlbS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpzZWxlY3RlZCcsIFtseXJdKTtcbiAgICB9XG4gIH07XG4gIGRjLmxheWVybGlzdC5zZWxlY3RUb2dnbGUgPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgaWYgKCRpdGVtLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAkaXRlbS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnVuc2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRpdGVtLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6c2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfVxuICAgIGRjLmxheWVybGlzdC5fbGFzdFNlbGVjdGVkID0gJGl0ZW07XG4gIH07XG4gIGRjLmxheWVybGlzdC5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uKCRpdGVtLCBseXIpIHtcbiAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBsYXllclR5cGVJY29uKHR5cGUpIHtcbiAgICB2YXIgaWNvbjtcbiAgICBzd2l0Y2godHlwZSkge1xuICAgICAgY2FzZSAnRmVhdHVyZUNvbGxlY3Rpb24nOlxuICAgICAgICBpY29uID0gJ2ZlYXR1cmVjb2xsZWN0aW9uJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPFBvaW50Pic6IFxuICAgICAgY2FzZSAnRmVhdHVyZTxNdWx0aVBvaW50Pic6IFxuICAgICAgICBpY29uID0gJ3BvaW50JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPExpbmVTdHJpbmc+JzogXG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpTGluZVN0cmluZz4nOiBcbiAgICAgICAgaWNvbiA9ICdsaW5lJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPFBvbHlnb24+JzogXG4gICAgICBjYXNlICdGZWF0dXJlPE11bHRpUG9seWdvbj4nOiBcbiAgICAgICAgaWNvbiA9ICdwb2x5Z29uJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj4nOiBcbiAgICAgICAgaWNvbiA9ICdnZW9tJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpY29uID0gJ2RlZmF1bHQnO1xuICAgICAgICBicmVhazsgXG4gICAgfVxuICAgIHJldHVybiBpY29uO1xuICB9XG5cbiAgZGMubGF5ZXJsaXN0LnRvZ2dsZUFsbCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gdHVybiB0aGVtIG9uXG4gICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQnKS5wcm9wKCdjaGVja2VkJykpIHtcbiAgICAgIGZvciAodmFyIGkgaW4gZGMubGF5ZXJzLmxpc3QpIHtcbiAgICAgICAgZWxlbVRvZ2dsZShkYy5sYXllcnMubGlzdFtpXS5zdGFtcCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgLy8gdHVybiB0aGVtIG9mZlxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBvIGluIGRjLmxheWVycy5saXN0KSB7XG4gICAgICAgIGVsZW1Ub2dnbGUoZGMubGF5ZXJzLmxpc3Rbb10uc3RhbXAsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbGVtVG9nZ2xlKHN0YW1wLCBib29sKSB7XG4gICAgICAkKCcubGF5ZXItZWxlbWVudFtkYXRhLXN0YW1wPScrc3RhbXArJ10nKVxuICAgICAgICAuZmluZCgnLmxheWVyLXRvZ2dsZScpXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgYm9vbClcbiAgICAgICAgLnRyaWdnZXIoJ2NoYW5nZScpOyAvLyBzZXRzIG9mZiBhIGNoYWluIHJlYWN0aW9uXG4gICAgfVxuICB9O1xuXG4gIGRjLmxheWVybGlzdC5yZW1vdmVMYXllckxpc3RJdGVtID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgJCgnW2RhdGEtc3RhbXA9JytzdGFtcCsnXScpLmZhZGVPdXQoMzAwLCBmdW5jdGlvbigpIHtcbiAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICBkZWxldGUgZGMubGF5ZXJsaXN0LmVsZW1zW3N0YW1wXTtcblxuICAgICAgLy8gc2hvdyBoZWxwZXIgdGV4dCBpZiBubyBsYXllcnMgZXhpc3RcbiAgICAgIC8vIHRoaXMgaGFzIHRvIGNoZWNrIGluc2lkZSBzaW5jZSB0aGVyZSBpcyBhIDMwMCBtcyBkZWxheSB3aXRoIHRoZSBmYWRlXG4gICAgICBpZiAoJCgnLmxheWVyLWVsZW1lbnQnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgJCgnLmxheWVyLWhlbHAnKS5zaG93KCk7XG4gICAgICAgICQoJy5sYXllci10b2dnbGVBbGwnKS5oaWRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubGF5ZXJzID0ge307XG4gIGRjLmxheWVycy5saXN0ID0ge307XG5cbiAgZGMubGF5ZXJzLnByZXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignZmlsZTphZGRlZCcsIGRjLmxheWVycy5hZGQpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmUnLCBkYy5sYXllcnMucmVtb3ZlKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6ZHVwbGljYXRlJywgZGMubGF5ZXJzLmR1cGxpY2F0ZSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbmFtZScsIGRjLmxheWVycy5yZW5hbWUpO1xuICB9O1xuXG4vKipcbiAqIEFkZCBhIGxheWVyIHRvIHRoZSBsYXllcnMgbGlzdCBhbmQgdHJpZ2dlciBsYXllcjphZGRlZCBmb3Igc3Vic2NyaWJlcnMgdG8gcGljayB1cC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxuICogQHBhcmFtIHtvYmplY3R9IGZpbGUgb2JqZWN0XG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZSBibG9iIHRvIGJlIGNvbnZlcnRlZCB3aXRoIEpTT04ucGFyc2UoKVxuICovXG4gIGRjLmxheWVycy5hZGQgPSBmdW5jdGlvbihldmVudCwgbmFtZSwgYmxvYikge1xuICAgIHZhciBsID0gZGMubGF5ZXJzLm1ha2VMYXllcihuYW1lLCBibG9iKTtcbiAgICBkYy5sYXllcnMubGlzdFtsLnN0YW1wXSA9IGw7XG5cbiAgICBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnPHN0cm9uZz4nK2wubmFtZSsnPC9zdHJvbmc+IGhhcyBiZWVuIGFkZGVkIScsIDM1MDApO1xuXG4gICAgLy8gdHJpZ2dlciBsYXllcjphZGRlZFxuICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmFkZGVkJywgW2xdKTtcbiAgfTtcblxuLyoqXG4gKiBSZW1vdmUgYSBsYXllciwgd2hpY2ggdHJpZ2dlcnMgbGF5ZXI6cmVtb3ZlZCBmb3IgdGhlIHJlc3Qgb2YgdGhlIGFwcFxuICogQHBhcmFtIHtzdHJpbmd9IGxheWVyIHN0YW1wXG4gKi9cbiAgZGMubGF5ZXJzLnJlbW92ZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIC8vIHRyaWdnZXIgbGF5ZXI6cmVtb3ZlZFxuICAgIHRyeSB7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW1vdmVkJywgW3N0YW1wXSk7XG4gICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnPHN0cm9uZz4nICsgZGMubGF5ZXJzLmxpc3Rbc3RhbXBdLm5hbWUgKyAnPC9zdHJvbmc+IGhhcyBiZWVuIHJlbW92ZWQuJyk7XG4gICAgICBkZWxldGUgZGMubGF5ZXJzLmxpc3Rbc3RhbXBdO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGVyZSB3YXMgYSBwcm9ibGVtIHJlbW92aW5nIHRoZSBsYXllci4nKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgXG4gIH07XG5cbiAgZGMubGF5ZXJzLmR1cGxpY2F0ZSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIHZhciBseXIgPSBkYy5sYXllcnMubGlzdFtzdGFtcF07XG4gICAgLy8gbmVlZCB0byBjcmVhdGUgbmV3IGxheWVyIHNvIHdlIGNhbiBnZXQgYSB1bmlxZSBMLnN0YW1wKClcbiAgICBkYy5sYXllcnMuYWRkKHt9LCAnY29weV8nK2x5ci5uYW1lLCBseXIucmF3KTtcbiAgfTtcblxuICBkYy5sYXllcnMucmVuYW1lID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyLCBuZXdOYW1lKSB7XG4gICAgLy8gcmVuYW1lIGluIGxheWVyIG9iamVjdFxuICAgIGRjLmxheWVycy5saXN0W2xheWVyLnN0YW1wXS5uYW1lID0gbmV3TmFtZTtcblxuICAgIC8vIHJlbmFtZSBpbiBsYXllcmxpc3RcbiAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW5hbWVkJywgW2xheWVyLnN0YW1wLCBuZXdOYW1lXSk7XG4gIH07XG5cbiAgZGMubGF5ZXJzLm1ha2VMYXllciA9IGZ1bmN0aW9uKG5hbWUsIGpzb24pIHtcbiAgICB2YXIgZ2VvanNvbiA9IGpzb247XG4gICAgaWYgKGpzb24udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJyAmJiBqc29uLmZlYXR1cmVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgZ2VvanNvbiA9IGRjLnV0aWwudW5jb2xsZWN0KGpzb24pO1xuICAgIH1cblxuICAgIHZhciBmbCA9IEwubWFwYm94LmZlYXR1cmVMYXllcihnZW9qc29uKTtcbiAgICB2YXIgbGF5ZXIgPSB7XG4gICAgICBuYW1lOiBkYy51dGlsLnJlbW92ZUZpbGVFeHRlbnNpb24obmFtZSksXG4gICAgICBzdGFtcDogTC5zdGFtcChmbCksXG4gICAgICByYXc6IGdlb2pzb24sXG4gICAgICB0eXBlOiBnZXRUeXBlKGdlb2pzb24pLFxuICAgICAgZmVhdHVyZWxheWVyOiBmbCxcbiAgICAgIGRhdGVBZGRlZDogbmV3IERhdGUoKVxuICAgIH07XG4gICAgcmV0dXJuIGxheWVyO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFR5cGUoZ2opIHtcbiAgICBpZiAoZ2oudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgcmV0dXJuICdGZWF0dXJlQ29sbGVjdGlvbic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnai50eXBlICsgJzwnICsgZ2ouZ2VvbWV0cnkudHlwZSArICc+JztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5tYXAgPSB7fTtcblxuICBkYy5tYXAuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGRjLm1hcC4kZWxlbSA9ICQoJzxkaXY+JykucHJvcCgnaWQnLCAnZHJvcGNob3AtbWFwJykuYWRkQ2xhc3MoJ21hcCcpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChkYy5tYXAuJGVsZW0pO1xuXG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBkYy5tYXAucmVtb3ZlTGF5ZXIpO1xuXG4gICAgX21ha2VNYXAoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBfbWFrZU1hcCgpIHtcbiAgICBkYy5tYXAudG9rZW4gPSBMLm1hcGJveC5hY2Nlc3NUb2tlbiA9ICdway5leUoxSWpvaWMzWnRZWFIwYUdWM2N5SXNJbUVpT2lKVk1VbFVSMHhySW4wLk53ZVNfQXR0anN3dE41d1J1V0NTTkEnO1xuICAgIGRjLm1hcC5tID0gTC5tYXBib3gubWFwKCdkcm9wY2hvcC1tYXAnLCBudWxsLCB7XG4gICAgICB6b29tQ29udHJvbDogZmFsc2UsXG4gICAgICB3b3JsZENvcHlKdW1wOiB0cnVlXG4gICAgfSkuc2V0VmlldyhbMCwwXSwgMyk7XG5cbiAgICAvLyBzZXRzIHRoZSBsb2NhdGlvbiBvZiB0aGUgem9vbSBidXR0b25zIHRvIHRoZSB0b3AgcmlnaHRcbiAgICBMLmNvbnRyb2wuem9vbSh7XG4gICAgICBwb3NpdGlvbjogJ3RvcGxlZnQnXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgTC5tYXBib3guZ2VvY29kZXJDb250cm9sKCdtYXBib3gucGxhY2VzJywge1xuICAgICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIHZhciBiYXNlTGF5ZXJzID0ge1xuICAgICAgXCJNYXBib3ggU3RyZWV0c1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5zdHJlZXRzJyksXG4gICAgICBcIk1hcGJveCBPdXRkb29yc1wiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5vdXRkb29ycycpLFxuICAgICAgXCJNYXBib3ggTGlnaHRcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3gubGlnaHQnKSxcbiAgICAgIFwiTWFwYm94IERhcmtcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guZGFyaycpLFxuICAgICAgXCJNYXBib3ggU2F0ZWxsaXRlXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LnNhdGVsbGl0ZScpXG4gICAgfTtcblxuICAgIGJhc2VMYXllcnNbJ01hcGJveCBTdHJlZXRzJ10uYWRkVG8oZGMubWFwLm0pO1xuICAgIC8vIHNldHMgbG9jYXRpb24gb2YgYmFzZSBsYXllciBjb250cm9sIHRvIHRoZSBib3R0b20gcmlnaHRcbiAgICBMLmNvbnRyb2wubGF5ZXJzKGJhc2VMYXllcnMsIHt9LCB7XG4gICAgICBwb3NpdGlvbjogJ2JvdHRvbXJpZ2h0JyxcbiAgICAgIGNvbGxhcHNlZDogZmFsc2VcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICBkYy5tYXAubGF5ZXJncm91cCA9IEwubWFwYm94LmZlYXR1cmVMYXllcigpO1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjphZGRlZCcsIGRjLm1hcC5hZGRMYXllcik7XG4gICAgJChkYykub24oJ2xheWVyOmhpZGUnLCBkYy5tYXAuaGlkZUxheWVyKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6c2hvdycsIGRjLm1hcC5zaG93TGF5ZXIpO1xuICB9XG5cbiAgZGMubWFwLmNvdW50ID0gMDtcblxuICBkYy5tYXAuYWRkTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgZmwgPSBsYXllci5mZWF0dXJlbGF5ZXI7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkTGF5ZXIoZmwpO1xuXG4gICAgLy8gY3JlYXRlIHBvcHVwIHRhYmxlIGZvciBlYWNoIGZlYXR1cmVcbiAgICBmbC5lYWNoTGF5ZXIoZnVuY3Rpb24obGF5ZXIpIHsgICAgICBcbiAgICAgIHZhciBjb250ZW50ID0gJzx0YWJsZSBjbGFzcz1cImRyb3BjaG9wLXRhYmxlXCI+PHRyPjx0aD5Qcm9wZXJ0eTwvdGg+PHRoPkRhdGE8L3RoPjwvdHI+JztcblxuICAgICAgaWYgKGxheWVyLmZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGxheWVyLmZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICAgIGNvbnRlbnQgKz0gJzx0cj48dGQ+PHN0cm9uZz4nICsgcHJvcCArICc8L3N0cm9uZz48L3RkPjx0ZD4nICsgbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzW3Byb3BdICsgJzwvdGQ+PC90cj4nO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50ICs9ICc8cD5UaGVyZSBhcmUgbm8gcHJvcGVydGllcyBzZXQgZm9yIHRoaXMgZmVhdHVyZS48L3A+JztcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgKz0gJzwvdGFibGU+JztcblxuICAgICAgbGF5ZXIuYmluZFBvcHVwKEwucG9wdXAoe1xuICAgICAgICBtYXhXaWR0aDogNDUwLFxuICAgICAgICBtYXhIZWlnaHQ6IDIwMCxcbiAgICAgICAgYXV0b1BhblBhZGRpbmc6IFs0NSwgNDVdLFxuICAgICAgICBjbGFzc05hbWU6ICdkcm9wY2hvcC1wb3B1cCdcbiAgICAgIH0sIGxheWVyKS5zZXRDb250ZW50KGNvbnRlbnQpKTtcbiAgICB9KTtcblxuICB9O1xuXG4gIGRjLm1hcC5oaWRlTGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5yZW1vdmVMYXllcihsYXllci5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIGRjLm1hcC5zaG93TGF5ZXIgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRMYXllcihsYXllci5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuICBcbiAgZGMubWFwLnJlbW92ZUxheWVyID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAucmVtb3ZlTGF5ZXIoZGMubGF5ZXJzLmxpc3Rbc3RhbXBdLmZlYXR1cmVsYXllcik7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubm90aWZ5ID0gZnVuY3Rpb24odHlwZSwgdGV4dCwgdGltZSkge1xuICAgIHZhciBub3RlID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbm90aWZpY2F0aW9uJylcbiAgICAgIC5hZGRDbGFzcyh0eXBlKVxuICAgICAgLmh0bWwodGV4dCk7XG5cbiAgICAkKGRjLiRlbGVtKS5hcHBlbmQobm90ZSk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgbm90ZS5yZW1vdmUoKTtcbiAgICB9LCB0aW1lIHx8IDMwMDApO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIGJ1aWxkIG9wcy5nZW8gY29udGFpbmVyXG4gICAgdmFyIGdlb0NvbnRhaW5lciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ29wZXJhdGlvbnMtZ2VvJyk7XG4gICAgZGMuJGVsZW0uYXBwZW5kKGdlb0NvbnRhaW5lcik7XG5cbiAgICAvLyBjcmVhdGUgZ2VvIGJ1dHRvbnMgJiBmb3Jtc1xuICAgIGZvciAodmFyIGdlb09wIGluIGRjLm9wcy5nZW8pIHtcbiAgICAgIHZhciBnZW9CdG4gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdvcGVyYXRpb24gb3BlcmF0aW9uLWdlbyBvcGVyYXRpb24taW5hY3RpdmUnKVxuICAgICAgICAuaHRtbCgnPGg0PicgKyBnZW9PcCArICc8L2g0PjxwPicgKyBkYy5vcHMuZ2VvW2dlb09wXS5kZXNjcmlwdGlvbiArICc8L3A+JylcbiAgICAgICAgLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJywgZ2VvT3ApO1xuICAgICAgZ2VvQnRuLm9uKCdjbGljaycsIF9nZW9CdG5DbGljayk7XG5cbiAgICAgIGdlb0NvbnRhaW5lci5hcHBlbmQoZ2VvQnRuKTtcbiAgICB9XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6c2VsZWN0ZWQnLCBkYy5vcHMuZ2VvQ2hlY2spO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMub3BzLmdlb0NoZWNrKTtcbiAgICAvLyAkKCcub3BlcmF0aW9uLWdlbycpLnJlbW92ZUNsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAvLyAkKCcub3BlcmF0aW9uLWdlbycpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246Z2VvJywgZGMub3BzLmdlb0V4ZWN1dGUpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLWdpc3QnLCBkYy5vcHMuZmlsZVsnbG9hZC1naXN0J10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC11cmwnLCBkYy5vcHMuZmlsZVsnbG9hZC11cmwnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpsb2FkLW92ZXJwYXNzJywgZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5nZXQpO1xuICAgICQoZGMpLm9uKCdvcGVyYXRpb246ZmlsZTpyZW5hbWUnLCBkYy5vcHMuZmlsZS5yZW5hbWUuY2FsbGJhY2spO1xuXG4gICAgLy8gc2V0dXAgb3BzIGZpbGVcbiAgICB2YXIgbGVmdE1lbnUgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdkcm9wY2hvcC1tZW51LWxlZnQnKTtcbiAgICBmb3IgKHZhciBmaWxlT3AgaW4gZGMub3BzLmZpbGUpIHtcbiAgICAgIGlmKGRjLm9wcy5maWxlW2ZpbGVPcF0udHlwZSA9PT0gJ2JyZWFrJykge1xuICAgICAgICB2YXIgJGJyZWFrU3BhY2UgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdtZW51LWFjdGlvbi1icmVhaycpO1xuICAgICAgICBsZWZ0TWVudS5hcHBlbmQoJGJyZWFrU3BhY2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGZpbGVCdG4gPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdtZW51LWFjdGlvbicpXG4gICAgICAgICAgLmh0bWwoZGMub3BzLmZpbGVbZmlsZU9wXS5pY29uIHx8ICdBJylcbiAgICAgICAgICAuYXR0cignZGF0YS1vcGVyYXRpb24nLCBmaWxlT3ApXG4gICAgICAgICAgLmF0dHIoJ2RhdGEtdG9vbHRpcCcsIGRjLm9wcy5maWxlW2ZpbGVPcF0uZGVzY3JpcHRpb24pO1xuICAgICAgICAgIGlmIChkYy5vcHMuZmlsZVtmaWxlT3BdLnR5cGUgPT09ICdpbmZvJykgZmlsZUJ0bi5hZGRDbGFzcygnZHJvcGNob3AtaW5mbycpO1xuICAgICAgICBmaWxlQnRuLm9uKCdjbGljaycsIF9maWxlQnRuQ2xpY2spO1xuICAgICAgICBsZWZ0TWVudS5hcHBlbmQoZmlsZUJ0bik7XG4gICAgICB9XG4gICAgfVxuICAgIGRjLiRlbGVtLmFwcGVuZChsZWZ0TWVudSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gX2dlb0J0bkNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgb3BlcmF0aW9uID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9wZXJhdGlvbicpO1xuICAgIC8vIGlmIG9wZXJhdGlvbiByZXF1aXJlcyBubyBwYXJhbWV0ZXJzLCBkb24ndCByZW5kZXIgYSBmb3JtXG4gICAgaWYgKCFkYy5vcHMuZ2VvW29wZXJhdGlvbl0ucGFyYW1ldGVycykge1xuICAgICAgJChkYykudHJpZ2dlcignb3BlcmF0aW9uOmdlbycsIFtvcGVyYXRpb24sIGRjLnNlbGVjdGlvbi5saXN0XSk7XG4gICAgLy8gb3RoZXJ3aXNlIHJlbmRlciB0aGUgZm9ybVxuICAgIH0gZWxzZSB7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmdlbycsIFtvcGVyYXRpb25dKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfZmlsZUJ0bkNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBvcGVyYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJyk7XG4gICAgdHJ5IHtcbiAgICAgIGRjLm9wcy5maWxlW29wZXJhdGlvbl0uZXhlY3V0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdUaGlzIG9wZXJhdGlvbiBkb2VzblxcJ3QgZXhpc3QhJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSB0dXJmIGZ1bmN0aW9uIGJhc2VkIG9uIGJ1dHRvbiBvcGVyYXRpb24gY2xpY2suXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcmlnaW5hbCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRpb24gdG8gYmUgZXhlY3V0ZWQgdmlhIHR1cmZcbiAgICogQHBhcmFtIHthcnJheX0gc2VyaWVzIG9mIHBhcmFtZXRlcnMgdG8gYmUgYXBwbGllZCB0byB0dXJmIG9wZXJhdGlvblxuICAgKi9cbiAgZGMub3BzLmdlb0V4ZWN1dGUgPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uLCBwYXJhbWV0ZXJzKSB7XG4gICAgdmFyIHByZXAgPSBkYy5vcHMucHJlcGFyZVR1cmZQYXJhbXMob3BlcmF0aW9uLCBwYXJhbWV0ZXJzKTtcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZGMub3BzLmdlb1tvcGVyYXRpb25dLmV4ZWN1dGUocHJlcC5vcHRpb25zKTtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgZGMubm90aWZ5KCdUaGF0IG9wZXJhdGlvbiBpc25cXCd0IHBvc3NpYmxlLiBUcnkgY2hhbmdpbmcgdGhlIG9yZGVyIG9mIHlvdXIgc2VsZWN0aW9uLicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbcHJlcC5uYW1lLCByZXN1bHRdKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJlcGFyZSBwYXJhbWV0ZXJzIGZvciBleGVjdXRpbmcgd2l0aGluIGEgdHVyZiBmdW5jdGlvbiB1c2luZyAuYXBwbHkoKSAtIHJldHVybnMgYW4gYXJyYXlcbiAgICogQHBhcmFtIHthcnJheX0gb3B0aW9ucyBmcm9tIHRoZSB1c2VyIHBhc3NlZCBmcm9tIHRoZSBvcmlnaW5hbCBldmVudCB0cmlnZ2VyXG4gICAqL1xuICBkYy5vcHMucHJlcGFyZVR1cmZQYXJhbXMgPSBmdW5jdGlvbihvcGVyYXRpb24sIHBhcmFtcykge1xuICAgIHZhciBkYXRhID0ge307XG4gICAgZGF0YS5vcHRpb25zID0gW107XG5cbiAgICB2YXIgZ2VvbXMgPSBbXTtcbiAgICB2YXIgbmFtZUFycmF5ID0gW107XG4gICAgLy8gZ2V0IGdlb21ldHJ5IGFycmF5IGZyb20gc2VsZWN0aW9uXG4gICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBpZiAoJC5pbkFycmF5KCdzd2l0Y2gtJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wLCBwYXJhbXMpID09PSAtMSkge1xuICAgICAgICBnZW9tcy5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZW9tcy51bnNoaWZ0KGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdyk7XG4gICAgICB9XG4gICAgICBuYW1lQXJyYXkucHVzaChkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lKTtcbiAgICB9KTtcblxuICAgIC8vIG1lcmdlIHBhcmFtcyB3aXRoIG9wdGlvbnMgYXJyYXlcbiAgICBkYXRhLm9wdGlvbnMgPSAkLm1lcmdlKGdlb21zLCBwYXJhbXMpO1xuXG4gICAgLy8gY3JlYXRlIG5hbWUgYXJyYXlcbiAgICBkYXRhLm5hbWUgPSBkYy51dGlsLmNvbmNhdChuYW1lQXJyYXksICdfJywgb3BlcmF0aW9uKTtcbiAgICBcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICBkYy5vcHMuZ2VvQ2hlY2sgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcblxuICAgIC8vIGNoZWNrIHNlbGVjdGlvbiBjb3VudCB2cyBvcGVyYXRpb24gbWluL21heFxuICAgIGZvciAodmFyIG8gaW4gZGMub3BzLmdlbykge1xuICAgICAgdmFyIG9wID0gZGMub3BzLmdlb1tvXTtcbiAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPiBvcC5tYXhGZWF0dXJlcyB8fCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPCBvcC5taW5GZWF0dXJlcykge1xuICAgICAgICB0dXJuSXRPZmYobyk7XG4gICAgICAgIC8vIGRvbid0IGdvIGFueSBmdXJ0aGVyXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIC8vIGNoZWNrIG9wZXJhdGlvbiBhZ2FpbnN0IGVhY2ggc2VsZWN0aW9uIGRhdGEgdHlwZVxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aDsgeCsrKSB7XG4gICAgICAgICAgdmFyIHNlbCA9IGRjLnNlbGVjdGlvbi5saXN0W3hdO1xuXG4gICAgICAgICAgLy8gaWYgdGhlIHNlbGVjdGlvbiB0eXBlIGlzIGluIHRoZSBhcnJheSwgbWFyayBpdCBhcyBhY3RpdmUhXG4gICAgICAgICAgaWYgKCQuaW5BcnJheShzZWwudHlwZSwgb3AucmVxdWlyZW1lbnRzLnR5cGVzKSA+IC0xIHx8IG9wLnJlcXVpcmVtZW50cy5nZW5lcmFsRmVhdHVyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdHVybkl0T24obyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHR1cm5JdE9mZihvKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHR1cm5JdE9mZihvcCkge1xuICAgICAgdmFyIGJ0biA9ICQoJ1tkYXRhLW9wZXJhdGlvbj0nKyBvcCArJ10nKTtcbiAgICAgIGJ0bi5hZGRDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICBidG4ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0dXJuSXRPbihvcCkge1xuICAgICAgdmFyIGJ0biA9ICQoJ1tkYXRhLW9wZXJhdGlvbj0nKyBvcCArJ10nKTtcbiAgICAgIGJ0bi5yZW1vdmVDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgICBidG4ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfVxuICAgIFxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuZmlsZSA9IHtcbiAgICB1cGxvYWQ6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnVXBsb2FkIGZyb20geW91ciBjb21wdXRlciAoLmdlb2pzb24pJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXVwbG9hZFwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGluc3BpcmVkIGZyb20gZ2VvanNvbi5pb1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L2dlb2pzb24uaW8vYmxvYi9naC1wYWdlcy9zcmMvdWkvZmlsZV9iYXIuanMjTDM5MFxuICAgICAgICB2YXIgJGJsaW5kSW5wdXQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAuYXR0cigndHlwZScsICdmaWxlJylcbiAgICAgICAgICAuYXR0cignbXVsdGlwbGUnLCAndHJ1ZScpXG4gICAgICAgICAgLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKVxuICAgICAgICAgIC5jc3MoJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJylcbiAgICAgICAgICAuY3NzKCdoZWlnaHQnLCAnMCcpXG4gICAgICAgICAgLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBmaWxlcyA9IHRoaXMuZmlsZXM7XG4gICAgICAgICAgICAkKGZpbGVzKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgICAgLy8gdmFyIGV4dCA9IGRjLnV0aWwuZ2V0RmlsZUV4dGVuc2lvbihmaWxlc1tpXS5uYW1lKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIC8vIGlmIGl0IGlzIGEgc2hhcGVmaWxlIG9yIHppcCBmaWxlXG4gICAgICAgICAgICAgIC8vIGlmIChleHQgPT09ICdzaHAnIHx8IGV4dCA9PT0gJ3ppcCcpIHtcbiAgICAgICAgICAgICAgLy8gICAvLyB1cGxvYWQgYSBzaGFwZWZpbGUgYW5kIGFkZCB0aGUgbGF5ZXJcbiAgICAgICAgICAgICAgLy8gICBkYy51dGlsLnJlYWRTaHBGaWxlXG4gICAgICAgICAgICAgIC8vICAgc2hwKFwiZmlsZXMvcGFuZHJcIikudGhlbihmdW5jdGlvbihnZW9qc29uKXtcbiAgICAgICAgICAgICAgLy8gICAgIC8vZG8gc29tZXRoaW5nIHdpdGggeW91ciBnZW9qc29uIFxuICAgICAgICAgICAgICAvLyAgIH0pO1xuICAgICAgICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRjLnV0aWwucmVhZEZpbGUoZmlsZXNbaV0pO1xuICAgICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJGJsaW5kSW5wdXQucmVtb3ZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGJsaW5kSW5wdXQpO1xuICAgICAgICAkYmxpbmRJbnB1dC5jbGljaygpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAnbG9hZC11cmwnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0ltcG9ydCBmaWxlIGZyb20gYSBVUkwnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtbGlua1wiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VybCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidVUkwnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnaHR0cDovLycsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC11cmwnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICB2YXIgdXJsID0gcGFyYW1ldGVyc1swXTtcbiAgICAgICAgZGMudXRpbC54aHIodXJsLCBkYy5vcHMuZmlsZVtuYW1lXS5jYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIC8vIGdldCBmaWxlbmFtZSBiYXNlZCBvbiB0aGUgZW5kIG9mIHRoZSB1cmwgLSBub3Qgc3VyZSBpZiB0aGlzIGlzIHN1c3RhaW5hYmxlXG4gICAgICAgICAgdmFyIG5hbWUgPSB4aHIucmVzcG9uc2VVUkwuc3Vic3RyaW5nKHhoci5yZXNwb25zZVVSTC5sYXN0SW5kZXhPZignLycpKzEpO1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbbmFtZSwgZGF0YV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHJldHJpZXZlIEdpc3QuIFBsZWFzZSBjaGVjayB5b3VyIFVSTCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLWdpc3QnOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ0ltcG9ydCBmaWxlcyBmcm9tIEdpc3QnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZ2l0aHViXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZ2lzdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidHaXN0IElEIG9yIFVSTCcsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdodHRwczovL2dpc3QuZ2l0aHViLmNvbS8nXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1naXN0J10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIGdpc3QgPSBwYXJhbWV0ZXJzWzBdLnNwbGl0KCcvJylbcGFyYW1ldGVyc1swXS5zcGxpdCgnLycpLmxlbmd0aC0xXTtcbiAgICAgICAgdmFyIHVybCA9ICdodHRwczovL2FwaS5naXRodWIuY29tL2dpc3RzLycgKyBnaXN0O1xuICAgICAgICBkYy51dGlsLnhocih1cmwsIGRjLm9wcy5maWxlW25hbWVdLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgZm9yICh2YXIgZiBpbiBkYXRhLmZpbGVzKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGRhdGEuZmlsZXNbZl0uZmlsZW5hbWU7XG4gICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW25hbWUsIEpTT04ucGFyc2UoZGF0YS5maWxlc1tmXS5jb250ZW50KV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBkYy5ub3RpZnkoJ3N1Y2Nlc3MnLCAnU3VjY2VzZnVsbHkgcmV0cmlldmVkIGdpc3QnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHJldHJpZXZlIEdpc3QuIFBsZWFzZSBjaGVjayB5b3VyIFVSTCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdsb2FkLW92ZXJwYXNzJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSB0aGUgT3ZlcnBhc3MgQVBJJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXRlcm1pbmFsXCI+PC9pPicsXG4gICAgICBfdGVtcDoge30sXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncXVlcnknLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonTGVhcm4gbW9yZSBhYm91dCA8YSBocmVmPVwiaHR0cDovL3dpa2kub3BlbnN0cmVldG1hcC5vcmcvd2lraS9PdmVycGFzc19BUEkvTGFuZ3VhZ2VfR3VpZGVcIiB0YXJnZXQ9XCJfYmxhbmtcIj50aGUgcXVlcnkgbGFuZ3VhZ2U8L2E+LicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdhbWVuaXR5PWJhcidcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdsYXllciBuYW1lJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J05hbWUgb2YgdGhlIGxheWVyIGFkZGVkIGlmIHJlc3VsdHMgYXJlIGZvdW5kLicsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlZmF1bHQ6ICdvdmVycGFzc19sYXllcl9uYW1lJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2Zvcm06ZmlsZScsIFsnbG9hZC1vdmVycGFzcyddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIC8vIHNldCBsYXllciBuYW1lIHRvIF90ZW1wIGZvciBsYXRlciB1c2FnZVxuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLl90ZW1wLmxheWVyTmFtZSA9IHBhcmFtZXRlcnNbMV07IC8vIHRoaXMgaXMgdWdseVxuXG4gICAgICAgIC8vIGJ1aWxkIHRoZSBxdWVyeSB3aXRoIGJvdW5kaW5nIGJveFxuICAgICAgICB2YXIgYmJveCA9IGRjLnV0aWwuZ2V0QkJveCgpO1xuICAgICAgICBkYy51dGlsLnhocignaHR0cDovL292ZXJwYXNzLWFwaS5kZS9hcGkvaW50ZXJwcmV0ZXI/W291dDpqc29uXTtub2RlWycrcGFyYW1ldGVyc1swXSsnXSgnK2Jib3grJyk7b3V0OycsIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB2YXIgZ2VvanNvbiA9IG9zbXRvZ2VvanNvbihkYXRhKTtcbiAgICAgICAgICBpZiAoIWRhdGEuZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnTm8gZWxlbWVudHMgZm91bmQgaW4geW91ciBxdWVyeS4nKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLl90ZW1wLmxheWVyTmFtZSwgZ2VvanNvbl0pO1xuICAgICAgICAgICAgZGMubm90aWZ5KCdzdWNjZXNzJywgJ0ZvdW5kIDxzdHJvbmc+JyArIGRhdGEuZWxlbWVudHMubGVuZ3RoICsgJyBlbGVtZW50czwvc3Ryb25nPiBmcm9tIHRoZSBPdmVycGFzcyBBUEknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsIHhoci5zdGF0dXMgKyAnOiBjb3VsZCBub3QgcXVlcnkgdGhlIE92ZXJwYXNzIEFQSScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgICdicmVhazEnOiB7IHR5cGU6ICdicmVhaycgfSxcblxuICAgICdzYXZlLWdlb2pzb24nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBHZW9KU09OJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGUtY29kZS1vXCI+PC9pPicsXG4gICAgICBjcmVhdGVzTGF5ZXI6IGZhbHNlLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIChmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRjLnNlbGVjdGlvbi5saXN0W2ZpbGVdLnJhdyk7XG4gICAgICAgICAgICB2YXIgdGl0bGUgPSAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ZpbGVdLm5hbWUgKyAnLmdlb2pzb24nO1xuICAgICAgICAgICAgc2F2ZUFzKG5ldyBCbG9iKFtjb250ZW50XSwge1xuICAgICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04J1xuICAgICAgICAgICAgfSksIHRpdGxlKTtcbiAgICAgICAgICB9KShpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnc2F2ZS1zaGFwZWZpbGUnOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2F2ZSBhcyBTaGFwZWZpbGUnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZmlsZVwiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgZm9sZGVyOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVzOiB7XG4gICAgICAgICAgICAgICAgcG9pbnQ6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfcG9pbnQnLFxuICAgICAgICAgICAgICAgIHBvbHlnb246ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfcG9seScsXG4gICAgICAgICAgICAgICAgbGluZTogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lICsgJ19saW5lJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2hwd3JpdGUuZG93bmxvYWQoZGMuc2VsZWN0aW9uLmxpc3RbaV0ucmF3LCBvcHRpb25zKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnRXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBkb3dubG9hZGluZyB0aGUgc2hhcGVmaWxlLicgKyBlcnIpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZVxuICAgIH0sXG5cbiAgICAnYnJlYWsyJzogeyB0eXBlOiAnYnJlYWsnIH0sXG5cbiAgICBleHRlbnQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdWaWV3IGV4dGVudCBvZiBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZ2xvYmVcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZighZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gZXh0ZW50IG9mIGVudGlyZSBsYXllciBsaXN0IGlmIG5vdGhpbmcgc2VsZWN0ZWRcbiAgICAgICAgICBkYy5tYXAubS5maXRCb3VuZHMoZGMubWFwLmxheWVyZ3JvdXAuZ2V0Qm91bmRzKCkpOyAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGJ1aWxkIHRoZSBib3VuZHMgYmFzZWQgb24gc2VsZWN0ZWQgbGF5ZXJzXG4gICAgICAgICAgdmFyIGJvdW5kcztcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIHZhciBmbCA9IGRjLnNlbGVjdGlvbi5saXN0W2xdLmZlYXR1cmVsYXllcjtcbiAgICAgICAgICAgIGlmKCFsKSBib3VuZHMgPSBmbC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIGVsc2UgYm91bmRzLmV4dGVuZChmbC5nZXRCb3VuZHMoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICB9XG4gICAgfSxcblxuICAgIGV4cGFuZDoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbnZlcnQgRmVhdHVyZUNvbGxlY3Rpb24gaW50byBzZXBhcmF0ZSBmZWF0dXJlcycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1leHBhbmRcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgdmFyIGZjID0gZGMuc2VsZWN0aW9uLmxpc3RbMF07XG4gICAgICAgICAgaWYgKGZjLnJhdy50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAkKGZjLnJhdy5mZWF0dXJlcykuZWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZmMubmFtZSArIGNvdW50ICsgJ18nICsgZmMucmF3LmZlYXR1cmVzW2ZdLmdlb21ldHJ5LnR5cGUsIGZjLnJhdy5mZWF0dXJlc1tmXV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1RoYXQgbmVlZHMgdG8gYmUgYSBmZWF0dXJlIGNvbGxlY3Rpb24hJyk7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ0xheWVyIGlzIG5vdCBhIEZlYXR1cmVDb2xsZWN0aW9uLicpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnUGxlYXNlIHNlbGVjdCBhIHNpbmdsZSBsYXllciEnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb21iaW5lOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29tYmluZXMgc2VsZWN0ZWQgZmVhdHVyZXMgaW50byBhIHNpbmdsZSBGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1jb21wcmVzc1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmYyA9IHtcbiAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgICAgIGZlYXR1cmVzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0W2ZdLnJhdy50eXBlICE9PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAgIGZjLmZlYXR1cmVzLnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbZl0ucmF3KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsIGRjLnNlbGVjdGlvbi5saXN0W2ZdLm5hbWUgKyAnIHdhcyBub3QgYWRkZWQgYmVjYXVzZSBpdCBpcyBhbHJlYWR5IGEgRmVhdHVyZUNvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgWyduZXdfRmVhdHVyZUNvbGxlY3Rpb24nLCBmY10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdObyBsYXllcnMgc2VsZWN0ZWQhJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gJ3ZpZXctYXR0cmlidXRlcyc6IHtcbiAgICAvLyAgIG1pbkZlYXR1cmVzOiAxLFxuICAgIC8vICAgZGVzY3JpcHRpb246ICdTaG93IGF0dHJpYnV0ZSB0YWJsZScsXG4gICAgLy8gICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10aC1saXN0XCI+PC9pPicsXG4gICAgLy8gICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgZGMuYXR0ci5yZW5kZXIoZGMuc2VsZWN0aW9uLmxpc3RbMF0pO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG5cbiAgICAnYnJlYWszJzogeyB0eXBlOiAnYnJlYWsnIH0sXG5cbiAgICByZW5hbWU6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdSZW5hbWUgbGF5ZXInLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsXCI+PC9pPicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnTmFtZScsXG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ3JlbmFtZSddKTsgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnaW5mbycsICdQbGVhc2Ugc2VsZWN0IDxzdHJvbmc+b25lIGxheWVyPC9zdHJvbmc+LicpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG5hbWUsIHBhcmFtZXRlcnMpO1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjpyZW5hbWUnLCBbZGMuc2VsZWN0aW9uLmxpc3RbMF0sIHBhcmFtZXRlcnNbMF1dKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVtb3ZlIHNlbGVjdGVkIGxheWVycycsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaC1vXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2codGhpcy5zdGFtcCk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlJywgW3RoaXMuc3RhbXBdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBpbmZvOiB7XG4gICAgICB0eXBlOiAnaW5mbycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0xlYXJuIG1vcmUgYWJvdXQgZHJvcGNob3AnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtaW5mb1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvYWJvdXQuaHRtbCc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm9wcyA9IGRjLm9wcyB8fCB7fTtcblxuICBkYy5vcHMuZ2VvID0ge1xuICAgIGFsb25nOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxMaW5lU3RyaW5nPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGxpbmUgYW5kIHJldHVybnMgYSBwb2ludCBhdCBhIHNwZWNpZmllZCBkaXN0YW5jZSBhbG9uZyB0aGUgbGluZS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2Rpc3RhbmNlIGFsb25nIHRoZSBsaW5lJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXRzJyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdraWxvbWV0ZXJzJywgJ3JhZGlhbnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2Fsb25nJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5hbG9uZy5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJlemllcjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBsaW5lIGFuZCByZXR1cm5zIGEgY3VydmVkIHZlcnNpb24gYnkgYXBwbHlpbmcgYSBCZXppZXIgc3BsaW5lIGFsZ29yaXRobS4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Jlc29sdXRpb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonVGltZSBpbiBtaWxsaXNlY29uZHMgYmV0d2VlbiBwb2ludHMnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwMDAwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnc2hhcnBuZXNzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J2EgbWVhc3VyZSBvZiBob3cgY3VydnkgdGhlIHBhdGggc2hvdWxkIGJlIGJldHdlZW4gc3BsaW5lcycsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogIDAuODVcblxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnYmV6aWVyJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5iZXppZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBidWZmZXI6IHtcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ2FsY3VsYXRlcyBhIGJ1ZmZlciBmb3IgaW5wdXQgZmVhdHVyZXMgZm9yIGEgZ2l2ZW4gcmFkaXVzLiBVbml0cyBzdXBwb3J0ZWQgYXJlIG1pbGVzLCBraWxvbWV0ZXJzLCBhbmQgZGVncmVlcy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2Rpc3RhbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Rpc3RhbmNlIHRvIGRyYXcgdGhlIGJ1ZmZlci4nLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndW5pdCcsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAnZmVldCcsICdraWxvbWV0ZXJzJywgJ21ldGVycycsICdkZWdyZWVzJ10sXG4gICAgICAgICAgZGVmYXVsdDogJ21pbGVzJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLmJ1ZmZlci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjZW50ZXI6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHBvaW50IGluIHRoZSBjZW50ZXIgb2YgdGhlIGZlYXR1cmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZWN1cnNpdmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRoZSBvcGVyYXRpb24gb24gZWFjaCBmZWF0dXJlIGluIHRoZSBjb2xsZWN0aW9uIG9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4nLFxuICAgICAgICAgIHR5cGU6ICdyZWN1cnNpdmUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAvLyBpZiBydW5uaW5nIHRoZSBvcGVyYXRpb24gcmVjdXJzaXZlbHkgXCJ0cnVlXCJcbiAgICAgICAgaWYgKHBhcmFtc1sxXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdjZW50ZXInLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuY2VudGVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2VudHJvaWQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IHRydWUsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmUnLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHBvaW50IGluIHRoZSBjZW50cm9pZCBvZiB0aGUgZmVhdHVyZXMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZWN1cnNpdmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRoZSBvcGVyYXRpb24gb24gZWFjaCBmZWF0dXJlIGluIHRoZSBjb2xsZWN0aW9uIG9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4nLFxuICAgICAgICAgIHR5cGU6ICdyZWN1cnNpdmUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAvLyBpZiBydW5uaW5nIHRoZSBvcGVyYXRpb24gcmVjdXJzaXZlbHkgXCJ0cnVlXCJcbiAgICAgICAgaWYgKHBhcmFtc1sxXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdjZW50cm9pZCcsIHBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5jZW50cm9pZC5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGRlc3RpbmF0aW9uOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2ludD4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBQb2ludCBhbmQgY2FsY3VsYXRlcyB0aGUgbG9jYXRpb24gb2YgYSBkZXN0aW5hdGlvbiBwb2ludCBnaXZlbiBhIGRpc3RhbmNlIGluIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzOyBhbmQgYmVhcmluZyBpbiBkZWdyZWVzLiBUaGlzIHVzZXMgdGhlIEhhdmVyc2luZSBmb3JtdWxhIHRvIGFjY291bnQgZm9yIGdsb2JhbCBjdXJ2YXR1cmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidkaXN0YW5jZSBmcm9tIHRoZSBzdGFydGluZyBwb2ludCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdiZWFyaW5nJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J3JhbmdpbmcgZnJvbSAtMTgwIHRvIDE4MCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogIDBcblxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXRzJyxcbiAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgb3B0aW9uczogWydtaWxlcycsICdraWxvbWV0ZXJzJywgJ3JhZGlhbnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2Rlc3RpbmF0aW9uJywgcGFyYW1zKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYSBzaW5nbGUgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHVyZi5kZXN0aW5hdGlvbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVudmVsb3BlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXSAvLyBUT0RPOiBtYWtlIHRoaXMgdGFrZSBmZWF0dXJlcyBhbmQgcnVuIGFjcm9zcyBmdWxsIHNlbGVjdGlvblxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYW55IG51bWJlciBvZiBmZWF0dXJlcyBhbmQgcmV0dXJucyBhIHJlY3Rhbmd1bGFyIFBvbHlnb24gdGhhdCBlbmNvbXBhc3NlcyBhbGwgdmVydGljZXMuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5lbnZlbG9wZS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBsb2RlOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgZmVhdHVyZSBvciBzZXQgb2YgZmVhdHVyZXMgYW5kIHJldHVybnMgYWxsIHBvc2l0aW9ucyBhcyBwb2ludHMuJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5leHBsb2RlLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIG1pZHBvaW50OiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2ludD4nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgdHdvIHBvaW50cyBhbmQgcmV0dXJucyBhIHBvaW50IG1pZHdheSBiZXR3ZWVuIHRoZW0uJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5taWRwb2ludC5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBzaW1wbGlmeToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZTxQb2x5Z29uPicsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIExpbmVTdHJpbmcgb3IgUG9seWdvbiBhbmQgcmV0dXJucyBhIHNpbXBsaWZpZWQgdmVyc2lvbi4gSW50ZXJuYWxseSB1c2VzIHNpbXBsaWZ5LWpzIHRvIHBlcmZvcm0gc2ltcGxpZmljYXRpb24uJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndG9sZXJhbmNlJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uIDonc2ltcGxpZmljYXRpb24gdG9sZXJhbmNlJyxcbiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgZGVmYXVsdDogMC4xXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnaGlnaCBxdWFsaXR5JyxcbiAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ3doZXRoZXIgb3Igbm90IHRvIHNwZW5kIG1vcmUgdGltZSB0byBjcmVhdGUgYSBoaWdoZXItcXVhbGl0eSBzaW1wbGlmaWNhdGlvbiB3aXRoIGEgZGlmZmVyZW50IGFsZ29yaXRobScsXG4gICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdzaW1wbGlmeScsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuc2ltcGxpZnkuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0aW46IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUcmlhbmd1bGF0ZWQgaXJyZWd1bGFyIG5ldHdvcmssIGludGVycG9sYXRpb24gbWV0aG9kJyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi50aW4uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdW5pb246IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAyLFxuICAgICAgbWF4RmVhdHVyZXM6IDIsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPFBvbHlnb24+J11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIHR3byBwb2x5Z29ucyBhbmQgcmV0dXJucyBhIGNvbWJpbmVkIHBvbHlnb24uIElmIHRoZSBpbnB1dCBwb2x5Z29ucyBhcmUgbm90IGNvbnRpZ3VvdXMsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIE11bHRpUG9seWdvbiBmZWF0dXJlLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYudW5pb24uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgd2l0aGluOiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBzZXQgb2YgcG9pbnRzIGFuZCBhIHNldCBvZiBwb2x5Z29ucyBhbmQgcmV0dXJucyB0aGUgcG9pbnRzIHRoYXQgZmFsbCB3aXRoaW4gdGhlIHBvbHlnb25zLiBGaXJzdCBpbnB1dCBzaG91bGQgYmUgdGhlIHBvaW50cy4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ1BvaW50cyB0byBjbGlwJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1NlbGVjdCB0aGUgbGF5ZXIgdGhhdCByZXByZXNlbnRzIHRoZSBwb2ludHMgeW91IHdhbnQgdG8gY2xpcC4gVGhpcyBhc3N1bWVzIHRoZSBvdGhlciBsYXllciBpcyB5b3VyIGNsaXBwaW5nIHBvbHlnb24uJyxcbiAgICAgICAgICB0eXBlOiAnc3dpdGNoJ1xuICAgICAgICAgIC8vIGRlZmF1bHQ6IGRjLnNlbGVjdGlvbi5saXN0WzBdXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYud2l0aGluLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIFxuICBkYy5zZWxlY3Rpb24gPSB7fTtcbiAgZGMuc2VsZWN0aW9uLmxpc3QgPSBbXTtcblxuICBkYy5zZWxlY3Rpb24uaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICQoZGMpLm9uKCdsYXllcjpzZWxlY3RlZCcsIGRjLnNlbGVjdGlvbi5hZGQpO1xuICAgICQoZGMpLm9uKCdsYXllcjp1bnNlbGVjdGVkJywgZGMuc2VsZWN0aW9uLnJlbW92ZSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBfbGF5ZXJSZW1vdmVkKTtcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uYWRkID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3QucHVzaChsYXllcik7XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLnJlbW92ZSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIHZhciBpbmRleCA9IG51bGw7XG4gICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3RbaV0uc3RhbXAgPT09IGxheWVyLnN0YW1wKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdC5zcGxpY2UoaW5kZXgsIDEpOyAvLyByZW1vdmUgb3V0c2lkZSBvZiB0aGUgbG9vcCBzbyB3ZSBkb24ndCBicmVhayBvdXIgY291bnRcbiAgfTtcblxuICBkYy5zZWxlY3Rpb24uY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcubGF5ZXItbmFtZS5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICQoJy5vcGVyYXRpb24tZ2VvJykuYWRkQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICQoJy5vcGVyYXRpb24tZ2VvJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICBkYy5zZWxlY3Rpb24ubGlzdCA9IFtdO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9sYXllclJlbW92ZWQoZXZlbnQsIHN0YW1wKSB7XG4gICAgZGMuc2VsZWN0aW9uLnJlbW92ZSh7fSwge3N0YW1wOiBzdGFtcH0pO1xuICAgIGRjLnNlbGVjdGlvbi5jbGVhcigpO1xuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBcbiAgZGMudXRpbCA9IHt9O1xuICBcbiAgZGMudXRpbC5yZW1vdmVGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL1xcLlteLy5dKyQvLCBcIlwiKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwucmVtb3ZlV2hpdGVTcGFjZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgY29uc29sZS5sb2coc3RyaW5nKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwuY29uY2F0ID0gZnVuY3Rpb24oYXJyYXksIHNlcGFyYXRvciwgcHJlZml4KSB7XG4gICAgdmFyIHN0cmluZyA9ICcnO1xuICAgICQoYXJyYXkpLmVhY2goZnVuY3Rpb24oYSkge1xuICAgICAgc3RyaW5nICs9IHNlcGFyYXRvciArIGFycmF5W2FdO1xuICAgIH0pO1xuICAgIHN0cmluZyA9IHByZWZpeCArIHN0cmluZztcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9O1xuXG4gIGRjLnV0aWwueGhyID0gZnVuY3Rpb24odXJsLCBjYWxsYmFjaykge1xuICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKHRydWUpO1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICB4aHIub25sb2FkID0gY2FsbGJhY2suYmluZCh0aGlzLCB4aHIpO1xuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oIHhociApIHtcbiAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoeGhyKTtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVW5hYmxlIHRvIGFjY2VzcyAnICsgdXJsLCAyNTAwKTtcbiAgICB9O1xuICAgIHhoci5zZW5kKCk7XG4gIH07XG5cbiAgZGMudXRpbC5yZWFkRmlsZSA9IGZ1bmN0aW9uKGZpbGUpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAvLyBpZiBhIHppcGZpbGUsIGFzc3VtZSBzaGFwZWZpbGUgZm9yIG5vd1xuICAgIGlmIChmaWxlLm5hbWUuaW5kZXhPZignLnppcCcpID4gLTEgfHwgZmlsZS5uYW1lLmluZGV4T2YoJy5zaHAnKSA+IC0xKSB7XG4gICAgICBjb25zb2xlLmxvZyhmaWxlKTtcbiAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZyhyZWFkZXIpO1xuICAgICAgICBzaHAocmVhZGVyLnJlc3VsdCkudGhlbihmb3J3YXJkVG9HZW9Kc29uSW8pO1xuICAgICAgfTtcbiAgICB9IGVsc2UgeyBcbiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUsICdVVEYtOCcpO1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2ZpbGUubmFtZSwgSlNPTi5wYXJzZShyZWFkZXIucmVzdWx0KV0pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb3J3YXJkVG9HZW9Kc29uSW8oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICB2YXIgdXJsID0gXCJodHRwOi8vZ2VvanNvbi5pby8jZGF0YT1kYXRhOmFwcGxpY2F0aW9uL2pzb24sXCIgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgd2luZG93LmxvY2F0aW9uID0gdXJsO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLmpzb25Gcm9tVXJsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKTtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgcXVlcnkuc3BsaXQoXCImXCIpLmZvckVhY2goZnVuY3Rpb24ocGFydCkge1xuICAgICAgdmFyIGl0ZW0gPSBwYXJ0LnNwbGl0KFwiPVwiKTtcbiAgICAgIGlmICghcmVzdWx0W2l0ZW1bMF1dKSB7XG4gICAgICAgIHJlc3VsdFtpdGVtWzBdXSA9IFtdO1xuICAgICAgfVxuICAgICAgcmVzdWx0W2l0ZW1bMF1dLnB1c2goZGVjb2RlVVJJQ29tcG9uZW50KGl0ZW1bMV0pKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIGRjLnV0aWwuZXhlY3V0ZVVybFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkYXRhID0gZGMudXRpbC5qc29uRnJvbVVybCgpO1xuXG4gICAgLy8gbG9hZCBnaXN0XG4gICAgaWYgKGRhdGEuZ2lzdCAmJiBkYXRhLmdpc3QubGVuZ3RoKSB7XG4gICAgICAkKGRhdGEuZ2lzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLWdpc3QnXS5nZXQoe30sICdsb2FkLWdpc3QnLCBbZGF0YS5naXN0W2ldXSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBsb2FkXG4gICAgaWYgKGRhdGEudXJsICYmIGRhdGEudXJsLmxlbmd0aCkge1xuICAgICAgJChkYXRhLnVybCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIGRjLm9wcy5maWxlWydsb2FkLXVybCddLmdldCh7fSwgJ2xvYWQtdXJsJywgW2RhdGEudXJsW2ldXSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5nZXRGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgICByZXR1cm4gZmlsZW5hbWUuc3Vic3RyKGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykrMSk7XG4gIH07XG5cbiAgZGMudXRpbC5nZXRCQm94ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJvdW5kcyA9IGRjLm1hcC5tLmdldEJvdW5kcygpLFxuICAgICAgICAgICAgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCksXG4gICAgICAgICAgICBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTtcbiAgICAvLyB3ZSBzaG91bGQgcHJvYmFibHkgY2hlY2sgdGhlIHNpemUgaGVyZT9cbiAgICAvLyBub2RlKDU3LjcsMTEuOSw1Ny44LDEyLjApXG4gICAgcmV0dXJuIHN3LmxhdCsnLCcrc3cubG5nKycsJytuZS5sYXQrJywnK25lLmxuZztcbiAgfTtcblxuICBkYy51dGlsLnVuY29sbGVjdCA9IGZ1bmN0aW9uKGZjKSB7XG4gICAgcmV0dXJuIGZjLmZlYXR1cmVzWzBdO1xuICB9O1xuXG4gIGRjLnV0aWwuZXhlY3V0ZUZDID0gZnVuY3Rpb24oZmMsIG9wZXJhdGlvbiwgcGFyYW1zKSB7XG5cbiAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuICAgIHZhciBuZXdGQyA9IHt9O1xuICAgIG5ld0ZDLnR5cGUgPSAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIG5ld0ZDLmZlYXR1cmVzID0gW107XG5cbiAgICBmb3IgKHZhciBmID0gMDsgZiA8IGZjLmZlYXR1cmVzLmxlbmd0aDsgZisrKSB7XG4gICAgICBuZXdQYXJhbXNbMF0gPSBmYy5mZWF0dXJlc1tmXTtcbiAgICAgIHZhciBmZWF0dXJlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmVhdHVyZSA9IHR1cmZbb3BlcmF0aW9uXS5hcHBseShudWxsLCBuZXdQYXJhbXMpO1xuICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXMgPSBmYy5mZWF0dXJlc1tmXS5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCBlcnIpO1xuICAgICAgfVxuICAgICAgbmV3RkMuZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3RkM7XG4gICAgXG4gIH07XG5cbiAgZGMudXRpbC5sb2FkZXIgPSBmdW5jdGlvbih5ZXMpIHtcbiAgICB2YXIgbG9hZGVyID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnZHJvcGNob3AtbG9hZGVyJyk7XG5cbiAgICBpZiAoeWVzKSB7XG4gICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRpbmcnKTtcbiAgICAgICQoJ2JvZHknKS5hcHBlbmQobG9hZGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdkcm9wY2hvcC1sb2FkaW5nJyk7XG4gICAgICAkKCcuZHJvcGNob3AtbG9hZGVyJykuYWRkQ2xhc3MoJ2xvYWRlci1jb21wbGV0ZScpLmZhZGVPdXQoMjAwMCwgZnVuY3Rpb24oKXtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBkYy51dGlsLndlbGNvbWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgd2VsY29tZSA9ICdcXG5XZWxjb21lIHRvIERyb3BjaG9wIVxcbic7XG4gICAgICAgIHdlbGNvbWUgKz0gJ09uY2UgeW91IGRyb3AsIHRoZSBjaG9wIGRvblxcJ3Qgc3RvcC5cXG5cXG4nO1xuICAgICAgICB3ZWxjb21lICs9ICdUaGlzIHByb2plY3QgaXMgYnJvdWdodCB0byB5b3UgYnkgdGhlIGdyZWF0IHBlb3BsZSBvZiBDVUdPUywgdGhlIENhc2NhZGlhbiBjaGFwdGVyIG9mIE9TR2VvLiBJZiB5b3UgYXJlIGV2ZXIgaW4gU2VhdHRsZSwgaGl0IHVzIHVwXFxuaGVsbG9AY3Vnb3Mub3JnXFxuXFxuJztcbiAgICAgICAgd2VsY29tZSArPSAnWW91IGNhbiBsZWFybiBtb3JlIGFib3V0IHRoaXMgcHJvamVjdCBhdCBkcm9wY2hvcC5pby9hYm91dC4nXG4gICAgY29uc29sZS5sb2cod2VsY29tZSk7XG4gIH07XG5cbiAgcmV0dXJuIGRjO1xuXG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
