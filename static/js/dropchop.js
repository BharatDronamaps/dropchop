var dropchop=function(e){return e=e||{},e.version="0.1",e.init=function(t){if(!t){var a=new Error("No options provided in dropchop.init()");throw a}if(e.options=t,!$(t.id).length){var a=new Error("Element with options.id does not exist.");throw a}e.$elem=$(t.id),e.layers.prepare(),e.map.init(),e.selection.init(),e.layerlist.init("layerlist"),e.dropzone($("body")),e.ops.init(),e.form.init(),location.search.length&&e.util.executeUrlParams(),e.util.welcome()},e.boom=function(){console.log("shakalaka")},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")}),t.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")}),t.on("drop",function(t){t.preventDefault(),t.stopPropagation(),$(this).removeClass("dragging");var a=t.originalEvent.dataTransfer.files;$(a).each(function(t){e.util.readFile(a[t])})})}return e=e||{},e.dropzone=function(e){t(e)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.form=e.form||{},e.form.init=function(){$(e).on("form:geo",e.form.geo),$(e).on("form:file",e.form.file)},e.form.geo=function(t,a){e.form.create(a,e.ops.geo[a],"geo")},e.form.file=function(t,a){e.form.create(a,e.ops.file[a],"file:"+a)},e.form.create=function(t,a,r){e.form.remove();var o=$("<form>").addClass("dropchop-form dropchop-form-"+r).attr("id","dropchop-form").attr("data",t);$("<h2>").addClass("dropchop-form-title").text(t).appendTo(o),$("<p>").addClass("dropchop-form-description").text(a.description).appendTo(o);a.parameters&&$(a.parameters).each(function(){var t=e.form.createParam(this);t.appendTo(o)});var n=$("<button>").addClass("dropchop-btn dropchop-btn-green dropchop-form-submit").text("Execute").attr("for",t),i=$("<button>").addClass("dropchop-btn dropchop-btn-cancel dropchop-form-cancel").text("Cancel").attr("type","button");i.on("click",function(t){return t.preventDefault(),e.form.remove(),!1}),o.on("submit",function(a){a.preventDefault();var o=[],n=$(this).serializeArray();return $(n).each(function(e){o.push(n[e].value)}),$(e).trigger("operation:"+r,[t,o]),e.form.remove(),!1}),o.append(n),o.append(i),e.$elem.append(o)},e.form.remove=function(){$("#dropchop-form").remove()},e.form.createParam=function(t){var a=$("<div>").addClass("dropchop-form-parameter"),r=$("<label>").text(t.name).addClass("dropchop-form-parameter-label"),o=e.form.inputs[t.type](t);return o.appendTo(r),t.description.length&&$("<p>").addClass("dropchop-form-parameter-description").html(t.description).appendTo(r),a.append(r),a},e.form.inputs={number:function(e){var t=$("<input>").attr("type","number").attr("name",e.name).attr("value",e["default"]);return t},select:function(e){var t=$("<select>").attr("name",e.name);return $(e.options).each(function(a){var r=$("<option>").text(e.options[a]).attr("value",e.options[a]);r.appendTo(t)}),t},text:function(e){var t=$("<input>").attr("type","text").attr("name",e.name).attr("value",e["default"]);return t},checkbox:function(e){var t=$("<input>").attr("type","checkbox").attr("name",e.name).attr("value",e["default"]);return t},"switch":function(t){var a=$("<div>");return $(e.selection.list).each(function(r){var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("switch-"+e.selection.list[r].stamp).attr("name",t.name);n.appendTo(o),o.append(e.selection.list[r].name),o.appendTo(a)}),a},recursive:function(e){var t=$("<div>"),a=$("<label>").addClass("sub-label"),r=$("<input>").attr("type","radio").val("true").attr("name",e.name);r.appendTo(a),a.append("Individual features");var o=$("<label>").addClass("sub-label"),n=$("<input>").attr("type","radio").val("false").attr("name",e.name);return n.appendTo(o),o.append("Entire collection"),a.appendTo(t),o.appendTo(t),t}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){var t;switch(e){case"FeatureCollection":t="featurecollection";break;case"Feature<Point>":case"Feature<MultiPoint>":t="point";break;case"Feature<LineString>":case"Feature<MultiLineString>":t="line";break;case"Feature<Polygon>":case"Feature<MultiPolygon>":t="polygon";break;case"Feature<GeometryCollection>":t="geom";break;default:t="default"}return t}return e=e||{},e.layerlist={},e.layerlist.elems={},e.layerlist.init=function(t){e.layerlist.$elem=$("<ol>").addClass(t),e.$elem.append(e.layerlist.$elem),e.layerlist.$elem.on("click",function(a){$(a.target).hasClass(t)&&e.selection.clear()});var a=$("<li>").addClass("layer-help").html('Welcome to <strong>dropchop</strong>! Here you can drag and drop files and they will show up in the layer list below.<br><br>To the left you can upload and save your files or <a href="/?gist=09129c20ec020b83bf85">add example data</a> or the <a href="/?gist=d066b572e8a8ad2b6d16">US States</a>.<br><br>To the right you\'ll notice some geospatial operations that become available based on selecting specific layers.');e.layerlist.$elem.append(a);var r=$("<li>").addClass("layer-toggleAll").html('<label><input type="checkbox" checked>Toggle all layers</label>');r.on("change",e.layerlist.toggleAll),e.layerlist.$elem.append(r),$(e).on("layer:added",e.layerlist.addLayerListItem),$(e).on("layer:removed",e.layerlist.removeLayerListItem),$(e).on("layer:renamed",e.layerlist.rename)},e.layerlist.rename=function(e,t,a){$("[data-stamp="+t+"]").find(".layer-name").text(a)},e.layerlist.addLayerListItem=function(a,r){var o=$("<li>").addClass("layer-element").attr("data-stamp",r.stamp),n=$("<div>").addClass("layer-name layer-new").text(r.name).delay(3e3).queue(function(e){$(this).removeClass("layer-new")}),i=$("<span>").addClass("layer-type-image sprite sprite-layer-"+t(r.type)),l=$("<input>").addClass("layer-toggle").prop({type:"checkbox",checked:!0}),s=$("<button>").addClass("layer-action layer-remove").html('<i class="fa fa-times"></i>'),p=$("<button>").addClass("layer-action layer-duplicate").html('<i class="fa fa-files-o"></i>');p.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:duplicate",[$(this).parent().attr("data-stamp")]),!1}),s.on("click",function(t){return t.preventDefault(),$(e).trigger("layer:remove",[$(this).parent().attr("data-stamp")]),e.selection.clear(),!1}),l.on("change",function(t){this.checked?$(e).trigger("layer:show",[r]):$(e).trigger("layer:hide",[r])}),n.on("click",function(t){if(t.shiftKey){var a,o,n=$(this),i=e.layerlist._lastSelected;$(".layer-element").each(function(e){var t=$(this).attr("data-stamp"),r=n.parent().attr("data-stamp"),l=i.parent().attr("data-stamp");t===r&&(a=e),t===l&&(o=e)}),console.log(a,o),a>o?$(".layer-element").each(function(t){t>=o&&a>=t&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])}):$(".layer-element").each(function(t){o>t&&t>=a&&e.layerlist.selectLayer($(this).find(".layer-name"),e.layers.list[$(this).attr("data-stamp")])})}else t.metaKey?e.layerlist.selectToggle($(this),r):(e.layerlist.clearSelection($(this),r),e.layerlist.selectToggle($(this),r))}),o.append(n),o.append(l),o.append(i),o.append(s),o.append(p),e.layerlist.$elem.append(o),e.layerlist.elems[r.stamp]=o,$(".layer-help").hide(),$(".layer-toggleAll").show()},e.layerlist.selectLayer=function(t,a){t.hasClass("selected")||(t.addClass("selected"),$(e).trigger("layer:selected",[a]))},e.layerlist.selectToggle=function(t,a){t.hasClass("selected")?(t.removeClass("selected"),$(e).trigger("layer:unselected",[a])):(t.addClass("selected"),$(e).trigger("layer:selected",[a])),e.layerlist._lastSelected=t},e.layerlist.clearSelection=function(t,a){e.selection.clear()},e.layerlist.toggleAll=function(t){function a(e,t){$(".layer-element[data-stamp="+e+"]").find(".layer-toggle").prop("checked",t).trigger("change")}if($(this).find("input").prop("checked"))for(var r in e.layers.list)a(e.layers.list[r].stamp,!0);else for(var o in e.layers.list)a(e.layers.list[o].stamp,!1)},e.layerlist.removeLayerListItem=function(t,a){$("[data-stamp="+a+"]").fadeOut(300,function(){$(this).remove(),delete e.layerlist.elems[a],0===$(".layer-element").length&&($(".layer-help").show(),$(".layer-toggleAll").hide())})},e}(dropchop||{}),dropchop=function(e){"use strict";function t(e){return"FeatureCollection"===e.type?"FeatureCollection":e.type+"<"+e.geometry.type+">"}return e=e||{},e.layers={},e.layers.list={},e.layers.prepare=function(){$(e).on("file:added",e.layers.add),$(e).on("layer:remove",e.layers.remove),$(e).on("layer:duplicate",e.layers.duplicate),$(e).on("layer:rename",e.layers.rename)},e.layers.add=function(t,a,r){var o=e.layers.makeLayer(a,r);e.layers.list[o.stamp]=o,e.notify("success","<strong>"+o.name+"</strong> has been added!",3500),$(e).trigger("layer:added",[o])},e.layers.remove=function(t,a){try{$(e).trigger("layer:removed",[a]),e.notify("info","<strong>"+e.layers.list[a].name+"</strong> has been removed."),delete e.layers.list[a]}catch(r){throw e.notify("error","There was a problem removing the layer."),r}},e.layers.duplicate=function(t,a){var r=e.layers.list[a];e.layers.add({},"copy_"+r.name,r.raw)},e.layers.rename=function(t,a,r){e.layers.list[a.stamp].name=r,$(e).trigger("layer:renamed",[a.stamp,r])},e.layers.makeLayer=function(a,r){var o=r,n=L.mapbox.featureLayer(o),i={name:e.util.removeFileExtension(a),stamp:L.stamp(n),raw:o,type:t(o),featurelayer:n,dateAdded:new Date};return i},e}(dropchop||{}),dropchop=function(e){"use strict";function t(){e.map.token=L.mapbox.accessToken="pk.eyJ1Ijoic3ZtYXR0aGV3cyIsImEiOiJVMUlUR0xrIn0.NweS_AttjswtN5wRuWCSNA",e.map.m=L.mapbox.map("dropchop-map",null,{zoomControl:!1,worldCopyJump:!0}).setView([0,0],3),L.control.zoom({position:"topleft"}).addTo(e.map.m),L.mapbox.geocoderControl("mapbox.places",{position:"topleft"}).addTo(e.map.m);var t={"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Outdoors":L.mapbox.tileLayer("mapbox.outdoors"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite")};t["Mapbox Streets"].addTo(e.map.m),L.control.layers(t,{},{position:"bottomright",collapsed:!1}).addTo(e.map.m),e.map.layergroup=L.mapbox.featureLayer(),e.map.layergroup.addTo(e.map.m),$(e).on("layer:added",e.map.addLayer),$(e).on("layer:hide",e.map.hideLayer),$(e).on("layer:show",e.map.showLayer)}return e=e||{},e.map={},e.map.init=function(){e.map.$elem=$("<div>").prop("id","dropchop-map").addClass("map"),e.$elem.append(e.map.$elem),$(e).on("layer:removed",e.map.removeLayer),t()},e.map.count=0,e.map.addLayer=function(t,a){var r=a.featurelayer;e.map.layergroup.addLayer(r),r.eachLayer(function(e){var t='<table class="dropchop-table"><tr><th>Property</th><th>Data</th></tr>';if(e.feature.properties)for(var a in e.feature.properties)t+="<tr><td><strong>"+a+"</strong></td><td>"+e.feature.properties[a]+"</td></tr>";else t+="<p>There are no properties set for this feature.</p>";t+="</table>",e.bindPopup(L.popup({maxWidth:450,maxHeight:200,autoPanPadding:[45,45],className:"dropchop-popup"},e).setContent(t))})},e.map.hideLayer=function(t,a){e.map.layergroup.removeLayer(a.featurelayer)},e.map.showLayer=function(t,a){e.map.layergroup.addLayer(a.featurelayer)},e.map.removeLayer=function(t,a){e.map.layergroup.removeLayer(e.layers.list[a].featurelayer)},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.notify=function(t,a,r){var o=$("<div>").addClass("notification").addClass(t).html(a);$(e.$elem).append(o),setTimeout(function(){o.remove()},r||3e3)},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t){t.preventDefault();var a=$(this).attr("data-operation");e.ops.geo[a].parameters?$(e).trigger("form:geo",[a]):$(e).trigger("operation:geo",[a,e.selection.list])}function a(t){t.preventDefault();var a=$(this).attr("data-operation");try{e.ops.file[a].execute()}catch(r){throw e.notify("error","This operation doesn't exist!"),r}}return e=e||{},e.ops=e.ops||{},e.ops.init=function(){var r=$("<div>").addClass("operations-geo");e.$elem.append(r);for(var o in e.ops.geo){var n=$("<button>").addClass("operation operation-geo operation-inactive").html("<h4>"+o+"</h4><p>"+e.ops.geo[o].description+"</p>").prop("disabled",!0).attr("data-operation",o);n.on("click",t),r.append(n)}$(e).on("layer:selected",e.ops.geoCheck),$(e).on("layer:unselected",e.ops.geoCheck),$(e).on("operation:geo",e.ops.geoExecute),$(e).on("operation:file:load-gist",e.ops.file["load-gist"].get),$(e).on("operation:file:load-url",e.ops.file["load-url"].get),$(e).on("operation:file:load-overpass",e.ops.file["load-overpass"].get),$(e).on("operation:file:rename",e.ops.file.rename.callback);var i=$("<div>").addClass("dropchop-menu-left");for(var l in e.ops.file)if("break"===e.ops.file[l].type){var s=$("<div>").addClass("menu-action-break");i.append(s)}else{var p=$("<button>").addClass("menu-action").html(e.ops.file[l].icon||"A").attr("data-operation",l).attr("data-tooltip",e.ops.file[l].description);"info"===e.ops.file[l].type&&p.addClass("dropchop-info"),p.on("click",a),i.append(p)}e.$elem.append(i)},e.ops.geoExecute=function(t,a,r){var o=e.ops.prepareTurfParams(a,r),n=null;try{n=e.ops.geo[a].execute(o.options)}catch(i){throw e.notify("That operation isn't possible. Try changing the order of your selection."),i}$(e).trigger("file:added",[o.name,n])},e.ops.prepareTurfParams=function(t,a){var r={};r.options=[];var o=[],n=[];return $(e.selection.list).each(function(t){-1===$.inArray("switch-"+e.selection.list[t].stamp,a)?o.push(e.selection.list[t].raw):o.unshift(e.selection.list[t].raw),n.push(e.selection.list[t].name)}),r.options=$.merge(o,a),r.name=e.util.concat(n,"_",t),r},e.ops.geoCheck=function(t,a){function r(e){var t=$("[data-operation="+e+"]");t.addClass("operation-inactive"),t.prop("disabled",!0)}function o(e){var t=$("[data-operation="+e+"]");t.removeClass("operation-inactive"),t.prop("disabled",!1)}for(var n in e.ops.geo){var i=e.ops.geo[n];if(e.selection.list.length>i.maxFeatures||e.selection.list.length<i.minFeatures)r(n);else for(var l=0;l<e.selection.list.length;l++){var s=e.selection.list[l];$.inArray(s.type,i.requirements.types)>-1||i.requirements.generalFeature===!0?o(n):r(n)}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.file={upload:{description:"Upload from your computer (.geojson)",icon:'<i class="fa fa-upload"></i>',execute:function(){var t=$("<input>").attr("type","file").attr("multiple","true").css("visibility","hidden").css("position","absolute").css("height","0").on("change",function(){var a=this.files;$(a).each(function(t){e.util.readFile(a[t])}),t.remove()});$("body").append(t),t.click()}},"load-url":{description:"Import file from a URL",icon:'<i class="fa fa-link"></i>',parameters:[{name:"url",description:"URL",type:"text","default":"http://"}],execute:function(){$(e).trigger("form:file",["load-url"])},get:function(t,a,r){var o=r[0];e.util.xhr(o,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=t.responseURL.substring(t.responseURL.lastIndexOf("/")+1);$(e).trigger("file:added",[o,r])}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-gist":{description:"Import files from Gist",icon:'<i class="fa fa-github"></i>',parameters:[{name:"gist",description:"Gist ID or URL",type:"text","default":"https://gist.github.com/"}],execute:function(){$(e).trigger("form:file",["load-gist"])},get:function(t,a,r){var o=r[0].split("/")[r[0].split("/").length-1],n="https://api.github.com/gists/"+o;e.util.xhr(n,e.ops.file[a].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText);for(var o in r.files){var n=r.files[o].filename;$(e).trigger("file:added",[n,JSON.parse(r.files[o].content)])}}else e.notify("error",t.status+": could not retrieve Gist. Please check your URL")}},"load-overpass":{description:"Query the Overpass API",icon:'<i class="fa fa-terminal"></i>',_temp:{},parameters:[{name:"query",description:'Learn more about <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide" target="_blank">the query language</a>.',type:"text","default":"amenity=bar"},{name:"layer name",description:"Name of the layer added if results are found.",type:"text","default":"overpass_layer_name"}],execute:function(){$(e).trigger("form:file",["load-overpass"])},get:function(t,a,r){e.ops.file["load-overpass"]._temp.layerName=r[1];var o=e.util.getBBox();e.util.xhr("http://overpass-api.de/api/interpreter?[out:json];node["+r[0]+"]("+o+");out;",e.ops.file["load-overpass"].callback)},callback:function(t,a){if(dropchop.util.loader(!1),200===t.status){var r=JSON.parse(t.responseText),o=osmtogeojson(r);r.elements.length?($(e).trigger("file:added",[e.ops.file["load-overpass"]._temp.layerName,o]),e.notify("success","Found <strong>"+r.elements.length+" elements</strong> from the Overpass API")):e.notify("info","No elements found in your query.")}else e.notify("error",t.status+": could not query the Overpass API")}},break1:{type:"break"},"save-geojson":{minFeatures:1,description:"Save as GeoJSON",icon:'<i class="fa fa-file-code-o"></i>',createsLayer:!1,execute:function(){for(var t=0;t<e.selection.list.length;t++)!function(t){var a=JSON.stringify(e.selection.list[t].raw),r="dropchop_"+e.selection.list[t].name+".geojson";saveAs(new Blob([a],{type:"text/plain;charset=utf-8"}),r)}(t)}},"save-shapefile":{minFeatures:1,description:"Save as Shapefile",icon:'<i class="fa fa-file"></i>',execute:function(){$(e.selection.list).each(function(t){try{var a={folder:"dropchop_"+e.selection.list[t].name,types:{point:"dropchop_"+e.selection.list[t].name+"_point",polygon:"dropchop_"+e.selection.list[t].name+"_poly",line:"dropchop_"+e.selection.list[t].name+"_line"}};shpwrite.download(e.selection.list[t].raw,a)}catch(r){throw e.notify("Error","There was a problem downloading the shapefile."+r),r}})},createsLayer:!1},break2:{type:"break"},extent:{minFeatures:1,description:"View extent of layers",icon:'<i class="fa fa-globe"></i>',execute:function(){if(e.selection.list.length){var t;$(e.selection.list).each(function(a){var r=e.selection.list[a].featurelayer;a?t.extend(r.getBounds()):t=r.getBounds()}),e.map.m.fitBounds(t)}else e.map.m.fitBounds(e.map.layergroup.getBounds())}},expand:{minFeatures:1,description:"Convert FeatureCollection into separate features",icon:'<i class="fa fa-expand"></i>',execute:function(){var t=0;if(1===e.selection.list.length){var a=e.selection.list[0];if("FeatureCollection"!==a.raw.type){var r=new Error("That needs to be a feature collection!");throw e.notify("error","Layer is not a FeatureCollection."),r}$(a.raw.features).each(function(r){t++,$(e).trigger("file:added",[a.name+t+"_"+a.raw.features[r].geometry.type,a.raw.features[r]])})}else e.notify("info","Please select a single layer!")}},combine:{minFeatures:1,description:"Combines selected features into a single FeatureCollection",icon:'<i class="fa fa-compress"></i>',execute:function(){var t={type:"FeatureCollection",features:[]};e.selection.list.length>0?($(e.selection.list).each(function(a){"FeatureCollection"!==e.selection.list[a].raw.type?t.features.push(e.selection.list[a].raw):e.notify("info",e.selection.list[a].name+" was not added because it is already a FeatureCollection")}),$(e).trigger("file:added",["new_FeatureCollection",t])):e.notify("info","No layers selected!")}},break3:{type:"break"},rename:{minFeatures:1,description:"Rename layer",icon:'<i class="fa fa-pencil"></i>',parameters:[{name:"Name",type:"text",description:""}],execute:function(){1===e.selection.list.length?$(e).trigger("form:file",["rename"]):e.notify("info","Please select <strong>one layer</strong>.")},callback:function(t,a,r){console.log(a,r),$(e).trigger("layer:rename",[e.selection.list[0],r[0]])}},remove:{minFeatures:1,description:"Remove selected layers",icon:'<i class="fa fa-trash-o"></i>',execute:function(){$(e.selection.list).each(function(t){console.log(this.stamp),$(e).trigger("layer:remove",[this.stamp])}),e.selection.clear()}},info:{type:"info",description:"Learn more about dropchop",icon:'<i class="fa fa-info"></i>',execute:function(){window.location="/about.html"}}},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.ops=e.ops||{},e.ops.geo={along:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a point at a specified distance along the line.",parameters:[{name:"distance",description:"distance along the line",type:"number","default":10},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"along",t):turf.along.apply(null,t)}},bezier:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","FeatureCollection"]},description:"Takes a line and returns a curved version by applying a Bezier spline algorithm.",parameters:[{name:"resolution",description:"Time in milliseconds between points",type:"number","default":1e4},{name:"sharpness",description:"a measure of how curvy the path should be between splines",type:"number","default":.85}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"bezier",t):turf.bezier.apply(null,t)}},buffer:{maxFeatures:1,minFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Calculates a buffer for input features for a given radius. Units supported are miles, kilometers, and degrees.",parameters:[{name:"distance",description:"Distance to draw the buffer.",type:"number","default":10},{name:"unit",type:"select",description:"",options:["miles","feet","kilometers","meters","degrees"],"default":"miles"}],execute:function(e){var t=turf.buffer.apply(null,e);return t}},center:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the center of the feature.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"center",t):turf.center.apply(null,t)}},centroid:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Creates a point in the centroid of the features.",parameters:[{name:"recursive",description:"Run the operation on each feature in the collection or the entire collection.",type:"recursive"}],execute:function(t){var a={};return a="true"===t[1]?e.util.executeFC(t[0],"centroid",t):turf.centroid.apply(null,t)}},destination:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<Point>","FeatureCollection"]},description:"Takes a Point and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the Haversine formula to account for global curvature.",parameters:[{name:"distance",description:"distance from the starting point",type:"number","default":10},{name:"bearing",description:"ranging from -180 to 180",type:"number","default":0},{name:"units",type:"select",description:"",options:["miles","kilometers","radians","degrees"],"default":"miles"}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"destination",t):turf.destination.apply(null,t)}},envelope:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes any number of features and returns a rectangular Polygon that encompasses all vertices.",execute:function(e){var t=turf.envelope.apply(null,e);return t}},explode:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!0,types:["Feature","FeatureCollection"]},description:"Takes a feature or set of features and returns all positions as points.",execute:function(e){var t=turf.explode.apply(null,e);return t}},midpoint:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Point>"]},description:"Takes two points and returns a point midway between them.",execute:function(e){var t=turf.midpoint.apply(null,e);return t}},simplify:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["Feature<LineString>","Feature<Polygon>","FeatureCollection"]},description:"Takes a LineString or Polygon and returns a simplified version. Internally uses simplify-js to perform simplification.",parameters:[{name:"tolerance",description:"simplification tolerance",type:"number","default":.1},{name:"high quality",type:"checkbox",description:"whether or not to spend more time to create a higher-quality simplification with a different algorithm","default":!1}],execute:function(t){var a={};return a="FeatureCollection"===t[0].type?e.util.executeFC(t[0],"simplify",t):turf.simplify.apply(null,t)}},tin:{minFeatures:1,maxFeatures:1,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Triangulated irregular network, interpolation method",execute:function(e){var t=turf.tin.apply(null,e);return t}},union:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["Feature<Polygon>"]},description:"Takes two polygons and returns a combined polygon. If the input polygons are not contiguous, this function returns a MultiPolygon feature.",execute:function(e){var t=turf.union.apply(null,e);return t}},within:{minFeatures:2,maxFeatures:2,requirements:{generalFeature:!1,types:["FeatureCollection"]},description:"Takes a set of points and a set of polygons and returns the points that fall within the polygons. First input should be the points.",parameters:[{name:"Points to clip",description:"Select the layer that represents the points you want to clip. This assumes the other layer is your clipping polygon.",type:"switch"}],execute:function(e){console.log(e);var t=turf.within.apply(null,e);return t}}},e}(dropchop||{}),dropchop=function(e){"use strict";function t(t,a){e.selection.remove({},{stamp:a}),e.selection.clear()}return e=e||{},e.selection={},e.selection.list=[],e.selection.init=function(){$(e).on("layer:selected",e.selection.add),$(e).on("layer:unselected",e.selection.remove),$(e).on("layer:removed",t)},e.selection.add=function(t,a){e.selection.list.push(a)},e.selection.remove=function(t,a){var r=null;$(e.selection.list).each(function(t){e.selection.list[t].stamp===a.stamp&&(r=t)}),e.selection.list.splice(r,1)},e.selection.clear=function(){$(".layer-name.selected").removeClass("selected"),$(".operation-geo").addClass("operation-inactive"),$(".operation-geo").prop("disabled",!0),e.selection.list=[]},e}(dropchop||{}),dropchop=function(e){"use strict";return e=e||{},e.util={},e.util.removeFileExtension=function(e){return e=e.replace(/\.[^/.]+$/,"")},e.util.removeWhiteSpace=function(e){return e=e.replace(/^\s+|\s+$/g,""),console.log(e),e},e.util.concat=function(e,t,a){var r="";return $(e).each(function(a){r+=t+e[a]}),r=a+r},e.util.xhr=function(t,a){dropchop.util.loader(!0);var r=new XMLHttpRequest;r.open("GET",t),r.onload=a.bind(this,r),r.onerror=function(a){dropchop.util.loader(!1),console.error(a),e.notify("error","Unable to access "+t,2500)},r.send()},e.util.readFile=function(t){function a(e){console.log(e);var t="http://geojson.io/#data=data:application/json,"+encodeURIComponent(JSON.stringify(e));window.location=t}var r=new FileReader;t.name.indexOf(".zip")>-1||t.name.indexOf(".shp")>-1?(console.log(t),r.readAsArrayBuffer(t),r.onloadend=function(e){console.log(r),shp(r.result).then(a)}):(r.readAsText(t,"UTF-8"),r.onload=function(){$(e).trigger("file:added",[t.name,JSON.parse(r.result)])})},e.util.jsonFromUrl=function(){var e=location.search.substr(1),t={};return e.split("&").forEach(function(e){var a=e.split("=");t[a[0]]||(t[a[0]]=[]),t[a[0]].push(decodeURIComponent(a[1]))}),t},e.util.executeUrlParams=function(){var t=e.util.jsonFromUrl();t.gist&&t.gist.length&&$(t.gist).each(function(a){e.ops.file["load-gist"].get({},"load-gist",[t.gist[a]])}),t.url&&t.url.length&&$(t.url).each(function(a){e.ops.file["load-url"].get({},"load-url",[t.url[a]])})},e.util.getFileExtension=function(e){return e.substr(e.lastIndexOf(".")+1)},e.util.getBBox=function(){var t=e.map.m.getBounds(),a=t.getSouthWest(),r=t.getNorthEast();return a.lat+","+a.lng+","+r.lat+","+r.lng},e.util.uncollect=function(e){return e.features[0]},e.util.executeFC=function(t,a,r){var o=r,n={};n.type="FeatureCollection",n.features=[];for(var i=0;i<t.features.length;i++){o[0]=t.features[i];var l;try{l=turf[a].apply(null,o),l.properties=t.features[i].properties||{}}catch(s){e.notify("error",s)}n.features.push(l)}return n},e.util.loader=function(e){var t=$("<div>").addClass("dropchop-loader");e?($("body").addClass("dropchop-loading"),$("body").append(t)):($("body").removeClass("dropchop-loading"),$(".dropchop-loader").addClass("loader-complete").fadeOut(2e3,function(){$(this).remove()}))},e.util.welcome=function(){var e="\nWelcome to Dropchop!\n";e+="Once you drop, the chop don't stop.\n\n",e+="This project is brought to you by the great people of CUGOS, the Cascadian chapter of OSGeo. If you are ever in Seattle, hit us up\nhello@cugos.org\n\n",e+="You can learn more about this project at dropchop.io/about.",console.log(e)},e}(dropchop||{});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BjaG9wLmpzIiwiZHJvcHpvbmUuZHJvcGNob3AuanMiLCJmb3JtLmRyb3BjaG9wLmpzIiwibGF5ZXJsaXN0LmRyb3BjaG9wLmpzIiwibGF5ZXJzLmRyb3BjaG9wLmpzIiwibWFwLmRyb3BjaG9wLmpzIiwibm90aWZ5LmRyb3BjaG9wLmpzIiwib3BzLmRyb3BjaG9wLmpzIiwib3BzLmZpbGUuZHJvcGNob3AuanMiLCJvcHMuZ2VvLmRyb3BjaG9wLmpzIiwic2VsZWN0aW9uLmRyb3BjaG9wLmpzIiwidXRpbC5kcm9wY2hvcC5qcyJdLCJuYW1lcyI6WyJkcm9wY2hvcCIsImRjIiwidmVyc2lvbiIsImluaXQiLCJvcHRzIiwiZXJyIiwiRXJyb3IiLCJvcHRpb25zIiwiJCIsImlkIiwibGVuZ3RoIiwiJGVsZW0iLCJsYXllcnMiLCJwcmVwYXJlIiwibWFwIiwic2VsZWN0aW9uIiwibGF5ZXJsaXN0IiwiZHJvcHpvbmUiLCJvcHMiLCJmb3JtIiwibG9jYXRpb24iLCJzZWFyY2giLCJ1dGlsIiwiZXhlY3V0ZVVybFBhcmFtcyIsIndlbGNvbWUiLCJib29tIiwiY29uc29sZSIsImxvZyIsIl9ldmVudHMiLCIkY29udGFpbmVyIiwib24iLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwidGhpcyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJmaWxlcyIsIm9yaWdpbmFsRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJlYWNoIiwiaSIsInJlYWRGaWxlIiwiZ2VvIiwiZmlsZSIsIm9wZXJhdGlvbiIsImNyZWF0ZSIsIm5hbWUiLCJpbmZvIiwidHJpZ2dlciIsInJlbW92ZSIsIiRodG1sIiwiYXR0ciIsInRleHQiLCJhcHBlbmRUbyIsImRlc2NyaXB0aW9uIiwicGFyYW1ldGVycyIsInAiLCJjcmVhdGVQYXJhbSIsIiRzdWJtaXQiLCIkY2FuY2VsIiwiZGF0YSIsInNlcmlhbGl6ZUFycmF5IiwicHVzaCIsInZhbHVlIiwiYXBwZW5kIiwicGFyYW0iLCIkaW5wdXQiLCIkbGFiZWwiLCIkZmllbGQiLCJpbnB1dHMiLCJ0eXBlIiwiaHRtbCIsIm51bWJlciIsIiRpIiwic2VsZWN0IiwiJG9wdCIsImNoZWNrYm94Iiwic3dpdGNoIiwibGlzdCIsIiRsYmwiLCJ2YWwiLCJzdGFtcCIsInJlY3Vyc2l2ZSIsIiRsYmwxIiwiJG9wdDEiLCIkbGJsMiIsIiRvcHQyIiwibGF5ZXJUeXBlSWNvbiIsImljb24iLCJlbGVtcyIsInRhcmdldCIsImhhc0NsYXNzIiwiY2xlYXIiLCJsaUhlbHBlciIsInRvZ2dsZUxheWVycyIsInRvZ2dsZUFsbCIsImFkZExheWVyTGlzdEl0ZW0iLCJyZW1vdmVMYXllckxpc3RJdGVtIiwicmVuYW1lIiwibmV3TmFtZSIsImZpbmQiLCJsYXllciIsImxheWVybGlzdEl0ZW0iLCJsYXllckRpdiIsImRlbGF5IiwicXVldWUiLCJuZXh0IiwibGF5ZXJUeXBlIiwicHJvcCIsImNoZWNrZWQiLCJkdXBsaWNhdGUiLCJwYXJlbnQiLCJzaGlmdEtleSIsInRvQ291bnQiLCJmcm9tQ291bnQiLCJ0byIsImZyb20iLCJfbGFzdFNlbGVjdGVkIiwiZSIsImNoZWNrIiwidG9TdGFtcCIsImZyb21TdGFtcCIsImwiLCJzZWxlY3RMYXllciIsIm1ldGFLZXkiLCJzZWxlY3RUb2dnbGUiLCJjbGVhclNlbGVjdGlvbiIsImhpZGUiLCJzaG93IiwiJGl0ZW0iLCJseXIiLCJlbGVtVG9nZ2xlIiwiYm9vbCIsIm8iLCJmYWRlT3V0IiwiZ2V0VHlwZSIsImdqIiwiZ2VvbWV0cnkiLCJhZGQiLCJibG9iIiwibWFrZUxheWVyIiwibm90aWZ5IiwicmF3IiwianNvbiIsImdlb2pzb24iLCJmbCIsIkwiLCJtYXBib3giLCJmZWF0dXJlTGF5ZXIiLCJyZW1vdmVGaWxlRXh0ZW5zaW9uIiwiZmVhdHVyZWxheWVyIiwiZGF0ZUFkZGVkIiwiRGF0ZSIsIl9tYWtlTWFwIiwidG9rZW4iLCJhY2Nlc3NUb2tlbiIsIm0iLCJ6b29tQ29udHJvbCIsIndvcmxkQ29weUp1bXAiLCJzZXRWaWV3IiwiY29udHJvbCIsInpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiZ2VvY29kZXJDb250cm9sIiwiYmFzZUxheWVycyIsIk1hcGJveCBTdHJlZXRzIiwidGlsZUxheWVyIiwiTWFwYm94IE91dGRvb3JzIiwiTWFwYm94IExpZ2h0IiwiTWFwYm94IERhcmsiLCJNYXBib3ggU2F0ZWxsaXRlIiwiY29sbGFwc2VkIiwibGF5ZXJncm91cCIsImFkZExheWVyIiwiaGlkZUxheWVyIiwic2hvd0xheWVyIiwicmVtb3ZlTGF5ZXIiLCJjb3VudCIsImVhY2hMYXllciIsImNvbnRlbnQiLCJmZWF0dXJlIiwicHJvcGVydGllcyIsImJpbmRQb3B1cCIsInBvcHVwIiwibWF4V2lkdGgiLCJtYXhIZWlnaHQiLCJhdXRvUGFuUGFkZGluZyIsImNsYXNzTmFtZSIsInNldENvbnRlbnQiLCJ0aW1lIiwibm90ZSIsInNldFRpbWVvdXQiLCJfZ2VvQnRuQ2xpY2siLCJfZmlsZUJ0bkNsaWNrIiwiZXhlY3V0ZSIsImdlb0NvbnRhaW5lciIsImdlb09wIiwiZ2VvQnRuIiwiZ2VvQ2hlY2siLCJnZW9FeGVjdXRlIiwiZ2V0IiwiY2FsbGJhY2siLCJsZWZ0TWVudSIsImZpbGVPcCIsIiRicmVha1NwYWNlIiwiZmlsZUJ0biIsInByZXAiLCJwcmVwYXJlVHVyZlBhcmFtcyIsInJlc3VsdCIsInBhcmFtcyIsImdlb21zIiwibmFtZUFycmF5IiwiaW5BcnJheSIsInVuc2hpZnQiLCJtZXJnZSIsImNvbmNhdCIsInR1cm5JdE9mZiIsIm9wIiwiYnRuIiwidHVybkl0T24iLCJtYXhGZWF0dXJlcyIsIm1pbkZlYXR1cmVzIiwieCIsInNlbCIsInJlcXVpcmVtZW50cyIsInR5cGVzIiwiZ2VuZXJhbEZlYXR1cmUiLCJ1cGxvYWQiLCIkYmxpbmRJbnB1dCIsImNzcyIsImNsaWNrIiwibG9hZC11cmwiLCJkZWZhdWx0IiwidXJsIiwieGhyIiwieGhyRXZlbnQiLCJsb2FkZXIiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZVVSTCIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwibG9hZC1naXN0IiwiZ2lzdCIsInNwbGl0IiwiZiIsImZpbGVuYW1lIiwibG9hZC1vdmVycGFzcyIsIl90ZW1wIiwibGF5ZXJOYW1lIiwiYmJveCIsImdldEJCb3giLCJvc210b2dlb2pzb24iLCJlbGVtZW50cyIsImJyZWFrMSIsInNhdmUtZ2VvanNvbiIsImNyZWF0ZXNMYXllciIsInN0cmluZ2lmeSIsInRpdGxlIiwic2F2ZUFzIiwiQmxvYiIsInNhdmUtc2hhcGVmaWxlIiwiZm9sZGVyIiwicG9pbnQiLCJwb2x5Z29uIiwibGluZSIsInNocHdyaXRlIiwiZG93bmxvYWQiLCJicmVhazIiLCJleHRlbnQiLCJib3VuZHMiLCJleHRlbmQiLCJnZXRCb3VuZHMiLCJmaXRCb3VuZHMiLCJleHBhbmQiLCJmYyIsImZlYXR1cmVzIiwiY29tYmluZSIsImJyZWFrMyIsIndpbmRvdyIsImFsb25nIiwiZXhlY3V0ZUZDIiwidHVyZiIsImFwcGx5IiwiYmV6aWVyIiwiYnVmZmVyIiwiY2VudGVyIiwiY2VudHJvaWQiLCJkZXN0aW5hdGlvbiIsImVudmVsb3BlIiwiZXhwbG9kZSIsIm1pZHBvaW50Iiwic2ltcGxpZnkiLCJ0aW4iLCJ1bmlvbiIsIndpdGhpbiIsIl9sYXllclJlbW92ZWQiLCJpbmRleCIsInNwbGljZSIsInN0cmluZyIsInJlcGxhY2UiLCJyZW1vdmVXaGl0ZVNwYWNlIiwiYXJyYXkiLCJzZXBhcmF0b3IiLCJwcmVmaXgiLCJhIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwiYmluZCIsIm9uZXJyb3IiLCJlcnJvciIsInNlbmQiLCJmb3J3YXJkVG9HZW9Kc29uSW8iLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiaW5kZXhPZiIsInJlYWRBc0FycmF5QnVmZmVyIiwib25sb2FkZW5kIiwic2hwIiwidGhlbiIsInJlYWRBc1RleHQiLCJqc29uRnJvbVVybCIsInF1ZXJ5Iiwic3Vic3RyIiwiZm9yRWFjaCIsInBhcnQiLCJpdGVtIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZ2V0RmlsZUV4dGVuc2lvbiIsInN3IiwiZ2V0U291dGhXZXN0IiwibmUiLCJnZXROb3J0aEVhc3QiLCJsYXQiLCJsbmciLCJ1bmNvbGxlY3QiLCJuZXdQYXJhbXMiLCJuZXdGQyIsInllcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsVUFBQSxTQUFBQyxHQWtEQSxNQWpEQUEsR0FBQUEsTUFDQUEsRUFBQUMsUUFBQSxNQUNBRCxFQUFBRSxLQUFBLFNBQUFDLEdBQ0EsSUFBQUEsRUFBQSxDQUNBLEdBQUFDLEdBQUEsR0FBQUMsT0FBQSx5Q0FDQSxNQUFBRCxHQUlBLEdBRkFKLEVBQUFNLFFBQUFILEdBRUFJLEVBQUFKLEVBQUFLLElBQUFDLE9BQUEsQ0FDQSxHQUFBTCxHQUFBLEdBQUFDLE9BQUEsMENBQ0EsTUFBQUQsR0FFQUosRUFBQVUsTUFBQUgsRUFBQUosRUFBQUssSUFHQVIsRUFBQVcsT0FBQUMsVUFHQVosRUFBQWEsSUFBQVgsT0FHQUYsRUFBQWMsVUFBQVosT0FHQUYsRUFBQWUsVUFBQWIsS0FBQSxhQUdBRixFQUFBZ0IsU0FBQVQsRUFBQSxTQUdBUCxFQUFBaUIsSUFBQWYsT0FHQUYsRUFBQWtCLEtBQUFoQixPQUdBaUIsU0FBQUMsT0FBQVgsUUFDQVQsRUFBQXFCLEtBQUFDLG1CQUdBdEIsRUFBQXFCLEtBQUFFLFdBSUF2QixFQUFBd0IsS0FBQSxXQUNBQyxRQUFBQyxJQUFBLGNBR0ExQixHQUVBRCxjQ3BEQUEsU0FBQSxTQUFBQyxHQUVBLFlBWUEsU0FBQTJCLEdBQUFDLEdBQ0FBLEVBQUFDLEdBQUEsV0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFDQUQsRUFBQUUsa0JBQ0F6QixFQUFBMEIsTUFBQUMsU0FBQSxjQUdBTixFQUFBQyxHQUFBLFlBQUEsU0FBQUMsR0FDQUEsRUFBQUMsaUJBQ0FELEVBQUFFLGtCQUNBekIsRUFBQTBCLE1BQUFFLFlBQUEsY0FH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QixLQUFBK1QsVUFBQSxTQUFBOUQsR0FDQSxNQUFBQSxHQUFBQyxTQUFBLElBR0F2UixFQUFBcUIsS0FBQXVRLFVBQUEsU0FBQU4sRUFBQTFPLEVBQUFzSyxHQUVBLEdBQUFtSSxHQUFBbkksRUFDQW9JLElBQ0FBLEdBQUFoUixLQUFBLG9CQUNBZ1IsRUFBQS9ELFdBRUEsS0FBQSxHQUFBL0IsR0FBQSxFQUFBQSxFQUFBOEIsRUFBQUMsU0FBQTlRLE9BQUErTyxJQUFBLENBQ0E2RixFQUFBLEdBQUEvRCxFQUFBQyxTQUFBL0IsRUFDQSxJQUFBbkUsRUFDQSxLQUNBQSxFQUFBd0csS0FBQWpQLEdBQUFrUCxNQUFBLEtBQUF1RCxHQUNBaEssRUFBQUMsV0FBQWdHLEVBQUFDLFNBQUEvQixHQUFBbEUsZUFDQSxNQUFBbEwsR0FDQUosRUFBQTZJLE9BQUEsUUFBQXpJLEdBRUFrVixFQUFBL0QsU0FBQXpOLEtBQUF1SCxHQUdBLE1BQUFpSyxJQUlBdFYsRUFBQXFCLEtBQUF3TixPQUFBLFNBQUEwRyxHQUNBLEdBQUExRyxHQUFBdE8sRUFBQSxTQUFBMkIsU0FBQSxrQkFFQXFULElBQ0FoVixFQUFBLFFBQUEyQixTQUFBLG9CQUNBM0IsRUFBQSxRQUFBeUQsT0FBQTZLLEtBRUF0TyxFQUFBLFFBQUE0QixZQUFBLG9CQUNBNUIsRUFBQSxvQkFBQTJCLFNBQUEsbUJBQUFvRyxRQUFBLElBQUEsV0FDQS9ILEVBQUEwQixNQUFBZ0IsYUFLQWpELEVBQUFxQixLQUFBRSxRQUFBLFdBQ0EsR0FBQUEsR0FBQSwwQkFDQUEsSUFBQSwwQ0FDQUEsR0FBQSwwSkFDQUEsR0FBQSw4REFDQUUsUUFBQUMsSUFBQUgsSUFHQXZCLEdBR0FEIiwiZmlsZSI6ImRyb3BjaG9wLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIGRjID0gZGMgfHwge307XG4gIGRjLnZlcnNpb24gPSAnMC4xJztcbiAgZGMuaW5pdCA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICBpZighb3B0cykge1xuICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignTm8gb3B0aW9ucyBwcm92aWRlZCBpbiBkcm9wY2hvcC5pbml0KCknKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgZGMub3B0aW9ucyA9IG9wdHM7XG5cbiAgICBpZighJChvcHRzLmlkKS5sZW5ndGgpIHtcbiAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ0VsZW1lbnQgd2l0aCBvcHRpb25zLmlkIGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICBkYy4kZWxlbSA9ICQob3B0cy5pZCk7XG5cbiAgICAvLyBzZXR1cCBsYXllcnNcbiAgICBkYy5sYXllcnMucHJlcGFyZSgpO1xuXG4gICAgLy8gc2V0dXAgbWFwXG4gICAgZGMubWFwLmluaXQoKTtcblxuICAgIC8vIHNldHVwIHNlbGVjdGlvblxuICAgIGRjLnNlbGVjdGlvbi5pbml0KCk7XG5cbiAgICAvLyBzZXR1cCBsYXllcmxpc3RcbiAgICBkYy5sYXllcmxpc3QuaW5pdCgnbGF5ZXJsaXN0Jyk7XG5cbiAgICAvLyBzZXR1cCBkcm9wem9uZVxuICAgIGRjLmRyb3B6b25lKCQoJ2JvZHknKSk7XG5cbiAgICAvLyBzZXR1cCBvcGVyYXRpb25zXG4gICAgZGMub3BzLmluaXQoKTtcblxuICAgIC8vIHNldHVwIGZvcm1zXG4gICAgZGMuZm9ybS5pbml0KCk7XG5cbiAgICAvLyBnZXQgVVJMIGluZm9ybWF0aW9uIGlmIGl0IGV4aXN0c1xuICAgIGlmKGxvY2F0aW9uLnNlYXJjaC5sZW5ndGgpIHtcbiAgICAgIGRjLnV0aWwuZXhlY3V0ZVVybFBhcmFtcygpO1xuICAgIH1cblxuICAgIGRjLnV0aWwud2VsY29tZSgpO1xuXG4gIH07XG5cbiAgZGMuYm9vbSA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdzaGFrYWxha2EnKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGRyb3B6b25lLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGFpbmVyIGVsZW1lbnQgKGxldHMgZG8gZG9jdW1lbnQuYm9keSlcbiAgICovXG4gIGRjLmRyb3B6b25lID0gZnVuY3Rpb24oJGNvbnRhaW5lcikge1xuICAgIF9ldmVudHMoJGNvbnRhaW5lcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gX2V2ZW50cygkY29udGFpbmVyKSB7XG4gICAgJGNvbnRhaW5lci5vbignZHJhZ292ZXInLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICB9KTtcblxuICAgICRjb250YWluZXIub24oJ2RyYWdsZWF2ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgIH0pO1xuXG4gICAgJGNvbnRhaW5lci5vbignZHJvcCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgICAgdmFyIGZpbGVzID0gZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgICAkKGZpbGVzKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgZGMudXRpbC5yZWFkRmlsZShmaWxlc1tpXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmZvcm0gPSBkYy5mb3JtIHx8IHt9O1xuICBkYy5mb3JtLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignZm9ybTpnZW8nLCBkYy5mb3JtLmdlbyk7XG4gICAgJChkYykub24oJ2Zvcm06ZmlsZScsIGRjLmZvcm0uZmlsZSk7XG4gIH07XG5cbiAgZGMuZm9ybS5nZW8gPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uKSB7XG4gICAgZGMuZm9ybS5jcmVhdGUob3BlcmF0aW9uLCBkYy5vcHMuZ2VvW29wZXJhdGlvbl0sICdnZW8nKTtcbiAgfTtcblxuICBkYy5mb3JtLmZpbGUgPSBmdW5jdGlvbihldmVudCwgb3BlcmF0aW9uKSB7XG4gICAgZGMuZm9ybS5jcmVhdGUob3BlcmF0aW9uLCBkYy5vcHMuZmlsZVtvcGVyYXRpb25dLCAnZmlsZTonICsgb3BlcmF0aW9uKTtcbiAgfTtcblxuICBkYy5mb3JtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIGluZm8sIHRyaWdnZXIpIHtcbiAgICBkYy5mb3JtLnJlbW92ZSgpO1xuICAgIHZhciAkaHRtbCA9ICQoJzxmb3JtPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtIGRyb3BjaG9wLWZvcm0tJyt0cmlnZ2VyKVxuICAgICAgLmF0dHIoJ2lkJywgJ2Ryb3BjaG9wLWZvcm0nKVxuICAgICAgLmF0dHIoJ2RhdGEnLCBuYW1lKTtcbiAgICB2YXIgJHRpdGxlID0gJCgnPGgyPicpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXRpdGxlJykudGV4dChuYW1lKS5hcHBlbmRUbygkaHRtbCk7XG4gICAgdmFyICRkZXNjID0gJCgnPHA+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tZGVzY3JpcHRpb24nKS50ZXh0KGluZm8uZGVzY3JpcHRpb24pLmFwcGVuZFRvKCRodG1sKTtcblxuICAgIC8vIGNyZWF0ZSBwYXJhbXNcbiAgICBpZihpbmZvLnBhcmFtZXRlcnMpIHtcbiAgICAgICQoaW5mby5wYXJhbWV0ZXJzKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcCA9IGRjLmZvcm0uY3JlYXRlUGFyYW0odGhpcyk7XG4gICAgICAgIHAuYXBwZW5kVG8oJGh0bWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIHN1Ym1pdCBidXR0b25cbiAgICB2YXIgJHN1Ym1pdCA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWJ0biBkcm9wY2hvcC1idG4tZ3JlZW4gZHJvcGNob3AtZm9ybS1zdWJtaXQnKS50ZXh0KCdFeGVjdXRlJykuYXR0cignZm9yJywgbmFtZSk7XG4gICAgdmFyICRjYW5jZWwgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdkcm9wY2hvcC1idG4gZHJvcGNob3AtYnRuLWNhbmNlbCBkcm9wY2hvcC1mb3JtLWNhbmNlbCcpLnRleHQoJ0NhbmNlbCcpLmF0dHIoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgJGNhbmNlbC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGRjLmZvcm0ucmVtb3ZlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgJGh0bWwub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gZ2V0IHRoZSBwYXJhbWV0ZXJzIGZyb20gdGhlIGZvcm1cbiAgICAgIHZhciBwYXJhbWV0ZXJzID0gW107XG4gICAgICB2YXIgZGF0YSA9ICQodGhpcykuc2VyaWFsaXplQXJyYXkoKTtcbiAgICAgICQoZGF0YSkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHBhcmFtZXRlcnMucHVzaChkYXRhW2ldLnZhbHVlKTtcbiAgICAgIH0pO1xuICAgICAgJChkYykudHJpZ2dlcignb3BlcmF0aW9uOicgKyB0cmlnZ2VyLCBbbmFtZSwgcGFyYW1ldGVyc10pO1xuICAgICAgZGMuZm9ybS5yZW1vdmUoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICAkaHRtbC5hcHBlbmQoJHN1Ym1pdCk7XG4gICAgJGh0bWwuYXBwZW5kKCRjYW5jZWwpO1xuXG4gICAgZGMuJGVsZW0uYXBwZW5kKCRodG1sKTtcbiAgICAvLyBzdWJtaXQgYnV0dG9uIG5lZWRzIHRyaWdnZXIgb3BlcmF0aW9uOmdlbyB3aXRoIG9wIGFuZCBwYXJhbWV0ZXIgYXJyYXlcbiAgfTtcblxuICBkYy5mb3JtLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgICQoJyNkcm9wY2hvcC1mb3JtJykucmVtb3ZlKCk7XG4gIH07XG5cbiAgZGMuZm9ybS5jcmVhdGVQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgdmFyICRpbnB1dCA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWZvcm0tcGFyYW1ldGVyJyk7XG4gICAgdmFyICRsYWJlbCA9ICQoJzxsYWJlbD4nKS50ZXh0KHBhcmFtLm5hbWUpLmFkZENsYXNzKCdkcm9wY2hvcC1mb3JtLXBhcmFtZXRlci1sYWJlbCcpO1xuICAgIHZhciAkZmllbGQgPSBkYy5mb3JtLmlucHV0c1twYXJhbS50eXBlXShwYXJhbSk7XG4gICAgJGZpZWxkLmFwcGVuZFRvKCRsYWJlbCk7XG4gICAgaWYocGFyYW0uZGVzY3JpcHRpb24ubGVuZ3RoKSB7XG4gICAgICAkKCc8cD4nKS5hZGRDbGFzcygnZHJvcGNob3AtZm9ybS1wYXJhbWV0ZXItZGVzY3JpcHRpb24nKS5odG1sKHBhcmFtLmRlc2NyaXB0aW9uKS5hcHBlbmRUbygkbGFiZWwpO1xuICAgIH1cbiAgICAkaW5wdXQuYXBwZW5kKCRsYWJlbCk7XG4gICAgcmV0dXJuICRpbnB1dDtcbiAgfTtcblxuICBkYy5mb3JtLmlucHV0cyA9IHtcbiAgICBudW1iZXI6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ251bWJlcicpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc2VsZWN0OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8c2VsZWN0PicpLmF0dHIoJ25hbWUnLCBwLm5hbWUpO1xuICAgICAgJChwLm9wdGlvbnMpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgJG9wdCA9ICQoJzxvcHRpb24+JykudGV4dChwLm9wdGlvbnNbaV0pXG4gICAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5vcHRpb25zW2ldKTtcbiAgICAgICAgJG9wdC5hcHBlbmRUbygkaSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIHRleHQ6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHZhciAkaSA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ3RleHQnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSlcbiAgICAgICAgLmF0dHIoJ3ZhbHVlJywgcC5kZWZhdWx0KTtcbiAgICAgIHJldHVybiAkaTtcbiAgICB9LFxuICAgIGNoZWNrYm94OiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8aW5wdXQ+JykuYXR0cigndHlwZScsICdjaGVja2JveCcpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKVxuICAgICAgICAuYXR0cigndmFsdWUnLCBwLmRlZmF1bHQpO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgc3dpdGNoOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpO1xuICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciAkbGJsID0gJCgnPGxhYmVsPicpXG4gICAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgICAgdmFyICRvcHQgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgICAgLnZhbCgnc3dpdGNoLScgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcClcbiAgICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAgICRvcHQuYXBwZW5kVG8oJGxibCk7XG4gICAgICAgICRsYmwuYXBwZW5kKGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUpO1xuICAgICAgICAkbGJsLmFwcGVuZFRvKCRpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpO1xuICAgIH0sXG4gICAgcmVjdXJzaXZlOiBmdW5jdGlvbihwKSB7XG4gICAgICB2YXIgJGkgPSAkKCc8ZGl2PicpO1xuXG4gICAgICB2YXIgJGxibDEgPSAkKCc8bGFiZWw+JylcbiAgICAgICAgLmFkZENsYXNzKCdzdWItbGFiZWwnKTtcbiAgICAgIHZhciAkb3B0MSA9ICQoJzxpbnB1dD4nKVxuICAgICAgICAuYXR0cigndHlwZScsICdyYWRpbycpXG4gICAgICAgIC52YWwoJ3RydWUnKVxuICAgICAgICAuYXR0cignbmFtZScsIHAubmFtZSk7XG4gICAgICAkb3B0MS5hcHBlbmRUbygkbGJsMSk7XG4gICAgICAkbGJsMS5hcHBlbmQoJ0luZGl2aWR1YWwgZmVhdHVyZXMnKTtcblxuICAgICAgdmFyICRsYmwyID0gJCgnPGxhYmVsPicpXG4gICAgICAgIC5hZGRDbGFzcygnc3ViLWxhYmVsJyk7XG4gICAgICB2YXIgJG9wdDIgPSAkKCc8aW5wdXQ+JylcbiAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmFkaW8nKVxuICAgICAgICAudmFsKCdmYWxzZScpXG4gICAgICAgIC5hdHRyKCduYW1lJywgcC5uYW1lKTtcbiAgICAgICRvcHQyLmFwcGVuZFRvKCRsYmwyKTtcbiAgICAgICRsYmwyLmFwcGVuZCgnRW50aXJlIGNvbGxlY3Rpb24nKTtcblxuICAgICAgJGxibDEuYXBwZW5kVG8oJGkpO1xuICAgICAgJGxibDIuYXBwZW5kVG8oJGkpO1xuXG4gICAgICByZXR1cm4gJGk7XG4gICAgfVxuICB9O1xuXG4gIC8vIGRjLmZvcm0uZ2V0VmFsdWVzID0gZnVuY3Rpb24oJGZvcm0pIHtcbiAgLy8gICB2YXIgdmFsdWVzID0gW107XG4gIC8vICAgY29uc29sZS5sb2coJGZvcm0pO1xuICAvLyAgIHJldHVybiB2YWx1ZXM7XG4gIC8vIH07XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubGF5ZXJsaXN0ID0ge307XG4gIGRjLmxheWVybGlzdC5lbGVtcyA9IHt9O1xuXG4gIGRjLmxheWVybGlzdC5pbml0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRjLmxheWVybGlzdC4kZWxlbSA9ICQoJzxvbD4nKS5hZGRDbGFzcyhuYW1lKTtcbiAgICBkYy4kZWxlbS5hcHBlbmQoZGMubGF5ZXJsaXN0LiRlbGVtKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0ub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICgkKGV2ZW50LnRhcmdldCkuaGFzQ2xhc3MobmFtZSkpIHtcbiAgICAgICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgbGlIZWxwZXIgPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ2xheWVyLWhlbHAnKVxuICAgICAgLmh0bWwoJ1dlbGNvbWUgdG8gPHN0cm9uZz5kcm9wY2hvcDwvc3Ryb25nPiEgSGVyZSB5b3UgY2FuIGRyYWcgYW5kIGRyb3AgZmlsZXMgYW5kIHRoZXkgd2lsbCBzaG93IHVwIGluIHRoZSBsYXllciBsaXN0IGJlbG93Ljxicj48YnI+VG8gdGhlIGxlZnQgeW91IGNhbiB1cGxvYWQgYW5kIHNhdmUgeW91ciBmaWxlcyBvciA8YSBocmVmPVwiLz9naXN0PTA5MTI5YzIwZWMwMjBiODNiZjg1XCI+YWRkIGV4YW1wbGUgZGF0YTwvYT4gb3IgdGhlIDxhIGhyZWY9XCIvP2dpc3Q9ZDA2NmI1NzJlOGE4YWQyYjZkMTZcIj5VUyBTdGF0ZXM8L2E+Ljxicj48YnI+VG8gdGhlIHJpZ2h0IHlvdVxcJ2xsIG5vdGljZSBzb21lIGdlb3NwYXRpYWwgb3BlcmF0aW9ucyB0aGF0IGJlY29tZSBhdmFpbGFibGUgYmFzZWQgb24gc2VsZWN0aW5nIHNwZWNpZmljIGxheWVycy4nICk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZChsaUhlbHBlcik7XG5cbiAgICB2YXIgdG9nZ2xlTGF5ZXJzID0gJCgnPGxpPicpLmFkZENsYXNzKCdsYXllci10b2dnbGVBbGwnKVxuICAgICAgLmh0bWwoJzxsYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD5Ub2dnbGUgYWxsIGxheWVyczwvbGFiZWw+Jyk7XG4gICAgdG9nZ2xlTGF5ZXJzLm9uKCdjaGFuZ2UnLCBkYy5sYXllcmxpc3QudG9nZ2xlQWxsKTtcbiAgICBkYy5sYXllcmxpc3QuJGVsZW0uYXBwZW5kKHRvZ2dsZUxheWVycyk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6YWRkZWQnLCBkYy5sYXllcmxpc3QuYWRkTGF5ZXJMaXN0SXRlbSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbW92ZWQnLCBkYy5sYXllcmxpc3QucmVtb3ZlTGF5ZXJMaXN0SXRlbSk7XG4gICAgJChkYykub24oJ2xheWVyOnJlbmFtZWQnLCBkYy5sYXllcmxpc3QucmVuYW1lKTtcbiAgfTtcblxuICBkYy5sYXllcmxpc3QucmVuYW1lID0gZnVuY3Rpb24oZXZlbnQsIHN0YW1wLCBuZXdOYW1lKSB7XG4gICAgJCgnW2RhdGEtc3RhbXA9JytzdGFtcCsnXScpLmZpbmQoJy5sYXllci1uYW1lJykudGV4dChuZXdOYW1lKTtcbiAgfTtcblxuICAvLyB0cmlnZ2VyZWQgaW4gZHJvcGNob3AuanNcbiAgZGMubGF5ZXJsaXN0LmFkZExheWVyTGlzdEl0ZW0gPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgbGF5ZXJsaXN0SXRlbSA9ICQoJzxsaT4nKS5hZGRDbGFzcygnbGF5ZXItZWxlbWVudCcpLmF0dHIoJ2RhdGEtc3RhbXAnLCBsYXllci5zdGFtcCk7XG4gICAgdmFyIGxheWVyRGl2ID0gJCgnPGRpdj4nKVxuICAgICAgLmFkZENsYXNzKCdsYXllci1uYW1lIGxheWVyLW5ldycpXG4gICAgICAudGV4dChsYXllci5uYW1lKVxuICAgICAgLmRlbGF5KDMwMDApXG4gICAgICAucXVldWUoZnVuY3Rpb24obmV4dCkge1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdsYXllci1uZXcnKTtcbiAgICAgIH0pO1xuXG4gICAgXG4gICAgdmFyIGxheWVyVHlwZSA9ICQoJzxzcGFuPicpLmFkZENsYXNzKCdsYXllci10eXBlLWltYWdlIHNwcml0ZSBzcHJpdGUtbGF5ZXItJytsYXllclR5cGVJY29uKGxheWVyLnR5cGUpKTtcbiAgICB2YXIgY2hlY2tib3ggPSAkKCc8aW5wdXQ+JykuYWRkQ2xhc3MoJ2xheWVyLXRvZ2dsZScpLnByb3Aoeyd0eXBlJzogJ2NoZWNrYm94JywgJ2NoZWNrZWQnOiB0cnVlfSk7XG4gICAgdmFyIHJlbW92ZSA9ICQoJzxidXR0b24+JykuYWRkQ2xhc3MoJ2xheWVyLWFjdGlvbiBsYXllci1yZW1vdmUnKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCI+PC9pPicpO1xuICAgIHZhciBkdXBsaWNhdGUgPSAkKCc8YnV0dG9uPicpLmFkZENsYXNzKCdsYXllci1hY3Rpb24gbGF5ZXItZHVwbGljYXRlJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1maWxlcy1vXCI+PC9pPicpO1xuXG4gICAgZHVwbGljYXRlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6ZHVwbGljYXRlJywgWyQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgXG4gICAgcmVtb3ZlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlJywgWyQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpXSk7XG4gICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBcbiAgICBjaGVja2JveC5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgLy8gdHJpZ2dlciBsYXllcjpzaG93XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNob3cnLCBbbGF5ZXJdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOmhpZGUnLCBbbGF5ZXJdKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxheWVyRGl2Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgIC8vIGNoZWNrIGZvciBrZXlzIGJlaW5nIGhlbGQgZm9yIHNwZWNpYWwgc2VsZWN0aW9uXG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgLy8gc2VsZWN0IGFsbCBsYXllcmVzIGluIGJldHdlZW4gcHJldmlvdXMgdGFyZ2V0IGFuZCB0YXJnZXRcbiAgICAgICAgLy8gbm90ZTogZG9uJ3QgdW5zZWxlY3QgbGF5ZXJzIGFscmVhZHkgc2VsZWN0ZWQsIGp1c3QgYWRkIHRvIHNlbGVjdGlvblxuICAgICAgICB2YXIgdG9TZWxlY3QgPSBbXTtcbiAgICAgICAgdmFyIHRvID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIGZyb20gPSBkYy5sYXllcmxpc3QuX2xhc3RTZWxlY3RlZDtcbiAgICAgICAgdmFyIHRvQ291bnQsIGZyb21Db3VudDtcblxuICAgICAgICAkKCcubGF5ZXItZWxlbWVudCcpLmVhY2goZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHZhciBjaGVjayA9ICQodGhpcykuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIHZhciB0b1N0YW1wID0gdG8ucGFyZW50KCkuYXR0cignZGF0YS1zdGFtcCcpO1xuICAgICAgICAgIHZhciBmcm9tU3RhbXAgPSBmcm9tLnBhcmVudCgpLmF0dHIoJ2RhdGEtc3RhbXAnKTtcbiAgICAgICAgICBpZiAoY2hlY2sgPT09IHRvU3RhbXApIHRvQ291bnQgPSBlO1xuICAgICAgICAgIGlmIChjaGVjayA9PT0gZnJvbVN0YW1wKSBmcm9tQ291bnQgPSBlO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZyh0b0NvdW50LCBmcm9tQ291bnQpO1xuICAgICAgICBpZiAodG9Db3VudCA+IGZyb21Db3VudCkge1xuICAgICAgICAgIC8vIGxvb3AgdXBcbiAgICAgICAgICAkKCcubGF5ZXItZWxlbWVudCcpLmVhY2goZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgaWYgKGwgPj0gZnJvbUNvdW50ICYmIGwgPD0gdG9Db3VudCApIHtcbiAgICAgICAgICAgICAgZGMubGF5ZXJsaXN0LnNlbGVjdExheWVyKCQodGhpcykuZmluZCgnLmxheWVyLW5hbWUnKSwgZGMubGF5ZXJzLmxpc3RbJCh0aGlzKS5hdHRyKCdkYXRhLXN0YW1wJyldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKCcubGF5ZXItZWxlbWVudCcpLmVhY2goZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgaWYgKGwgPCBmcm9tQ291bnQgJiYgbCA+PSB0b0NvdW50ICkge1xuICAgICAgICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0TGF5ZXIoJCh0aGlzKS5maW5kKCcubGF5ZXItbmFtZScpLCBkYy5sYXllcnMubGlzdFskKHRoaXMpLmF0dHIoJ2RhdGEtc3RhbXAnKV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgICAgLy8gYWRkL3JlbW92ZSBzZWxlY3RlZCBsYXllciB0byBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0VG9nZ2xlKCQodGhpcyksIGxheWVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNsZWFyIHNlbGVjdGlvbiBhbmQgc2VsZWN0IHRhcmdldFxuICAgICAgICBkYy5sYXllcmxpc3QuY2xlYXJTZWxlY3Rpb24oJCh0aGlzKSwgbGF5ZXIpO1xuICAgICAgICBkYy5sYXllcmxpc3Quc2VsZWN0VG9nZ2xlKCQodGhpcyksIGxheWVyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGxheWVyRGl2KTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChjaGVja2JveCk7XG4gICAgbGF5ZXJsaXN0SXRlbS5hcHBlbmQobGF5ZXJUeXBlKTtcbiAgICBsYXllcmxpc3RJdGVtLmFwcGVuZChyZW1vdmUpO1xuICAgIGxheWVybGlzdEl0ZW0uYXBwZW5kKGR1cGxpY2F0ZSk7XG4gICAgZGMubGF5ZXJsaXN0LiRlbGVtLmFwcGVuZChsYXllcmxpc3RJdGVtKTtcblxuICAgIGRjLmxheWVybGlzdC5lbGVtc1tsYXllci5zdGFtcF0gPSBsYXllcmxpc3RJdGVtO1xuXG4gICAgLy8gaGlkZSBoZWxwZXIgdGV4dFxuICAgICQoJy5sYXllci1oZWxwJykuaGlkZSgpO1xuICAgICQoJy5sYXllci10b2dnbGVBbGwnKS5zaG93KCk7XG4gIH07XG5cbiAgZGMubGF5ZXJsaXN0LnNlbGVjdExheWVyID0gZnVuY3Rpb24oJGl0ZW0sIGx5cikge1xuICAgIGlmICghJGl0ZW0uaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICRpdGVtLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6c2VsZWN0ZWQnLCBbbHlyXSk7XG4gICAgfVxuICB9O1xuICBkYy5sYXllcmxpc3Quc2VsZWN0VG9nZ2xlID0gZnVuY3Rpb24oJGl0ZW0sIGx5cikge1xuICAgIGlmICgkaXRlbS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xuICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjp1bnNlbGVjdGVkJywgW2x5cl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAkaXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnNlbGVjdGVkJywgW2x5cl0pO1xuICAgIH1cbiAgICBkYy5sYXllcmxpc3QuX2xhc3RTZWxlY3RlZCA9ICRpdGVtO1xuICB9O1xuICBkYy5sYXllcmxpc3QuY2xlYXJTZWxlY3Rpb24gPSBmdW5jdGlvbigkaXRlbSwgbHlyKSB7XG4gICAgZGMuc2VsZWN0aW9uLmNsZWFyKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbGF5ZXJUeXBlSWNvbih0eXBlKSB7XG4gICAgdmFyIGljb247XG4gICAgc3dpdGNoKHR5cGUpIHtcbiAgICAgIGNhc2UgJ0ZlYXR1cmVDb2xsZWN0aW9uJzpcbiAgICAgICAgaWNvbiA9ICdmZWF0dXJlY29sbGVjdGlvbic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxQb2ludD4nOiBcbiAgICAgIGNhc2UgJ0ZlYXR1cmU8TXVsdGlQb2ludD4nOiBcbiAgICAgICAgaWNvbiA9ICdwb2ludCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxMaW5lU3RyaW5nPic6IFxuICAgICAgY2FzZSAnRmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+JzogXG4gICAgICAgIGljb24gPSAnbGluZSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxQb2x5Z29uPic6IFxuICAgICAgY2FzZSAnRmVhdHVyZTxNdWx0aVBvbHlnb24+JzogXG4gICAgICAgIGljb24gPSAncG9seWdvbic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRmVhdHVyZTxHZW9tZXRyeUNvbGxlY3Rpb24+JzogXG4gICAgICAgIGljb24gPSAnZ2VvbSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWNvbiA9ICdkZWZhdWx0JztcbiAgICAgICAgYnJlYWs7IFxuICAgIH1cbiAgICByZXR1cm4gaWNvbjtcbiAgfVxuXG4gIGRjLmxheWVybGlzdC50b2dnbGVBbGwgPSBmdW5jdGlvbihldmVudCkge1xuICAgIC8vIHR1cm4gdGhlbSBvblxuICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0JykucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICBmb3IgKHZhciBpIGluIGRjLmxheWVycy5saXN0KSB7XG4gICAgICAgIGVsZW1Ub2dnbGUoZGMubGF5ZXJzLmxpc3RbaV0uc3RhbXAsIHRydWUpO1xuICAgICAgfVxuICAgIC8vIHR1cm4gdGhlbSBvZmZcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgbyBpbiBkYy5sYXllcnMubGlzdCkge1xuICAgICAgICBlbGVtVG9nZ2xlKGRjLmxheWVycy5saXN0W29dLnN0YW1wLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWxlbVRvZ2dsZShzdGFtcCwgYm9vbCkge1xuICAgICAgJCgnLmxheWVyLWVsZW1lbnRbZGF0YS1zdGFtcD0nK3N0YW1wKyddJylcbiAgICAgICAgLmZpbmQoJy5sYXllci10b2dnbGUnKVxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIGJvb2wpXG4gICAgICAgIC50cmlnZ2VyKCdjaGFuZ2UnKTsgLy8gc2V0cyBvZmYgYSBjaGFpbiByZWFjdGlvblxuICAgIH1cbiAgfTtcblxuICBkYy5sYXllcmxpc3QucmVtb3ZlTGF5ZXJMaXN0SXRlbSA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgICQoJ1tkYXRhLXN0YW1wPScrc3RhbXArJ10nKS5mYWRlT3V0KDMwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIGRjLmxheWVybGlzdC5lbGVtc1tzdGFtcF07XG5cbiAgICAgIC8vIHNob3cgaGVscGVyIHRleHQgaWYgbm8gbGF5ZXJzIGV4aXN0XG4gICAgICAvLyB0aGlzIGhhcyB0byBjaGVjayBpbnNpZGUgc2luY2UgdGhlcmUgaXMgYSAzMDAgbXMgZGVsYXkgd2l0aCB0aGUgZmFkZVxuICAgICAgaWYgKCQoJy5sYXllci1lbGVtZW50JykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICQoJy5sYXllci1oZWxwJykuc2hvdygpO1xuICAgICAgICAkKCcubGF5ZXItdG9nZ2xlQWxsJykuaGlkZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLmxheWVycyA9IHt9O1xuICBkYy5sYXllcnMubGlzdCA9IHt9O1xuXG4gIGRjLmxheWVycy5wcmVwYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgJChkYykub24oJ2ZpbGU6YWRkZWQnLCBkYy5sYXllcnMuYWRkKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6cmVtb3ZlJywgZGMubGF5ZXJzLnJlbW92ZSk7XG4gICAgJChkYykub24oJ2xheWVyOmR1cGxpY2F0ZScsIGRjLmxheWVycy5kdXBsaWNhdGUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW5hbWUnLCBkYy5sYXllcnMucmVuYW1lKTtcbiAgfTtcblxuLyoqXG4gKiBBZGQgYSBsYXllciB0byB0aGUgbGF5ZXJzIGxpc3QgYW5kIHRyaWdnZXIgbGF5ZXI6YWRkZWQgZm9yIHN1YnNjcmliZXJzIHRvIHBpY2sgdXAuXG4gKiBAcGFyYW0ge29iamVjdH0gZXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSBmaWxlIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGUgYmxvYiB0byBiZSBjb252ZXJ0ZWQgd2l0aCBKU09OLnBhcnNlKClcbiAqL1xuICBkYy5sYXllcnMuYWRkID0gZnVuY3Rpb24oZXZlbnQsIG5hbWUsIGJsb2IpIHtcbiAgICB2YXIgbCA9IGRjLmxheWVycy5tYWtlTGF5ZXIobmFtZSwgYmxvYik7XG4gICAgZGMubGF5ZXJzLmxpc3RbbC5zdGFtcF0gPSBsO1xuXG4gICAgZGMubm90aWZ5KCdzdWNjZXNzJywgJzxzdHJvbmc+JytsLm5hbWUrJzwvc3Ryb25nPiBoYXMgYmVlbiBhZGRlZCEnLCAzNTAwKTtcblxuICAgIC8vIHRyaWdnZXIgbGF5ZXI6YWRkZWRcbiAgICAkKGRjKS50cmlnZ2VyKCdsYXllcjphZGRlZCcsIFtsXSk7XG4gIH07XG5cbi8qKlxuICogUmVtb3ZlIGEgbGF5ZXIsIHdoaWNoIHRyaWdnZXJzIGxheWVyOnJlbW92ZWQgZm9yIHRoZSByZXN0IG9mIHRoZSBhcHBcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYXllciBzdGFtcFxuICovXG4gIGRjLmxheWVycy5yZW1vdmUgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICAvLyB0cmlnZ2VyIGxheWVyOnJlbW92ZWRcbiAgICB0cnkge1xuICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVtb3ZlZCcsIFtzdGFtcF0pO1xuICAgICAgZGMubm90aWZ5KCdpbmZvJywgJzxzdHJvbmc+JyArIGRjLmxheWVycy5saXN0W3N0YW1wXS5uYW1lICsgJzwvc3Ryb25nPiBoYXMgYmVlbiByZW1vdmVkLicpO1xuICAgICAgZGVsZXRlIGRjLmxheWVycy5saXN0W3N0YW1wXTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSByZW1vdmluZyB0aGUgbGF5ZXIuJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIFxuICB9O1xuXG4gIGRjLmxheWVycy5kdXBsaWNhdGUgPSBmdW5jdGlvbihldmVudCwgc3RhbXApIHtcbiAgICB2YXIgbHlyID0gZGMubGF5ZXJzLmxpc3Rbc3RhbXBdO1xuICAgIC8vIG5lZWQgdG8gY3JlYXRlIG5ldyBsYXllciBzbyB3ZSBjYW4gZ2V0IGEgdW5pcWUgTC5zdGFtcCgpXG4gICAgZGMubGF5ZXJzLmFkZCh7fSwgJ2NvcHlfJytseXIubmFtZSwgbHlyLnJhdyk7XG4gIH07XG5cbiAgZGMubGF5ZXJzLnJlbmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllciwgbmV3TmFtZSkge1xuICAgIC8vIHJlbmFtZSBpbiBsYXllciBvYmplY3RcbiAgICBkYy5sYXllcnMubGlzdFtsYXllci5zdGFtcF0ubmFtZSA9IG5ld05hbWU7XG5cbiAgICAvLyByZW5hbWUgaW4gbGF5ZXJsaXN0XG4gICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVuYW1lZCcsIFtsYXllci5zdGFtcCwgbmV3TmFtZV0pO1xuICB9O1xuXG4gIGRjLmxheWVycy5tYWtlTGF5ZXIgPSBmdW5jdGlvbihuYW1lLCBqc29uKSB7XG4gICAgdmFyIGdlb2pzb24gPSBqc29uO1xuICAgIC8vIGlmIChqc29uLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicgJiYganNvbi5mZWF0dXJlcy5sZW5ndGggPT09IDEpIHtcbiAgICAvLyAgIGdlb2pzb24gPSBkYy51dGlsLnVuY29sbGVjdChqc29uKTtcbiAgICAvLyB9XG5cbiAgICB2YXIgZmwgPSBMLm1hcGJveC5mZWF0dXJlTGF5ZXIoZ2VvanNvbik7XG4gICAgdmFyIGxheWVyID0ge1xuICAgICAgbmFtZTogZGMudXRpbC5yZW1vdmVGaWxlRXh0ZW5zaW9uKG5hbWUpLFxuICAgICAgc3RhbXA6IEwuc3RhbXAoZmwpLFxuICAgICAgcmF3OiBnZW9qc29uLFxuICAgICAgdHlwZTogZ2V0VHlwZShnZW9qc29uKSxcbiAgICAgIGZlYXR1cmVsYXllcjogZmwsXG4gICAgICBkYXRlQWRkZWQ6IG5ldyBEYXRlKClcbiAgICB9O1xuICAgIHJldHVybiBsYXllcjtcbiAgfTtcblxuICBmdW5jdGlvbiBnZXRUeXBlKGdqKSB7XG4gICAgaWYgKGdqLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgIHJldHVybiAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2oudHlwZSArICc8JyArIGdqLmdlb21ldHJ5LnR5cGUgKyAnPic7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRjO1xuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgZGMubWFwID0ge307XG5cbiAgZGMubWFwLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBkYy5tYXAuJGVsZW0gPSAkKCc8ZGl2PicpLnByb3AoJ2lkJywgJ2Ryb3BjaG9wLW1hcCcpLmFkZENsYXNzKCdtYXAnKTtcbiAgICBkYy4kZWxlbS5hcHBlbmQoZGMubWFwLiRlbGVtKTtcblxuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgZGMubWFwLnJlbW92ZUxheWVyKTtcblxuICAgIF9tYWtlTWFwKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gX21ha2VNYXAoKSB7XG4gICAgZGMubWFwLnRva2VuID0gTC5tYXBib3guYWNjZXNzVG9rZW4gPSAncGsuZXlKMUlqb2ljM1p0WVhSMGFHVjNjeUlzSW1FaU9pSlZNVWxVUjB4ckluMC5Od2VTX0F0dGpzd3RONXdSdVdDU05BJztcbiAgICBkYy5tYXAubSA9IEwubWFwYm94Lm1hcCgnZHJvcGNob3AtbWFwJywgbnVsbCwge1xuICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLFxuICAgICAgd29ybGRDb3B5SnVtcDogdHJ1ZVxuICAgIH0pLnNldFZpZXcoWzAsMF0sIDMpO1xuXG4gICAgLy8gc2V0cyB0aGUgbG9jYXRpb24gb2YgdGhlIHpvb20gYnV0dG9ucyB0byB0aGUgdG9wIHJpZ2h0XG4gICAgTC5jb250cm9sLnpvb20oe1xuICAgICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICAgIH0pLmFkZFRvKGRjLm1hcC5tKTtcblxuICAgIEwubWFwYm94Lmdlb2NvZGVyQ29udHJvbCgnbWFwYm94LnBsYWNlcycsIHtcbiAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9KS5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICB2YXIgYmFzZUxheWVycyA9IHtcbiAgICAgIFwiTWFwYm94IFN0cmVldHNcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3guc3RyZWV0cycpLFxuICAgICAgXCJNYXBib3ggT3V0ZG9vcnNcIjogTC5tYXBib3gudGlsZUxheWVyKCdtYXBib3gub3V0ZG9vcnMnKSxcbiAgICAgIFwiTWFwYm94IExpZ2h0XCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LmxpZ2h0JyksXG4gICAgICBcIk1hcGJveCBEYXJrXCI6IEwubWFwYm94LnRpbGVMYXllcignbWFwYm94LmRhcmsnKSxcbiAgICAgIFwiTWFwYm94IFNhdGVsbGl0ZVwiOiBMLm1hcGJveC50aWxlTGF5ZXIoJ21hcGJveC5zYXRlbGxpdGUnKVxuICAgIH07XG5cbiAgICBiYXNlTGF5ZXJzWydNYXBib3ggU3RyZWV0cyddLmFkZFRvKGRjLm1hcC5tKTtcbiAgICAvLyBzZXRzIGxvY2F0aW9uIG9mIGJhc2UgbGF5ZXIgY29udHJvbCB0byB0aGUgYm90dG9tIHJpZ2h0XG4gICAgTC5jb250cm9sLmxheWVycyhiYXNlTGF5ZXJzLCB7fSwge1xuICAgICAgcG9zaXRpb246ICdib3R0b21yaWdodCcsXG4gICAgICBjb2xsYXBzZWQ6IGZhbHNlXG4gICAgfSkuYWRkVG8oZGMubWFwLm0pO1xuXG4gICAgZGMubWFwLmxheWVyZ3JvdXAgPSBMLm1hcGJveC5mZWF0dXJlTGF5ZXIoKTtcbiAgICBkYy5tYXAubGF5ZXJncm91cC5hZGRUbyhkYy5tYXAubSk7XG5cbiAgICAkKGRjKS5vbignbGF5ZXI6YWRkZWQnLCBkYy5tYXAuYWRkTGF5ZXIpO1xuICAgICQoZGMpLm9uKCdsYXllcjpoaWRlJywgZGMubWFwLmhpZGVMYXllcik7XG4gICAgJChkYykub24oJ2xheWVyOnNob3cnLCBkYy5tYXAuc2hvd0xheWVyKTtcbiAgfVxuXG4gIGRjLm1hcC5jb3VudCA9IDA7XG5cbiAgZGMubWFwLmFkZExheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgdmFyIGZsID0gbGF5ZXIuZmVhdHVyZWxheWVyO1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLmFkZExheWVyKGZsKTtcblxuICAgIC8vIGNyZWF0ZSBwb3B1cCB0YWJsZSBmb3IgZWFjaCBmZWF0dXJlXG4gICAgZmwuZWFjaExheWVyKGZ1bmN0aW9uKGxheWVyKSB7ICAgICAgXG4gICAgICB2YXIgY29udGVudCA9ICc8dGFibGUgY2xhc3M9XCJkcm9wY2hvcC10YWJsZVwiPjx0cj48dGg+UHJvcGVydHk8L3RoPjx0aD5EYXRhPC90aD48L3RyPic7XG5cbiAgICAgIGlmIChsYXllci5mZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBsYXllci5mZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICBjb250ZW50ICs9ICc8dHI+PHRkPjxzdHJvbmc+JyArIHByb3AgKyAnPC9zdHJvbmc+PC90ZD48dGQ+JyArIGxheWVyLmZlYXR1cmUucHJvcGVydGllc1twcm9wXSArICc8L3RkPjwvdHI+JztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudCArPSAnPHA+VGhlcmUgYXJlIG5vIHByb3BlcnRpZXMgc2V0IGZvciB0aGlzIGZlYXR1cmUuPC9wPic7XG4gICAgICB9XG4gICAgICBjb250ZW50ICs9ICc8L3RhYmxlPic7XG5cbiAgICAgIGxheWVyLmJpbmRQb3B1cChMLnBvcHVwKHtcbiAgICAgICAgbWF4V2lkdGg6IDQ1MCxcbiAgICAgICAgbWF4SGVpZ2h0OiAyMDAsXG4gICAgICAgIGF1dG9QYW5QYWRkaW5nOiBbNDUsIDQ1XSxcbiAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGNob3AtcG9wdXAnXG4gICAgICB9LCBsYXllcikuc2V0Q29udGVudChjb250ZW50KSk7XG4gICAgfSk7XG5cbiAgfTtcblxuICBkYy5tYXAuaGlkZUxheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAucmVtb3ZlTGF5ZXIobGF5ZXIuZmVhdHVyZWxheWVyKTtcbiAgfTtcblxuICBkYy5tYXAuc2hvd0xheWVyID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG4gICAgZGMubWFwLmxheWVyZ3JvdXAuYWRkTGF5ZXIobGF5ZXIuZmVhdHVyZWxheWVyKTtcbiAgfTtcbiAgXG4gIGRjLm1hcC5yZW1vdmVMYXllciA9IGZ1bmN0aW9uKGV2ZW50LCBzdGFtcCkge1xuICAgIGRjLm1hcC5sYXllcmdyb3VwLnJlbW92ZUxheWVyKGRjLmxheWVycy5saXN0W3N0YW1wXS5mZWF0dXJlbGF5ZXIpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxufSkoZHJvcGNob3AgfHwge30pOyIsInZhciBkcm9wY2hvcCA9IChmdW5jdGlvbihkYykge1xuICBcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGRjID0gZGMgfHwge307XG4gIGRjLm5vdGlmeSA9IGZ1bmN0aW9uKHR5cGUsIHRleHQsIHRpbWUpIHtcbiAgICB2YXIgbm90ZSA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ25vdGlmaWNhdGlvbicpXG4gICAgICAuYWRkQ2xhc3ModHlwZSlcbiAgICAgIC5odG1sKHRleHQpO1xuXG4gICAgJChkYy4kZWxlbSkuYXBwZW5kKG5vdGUpO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIG5vdGUucmVtb3ZlKCk7XG4gICAgfSwgdGltZSB8fCAzMDAwKTtcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5vcHMgPSBkYy5vcHMgfHwge307XG5cbiAgZGMub3BzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBidWlsZCBvcHMuZ2VvIGNvbnRhaW5lclxuICAgIHZhciBnZW9Db250YWluZXIgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdvcGVyYXRpb25zLWdlbycpO1xuICAgIGRjLiRlbGVtLmFwcGVuZChnZW9Db250YWluZXIpO1xuXG4gICAgLy8gY3JlYXRlIGdlbyBidXR0b25zICYgZm9ybXNcbiAgICBmb3IgKHZhciBnZW9PcCBpbiBkYy5vcHMuZ2VvKSB7XG4gICAgICB2YXIgZ2VvQnRuID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnb3BlcmF0aW9uIG9wZXJhdGlvbi1nZW8gb3BlcmF0aW9uLWluYWN0aXZlJylcbiAgICAgICAgLmh0bWwoJzxoND4nICsgZ2VvT3AgKyAnPC9oND48cD4nICsgZGMub3BzLmdlb1tnZW9PcF0uZGVzY3JpcHRpb24gKyAnPC9wPicpXG4gICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIC5hdHRyKCdkYXRhLW9wZXJhdGlvbicsIGdlb09wKTtcbiAgICAgIGdlb0J0bi5vbignY2xpY2snLCBfZ2VvQnRuQ2xpY2spO1xuXG4gICAgICBnZW9Db250YWluZXIuYXBwZW5kKGdlb0J0bik7XG4gICAgfVxuXG4gICAgJChkYykub24oJ2xheWVyOnNlbGVjdGVkJywgZGMub3BzLmdlb0NoZWNrKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6dW5zZWxlY3RlZCcsIGRjLm9wcy5nZW9DaGVjayk7XG4gICAgLy8gJCgnLm9wZXJhdGlvbi1nZW8nKS5yZW1vdmVDbGFzcygnb3BlcmF0aW9uLWluYWN0aXZlJyk7XG4gICAgLy8gJCgnLm9wZXJhdGlvbi1nZW8nKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmdlbycsIGRjLm9wcy5nZW9FeGVjdXRlKTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC1naXN0JywgZGMub3BzLmZpbGVbJ2xvYWQtZ2lzdCddLmdldCk7XG4gICAgJChkYykub24oJ29wZXJhdGlvbjpmaWxlOmxvYWQtdXJsJywgZGMub3BzLmZpbGVbJ2xvYWQtdXJsJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6bG9hZC1vdmVycGFzcycsIGRjLm9wcy5maWxlWydsb2FkLW92ZXJwYXNzJ10uZ2V0KTtcbiAgICAkKGRjKS5vbignb3BlcmF0aW9uOmZpbGU6cmVuYW1lJywgZGMub3BzLmZpbGUucmVuYW1lLmNhbGxiYWNrKTtcblxuICAgIC8vIHNldHVwIG9wcyBmaWxlXG4gICAgdmFyIGxlZnRNZW51ID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnZHJvcGNob3AtbWVudS1sZWZ0Jyk7XG4gICAgZm9yICh2YXIgZmlsZU9wIGluIGRjLm9wcy5maWxlKSB7XG4gICAgICBpZihkYy5vcHMuZmlsZVtmaWxlT3BdLnR5cGUgPT09ICdicmVhaycpIHtcbiAgICAgICAgdmFyICRicmVha1NwYWNlID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnbWVudS1hY3Rpb24tYnJlYWsnKTtcbiAgICAgICAgbGVmdE1lbnUuYXBwZW5kKCRicmVha1NwYWNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBmaWxlQnRuID0gJCgnPGJ1dHRvbj4nKS5hZGRDbGFzcygnbWVudS1hY3Rpb24nKVxuICAgICAgICAgIC5odG1sKGRjLm9wcy5maWxlW2ZpbGVPcF0uaWNvbiB8fCAnQScpXG4gICAgICAgICAgLmF0dHIoJ2RhdGEtb3BlcmF0aW9uJywgZmlsZU9wKVxuICAgICAgICAgIC5hdHRyKCdkYXRhLXRvb2x0aXAnLCBkYy5vcHMuZmlsZVtmaWxlT3BdLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICBpZiAoZGMub3BzLmZpbGVbZmlsZU9wXS50eXBlID09PSAnaW5mbycpIGZpbGVCdG4uYWRkQ2xhc3MoJ2Ryb3BjaG9wLWluZm8nKTtcbiAgICAgICAgZmlsZUJ0bi5vbignY2xpY2snLCBfZmlsZUJ0bkNsaWNrKTtcbiAgICAgICAgbGVmdE1lbnUuYXBwZW5kKGZpbGVCdG4pO1xuICAgICAgfVxuICAgIH1cbiAgICBkYy4kZWxlbS5hcHBlbmQobGVmdE1lbnUpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9nZW9CdG5DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIG9wZXJhdGlvbiA9ICQodGhpcykuYXR0cignZGF0YS1vcGVyYXRpb24nKTtcbiAgICAvLyBpZiBvcGVyYXRpb24gcmVxdWlyZXMgbm8gcGFyYW1ldGVycywgZG9uJ3QgcmVuZGVyIGEgZm9ybVxuICAgIGlmICghZGMub3BzLmdlb1tvcGVyYXRpb25dLnBhcmFtZXRlcnMpIHtcbiAgICAgICQoZGMpLnRyaWdnZXIoJ29wZXJhdGlvbjpnZW8nLCBbb3BlcmF0aW9uLCBkYy5zZWxlY3Rpb24ubGlzdF0pO1xuICAgIC8vIG90aGVyd2lzZSByZW5kZXIgdGhlIGZvcm1cbiAgICB9IGVsc2Uge1xuICAgICAgJChkYykudHJpZ2dlcignZm9ybTpnZW8nLCBbb3BlcmF0aW9uXSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2ZpbGVCdG5DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgb3BlcmF0aW9uID0gJCh0aGlzKS5hdHRyKCdkYXRhLW9wZXJhdGlvbicpO1xuICAgIHRyeSB7XG4gICAgICBkYy5vcHMuZmlsZVtvcGVyYXRpb25dLmV4ZWN1dGUoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCAnVGhpcyBvcGVyYXRpb24gZG9lc25cXCd0IGV4aXN0IScpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgdHVyZiBmdW5jdGlvbiBiYXNlZCBvbiBidXR0b24gb3BlcmF0aW9uIGNsaWNrLlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3JpZ2luYWwgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhpcyBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0aW9uIHRvIGJlIGV4ZWN1dGVkIHZpYSB0dXJmXG4gICAqIEBwYXJhbSB7YXJyYXl9IHNlcmllcyBvZiBwYXJhbWV0ZXJzIHRvIGJlIGFwcGxpZWQgdG8gdHVyZiBvcGVyYXRpb25cbiAgICovXG4gIGRjLm9wcy5nZW9FeGVjdXRlID0gZnVuY3Rpb24oZXZlbnQsIG9wZXJhdGlvbiwgcGFyYW1ldGVycykge1xuICAgIHZhciBwcmVwID0gZGMub3BzLnByZXBhcmVUdXJmUGFyYW1zKG9wZXJhdGlvbiwgcGFyYW1ldGVycyk7XG4gICAgdmFyIHJlc3VsdCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGRjLm9wcy5nZW9bb3BlcmF0aW9uXS5leGVjdXRlKHByZXAub3B0aW9ucyk7XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGRjLm5vdGlmeSgnVGhhdCBvcGVyYXRpb24gaXNuXFwndCBwb3NzaWJsZS4gVHJ5IGNoYW5naW5nIHRoZSBvcmRlciBvZiB5b3VyIHNlbGVjdGlvbi4nKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW3ByZXAubmFtZSwgcmVzdWx0XSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgcGFyYW1ldGVycyBmb3IgZXhlY3V0aW5nIHdpdGhpbiBhIHR1cmYgZnVuY3Rpb24gdXNpbmcgLmFwcGx5KCkgLSByZXR1cm5zIGFuIGFycmF5XG4gICAqIEBwYXJhbSB7YXJyYXl9IG9wdGlvbnMgZnJvbSB0aGUgdXNlciBwYXNzZWQgZnJvbSB0aGUgb3JpZ2luYWwgZXZlbnQgdHJpZ2dlclxuICAgKi9cbiAgZGMub3BzLnByZXBhcmVUdXJmUGFyYW1zID0gZnVuY3Rpb24ob3BlcmF0aW9uLCBwYXJhbXMpIHtcbiAgICB2YXIgZGF0YSA9IHt9O1xuICAgIGRhdGEub3B0aW9ucyA9IFtdO1xuXG4gICAgdmFyIGdlb21zID0gW107XG4gICAgdmFyIG5hbWVBcnJheSA9IFtdO1xuICAgIC8vIGdldCBnZW9tZXRyeSBhcnJheSBmcm9tIHNlbGVjdGlvblxuICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgaWYgKCQuaW5BcnJheSgnc3dpdGNoLScgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5zdGFtcCwgcGFyYW1zKSA9PT0gLTEpIHtcbiAgICAgICAgZ2VvbXMucHVzaChkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2VvbXMudW5zaGlmdChkYy5zZWxlY3Rpb24ubGlzdFtpXS5yYXcpO1xuICAgICAgfVxuICAgICAgbmFtZUFycmF5LnB1c2goZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSk7XG4gICAgfSk7XG5cbiAgICAvLyBtZXJnZSBwYXJhbXMgd2l0aCBvcHRpb25zIGFycmF5XG4gICAgZGF0YS5vcHRpb25zID0gJC5tZXJnZShnZW9tcywgcGFyYW1zKTtcblxuICAgIC8vIGNyZWF0ZSBuYW1lIGFycmF5XG4gICAgZGF0YS5uYW1lID0gZGMudXRpbC5jb25jYXQobmFtZUFycmF5LCAnXycsIG9wZXJhdGlvbik7XG4gICAgXG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgZGMub3BzLmdlb0NoZWNrID0gZnVuY3Rpb24oZXZlbnQsIGxheWVyKSB7XG5cbiAgICAvLyBjaGVjayBzZWxlY3Rpb24gY291bnQgdnMgb3BlcmF0aW9uIG1pbi9tYXhcbiAgICBmb3IgKHZhciBvIGluIGRjLm9wcy5nZW8pIHtcbiAgICAgIHZhciBvcCA9IGRjLm9wcy5nZW9bb107XG4gICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID4gb3AubWF4RmVhdHVyZXMgfHwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoIDwgb3AubWluRmVhdHVyZXMpIHtcbiAgICAgICAgdHVybkl0T2ZmKG8pO1xuICAgICAgICAvLyBkb24ndCBnbyBhbnkgZnVydGhlclxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICAvLyBjaGVjayBvcGVyYXRpb24gYWdhaW5zdCBlYWNoIHNlbGVjdGlvbiBkYXRhIHR5cGVcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBkYy5zZWxlY3Rpb24ubGlzdC5sZW5ndGg7IHgrKykge1xuICAgICAgICAgIHZhciBzZWwgPSBkYy5zZWxlY3Rpb24ubGlzdFt4XTtcblxuICAgICAgICAgIC8vIGlmIHRoZSBzZWxlY3Rpb24gdHlwZSBpcyBpbiB0aGUgYXJyYXksIG1hcmsgaXQgYXMgYWN0aXZlIVxuICAgICAgICAgIGlmICgkLmluQXJyYXkoc2VsLnR5cGUsIG9wLnJlcXVpcmVtZW50cy50eXBlcykgPiAtMSB8fCBvcC5yZXF1aXJlbWVudHMuZ2VuZXJhbEZlYXR1cmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHR1cm5JdE9uKG8pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0dXJuSXRPZmYobyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0dXJuSXRPZmYob3ApIHtcbiAgICAgIHZhciBidG4gPSAkKCdbZGF0YS1vcGVyYXRpb249Jysgb3AgKyddJyk7XG4gICAgICBidG4uYWRkQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICAgYnRuLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHVybkl0T24ob3ApIHtcbiAgICAgIHZhciBidG4gPSAkKCdbZGF0YS1vcGVyYXRpb249Jysgb3AgKyddJyk7XG4gICAgICBidG4ucmVtb3ZlQ2xhc3MoJ29wZXJhdGlvbi1pbmFjdGl2ZScpO1xuICAgICAgYnRuLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5vcHMgPSBkYy5vcHMgfHwge307XG5cbiAgZGMub3BzLmZpbGUgPSB7XG4gICAgdXBsb2FkOiB7XG4gICAgICBkZXNjcmlwdGlvbjogJ1VwbG9hZCBmcm9tIHlvdXIgY29tcHV0ZXIgKC5nZW9qc29uKScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS11cGxvYWRcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBpbnNwaXJlZCBmcm9tIGdlb2pzb24uaW9cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9nZW9qc29uLmlvL2Jsb2IvZ2gtcGFnZXMvc3JjL3VpL2ZpbGVfYmFyLmpzI0wzOTBcbiAgICAgICAgdmFyICRibGluZElucHV0ID0gJCgnPGlucHV0PicpXG4gICAgICAgICAgLmF0dHIoJ3R5cGUnLCAnZmlsZScpXG4gICAgICAgICAgLmF0dHIoJ211bHRpcGxlJywgJ3RydWUnKVxuICAgICAgICAgIC5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJylcbiAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpXG4gICAgICAgICAgLmNzcygnaGVpZ2h0JywgJzAnKVxuICAgICAgICAgIC5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLmZpbGVzO1xuICAgICAgICAgICAgJChmaWxlcykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgIC8vIHZhciBleHQgPSBkYy51dGlsLmdldEZpbGVFeHRlbnNpb24oZmlsZXNbaV0ubmFtZSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyAvLyBpZiBpdCBpcyBhIHNoYXBlZmlsZSBvciB6aXAgZmlsZVxuICAgICAgICAgICAgICAvLyBpZiAoZXh0ID09PSAnc2hwJyB8fCBleHQgPT09ICd6aXAnKSB7XG4gICAgICAgICAgICAgIC8vICAgLy8gdXBsb2FkIGEgc2hhcGVmaWxlIGFuZCBhZGQgdGhlIGxheWVyXG4gICAgICAgICAgICAgIC8vICAgZGMudXRpbC5yZWFkU2hwRmlsZVxuICAgICAgICAgICAgICAvLyAgIHNocChcImZpbGVzL3BhbmRyXCIpLnRoZW4oZnVuY3Rpb24oZ2VvanNvbil7XG4gICAgICAgICAgICAgIC8vICAgICAvL2RvIHNvbWV0aGluZyB3aXRoIHlvdXIgZ2VvanNvbiBcbiAgICAgICAgICAgICAgLy8gICB9KTtcbiAgICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYy51dGlsLnJlYWRGaWxlKGZpbGVzW2ldKTtcbiAgICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRibGluZElucHV0LnJlbW92ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRibGluZElucHV0KTtcbiAgICAgICAgJGJsaW5kSW5wdXQuY2xpY2soKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ2xvYWQtdXJsJzoge1xuICAgICAgZGVzY3JpcHRpb246ICdJbXBvcnQgZmlsZSBmcm9tIGEgVVJMJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpbmtcIj48L2k+JyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1cmwnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonVVJMJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgZGVmYXVsdDogJ2h0dHA6Ly8nLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtdXJsJ10pO1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24oZXZlbnQsIG5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIHVybCA9IHBhcmFtZXRlcnNbMF07XG4gICAgICAgIGRjLnV0aWwueGhyKHVybCwgZGMub3BzLmZpbGVbbmFtZV0uY2FsbGJhY2spO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih4aHIsIHhockV2ZW50KSB7XG4gICAgICAgIGRyb3BjaG9wLnV0aWwubG9hZGVyKGZhbHNlKTtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAvLyBnZXQgZmlsZW5hbWUgYmFzZWQgb24gdGhlIGVuZCBvZiB0aGUgdXJsIC0gbm90IHN1cmUgaWYgdGhpcyBpcyBzdXN0YWluYWJsZVxuICAgICAgICAgIHZhciBuYW1lID0geGhyLnJlc3BvbnNlVVJMLnN1YnN0cmluZyh4aHIucmVzcG9uc2VVUkwubGFzdEluZGV4T2YoJy8nKSsxKTtcbiAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW25hbWUsIGRhdGFdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCByZXRyaWV2ZSBHaXN0LiBQbGVhc2UgY2hlY2sgeW91ciBVUkwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnbG9hZC1naXN0Jzoge1xuICAgICAgZGVzY3JpcHRpb246ICdJbXBvcnQgZmlsZXMgZnJvbSBHaXN0JyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWdpdGh1YlwiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2dpc3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonR2lzdCBJRCBvciBVUkwnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vJ1xuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtZ2lzdCddKTtcbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uKGV2ZW50LCBuYW1lLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBnaXN0ID0gcGFyYW1ldGVyc1swXS5zcGxpdCgnLycpW3BhcmFtZXRlcnNbMF0uc3BsaXQoJy8nKS5sZW5ndGgtMV07XG4gICAgICAgIHZhciB1cmwgPSAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9naXN0cy8nICsgZ2lzdDtcbiAgICAgICAgZGMudXRpbC54aHIodXJsLCBkYy5vcHMuZmlsZVtuYW1lXS5jYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHhociwgeGhyRXZlbnQpIHtcbiAgICAgICAgZHJvcGNob3AudXRpbC5sb2FkZXIoZmFsc2UpO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIGZvciAodmFyIGYgaW4gZGF0YS5maWxlcykge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBkYXRhLmZpbGVzW2ZdLmZpbGVuYW1lO1xuICAgICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtuYW1lLCBKU09OLnBhcnNlKGRhdGEuZmlsZXNbZl0uY29udGVudCldKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gZGMubm90aWZ5KCdzdWNjZXNzJywgJ1N1Y2Nlc2Z1bGx5IHJldHJpZXZlZCBnaXN0JylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgeGhyLnN0YXR1cyArICc6IGNvdWxkIG5vdCByZXRyaWV2ZSBHaXN0LiBQbGVhc2UgY2hlY2sgeW91ciBVUkwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnbG9hZC1vdmVycGFzcyc6IHtcbiAgICAgIGRlc2NyaXB0aW9uOiAnUXVlcnkgdGhlIE92ZXJwYXNzIEFQSScsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS10ZXJtaW5hbFwiPjwvaT4nLFxuICAgICAgX3RlbXA6IHt9LFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3F1ZXJ5JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J0xlYXJuIG1vcmUgYWJvdXQgPGEgaHJlZj1cImh0dHA6Ly93aWtpLm9wZW5zdHJlZXRtYXAub3JnL3dpa2kvT3ZlcnBhc3NfQVBJL0xhbmd1YWdlX0d1aWRlXCIgdGFyZ2V0PVwiX2JsYW5rXCI+dGhlIHF1ZXJ5IGxhbmd1YWdlPC9hPi4nLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnYW1lbml0eT1iYXInXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnbGF5ZXIgbmFtZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidOYW1lIG9mIHRoZSBsYXllciBhZGRlZCBpZiByZXN1bHRzIGFyZSBmb3VuZC4nLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZWZhdWx0OiAnb3ZlcnBhc3NfbGF5ZXJfbmFtZSdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjKS50cmlnZ2VyKCdmb3JtOmZpbGUnLCBbJ2xvYWQtb3ZlcnBhc3MnXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICAvLyBzZXQgbGF5ZXIgbmFtZSB0byBfdGVtcCBmb3IgbGF0ZXIgdXNhZ2VcbiAgICAgICAgZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5fdGVtcC5sYXllck5hbWUgPSBwYXJhbWV0ZXJzWzFdOyAvLyB0aGlzIGlzIHVnbHlcblxuICAgICAgICAvLyBidWlsZCB0aGUgcXVlcnkgd2l0aCBib3VuZGluZyBib3hcbiAgICAgICAgdmFyIGJib3ggPSBkYy51dGlsLmdldEJCb3goKTtcbiAgICAgICAgZGMudXRpbC54aHIoJ2h0dHA6Ly9vdmVycGFzcy1hcGkuZGUvYXBpL2ludGVycHJldGVyP1tvdXQ6anNvbl07bm9kZVsnK3BhcmFtZXRlcnNbMF0rJ10oJytiYm94KycpO291dDsnLCBkYy5vcHMuZmlsZVsnbG9hZC1vdmVycGFzcyddLmNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oeGhyLCB4aHJFdmVudCkge1xuICAgICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgdmFyIGdlb2pzb24gPSBvc210b2dlb2pzb24oZGF0YSk7XG4gICAgICAgICAgaWYgKCFkYXRhLmVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ05vIGVsZW1lbnRzIGZvdW5kIGluIHlvdXIgcXVlcnkuJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2ZpbGU6YWRkZWQnLCBbZGMub3BzLmZpbGVbJ2xvYWQtb3ZlcnBhc3MnXS5fdGVtcC5sYXllck5hbWUsIGdlb2pzb25dKTtcbiAgICAgICAgICAgIGRjLm5vdGlmeSgnc3VjY2VzcycsICdGb3VuZCA8c3Ryb25nPicgKyBkYXRhLmVsZW1lbnRzLmxlbmd0aCArICcgZWxlbWVudHM8L3N0cm9uZz4gZnJvbSB0aGUgT3ZlcnBhc3MgQVBJJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRjLm5vdGlmeSgnZXJyb3InLCB4aHIuc3RhdHVzICsgJzogY291bGQgbm90IHF1ZXJ5IHRoZSBPdmVycGFzcyBBUEknKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAnYnJlYWsxJzogeyB0eXBlOiAnYnJlYWsnIH0sXG5cbiAgICAnc2F2ZS1nZW9qc29uJzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhdmUgYXMgR2VvSlNPTicsXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1maWxlLWNvZGUtb1wiPjwvaT4nLFxuICAgICAgY3JlYXRlc0xheWVyOiBmYWxzZSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAoZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYy5zZWxlY3Rpb24ubGlzdFtmaWxlXS5yYXcpO1xuICAgICAgICAgICAgdmFyIHRpdGxlID0gJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtmaWxlXS5uYW1lICsgJy5nZW9qc29uJztcbiAgICAgICAgICAgIHNhdmVBcyhuZXcgQmxvYihbY29udGVudF0sIHtcbiAgICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCdcbiAgICAgICAgICAgIH0pLCB0aXRsZSk7XG4gICAgICAgICAgfSkoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgJ3NhdmUtc2hhcGVmaWxlJzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NhdmUgYXMgU2hhcGVmaWxlJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWZpbGVcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgIGZvbGRlcjogJ2Ryb3BjaG9wXycgKyBkYy5zZWxlY3Rpb24ubGlzdFtpXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlczoge1xuICAgICAgICAgICAgICAgIHBvaW50OiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX3BvaW50JyxcbiAgICAgICAgICAgICAgICBwb2x5Z29uOiAnZHJvcGNob3BfJyArIGRjLnNlbGVjdGlvbi5saXN0W2ldLm5hbWUgKyAnX3BvbHknLFxuICAgICAgICAgICAgICAgIGxpbmU6ICdkcm9wY2hvcF8nICsgZGMuc2VsZWN0aW9uLmxpc3RbaV0ubmFtZSArICdfbGluZSdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNocHdyaXRlLmRvd25sb2FkKGRjLnNlbGVjdGlvbi5saXN0W2ldLnJhdywgb3B0aW9ucyk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkYy5ub3RpZnkoJ0Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gZG93bmxvYWRpbmcgdGhlIHNoYXBlZmlsZS4nICsgZXJyKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGNyZWF0ZXNMYXllcjogZmFsc2VcbiAgICB9LFxuXG4gICAgJ2JyZWFrMic6IHsgdHlwZTogJ2JyZWFrJyB9LFxuXG4gICAgZXh0ZW50OiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVmlldyBleHRlbnQgb2YgbGF5ZXJzJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWdsb2JlXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoIWRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCkge1xuICAgICAgICAgIC8vIGV4dGVudCBvZiBlbnRpcmUgbGF5ZXIgbGlzdCBpZiBub3RoaW5nIHNlbGVjdGVkXG4gICAgICAgICAgZGMubWFwLm0uZml0Qm91bmRzKGRjLm1hcC5sYXllcmdyb3VwLmdldEJvdW5kcygpKTsgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG90aGVyd2lzZSBidWlsZCB0aGUgYm91bmRzIGJhc2VkIG9uIHNlbGVjdGVkIGxheWVyc1xuICAgICAgICAgIHZhciBib3VuZHM7XG4gICAgICAgICAgJChkYy5zZWxlY3Rpb24ubGlzdCkuZWFjaChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICB2YXIgZmwgPSBkYy5zZWxlY3Rpb24ubGlzdFtsXS5mZWF0dXJlbGF5ZXI7XG4gICAgICAgICAgICBpZighbCkgYm91bmRzID0gZmwuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICBlbHNlIGJvdW5kcy5leHRlbmQoZmwuZ2V0Qm91bmRzKCkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRjLm1hcC5tLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfVxuICAgIH0sXG5cbiAgICBleHBhbmQ6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdDb252ZXJ0IEZlYXR1cmVDb2xsZWN0aW9uIGludG8gc2VwYXJhdGUgZmVhdHVyZXMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtZXhwYW5kXCI+PC9pPicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHZhciBmYyA9IGRjLnNlbGVjdGlvbi5saXN0WzBdO1xuICAgICAgICAgIGlmIChmYy5yYXcudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgICAgJChmYy5yYXcuZmVhdHVyZXMpLmVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAkKGRjKS50cmlnZ2VyKCdmaWxlOmFkZGVkJywgW2ZjLm5hbWUgKyBjb3VudCArICdfJyArIGZjLnJhdy5mZWF0dXJlc1tmXS5nZW9tZXRyeS50eXBlLCBmYy5yYXcuZmVhdHVyZXNbZl1dKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdUaGF0IG5lZWRzIHRvIGJlIGEgZmVhdHVyZSBjb2xsZWN0aW9uIScpO1xuICAgICAgICAgICAgZGMubm90aWZ5KCdlcnJvcicsICdMYXllciBpcyBub3QgYSBGZWF0dXJlQ29sbGVjdGlvbi4nKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGMubm90aWZ5KCdpbmZvJywgJ1BsZWFzZSBzZWxlY3QgYSBzaW5nbGUgbGF5ZXIhJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY29tYmluZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbWJpbmVzIHNlbGVjdGVkIGZlYXR1cmVzIGludG8gYSBzaW5nbGUgRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtY29tcHJlc3NcIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZmMgPSB7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogW11cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkKGRjLnNlbGVjdGlvbi5saXN0KS5lYWNoKGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICAgIGlmIChkYy5zZWxlY3Rpb24ubGlzdFtmXS5yYXcudHlwZSAhPT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgICAgICBmYy5mZWF0dXJlcy5wdXNoKGRjLnNlbGVjdGlvbi5saXN0W2ZdLnJhdyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCBkYy5zZWxlY3Rpb24ubGlzdFtmXS5uYW1lICsgJyB3YXMgbm90IGFkZGVkIGJlY2F1c2UgaXQgaXMgYWxyZWFkeSBhIEZlYXR1cmVDb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFsnbmV3X0ZlYXR1cmVDb2xsZWN0aW9uJywgZmNdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnTm8gbGF5ZXJzIHNlbGVjdGVkIScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vICd2aWV3LWF0dHJpYnV0ZXMnOiB7XG4gICAgLy8gICBtaW5GZWF0dXJlczogMSxcbiAgICAvLyAgIGRlc2NyaXB0aW9uOiAnU2hvdyBhdHRyaWJ1dGUgdGFibGUnLFxuICAgIC8vICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdGgtbGlzdFwiPjwvaT4nLFxuICAgIC8vICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgIGRjLmF0dHIucmVuZGVyKGRjLnNlbGVjdGlvbi5saXN0WzBdKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9LFxuXG4gICAgJ2JyZWFrMyc6IHsgdHlwZTogJ2JyZWFrJyB9LFxuXG4gICAgcmVuYW1lOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVuYW1lIGxheWVyJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXBlbmNpbFwiPjwvaT4nLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ05hbWUnLFxuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoZGMuc2VsZWN0aW9uLmxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgJChkYykudHJpZ2dlcignZm9ybTpmaWxlJywgWydyZW5hbWUnXSk7ICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYy5ub3RpZnkoJ2luZm8nLCAnUGxlYXNlIHNlbGVjdCA8c3Ryb25nPm9uZSBsYXllcjwvc3Ryb25nPi4nKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihldmVudCwgbmFtZSwgcGFyYW1ldGVycykge1xuICAgICAgICBjb25zb2xlLmxvZyhuYW1lLCBwYXJhbWV0ZXJzKTtcbiAgICAgICAgJChkYykudHJpZ2dlcignbGF5ZXI6cmVuYW1lJywgW2RjLnNlbGVjdGlvbi5saXN0WzBdLCBwYXJhbWV0ZXJzWzBdXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JlbW92ZSBzZWxlY3RlZCBsYXllcnMnLFxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtdHJhc2gtb1wiPjwvaT4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhbXApO1xuICAgICAgICAgICQoZGMpLnRyaWdnZXIoJ2xheWVyOnJlbW92ZScsIFt0aGlzLnN0YW1wXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaW5mbzoge1xuICAgICAgdHlwZTogJ2luZm8nLFxuICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBtb3JlIGFib3V0IGRyb3BjaG9wJyxcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWluZm9cIj48L2k+JyxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2Fib3V0Lmh0bWwnO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBkYy5vcHMgPSBkYy5vcHMgfHwge307XG5cbiAgZGMub3BzLmdlbyA9IHtcbiAgICBhbG9uZzoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8TGluZVN0cmluZz4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBsaW5lIGFuZCByZXR1cm5zIGEgcG9pbnQgYXQgYSBzcGVjaWZpZWQgZGlzdGFuY2UgYWxvbmcgdGhlIGxpbmUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidkaXN0YW5jZSBhbG9uZyB0aGUgbGluZScsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdDogMTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0cycsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAna2lsb21ldGVycycsICdyYWRpYW5zJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdhbG9uZycsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuYWxvbmcuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBiZXppZXI6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgbGluZSBhbmQgcmV0dXJucyBhIGN1cnZlZCB2ZXJzaW9uIGJ5IGFwcGx5aW5nIGEgQmV6aWVyIHNwbGluZSBhbGdvcml0aG0uJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdyZXNvbHV0aW9uJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA6J1RpbWUgaW4gbWlsbGlzZWNvbmRzIGJldHdlZW4gcG9pbnRzJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMDAwMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3NoYXJwbmVzcycsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidhIG1lYXN1cmUgb2YgaG93IGN1cnZ5IHRoZSBwYXRoIHNob3VsZCBiZSBiZXR3ZWVuIHNwbGluZXMnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6ICAwLjg1XG5cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBmZWF0dXJlIGNvbGxlY3Rpb24sIGRvIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIGlmIChwYXJhbXNbMF0udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAgIHJlc3VsdCA9IGRjLnV0aWwuZXhlY3V0ZUZDKHBhcmFtc1swXSwgJ2JlemllcicsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuYmV6aWVyLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYnVmZmVyOiB7XG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NhbGN1bGF0ZXMgYSBidWZmZXIgZm9yIGlucHV0IGZlYXR1cmVzIGZvciBhIGdpdmVuIHJhZGl1cy4gVW5pdHMgc3VwcG9ydGVkIGFyZSBtaWxlcywga2lsb21ldGVycywgYW5kIGRlZ3JlZXMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdkaXN0YW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdEaXN0YW5jZSB0byBkcmF3IHRoZSBidWZmZXIuJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0OiAxMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VuaXQnLFxuICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBvcHRpb25zOiBbJ21pbGVzJywgJ2ZlZXQnLCAna2lsb21ldGVycycsICdtZXRlcnMnLCAnZGVncmVlcyddLFxuICAgICAgICAgIGRlZmF1bHQ6ICdtaWxlcydcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHVyZi5idWZmZXIuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2VudGVyOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZXMgYSBwb2ludCBpbiB0aGUgY2VudGVyIG9mIHRoZSBmZWF0dXJlLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVjdXJzaXZlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1J1biB0aGUgb3BlcmF0aW9uIG9uIGVhY2ggZmVhdHVyZSBpbiB0aGUgY29sbGVjdGlvbiBvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uJyxcbiAgICAgICAgICB0eXBlOiAncmVjdXJzaXZlJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgLy8gaWYgcnVubmluZyB0aGUgb3BlcmF0aW9uIHJlY3Vyc2l2ZWx5IFwidHJ1ZVwiXG4gICAgICAgIGlmIChwYXJhbXNbMV0gPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnY2VudGVyJywgcGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLmNlbnRlci5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNlbnRyb2lkOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiB0cnVlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlJywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZXMgYSBwb2ludCBpbiB0aGUgY2VudHJvaWQgb2YgdGhlIGZlYXR1cmVzLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAncmVjdXJzaXZlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1J1biB0aGUgb3BlcmF0aW9uIG9uIGVhY2ggZmVhdHVyZSBpbiB0aGUgY29sbGVjdGlvbiBvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uJyxcbiAgICAgICAgICB0eXBlOiAncmVjdXJzaXZlJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgLy8gaWYgcnVubmluZyB0aGUgb3BlcmF0aW9uIHJlY3Vyc2l2ZWx5IFwidHJ1ZVwiXG4gICAgICAgIGlmIChwYXJhbXNbMV0gPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnY2VudHJvaWQnLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuY2VudHJvaWQuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBkZXN0aW5hdGlvbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9pbnQ+JywgJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgUG9pbnQgYW5kIGNhbGN1bGF0ZXMgdGhlIGxvY2F0aW9uIG9mIGEgZGVzdGluYXRpb24gcG9pbnQgZ2l2ZW4gYSBkaXN0YW5jZSBpbiBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVyczsgYW5kIGJlYXJpbmcgaW4gZGVncmVlcy4gVGhpcyB1c2VzIHRoZSBIYXZlcnNpbmUgZm9ybXVsYSB0byBhY2NvdW50IGZvciBnbG9iYWwgY3VydmF0dXJlLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnZGlzdGFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIDonZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnRpbmcgcG9pbnQnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnYmVhcmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidyYW5naW5nIGZyb20gLTE4MCB0byAxODAnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHQ6ICAwXG5cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1bml0cycsXG4gICAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIG9wdGlvbnM6IFsnbWlsZXMnLCAna2lsb21ldGVycycsICdyYWRpYW5zJywgJ2RlZ3JlZXMnXSxcbiAgICAgICAgICBkZWZhdWx0OiAnbWlsZXMnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgZmVhdHVyZSBjb2xsZWN0aW9uLCBkbyBpdCByZWN1cnNpdmVseVxuICAgICAgICBpZiAocGFyYW1zWzBdLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXN1bHQgPSBkYy51dGlsLmV4ZWN1dGVGQyhwYXJhbXNbMF0sICdkZXN0aW5hdGlvbicsIHBhcmFtcyk7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGEgc2luZ2xlIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IHR1cmYuZGVzdGluYXRpb24uYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlbnZlbG9wZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ10gLy8gVE9ETzogbWFrZSB0aGlzIHRha2UgZmVhdHVyZXMgYW5kIHJ1biBhY3Jvc3MgZnVsbCBzZWxlY3Rpb25cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGFueSBudW1iZXIgb2YgZmVhdHVyZXMgYW5kIHJldHVybnMgYSByZWN0YW5ndWxhciBQb2x5Z29uIHRoYXQgZW5jb21wYXNzZXMgYWxsIHZlcnRpY2VzLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuZW52ZWxvcGUuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZXhwbG9kZToge1xuICAgICAgbWluRmVhdHVyZXM6IDEsXG4gICAgICBtYXhGZWF0dXJlczogMSxcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogdHJ1ZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZScsICdGZWF0dXJlQ29sbGVjdGlvbiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyBhIGZlYXR1cmUgb3Igc2V0IG9mIGZlYXR1cmVzIGFuZCByZXR1cm5zIGFsbCBwb3NpdGlvbnMgYXMgcG9pbnRzLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYuZXhwbG9kZS5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBtaWRwb2ludDoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmU8UG9pbnQ+J11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIHR3byBwb2ludHMgYW5kIHJldHVybnMgYSBwb2ludCBtaWR3YXkgYmV0d2VlbiB0aGVtLicsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYubWlkcG9pbnQuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2ltcGxpZnk6IHtcbiAgICAgIG1pbkZlYXR1cmVzOiAxLFxuICAgICAgbWF4RmVhdHVyZXM6IDEsXG4gICAgICByZXF1aXJlbWVudHM6IHtcbiAgICAgICAgZ2VuZXJhbEZlYXR1cmU6IGZhbHNlLFxuICAgICAgICB0eXBlczogWydGZWF0dXJlPExpbmVTdHJpbmc+JywgJ0ZlYXR1cmU8UG9seWdvbj4nLCAnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGFrZXMgYSBMaW5lU3RyaW5nIG9yIFBvbHlnb24gYW5kIHJldHVybnMgYSBzaW1wbGlmaWVkIHZlcnNpb24uIEludGVybmFsbHkgdXNlcyBzaW1wbGlmeS1qcyB0byBwZXJmb3JtIHNpbXBsaWZpY2F0aW9uLicsXG4gICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3RvbGVyYW5jZScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA6J3NpbXBsaWZpY2F0aW9uIHRvbGVyYW5jZScsXG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IDAuMVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2hpZ2ggcXVhbGl0eScsXG4gICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICd3aGV0aGVyIG9yIG5vdCB0byBzcGVuZCBtb3JlIHRpbWUgdG8gY3JlYXRlIGEgaGlnaGVyLXF1YWxpdHkgc2ltcGxpZmljYXRpb24gd2l0aCBhIGRpZmZlcmVudCBhbGdvcml0aG0nLFxuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGZlYXR1cmUgY29sbGVjdGlvbiwgZG8gaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgaWYgKHBhcmFtc1swXS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZGMudXRpbC5leGVjdXRlRkMocGFyYW1zWzBdLCAnc2ltcGxpZnknLCBwYXJhbXMpO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhIHNpbmdsZSBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSB0dXJmLnNpbXBsaWZ5LmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdGluOiB7XG4gICAgICBtaW5GZWF0dXJlczogMSxcbiAgICAgIG1heEZlYXR1cmVzOiAxLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZUNvbGxlY3Rpb24nXVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVHJpYW5ndWxhdGVkIGlycmVndWxhciBuZXR3b3JrLCBpbnRlcnBvbGF0aW9uIG1ldGhvZCcsXG4gICAgICBleGVjdXRlOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHR1cmYudGluLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuaW9uOiB7XG4gICAgICBtaW5GZWF0dXJlczogMixcbiAgICAgIG1heEZlYXR1cmVzOiAyLFxuICAgICAgcmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGdlbmVyYWxGZWF0dXJlOiBmYWxzZSxcbiAgICAgICAgdHlwZXM6IFsnRmVhdHVyZTxQb2x5Z29uPiddXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246ICdUYWtlcyB0d28gcG9seWdvbnMgYW5kIHJldHVybnMgYSBjb21iaW5lZCBwb2x5Z29uLiBJZiB0aGUgaW5wdXQgcG9seWdvbnMgYXJlIG5vdCBjb250aWd1b3VzLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYSBNdWx0aVBvbHlnb24gZmVhdHVyZS4nLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLnVuaW9uLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHdpdGhpbjoge1xuICAgICAgbWluRmVhdHVyZXM6IDIsXG4gICAgICBtYXhGZWF0dXJlczogMixcbiAgICAgIHJlcXVpcmVtZW50czoge1xuICAgICAgICBnZW5lcmFsRmVhdHVyZTogZmFsc2UsXG4gICAgICAgIHR5cGVzOiBbJ0ZlYXR1cmVDb2xsZWN0aW9uJ11cbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogJ1Rha2VzIGEgc2V0IG9mIHBvaW50cyBhbmQgYSBzZXQgb2YgcG9seWdvbnMgYW5kIHJldHVybnMgdGhlIHBvaW50cyB0aGF0IGZhbGwgd2l0aGluIHRoZSBwb2x5Z29ucy4gRmlyc3QgaW5wdXQgc2hvdWxkIGJlIHRoZSBwb2ludHMuJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdQb2ludHMgdG8gY2xpcCcsXG4gICAgICAgICAgZGVzY3JpcHRpb24gOidTZWxlY3QgdGhlIGxheWVyIHRoYXQgcmVwcmVzZW50cyB0aGUgcG9pbnRzIHlvdSB3YW50IHRvIGNsaXAuIFRoaXMgYXNzdW1lcyB0aGUgb3RoZXIgbGF5ZXIgaXMgeW91ciBjbGlwcGluZyBwb2x5Z29uLicsXG4gICAgICAgICAgdHlwZTogJ3N3aXRjaCdcbiAgICAgICAgICAvLyBkZWZhdWx0OiBkYy5zZWxlY3Rpb24ubGlzdFswXVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHBhcmFtcyk7XG4gICAgICAgIHZhciByZXN1bHQgPSB0dXJmLndpdGhpbi5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGM7XG5cbn0pKGRyb3BjaG9wIHx8IHt9KTsiLCJ2YXIgZHJvcGNob3AgPSAoZnVuY3Rpb24oZGMpIHtcbiAgXG4gICd1c2Ugc3RyaWN0JztcblxuICBkYyA9IGRjIHx8IHt9O1xuICBcbiAgZGMuc2VsZWN0aW9uID0ge307XG4gIGRjLnNlbGVjdGlvbi5saXN0ID0gW107XG5cbiAgZGMuc2VsZWN0aW9uLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRjKS5vbignbGF5ZXI6c2VsZWN0ZWQnLCBkYy5zZWxlY3Rpb24uYWRkKTtcbiAgICAkKGRjKS5vbignbGF5ZXI6dW5zZWxlY3RlZCcsIGRjLnNlbGVjdGlvbi5yZW1vdmUpO1xuICAgICQoZGMpLm9uKCdsYXllcjpyZW1vdmVkJywgX2xheWVyUmVtb3ZlZCk7XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLmFkZCA9IGZ1bmN0aW9uKGV2ZW50LCBsYXllcikge1xuICAgIGRjLnNlbGVjdGlvbi5saXN0LnB1c2gobGF5ZXIpO1xuICB9O1xuXG4gIGRjLnNlbGVjdGlvbi5yZW1vdmUgPSBmdW5jdGlvbihldmVudCwgbGF5ZXIpIHtcbiAgICB2YXIgaW5kZXggPSBudWxsO1xuICAgICQoZGMuc2VsZWN0aW9uLmxpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgaWYgKGRjLnNlbGVjdGlvbi5saXN0W2ldLnN0YW1wID09PSBsYXllci5zdGFtcCkge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3Quc3BsaWNlKGluZGV4LCAxKTsgLy8gcmVtb3ZlIG91dHNpZGUgb2YgdGhlIGxvb3Agc28gd2UgZG9uJ3QgYnJlYWsgb3VyIGNvdW50XG4gIH07XG5cbiAgZGMuc2VsZWN0aW9uLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgJCgnLmxheWVyLW5hbWUuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAkKCcub3BlcmF0aW9uLWdlbycpLmFkZENsYXNzKCdvcGVyYXRpb24taW5hY3RpdmUnKTtcbiAgICAkKCcub3BlcmF0aW9uLWdlbycpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgZGMuc2VsZWN0aW9uLmxpc3QgPSBbXTtcbiAgfTtcblxuICBmdW5jdGlvbiBfbGF5ZXJSZW1vdmVkKGV2ZW50LCBzdGFtcCkge1xuICAgIGRjLnNlbGVjdGlvbi5yZW1vdmUoe30sIHtzdGFtcDogc3RhbXB9KTtcbiAgICBkYy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgfVxuXG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7IiwidmFyIGRyb3BjaG9wID0gKGZ1bmN0aW9uKGRjKSB7XG4gIFxuICAndXNlIHN0cmljdCc7XG5cbiAgZGMgPSBkYyB8fCB7fTtcbiAgXG4gIGRjLnV0aWwgPSB7fTtcbiAgXG4gIGRjLnV0aWwucmVtb3ZlRmlsZUV4dGVuc2lvbiA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cXC5bXi8uXSskLywgXCJcIik7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLnJlbW92ZVdoaXRlU3BhY2UgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xuICAgIGNvbnNvbGUubG9nKHN0cmluZyk7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLmNvbmNhdCA9IGZ1bmN0aW9uKGFycmF5LCBzZXBhcmF0b3IsIHByZWZpeCkge1xuICAgIHZhciBzdHJpbmcgPSAnJztcbiAgICAkKGFycmF5KS5lYWNoKGZ1bmN0aW9uKGEpIHtcbiAgICAgIHN0cmluZyArPSBzZXBhcmF0b3IgKyBhcnJheVthXTtcbiAgICB9KTtcbiAgICBzdHJpbmcgPSBwcmVmaXggKyBzdHJpbmc7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBkYy51dGlsLnhociA9IGZ1bmN0aW9uKHVybCwgY2FsbGJhY2spIHtcbiAgICBkcm9wY2hvcC51dGlsLmxvYWRlcih0cnVlKTtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgeGhyLm9ubG9hZCA9IGNhbGxiYWNrLmJpbmQodGhpcywgeGhyKTtcbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCB4aHIgKSB7XG4gICAgICBkcm9wY2hvcC51dGlsLmxvYWRlcihmYWxzZSk7XG4gICAgICBjb25zb2xlLmVycm9yKHhocik7XG4gICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgJ1VuYWJsZSB0byBhY2Nlc3MgJyArIHVybCwgMjUwMCk7XG4gICAgfTtcbiAgICB4aHIuc2VuZCgpO1xuICB9O1xuXG4gIGRjLnV0aWwucmVhZEZpbGUgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgLy8gaWYgYSB6aXBmaWxlLCBhc3N1bWUgc2hhcGVmaWxlIGZvciBub3dcbiAgICBpZiAoZmlsZS5uYW1lLmluZGV4T2YoJy56aXAnKSA+IC0xIHx8IGZpbGUubmFtZS5pbmRleE9mKCcuc2hwJykgPiAtMSkge1xuICAgICAgY29uc29sZS5sb2coZmlsZSk7XG4gICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7XG4gICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVhZGVyKTtcbiAgICAgICAgc2hwKHJlYWRlci5yZXN1bHQpLnRoZW4oZm9yd2FyZFRvR2VvSnNvbklvKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHsgXG4gICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlLCAnVVRGLTgnKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJChkYykudHJpZ2dlcignZmlsZTphZGRlZCcsIFtmaWxlLm5hbWUsIEpTT04ucGFyc2UocmVhZGVyLnJlc3VsdCldKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9yd2FyZFRvR2VvSnNvbklvKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2dlb2pzb24uaW8vI2RhdGE9ZGF0YTphcHBsaWNhdGlvbi9qc29uLFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHVybDtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC5qc29uRnJvbVVybCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBxdWVyeSA9IGxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSk7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIHF1ZXJ5LnNwbGl0KFwiJlwiKS5mb3JFYWNoKGZ1bmN0aW9uKHBhcnQpIHtcbiAgICAgIHZhciBpdGVtID0gcGFydC5zcGxpdChcIj1cIik7XG4gICAgICBpZiAoIXJlc3VsdFtpdGVtWzBdXSkge1xuICAgICAgICByZXN1bHRbaXRlbVswXV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdFtpdGVtWzBdXS5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChpdGVtWzFdKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBkYy51dGlsLmV4ZWN1dGVVcmxQYXJhbXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGF0YSA9IGRjLnV0aWwuanNvbkZyb21VcmwoKTtcblxuICAgIC8vIGxvYWQgZ2lzdFxuICAgIGlmIChkYXRhLmdpc3QgJiYgZGF0YS5naXN0Lmxlbmd0aCkge1xuICAgICAgJChkYXRhLmdpc3QpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC1naXN0J10uZ2V0KHt9LCAnbG9hZC1naXN0JywgW2RhdGEuZ2lzdFtpXV0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gbG9hZFxuICAgIGlmIChkYXRhLnVybCAmJiBkYXRhLnVybC5sZW5ndGgpIHtcbiAgICAgICQoZGF0YS51cmwpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBkYy5vcHMuZmlsZVsnbG9hZC11cmwnXS5nZXQoe30sICdsb2FkLXVybCcsIFtkYXRhLnVybFtpXV0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGRjLnV0aWwuZ2V0RmlsZUV4dGVuc2lvbiA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gICAgcmV0dXJuIGZpbGVuYW1lLnN1YnN0cihmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpKzEpO1xuICB9O1xuXG4gIGRjLnV0aWwuZ2V0QkJveCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBib3VuZHMgPSBkYy5tYXAubS5nZXRCb3VuZHMoKSxcbiAgICAgICAgICAgIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpLFxuICAgICAgICAgICAgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7XG4gICAgLy8gd2Ugc2hvdWxkIHByb2JhYmx5IGNoZWNrIHRoZSBzaXplIGhlcmU/XG4gICAgLy8gbm9kZSg1Ny43LDExLjksNTcuOCwxMi4wKVxuICAgIHJldHVybiBzdy5sYXQrJywnK3N3LmxuZysnLCcrbmUubGF0KycsJytuZS5sbmc7XG4gIH07XG5cbiAgZGMudXRpbC51bmNvbGxlY3QgPSBmdW5jdGlvbihmYykge1xuICAgIHJldHVybiBmYy5mZWF0dXJlc1swXTtcbiAgfTtcblxuICBkYy51dGlsLmV4ZWN1dGVGQyA9IGZ1bmN0aW9uKGZjLCBvcGVyYXRpb24sIHBhcmFtcykge1xuXG4gICAgdmFyIG5ld1BhcmFtcyA9IHBhcmFtcztcbiAgICB2YXIgbmV3RkMgPSB7fTtcbiAgICBuZXdGQy50eXBlID0gJ0ZlYXR1cmVDb2xsZWN0aW9uJztcbiAgICBuZXdGQy5mZWF0dXJlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgZiA9IDA7IGYgPCBmYy5mZWF0dXJlcy5sZW5ndGg7IGYrKykge1xuICAgICAgbmV3UGFyYW1zWzBdID0gZmMuZmVhdHVyZXNbZl07XG4gICAgICB2YXIgZmVhdHVyZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZlYXR1cmUgPSB0dXJmW29wZXJhdGlvbl0uYXBwbHkobnVsbCwgbmV3UGFyYW1zKTtcbiAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzID0gZmMuZmVhdHVyZXNbZl0ucHJvcGVydGllcyB8fCB7fTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBkYy5ub3RpZnkoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH1cbiAgICAgIG5ld0ZDLmZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0ZDO1xuICAgIFxuICB9O1xuXG4gIGRjLnV0aWwubG9hZGVyID0gZnVuY3Rpb24oeWVzKSB7XG4gICAgdmFyIGxvYWRlciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Ryb3BjaG9wLWxvYWRlcicpO1xuXG4gICAgaWYgKHllcykge1xuICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdkcm9wY2hvcC1sb2FkaW5nJyk7XG4gICAgICAkKCdib2R5JykuYXBwZW5kKGxvYWRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZHJvcGNob3AtbG9hZGluZycpO1xuICAgICAgJCgnLmRyb3BjaG9wLWxvYWRlcicpLmFkZENsYXNzKCdsb2FkZXItY29tcGxldGUnKS5mYWRlT3V0KDIwMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZGMudXRpbC53ZWxjb21lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHdlbGNvbWUgPSAnXFxuV2VsY29tZSB0byBEcm9wY2hvcCFcXG4nO1xuICAgICAgICB3ZWxjb21lICs9ICdPbmNlIHlvdSBkcm9wLCB0aGUgY2hvcCBkb25cXCd0IHN0b3AuXFxuXFxuJztcbiAgICAgICAgd2VsY29tZSArPSAnVGhpcyBwcm9qZWN0IGlzIGJyb3VnaHQgdG8geW91IGJ5IHRoZSBncmVhdCBwZW9wbGUgb2YgQ1VHT1MsIHRoZSBDYXNjYWRpYW4gY2hhcHRlciBvZiBPU0dlby4gSWYgeW91IGFyZSBldmVyIGluIFNlYXR0bGUsIGhpdCB1cyB1cFxcbmhlbGxvQGN1Z29zLm9yZ1xcblxcbic7XG4gICAgICAgIHdlbGNvbWUgKz0gJ1lvdSBjYW4gbGVhcm4gbW9yZSBhYm91dCB0aGlzIHByb2plY3QgYXQgZHJvcGNob3AuaW8vYWJvdXQuJ1xuICAgIGNvbnNvbGUubG9nKHdlbGNvbWUpO1xuICB9O1xuXG4gIHJldHVybiBkYztcblxuXG59KShkcm9wY2hvcCB8fCB7fSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
