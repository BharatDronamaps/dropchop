!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.overpassWizardExpand=e()}}(function(){return function e(n,t,r){function o(u,s){if(!t[u]){if(!n[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var a=t[u]={exports:{}};n[u][0].call(a.exports,function(e){var t=n[u][1][e];return o(t?t:e)},a,a.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n,t){},{}],2:[function(e,n,t){function r(e,n){var t=Date.now();if(e=e.toLowerCase().match(/(-?[0-9]+) ?(seconds?|minutes?|hours?|days?|weeks?|months?|years?)?/),null===e)return c.reject(new Error("unable to expand date shortcut."));var r,o=parseInt(e[1]);switch(e[2]){case"second":case"seconds":r=1;break;case"minute":case"minutes":r=60;break;case"hour":case"hours":r=3600;break;case"day":case"days":default:r=86400;break;case"week":case"weeks":r=604800;break;case"month":case"months":r=2628e3;break;case"year":case"years":r=31536e3}var i=t-o*r*1e3;return c.resolve(new Date(i).toISOString())}function o(e){return new c(function(n,t){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200==r.status?n(r.response):t(Error("XMLHttpRequest Error: "+r.statusText))},r.onerror=function(){t(Error("Network Error"))},r.send()})}function i(e,n){var t,r="https://nominatim.openstreetmap.org/search?format=json&q="+encodeURIComponent(e);return t="undefined"!=typeof XMLHttpRequest?o(r).then(JSON.parse):f({url:r,method:"GET",headers:{"User-Agent":"overpass-wizard"},json:!0}),t.then(function(t){return n&&(t=t.filter(n)),0===t.length?c.reject(new Error("No result found for geocoding search: "+e)):t[0]})}function u(e){function n(e){return e.osm_type&&e.osm_id&&"node"!==e.osm_type}return i(e,n).then(function(e){var n=1*e.osm_id;return"way"==e.osm_type&&(n+=24e8),"relation"==e.osm_type&&(n+=36e8),e="area("+n+")"})}function s(e){return i(e).then(function(e){return e=e.lat+","+e.lon})}var c=e("promise"),f=e("request-promise"),a={date:r,geocodeArea:u,geocodeCoords:s};n.exports=function(e,n,t){n&&(e=e.replace(/{{bbox}}/g,n));var r="{{([a-zA-Z0-9_]+)=(.+?)}}",o=e.match(new RegExp(r,"g"))||[];o.forEach(function(n){for(var t=n.match(new RegExp(r)),o="{{"+t[1]+"}}",i=t[2];e.indexOf(o)>=0;)e=e.replace(o,i)});var i="{{(date|geocodeArea|geocodeCoords):([\\s\\S]*?)}}",u=e.match(new RegExp(i,"g"))||[];return c.all(u.map(function(e){return e=e.match(new RegExp(i)),a[e[1]](e[2])})).then(function(n){return n.forEach(function(n,t){e=e.replace(u[t],n)}),e}).then(function(e){t(void 0,e)})["catch"](function(e){t(e)})}},{promise:3,"request-promise":1}],3:[function(e,n,t){"use strict";n.exports=e("./lib")},{"./lib":8}],4:[function(e,n,t){"use strict";function r(){}function o(e){try{return e.then}catch(n){return g=n,_}}function i(e,n){try{return e(n)}catch(t){return g=t,_}}function u(e,n,t){try{e(n,t)}catch(r){return g=r,_}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,e!==r&&y(e,this)}function c(e,n,t){return new e.constructor(function(o,i){var u=new s(r);u.then(o,i),f(e,new d(n,t,u))})}function f(e,n){for(;3===e._81;)e=e._65;return s._10&&s._10(e),0===e._81?0===e._45?(e._45=1,void(e._54=n)):1===e._45?(e._45=2,void(e._54=[e._54,n])):void e._54.push(n):void a(e,n)}function a(e,n){v(function(){var t=1===e._81?n.onFulfilled:n.onRejected;if(null===t)return void(1===e._81?l(n.promise,e._65):p(n.promise,e._65));var r=i(t,e._65);r===_?p(n.promise,g):l(n.promise,r)})}function l(e,n){if(n===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(n&&("object"==typeof n||"function"==typeof n)){var t=o(n);if(t===_)return p(e,g);if(t===e.then&&n instanceof s)return e._81=3,e._65=n,void h(e);if("function"==typeof t)return void y(t.bind(n),e)}e._81=1,e._65=n,h(e)}function p(e,n){e._81=2,e._65=n,s._97&&s._97(e,n),h(e)}function h(e){if(1===e._45&&(f(e,e._54),e._54=null),2===e._45){for(var n=0;n<e._54.length;n++)f(e,e._54[n]);e._54=null}}function d(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function y(e,n){var t=!1,r=u(e,function(e){t||(t=!0,l(n,e))},function(e){t||(t=!0,p(n,e))});t||r!==_||(t=!0,p(n,g))}var v=e("asap/raw"),g=null,_={};n.exports=s,s._10=null,s._97=null,s._61=r,s.prototype.then=function(e,n){if(this.constructor!==s)return c(this,e,n);var t=new s(r);return f(this,new d(e,n,t)),t}},{"asap/raw":12}],5:[function(e,n,t){"use strict";var r=e("./core.js");n.exports=r,r.prototype.done=function(e,n){var t=arguments.length?this.then.apply(this,arguments):this;t.then(null,function(e){setTimeout(function(){throw e},0)})}},{"./core.js":4}],6:[function(e,n,t){"use strict";function r(e){var n=new o(o._61);return n._81=1,n._65=e,n}var o=e("./core.js");n.exports=o;var i=r(!0),u=r(!1),s=r(null),c=r(void 0),f=r(0),a=r("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return s;if(void 0===e)return c;if(e===!0)return i;if(e===!1)return u;if(0===e)return f;if(""===e)return a;if("object"==typeof e||"function"==typeof e)try{var n=e.then;if("function"==typeof n)return new o(n.bind(e))}catch(t){return new o(function(e,n){n(t)})}return r(e)},o.all=function(e){var n=Array.prototype.slice.call(e);return new o(function(e,t){function r(u,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof o&&s.then===o.prototype.then){for(;3===s._81;)s=s._65;return 1===s._81?r(u,s._65):(2===s._81&&t(s._65),void s.then(function(e){r(u,e)},t))}var c=s.then;if("function"==typeof c){var f=new o(c.bind(s));return void f.then(function(e){r(u,e)},t)}}n[u]=s,0===--i&&e(n)}if(0===n.length)return e([]);for(var i=n.length,u=0;u<n.length;u++)r(u,n[u])})},o.reject=function(e){return new o(function(n,t){t(e)})},o.race=function(e){return new o(function(n,t){e.forEach(function(e){o.resolve(e).then(n,t)})})},o.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":4}],7:[function(e,n,t){"use strict";var r=e("./core.js");n.exports=r,r.prototype["finally"]=function(e){return this.then(function(n){return r.resolve(e()).then(function(){return n})},function(n){return r.resolve(e()).then(function(){throw n})})}},{"./core.js":4}],8:[function(e,n,t){"use strict";n.exports=e("./core.js"),e("./done.js"),e("./finally.js"),e("./es6-extensions.js"),e("./node-extensions.js"),e("./synchronous.js")},{"./core.js":4,"./done.js":5,"./es6-extensions.js":6,"./finally.js":7,"./node-extensions.js":9,"./synchronous.js":10}],9:[function(e,n,t){"use strict";function r(e,n){for(var t=[],r=0;r<n;r++)t.push("a"+r);var o=["return function ("+t.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(t).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(i,e)}function o(e){for(var n=Math.max(e.length-1,3),t=[],r=0;r<n;r++)t.push("a"+r);var o=["return function ("+t.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+n+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",t.concat(["extra"]).map(function(e,n){return"case "+n+":res = fn.call("+["self"].concat(t.slice(0,n)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(i,e)}var i=e("./core.js"),u=e("asap");n.exports=i,i.denodeify=function(e,n){return"number"==typeof n&&n!==1/0?r(e,n):o(e)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";i.nodeify=function(e){return function(){var n=Array.prototype.slice.call(arguments),t="function"==typeof n[n.length-1]?n.pop():null,r=this;try{return e.apply(this,arguments).nodeify(t,r)}catch(o){if(null===t||"undefined"==typeof t)return new i(function(e,n){n(o)});u(function(){t.call(r,o)})}}},i.prototype.nodeify=function(e,n){return"function"!=typeof e?this:void this.then(function(t){u(function(){e.call(n,null,t)})},function(t){u(function(){e.call(n,t)})})}},{"./core.js":4,asap:11}],10:[function(e,n,t){"use strict";var r=e("./core.js");n.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._81)return this._65.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._65},r.prototype.getReason=function(){if(3===this._81)return this._65.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._65},r.prototype.getState=function(){return 3===this._81?this._65.getState():this._81===-1||this._81===-2?0:this._81}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},{"./core.js":4}],11:[function(e,n,t){"use strict";function r(){if(c.length)throw c.shift()}function o(e){var n;n=s.length?s.pop():new i,n.task=e,u(n)}function i(){this.task=null}var u=e("./raw"),s=[],c=[],f=u.makeRequestCallFromTimer(r);n.exports=o,i.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(c.push(e),f())}finally{this.task=null,s[s.length]=this}}},{"./raw":12}],12:[function(e,n,t){(function(e){"use strict";function t(e){s.length||(u(),c=!0),s[s.length]=e}function r(){for(;f<s.length;){var e=f;if(f+=1,s[e].call(),f>a){for(var n=0,t=s.length-f;n<t;n++)s[n]=s[n+f];s.length-=f,f=0}}s.length=0,f=0,c=!1}function o(e){var n=1,t=new l(e),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){n=-n,r.data=n}}function i(e){return function(){function n(){clearTimeout(t),clearInterval(r),e()}var t=setTimeout(n,0),r=setInterval(n,50)}}n.exports=t;var u,s=[],c=!1,f=0,a=1024,l=e.MutationObserver||e.WebKitMutationObserver;u="function"==typeof l?o(r):i(r),t.requestFlush=u,t.makeRequestCallFromTimer=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2])(2)});